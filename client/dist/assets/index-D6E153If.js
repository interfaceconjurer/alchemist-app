var VN=Object.defineProperty;var HN=(r,e,t)=>e in r?VN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Gd=(r,e,t)=>HN(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var HS={exports:{}},Tg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA;function GN(){if(bA)return Tg;bA=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var u=null;if(a!==void 0&&(u=""+a),i.key!==void 0&&(u=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:u,ref:i!==void 0?i:null,props:a}}return Tg.Fragment=e,Tg.jsx=t,Tg.jsxs=t,Tg}var SA;function WN(){return SA||(SA=1,HS.exports=GN()),HS.exports}var Qe=WN(),GS={exports:{}},$t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function XN(){if(MA)return $t;MA=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function M(X,oe,Ce){this.props=X,this.context=oe,this.refs=w,this.updater=Ce||E}M.prototype.isReactComponent={},M.prototype.setState=function(X,oe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,oe,"setState")},M.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function D(){}D.prototype=M.prototype;function R(X,oe,Ce){this.props=X,this.context=oe,this.refs=w,this.updater=Ce||E}var N=R.prototype=new D;N.constructor=R,A(N,M.prototype),N.isPureReactComponent=!0;var P=Array.isArray;function z(){}var B={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function I(X,oe,Ce){var Ue=Ce.ref;return{$$typeof:r,type:X,key:oe,ref:Ue!==void 0?Ue:null,props:Ce}}function O(X,oe){return I(X.type,oe,X.props)}function W(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function J(X){var oe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ce){return oe[Ce]})}var K=/\/+/g;function ce(X,oe){return typeof X=="object"&&X!==null&&X.key!=null?J(""+X.key):oe.toString(36)}function le(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(z,z):(X.status="pending",X.then(function(oe){X.status==="pending"&&(X.status="fulfilled",X.value=oe)},function(oe){X.status==="pending"&&(X.status="rejected",X.reason=oe)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function Z(X,oe,Ce,Ue,rt){var me=typeof X;(me==="undefined"||me==="boolean")&&(X=null);var Re=!1;if(X===null)Re=!0;else switch(me){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(X.$$typeof){case r:case e:Re=!0;break;case v:return Re=X._init,Z(Re(X._payload),oe,Ce,Ue,rt)}}if(Re)return rt=rt(X),Re=Ue===""?"."+ce(X,0):Ue,P(rt)?(Ce="",Re!=null&&(Ce=Re.replace(K,"$&/")+"/"),Z(rt,oe,Ce,"",function(ft){return ft})):rt!=null&&(W(rt)&&(rt=O(rt,Ce+(rt.key==null||X&&X.key===rt.key?"":(""+rt.key).replace(K,"$&/")+"/")+Re)),oe.push(rt)),1;Re=0;var it=Ue===""?".":Ue+":";if(P(X))for(var ee=0;ee<X.length;ee++)Ue=X[ee],me=it+ce(Ue,ee),Re+=Z(Ue,oe,Ce,me,rt);else if(ee=b(X),typeof ee=="function")for(X=ee.call(X),ee=0;!(Ue=X.next()).done;)Ue=Ue.value,me=it+ce(Ue,ee++),Re+=Z(Ue,oe,Ce,me,rt);else if(me==="object"){if(typeof X.then=="function")return Z(le(X),oe,Ce,Ue,rt);throw oe=String(X),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Re}function Q(X,oe,Ce){if(X==null)return X;var Ue=[],rt=0;return Z(X,Ue,"","",function(me){return oe.call(Ce,me,rt++)}),Ue}function fe(X){if(X._status===-1){var oe=X._result;oe=oe(),oe.then(function(Ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ce)},function(Ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ce)}),X._status===-1&&(X._status=0,X._result=oe)}if(X._status===1)return X._result.default;throw X._result}var Ie=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Pe={map:Q,forEach:function(X,oe,Ce){Q(X,function(){oe.apply(this,arguments)},Ce)},count:function(X){var oe=0;return Q(X,function(){oe++}),oe},toArray:function(X){return Q(X,function(oe){return oe})||[]},only:function(X){if(!W(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return $t.Activity=_,$t.Children=Pe,$t.Component=M,$t.Fragment=t,$t.Profiler=i,$t.PureComponent=R,$t.StrictMode=n,$t.Suspense=d,$t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,$t.__COMPILER_RUNTIME={__proto__:null,c:function(X){return B.H.useMemoCache(X)}},$t.cache=function(X){return function(){return X.apply(null,arguments)}},$t.cacheSignal=function(){return null},$t.cloneElement=function(X,oe,Ce){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ue=A({},X.props),rt=X.key;if(oe!=null)for(me in oe.key!==void 0&&(rt=""+oe.key),oe)!k.call(oe,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&oe.ref===void 0||(Ue[me]=oe[me]);var me=arguments.length-2;if(me===1)Ue.children=Ce;else if(1<me){for(var Re=Array(me),it=0;it<me;it++)Re[it]=arguments[it+2];Ue.children=Re}return I(X.type,rt,Ue)},$t.createContext=function(X){return X={$$typeof:u,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},$t.createElement=function(X,oe,Ce){var Ue,rt={},me=null;if(oe!=null)for(Ue in oe.key!==void 0&&(me=""+oe.key),oe)k.call(oe,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(rt[Ue]=oe[Ue]);var Re=arguments.length-2;if(Re===1)rt.children=Ce;else if(1<Re){for(var it=Array(Re),ee=0;ee<Re;ee++)it[ee]=arguments[ee+2];rt.children=it}if(X&&X.defaultProps)for(Ue in Re=X.defaultProps,Re)rt[Ue]===void 0&&(rt[Ue]=Re[Ue]);return I(X,me,rt)},$t.createRef=function(){return{current:null}},$t.forwardRef=function(X){return{$$typeof:f,render:X}},$t.isValidElement=W,$t.lazy=function(X){return{$$typeof:v,_payload:{_status:-1,_result:X},_init:fe}},$t.memo=function(X,oe){return{$$typeof:p,type:X,compare:oe===void 0?null:oe}},$t.startTransition=function(X){var oe=B.T,Ce={};B.T=Ce;try{var Ue=X(),rt=B.S;rt!==null&&rt(Ce,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(z,Ie)}catch(me){Ie(me)}finally{oe!==null&&Ce.types!==null&&(oe.types=Ce.types),B.T=oe}},$t.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},$t.use=function(X){return B.H.use(X)},$t.useActionState=function(X,oe,Ce){return B.H.useActionState(X,oe,Ce)},$t.useCallback=function(X,oe){return B.H.useCallback(X,oe)},$t.useContext=function(X){return B.H.useContext(X)},$t.useDebugValue=function(){},$t.useDeferredValue=function(X,oe){return B.H.useDeferredValue(X,oe)},$t.useEffect=function(X,oe){return B.H.useEffect(X,oe)},$t.useEffectEvent=function(X){return B.H.useEffectEvent(X)},$t.useId=function(){return B.H.useId()},$t.useImperativeHandle=function(X,oe,Ce){return B.H.useImperativeHandle(X,oe,Ce)},$t.useInsertionEffect=function(X,oe){return B.H.useInsertionEffect(X,oe)},$t.useLayoutEffect=function(X,oe){return B.H.useLayoutEffect(X,oe)},$t.useMemo=function(X,oe){return B.H.useMemo(X,oe)},$t.useOptimistic=function(X,oe){return B.H.useOptimistic(X,oe)},$t.useReducer=function(X,oe,Ce){return B.H.useReducer(X,oe,Ce)},$t.useRef=function(X){return B.H.useRef(X)},$t.useState=function(X){return B.H.useState(X)},$t.useSyncExternalStore=function(X,oe,Ce){return B.H.useSyncExternalStore(X,oe,Ce)},$t.useTransition=function(){return B.H.useTransition()},$t.version="19.2.4",$t}var EA;function V0(){return EA||(EA=1,GS.exports=XN()),GS.exports}var se=V0();const fE=k0(se);var WS={exports:{}},Ag={},XS={exports:{}},qS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function qN(){return TA||(TA=1,(function(r){function e(Z,Q){var fe=Z.length;Z.push(Q);e:for(;0<fe;){var Ie=fe-1>>>1,Pe=Z[Ie];if(0<i(Pe,Q))Z[Ie]=Q,Z[fe]=Pe,fe=Ie;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var Q=Z[0],fe=Z.pop();if(fe!==Q){Z[0]=fe;e:for(var Ie=0,Pe=Z.length,X=Pe>>>1;Ie<X;){var oe=2*(Ie+1)-1,Ce=Z[oe],Ue=oe+1,rt=Z[Ue];if(0>i(Ce,fe))Ue<Pe&&0>i(rt,Ce)?(Z[Ie]=rt,Z[Ue]=fe,Ie=Ue):(Z[Ie]=Ce,Z[oe]=fe,Ie=oe);else if(Ue<Pe&&0>i(rt,fe))Z[Ie]=rt,Z[Ue]=fe,Ie=Ue;else break e}}return Q}function i(Z,Q){var fe=Z.sortIndex-Q.sortIndex;return fe!==0?fe:Z.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var d=[],p=[],v=1,_=null,y=3,b=!1,E=!1,A=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(Z){for(var Q=t(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=Z)n(p),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=t(p)}}function P(Z){if(A=!1,N(Z),!E)if(t(d)!==null)E=!0,z||(z=!0,J());else{var Q=t(p);Q!==null&&le(P,Q.startTime-Z)}}var z=!1,B=-1,k=5,I=-1;function O(){return w?!0:!(r.unstable_now()-I<k)}function W(){if(w=!1,z){var Z=r.unstable_now();I=Z;var Q=!0;try{e:{E=!1,A&&(A=!1,D(B),B=-1),b=!0;var fe=y;try{t:{for(N(Z),_=t(d);_!==null&&!(_.expirationTime>Z&&O());){var Ie=_.callback;if(typeof Ie=="function"){_.callback=null,y=_.priorityLevel;var Pe=Ie(_.expirationTime<=Z);if(Z=r.unstable_now(),typeof Pe=="function"){_.callback=Pe,N(Z),Q=!0;break t}_===t(d)&&n(d),N(Z)}else n(d);_=t(d)}if(_!==null)Q=!0;else{var X=t(p);X!==null&&le(P,X.startTime-Z),Q=!1}}break e}finally{_=null,y=fe,b=!1}Q=void 0}}finally{Q?J():z=!1}}}var J;if(typeof R=="function")J=function(){R(W)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ce=K.port2;K.port1.onmessage=W,J=function(){ce.postMessage(null)}}else J=function(){M(W,0)};function le(Z,Q){B=M(function(){Z(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var fe=y;y=Q;try{return Z()}finally{y=fe}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(Z,Q){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var fe=y;y=Z;try{return Q()}finally{y=fe}},r.unstable_scheduleCallback=function(Z,Q,fe){var Ie=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ie+fe:Ie):fe=Ie,Z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=fe+Pe,Z={id:v++,callback:Q,priorityLevel:Z,startTime:fe,expirationTime:Pe,sortIndex:-1},fe>Ie?(Z.sortIndex=fe,e(p,Z),t(d)===null&&Z===t(p)&&(A?(D(B),B=-1):A=!0,le(P,fe-Ie))):(Z.sortIndex=Pe,e(d,Z),E||b||(E=!0,z||(z=!0,J()))),Z},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Z){var Q=y;return function(){var fe=y;y=Q;try{return Z.apply(this,arguments)}finally{y=fe}}}})(qS)),qS}var AA;function c3(){return AA||(AA=1,XS.exports=qN()),XS.exports}var YS={exports:{}},Zr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function YN(){if(wA)return Zr;wA=1;var r=V0();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,p,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:d,containerInfo:p,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Zr.createPortal=function(d,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(d,p,null,v)},Zr.flushSync=function(d){var p=u.T,v=n.p;try{if(u.T=null,n.p=2,d)return d()}finally{u.T=p,n.p=v,n.d.f()}},Zr.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},Zr.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Zr.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:y,fetchPriority:b}):v==="script"&&n.d.X(d,{crossOrigin:_,integrity:y,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zr.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},Zr.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,_=f(v,p.crossOrigin);n.d.L(d,v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zr.preloadModule=function(d,p){if(typeof d=="string")if(p){var v=f(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},Zr.requestFormReset=function(d){n.d.r(d)},Zr.unstable_batchedUpdates=function(d,p){return d(p)},Zr.useFormState=function(d,p,v){return u.H.useFormState(d,p,v)},Zr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zr.version="19.2.4",Zr}var CA;function jN(){if(CA)return YS.exports;CA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),YS.exports=YN(),YS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function ZN(){if(RA)return Ag;RA=1;var r=c3(),e=V0(),t=jN();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(n(188))}function p(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(n(188));return o!==s?null:s}for(var h=s,m=o;;){var S=h.return;if(S===null)break;var T=S.alternate;if(T===null){if(m=S.return,m!==null){h=m;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===h)return d(S),s;if(T===m)return d(S),o;T=T.sibling}throw Error(n(188))}if(h.return!==m.return)h=S,m=T;else{for(var U=!1,G=S.child;G;){if(G===h){U=!0,h=S,m=T;break}if(G===m){U=!0,m=S,h=T;break}G=G.sibling}if(!U){for(G=T.child;G;){if(G===h){U=!0,h=T,m=S;break}if(G===m){U=!0,m=T,h=S;break}G=G.sibling}if(!U)throw Error(n(189))}}if(h.alternate!==m)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:o}function v(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=v(s),o!==null)return o;s=s.sibling}return null}var _=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var K=Symbol.for("react.client.reference");function ce(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===K?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case M:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case z:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case R:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case N:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return o=s.displayName||null,o!==null?o:ce(s.type)||"Memo";case k:o=s._payload,s=s._init;try{return ce(s(o))}catch{}}return null}var le=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ie=[],Pe=-1;function X(s){return{current:s}}function oe(s){0>Pe||(s.current=Ie[Pe],Ie[Pe]=null,Pe--)}function Ce(s,o){Pe++,Ie[Pe]=s.current,s.current=o}var Ue=X(null),rt=X(null),me=X(null),Re=X(null);function it(s,o){switch(Ce(me,o),Ce(rt,s),Ce(Ue,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?WT(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=WT(o),s=XT(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Ue),Ce(Ue,s)}function ee(){oe(Ue),oe(rt),oe(me)}function ft(s){s.memoizedState!==null&&Ce(Re,s);var o=Ue.current,h=XT(o,s.type);o!==h&&(Ce(rt,s),Ce(Ue,h))}function yt(s){rt.current===s&&(oe(Ue),oe(rt)),Re.current===s&&(oe(Re),bg._currentValue=fe)}var Yt,Et;function ge(s){if(Yt===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);Yt=o&&o[1]||"",Et=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+s+Et}var We=!1;function Ae(s,o){if(!s||We)return"";We=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(Oe){var Te=Oe}Reflect.construct(s,[],Ge)}else{try{Ge.call()}catch(Oe){Te=Oe}s.call(Ge.prototype)}}else{try{throw Error()}catch(Oe){Te=Oe}(Ge=s())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(Oe){if(Oe&&Te&&typeof Oe.stack=="string")return[Oe.stack,Te.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),U=T[0],G=T[1];if(U&&G){var ne=U.split(`
`),be=G.split(`
`);for(S=m=0;m<ne.length&&!ne[m].includes("DetermineComponentFrameRoot");)m++;for(;S<be.length&&!be[S].includes("DetermineComponentFrameRoot");)S++;if(m===ne.length||S===be.length)for(m=ne.length-1,S=be.length-1;1<=m&&0<=S&&ne[m]!==be[S];)S--;for(;1<=m&&0<=S;m--,S--)if(ne[m]!==be[S]){if(m!==1||S!==1)do if(m--,S--,0>S||ne[m]!==be[S]){var ze=`
`+ne[m].replace(" at new "," at ");return s.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",s.displayName)),ze}while(1<=m&&0<=S);break}}}finally{We=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?ge(h):""}function xe(s,o){switch(s.tag){case 26:case 27:case 5:return ge(s.type);case 16:return ge("Lazy");case 13:return s.child!==o&&o!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return Ae(s.type,!1);case 11:return Ae(s.type.render,!1);case 1:return Ae(s.type,!0);case 31:return ge("Activity");default:return""}}function Y(s){try{var o="",h=null;do o+=xe(s,h),h=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var dt=Object.prototype.hasOwnProperty,Ee=r.unstable_scheduleCallback,Ct=r.unstable_cancelCallback,$e=r.unstable_shouldYield,q=r.unstable_requestPaint,F=r.unstable_now,ae=r.unstable_getCurrentPriorityLevel,Le=r.unstable_ImmediatePriority,Fe=r.unstable_UserBlockingPriority,_e=r.unstable_NormalPriority,st=r.unstable_LowPriority,He=r.unstable_IdlePriority,Ze=r.log,Mt=r.unstable_setDisableYieldValue,qe=null,nt=null;function pt(s){if(typeof Ze=="function"&&Mt(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(qe,s)}catch{}}var $=Math.clz32?Math.clz32:te,ve=Math.log,lt=Math.LN2;function te(s){return s>>>=0,s===0?32:31-(ve(s)/lt|0)|0}var et=256,Ye=262144,ct=4194304;function je(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Be(s,o,h){var m=s.pendingLanes;if(m===0)return 0;var S=0,T=s.suspendedLanes,U=s.pingedLanes;s=s.warmLanes;var G=m&134217727;return G!==0?(m=G&~T,m!==0?S=je(m):(U&=G,U!==0?S=je(U):h||(h=G&~s,h!==0&&(S=je(h))))):(G=m&~T,G!==0?S=je(G):U!==0?S=je(U):h||(h=m&~s,h!==0&&(S=je(h)))),S===0?0:o!==0&&o!==S&&(o&T)===0&&(T=S&-S,h=o&-o,T>=h||T===32&&(h&4194048)!==0)?o:S}function tt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Lt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var s=ct;return ct<<=1,(ct&62914560)===0&&(ct=4194304),s}function rn(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function ii(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bi(s,o,h,m,S,T){var U=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var G=s.entanglements,ne=s.expirationTimes,be=s.hiddenUpdates;for(h=U&~h;0<h;){var ze=31-$(h),Ge=1<<ze;G[ze]=0,ne[ze]=-1;var Te=be[ze];if(Te!==null)for(be[ze]=null,ze=0;ze<Te.length;ze++){var Oe=Te[ze];Oe!==null&&(Oe.lane&=-536870913)}h&=~Ge}m!==0&&Uo(s,m,0),T!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=T&~(U&~o))}function Uo(s,o,h){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-$(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|h&261930}function zo(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var m=31-$(h),S=1<<m;S&o|s[m]&o&&(s[m]|=o),h&=~S}}function Fl(s,o){var h=o&-o;return h=(h&42)!==0?1:Fo(h),(h&(s.suspendedLanes|o))!==0?0:h}function Fo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function so(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bl(){var s=Q.p;return s!==0?s:(s=window.event,s===void 0?32:pA(s.type))}function vr(s,o){var h=Q.p;try{return Q.p=s,o()}finally{Q.p=h}}var as=Math.random().toString(36).slice(2),ri="__reactFiber$"+as,ki="__reactProps$"+as,os="__reactContainer$"+as,ls="__reactEvents$"+as,us="__reactListeners$"+as,Bo="__reactHandles$"+as,kl="__reactResources$"+as,ra="__reactMarker$"+as;function ao(s){delete s[ri],delete s[ki],delete s[ls],delete s[us],delete s[Bo]}function oo(s){var o=s[ri];if(o)return o;for(var h=s.parentNode;h;){if(o=h[os]||h[ri]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=JT(s);s!==null;){if(h=s[ri])return h;s=JT(s)}return o}s=h,h=s.parentNode}return null}function lo(s){if(s=s[ri]||s[os]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function ko(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function Aa(s){var o=s[kl];return o||(o=s[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function H(s){s[ra]=!0}var ue=new Set,we={};function Se(s,o){de(s,o),de(s+"Capture",o)}function de(s,o){for(we[s]=o,s=0;s<o.length;s++)ue.add(o[s])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vt={},Je={};function bt(s){return dt.call(Je,s)?!0:dt.call(vt,s)?!1:at.test(s)?Je[s]=!0:(vt[s]=!0,!1)}function Tt(s,o,h){if(bt(o))if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+h)}}function It(s,o,h){if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+h)}}function At(s,o,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(o,h,""+m)}}function Ft(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function En(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Vn(s,o,h){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,T=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return S.call(this)},set:function(U){h=""+U,T.call(this,U)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(U){h=""+U},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function zn(s){if(!s._valueTracker){var o=En(s)?"checked":"value";s._valueTracker=Vn(s,o,""+s[o])}}function jt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return s&&(m=En(s)?s.checked?"true":"false":s.value),s=m,s!==h?(o.setValue(s),!0):!1}function ht(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xn=/[\n"\\]/g;function Vt(s){return s.replace(xn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Di(s,o,h,m,S,T,U,G){s.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.type=U:s.removeAttribute("type"),o!=null?U==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ft(o)):s.value!==""+Ft(o)&&(s.value=""+Ft(o)):U!=="submit"&&U!=="reset"||s.removeAttribute("value"),o!=null?jn(s,U,Ft(o)):h!=null?jn(s,U,Ft(h)):m!=null&&s.removeAttribute("value"),S==null&&T!=null&&(s.defaultChecked=!!T),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?s.name=""+Ft(G):s.removeAttribute("name")}function sa(s,o,h,m,S,T,U,G){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),o!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){zn(s);return}h=h!=null?""+Ft(h):"",o=o!=null?""+Ft(o):h,G||o===s.value||(s.value=o),s.defaultValue=o}m=m??S,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=G?s.checked:!!m,s.defaultChecked=!!m,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(s.name=U),zn(s)}function jn(s,o,h){o==="number"&&ht(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Er(s,o,h,m){if(s=s.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<s.length;h++)S=o.hasOwnProperty("$"+s[h].value),s[h].selected!==S&&(s[h].selected=S),S&&m&&(s[h].defaultSelected=!0)}else{for(h=""+Ft(h),o=null,S=0;S<s.length;S++){if(s[S].value===h){s[S].selected=!0,m&&(s[S].defaultSelected=!0);return}o!==null||s[S].disabled||(o=s[S])}o!==null&&(o.selected=!0)}}function Cn(s,o,h){if(o!=null&&(o=""+Ft(o),o!==s.value&&(s.value=o),h==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=h!=null?""+Ft(h):""}function Vi(s,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(n(92));if(le(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=Ft(o),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m),zn(s)}function Li(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var Ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $i(s,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,h):typeof h!="number"||h===0||Ji.has(o)?o==="float"?s.cssFloat=h:s[o]=(""+h).trim():s[o]=h+"px"}function Vl(s,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var S in o)m=o[S],o.hasOwnProperty(S)&&h[S]!==m&&$i(s,S,m)}else for(var T in o)o.hasOwnProperty(T)&&$i(s,T,o[T])}function Cs(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function af(s){return tm.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function uo(){}var zh=null;function Fh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Hl=null,Vo=null;function nm(s){var o=lo(s);if(o&&(s=o.stateNode)){var h=s[ki]||null;e:switch(s=o.stateNode,o.type){case"input":if(Di(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Vt(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==s&&m.form===s.form){var S=m[ki]||null;if(!S)throw Error(n(90));Di(m,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===s.form&&jt(m)}break e;case"textarea":Cn(s,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&Er(s,!!h.multiple,o,!1)}}}var Bh=!1;function im(s,o,h){if(Bh)return s(o,h);Bh=!0;try{var m=s(o);return m}finally{if(Bh=!1,(Hl!==null||Vo!==null)&&(ca(),Hl&&(o=Hl,s=Vo,Vo=Hl=null,nm(o),s)))for(o=0;o<s.length;o++)nm(s[o])}}function Bu(s,o){var h=s.stateNode;if(h===null)return null;var m=h[ki]||null;if(m===null)return null;h=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=!1;if(wa)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){rm=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{rm=!1}var cs=null,kh=null,Gl=null;function of(){if(Gl)return Gl;var s,o=kh,h=o.length,m,S="value"in cs?cs.value:cs.textContent,T=S.length;for(s=0;s<h&&o[s]===S[s];s++);var U=h-s;for(m=1;m<=U&&o[h-m]===S[T-m];m++);return Gl=S.slice(s,1<m?1-m:void 0)}function lf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Vu(){return!0}function rv(){return!1}function Tr(s){function o(h,m,S,T,U){this._reactName=h,this._targetInst=S,this.type=m,this.nativeEvent=T,this.target=U,this.currentTarget=null;for(var G in s)s.hasOwnProperty(G)&&(h=s[G],this[G]=h?h(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Vu:rv,this.isPropagationStopped=rv,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Vu)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Vu)},persist:function(){},isPersistent:Vu}),o}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=Tr(Ho),Hu=_({},Ho,{view:0,detail:0}),sv=Tr(Hu),cf,Vh,Gu,Wu=_({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gu&&(Gu&&s.type==="mousemove"?(cf=s.screenX-Gu.screenX,Vh=s.screenY-Gu.screenY):Vh=cf=0,Gu=s),cf)},movementY:function(s){return"movementY"in s?s.movementY:Vh}}),sm=Tr(Wu),av=_({},Wu,{dataTransfer:0}),ov=Tr(av),am=_({},Hu,{relatedTarget:0}),Hh=Tr(am),lv=_({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),lS=Tr(lv),uS=_({},Ho,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),uv=Tr(uS),ff=_({},Ho,{data:0}),Gh=Tr(ff),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function om(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=fv[s])?!!o[s]:!1}function Xh(){return om}var hv=_({},Hu,{key:function(s){if(s.key){var o=Wh[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xh,charCode:function(s){return s.type==="keypress"?lf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wl=Tr(hv),qh=_({},Wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=Tr(qh),um=_({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xh}),dv=Tr(um),pv=_({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),cS=Tr(pv),lr=_({},Wu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mv=Tr(lr),gv=_({},Ho,{newState:0,oldState:0}),vv=Tr(gv),_v=[9,13,27,32],Xl=wa&&"CompositionEvent"in window,Xu=null;wa&&"documentMode"in document&&(Xu=document.documentMode);var Yh=wa&&"TextEvent"in window&&!Xu,cm=wa&&(!Xl||Xu&&8<Xu&&11>=Xu),yv=" ",hf=!1;function jh(s,o){switch(s){case"keyup":return _v.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ql=!1;function xv(s,o){switch(s){case"compositionend":return fm(o);case"keypress":return o.which!==32?null:(hf=!0,yv);case"textInput":return s=o.data,s===yv&&hf?null:s;default:return null}}function hm(s,o){if(ql)return s==="compositionend"||!Xl&&jh(s,o)?(s=of(),Gl=kh=cs=null,ql=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return cm&&o.locale!=="ko"?null:o.data;default:return null}}var dm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!dm[s.type]:o==="textarea"}function Zh(s,o,h,m){Hl?Vo?Vo.push(m):Vo=[m]:Hl=m,o=T_(o,"onChange"),0<o.length&&(h=new uf("onChange","change",null,h,m),s.push({event:h,listeners:o}))}var Go=null,Yl=null;function bv(s){FT(s,0)}function qu(s){var o=ko(s);if(jt(o))return s}function mm(s,o){if(s==="change")return o}var Ca=!1;if(wa){var df;if(wa){var gm="oninput"in document;if(!gm){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),gm=typeof vm.oninput=="function"}df=gm}else df=!1;Ca=df&&(!document.documentMode||9<document.documentMode)}function Rs(){Go&&(Go.detachEvent("onpropertychange",pf),Yl=Go=null)}function pf(s){if(s.propertyName==="value"&&qu(Yl)){var o=[];Zh(o,Yl,s,Fh(s)),im(bv,o)}}function Sv(s,o,h){s==="focusin"?(Rs(),Go=o,Yl=h,Go.attachEvent("onpropertychange",pf)):s==="focusout"&&Rs()}function _m(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qu(Yl)}function Mv(s,o){if(s==="click")return qu(o)}function Ev(s,o){if(s==="input"||s==="change")return qu(o)}function ym(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Ar=typeof Object.is=="function"?Object.is:ym;function Yu(s,o){if(Ar(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var S=h[m];if(!dt.call(o,S)||!Ar(s[S],o[S]))return!1}return!0}function mf(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ju(s,o){var h=mf(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=o&&m>=o)return{node:h,offset:o-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=mf(h)}}function Hn(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Hn(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Tv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=ht(s.document);o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=ht(s.document)}return o}function xm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var Av=wa&&"documentMode"in document&&11>=document.documentMode,Ra=null,Da=null,Zu=null,Kh=!1;function Ku(s,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Kh||Ra==null||Ra!==ht(m)||(m=Ra,"selectionStart"in m&&xm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Zu&&Yu(Zu,m)||(Zu=m,m=T_(Da,"onSelect"),0<m.length&&(o=new uf("onSelect","select",null,o,h),s.push({event:o,listeners:m}),o.target=Ra)))}function _r(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var jl={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},gf={},bm={};wa&&(bm=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function co(s){if(gf[s])return gf[s];if(!jl[s])return s;var o=jl[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in bm)return gf[s]=o[h];return s}var Qh=co("animationend"),vf=co("animationiteration"),Sm=co("animationstart"),wv=co("transitionrun"),fS=co("transitionstart"),Cv=co("transitioncancel"),Mm=co("transitionend"),Ds=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Ls(s,o){Ds.set(s,o),Se(o,[s])}var yf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ns=[],fo=0,er=0;function xf(){for(var s=fo,o=er=fo=0;o<s;){var h=Ns[o];Ns[o++]=null;var m=Ns[o];Ns[o++]=null;var S=Ns[o];Ns[o++]=null;var T=Ns[o];if(Ns[o++]=null,m!==null&&S!==null){var U=m.pending;U===null?S.next=S:(S.next=U.next,U.next=S),m.pending=S}T!==0&&Wo(h,S,T)}}function tr(s,o,h,m){Ns[fo++]=s,Ns[fo++]=o,Ns[fo++]=h,Ns[fo++]=m,er|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Jh(s,o,h,m){return tr(s,o,h,m),Os(s)}function wr(s,o){return tr(s,null,null,o),Os(s)}function Wo(s,o,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var S=!1,T=s.return;T!==null;)T.childLanes|=h,m=T.alternate,m!==null&&(m.childLanes|=h),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(S=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,S&&o!==null&&(S=31-$(h),s=T.hiddenUpdates,m=s[S],m===null?s[S]=[o]:m.push(o),o.lane=h|536870912),T):null}function Os(s){if(50<ul)throw ul=0,du=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Xo={};function Em(s,o,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(s,o,h,m){return new Em(s,o,h,m)}function $h(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Br(s,o){var h=s.alternate;return h===null?(h=si(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function Qu(s,o){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,o=h.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function La(s,o,h,m,S,T){var U=0;if(m=s,typeof s=="function")$h(s)&&(U=1);else if(typeof s=="string")U=RN(s,h,Ue.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=si(31,h,o,S),s.elementType=I,s.lanes=T,s;case A:return qo(h.children,S,T,o);case w:U=8,S|=24;break;case M:return s=si(12,h,o,S|2),s.elementType=M,s.lanes=T,s;case P:return s=si(13,h,o,S),s.elementType=P,s.lanes=T,s;case z:return s=si(19,h,o,S),s.elementType=z,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:U=10;break e;case D:U=9;break e;case N:U=11;break e;case B:U=14;break e;case k:U=16,m=null;break e}U=29,h=Error(n(130,s===null?"null":typeof s,"")),m=null}return o=si(U,h,o,S),o.elementType=s,o.type=m,o.lanes=T,o}function qo(s,o,h,m){return s=si(7,s,m,o),s.lanes=h,s}function ed(s,o,h){return s=si(6,s,null,o),s.lanes=h,s}function Ju(s){var o=si(18,null,null,0);return o.stateNode=s,o}function td(s,o,h){return o=si(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var bf=new WeakMap;function fs(s,o){if(typeof s=="object"&&s!==null){var h=bf.get(s);return h!==void 0?h:(o={value:s,source:o,stack:Y(o)},bf.set(s,o),o)}return{value:s,source:o,stack:Y(o)}}var Yo=[],jo=0,$u=null,ec=0,kr=[],Jn=0,ho=null,ai=1,aa="";function Na(s,o){Yo[jo++]=ec,Yo[jo++]=$u,$u=s,ec=o}function Rv(s,o,h){kr[Jn++]=ai,kr[Jn++]=aa,kr[Jn++]=ho,ho=s;var m=ai;s=aa;var S=32-$(m)-1;m&=~(1<<S),h+=1;var T=32-$(o)+S;if(30<T){var U=S-S%5;T=(m&(1<<U)-1).toString(32),m>>=U,S-=U,ai=1<<32-$(o)+S|h<<S|m,aa=T+s}else ai=1<<T|h<<S|m,aa=s}function Oa(s){s.return!==null&&(Na(s,1),Rv(s,1,0))}function nd(s){for(;s===$u;)$u=Yo[--jo],Yo[jo]=null,ec=Yo[--jo],Yo[jo]=null;for(;s===ho;)ho=kr[--Jn],kr[Jn]=null,aa=kr[--Jn],kr[Jn]=null,ai=kr[--Jn],kr[Jn]=null}function id(s,o){kr[Jn++]=ai,kr[Jn++]=aa,kr[Jn++]=ho,ai=o.id,aa=o.overflow,ho=s}var di=null,Gn=null,gn=!1,po=null,hs=!1,tc=Error(n(519));function Ia(s){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pa(fs(o,s)),tc}function Dv(s){var o=s.stateNode,h=s.type,m=s.memoizedProps;switch(o[ri]=s,o[ki]=m,h){case"dialog":yn("cancel",o),yn("close",o);break;case"iframe":case"object":case"embed":yn("load",o);break;case"video":case"audio":for(h=0;h<qs.length;h++)yn(qs[h],o);break;case"source":yn("error",o);break;case"img":case"image":case"link":yn("error",o),yn("load",o);break;case"details":yn("toggle",o);break;case"input":yn("invalid",o),sa(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":yn("invalid",o);break;case"textarea":yn("invalid",o),Vi(o,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||HT(o.textContent,h)?(m.popover!=null&&(yn("beforetoggle",o),yn("toggle",o)),m.onScroll!=null&&yn("scroll",o),m.onScrollEnd!=null&&yn("scrollend",o),m.onClick!=null&&(o.onclick=uo),o=!0):o=!1,o||Ia(s,!0)}function Lv(s){for(di=s.return;di;)switch(di.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:di=di.return}}function nc(s){if(s!==di)return!1;if(!gn)return Lv(s),gn=!0,!1;var o=s.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||wS(s.type,s.memoizedProps)),h=!h),h&&Gn&&Ia(s),Lv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Gn=QT(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Gn=QT(s)}else o===27?(o=Gn,Sc(s.type)?(s=NS,NS=null,Gn=s):Gn=o):Gn=di?Za(s.stateNode.nextSibling):null;return!0}function Zo(){Gn=di=null,gn=!1}function rd(){var s=po;return s!==null&&(mi===null?mi=s:mi.push.apply(mi,s),po=null),s}function Pa(s){po===null?po=[s]:po.push(s)}var ic=X(null),Ko=null,Ua=null;function mo(s,o,h){Ce(ic,o._currentValue),o._currentValue=h}function za(s){s._currentValue=ic.current,oe(ic)}function sd(s,o,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===h)break;s=s.return}}function ad(s,o,h,m){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var T=S.dependencies;if(T!==null){var U=S.child;T=T.firstContext;e:for(;T!==null;){var G=T;T=S;for(var ne=0;ne<o.length;ne++)if(G.context===o[ne]){T.lanes|=h,G=T.alternate,G!==null&&(G.lanes|=h),sd(T.return,h,s),m||(U=null);break e}T=G.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(n(341));U.lanes|=h,T=U.alternate,T!==null&&(T.lanes|=h),sd(U,h,s),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===s){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function Fa(s,o,h,m){s=null;for(var S=o,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var G=S.type;Ar(S.pendingProps.value,U.value)||(s!==null?s.push(G):s=[G])}}else if(S===Re.current){if(U=S.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(bg):s=[bg])}S=S.return}s!==null&&ad(o,s,h,m),o.flags|=262144}function Sf(s){for(s=s.firstContext;s!==null;){if(!Ar(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qo(s){Ko=s,Ua=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gt(s){return Nv(Ko,s)}function rc(s,o){return Ko===null&&Qo(s),Nv(s,o)}function Nv(s,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Ua===null){if(s===null)throw Error(n(308));Ua=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ua=Ua.next=o;return h}var Ov=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(h){return h()})}},hS=r.unstable_scheduleCallback,dS=r.unstable_NormalPriority,Ni={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new Ov,data:new Map,refCount:0}}function Zl(s){s.refCount--,s.refCount===0&&hS(dS,function(){s.controller.abort()})}var ds=null,od=0,go=0,Is=null;function Am(s,o){if(ds===null){var h=ds=[];od=0,go=De(),Is={status:"pending",value:void 0,then:function(m){h.push(m)}}}return od++,o.then(wm,wm),o}function wm(){if(--od===0&&ds!==null){Is!==null&&(Is.status="fulfilled");var s=ds;ds=null,go=0,Is=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Cm(s,o){var h=[],m={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var S=0;S<h.length;S++)(0,h[S])(o)},function(S){for(m.status="rejected",m.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),m}var Iv=Z.S;Z.S=function(s,o){mg=F(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Am(s,o),Iv!==null&&Iv(s,o)};var Jo=X(null);function ld(){var s=Jo.current;return s!==null?s:qt.pooledCache}function Mf(s,o){o===null?Ce(Jo,Jo.current):Ce(Jo,o.pool)}function Rm(){var s=ld();return s===null?null:{parent:Ni._currentValue,pool:s}}var Kl=Error(n(460)),Ef=Error(n(474)),sn=Error(n(542)),ud={then:function(){}};function Vr(s){return s=s.status,s==="fulfilled"||s==="rejected"}function cd(s,o,h){switch(h=s[h],h===void 0?s.push(o):h!==o&&(o.then(uo,uo),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$l(s),s;default:if(typeof o.status=="string")o.then(uo,uo);else{if(s=qt,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var S=o;S.status="fulfilled",S.value=m}},function(m){if(o.status==="pending"){var S=o;S.status="rejected",S.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,$l(s),s}throw Ba=o,Kl}}function Ql(s){try{var o=s._init;return o(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Ba=h,Kl):h}}var Ba=null;function Jl(){if(Ba===null)throw Error(n(459));var s=Ba;return Ba=null,s}function $l(s){if(s===Kl||s===sn)throw Error(n(483))}var eu=null,tu=0;function Tf(s){var o=tu;return tu+=1,eu===null&&(eu=[]),cd(eu,s,o)}function Ps(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function sc(s,o){throw o.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function fd(s){function o(he,re){if(s){var ye=he.deletions;ye===null?(he.deletions=[re],he.flags|=16):ye.push(re)}}function h(he,re){if(!s)return null;for(;re!==null;)o(he,re),re=re.sibling;return null}function m(he){for(var re=new Map;he!==null;)he.key!==null?re.set(he.key,he):re.set(he.index,he),he=he.sibling;return re}function S(he,re){return he=Br(he,re),he.index=0,he.sibling=null,he}function T(he,re,ye){return he.index=ye,s?(ye=he.alternate,ye!==null?(ye=ye.index,ye<re?(he.flags|=67108866,re):ye):(he.flags|=67108866,re)):(he.flags|=1048576,re)}function U(he){return s&&he.alternate===null&&(he.flags|=67108866),he}function G(he,re,ye,Ve){return re===null||re.tag!==6?(re=ed(ye,he.mode,Ve),re.return=he,re):(re=S(re,ye),re.return=he,re)}function ne(he,re,ye,Ve){var Ut=ye.type;return Ut===A?ze(he,re,ye.props.children,Ve,ye.key):re!==null&&(re.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===k&&Ql(Ut)===re.type)?(re=S(re,ye.props),Ps(re,ye),re.return=he,re):(re=La(ye.type,ye.key,ye.props,null,he.mode,Ve),Ps(re,ye),re.return=he,re)}function be(he,re,ye,Ve){return re===null||re.tag!==4||re.stateNode.containerInfo!==ye.containerInfo||re.stateNode.implementation!==ye.implementation?(re=td(ye,he.mode,Ve),re.return=he,re):(re=S(re,ye.children||[]),re.return=he,re)}function ze(he,re,ye,Ve,Ut){return re===null||re.tag!==7?(re=qo(ye,he.mode,Ve,Ut),re.return=he,re):(re=S(re,ye),re.return=he,re)}function Ge(he,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=ed(""+re,he.mode,ye),re.return=he,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return ye=La(re.type,re.key,re.props,null,he.mode,ye),Ps(ye,re),ye.return=he,ye;case E:return re=td(re,he.mode,ye),re.return=he,re;case k:return re=Ql(re),Ge(he,re,ye)}if(le(re)||J(re))return re=qo(re,he.mode,ye,null),re.return=he,re;if(typeof re.then=="function")return Ge(he,Tf(re),ye);if(re.$$typeof===R)return Ge(he,rc(he,re),ye);sc(he,re)}return null}function Te(he,re,ye,Ve){var Ut=re!==null?re.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Ut!==null?null:G(he,re,""+ye,Ve);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return ye.key===Ut?ne(he,re,ye,Ve):null;case E:return ye.key===Ut?be(he,re,ye,Ve):null;case k:return ye=Ql(ye),Te(he,re,ye,Ve)}if(le(ye)||J(ye))return Ut!==null?null:ze(he,re,ye,Ve,null);if(typeof ye.then=="function")return Te(he,re,Tf(ye),Ve);if(ye.$$typeof===R)return Te(he,re,rc(he,ye),Ve);sc(he,ye)}return null}function Oe(he,re,ye,Ve,Ut){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return he=he.get(ye)||null,G(re,he,""+Ve,Ut);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case b:return he=he.get(Ve.key===null?ye:Ve.key)||null,ne(re,he,Ve,Ut);case E:return he=he.get(Ve.key===null?ye:Ve.key)||null,be(re,he,Ve,Ut);case k:return Ve=Ql(Ve),Oe(he,re,ye,Ve,Ut)}if(le(Ve)||J(Ve))return he=he.get(ye)||null,ze(re,he,Ve,Ut,null);if(typeof Ve.then=="function")return Oe(he,re,ye,Tf(Ve),Ut);if(Ve.$$typeof===R)return Oe(he,re,ye,rc(re,Ve),Ut);sc(re,Ve)}return null}function wt(he,re,ye,Ve){for(var Ut=null,Nn=null,Rt=re,un=re=0,Sn=null;Rt!==null&&un<ye.length;un++){Rt.index>un?(Sn=Rt,Rt=null):Sn=Rt.sibling;var On=Te(he,Rt,ye[un],Ve);if(On===null){Rt===null&&(Rt=Sn);break}s&&Rt&&On.alternate===null&&o(he,Rt),re=T(On,re,un),Nn===null?Ut=On:Nn.sibling=On,Nn=On,Rt=Sn}if(un===ye.length)return h(he,Rt),gn&&Na(he,un),Ut;if(Rt===null){for(;un<ye.length;un++)Rt=Ge(he,ye[un],Ve),Rt!==null&&(re=T(Rt,re,un),Nn===null?Ut=Rt:Nn.sibling=Rt,Nn=Rt);return gn&&Na(he,un),Ut}for(Rt=m(Rt);un<ye.length;un++)Sn=Oe(Rt,he,un,ye[un],Ve),Sn!==null&&(s&&Sn.alternate!==null&&Rt.delete(Sn.key===null?un:Sn.key),re=T(Sn,re,un),Nn===null?Ut=Sn:Nn.sibling=Sn,Nn=Sn);return s&&Rt.forEach(function(wc){return o(he,wc)}),gn&&Na(he,un),Ut}function Ht(he,re,ye,Ve){if(ye==null)throw Error(n(151));for(var Ut=null,Nn=null,Rt=re,un=re=0,Sn=null,On=ye.next();Rt!==null&&!On.done;un++,On=ye.next()){Rt.index>un?(Sn=Rt,Rt=null):Sn=Rt.sibling;var wc=Te(he,Rt,On.value,Ve);if(wc===null){Rt===null&&(Rt=Sn);break}s&&Rt&&wc.alternate===null&&o(he,Rt),re=T(wc,re,un),Nn===null?Ut=wc:Nn.sibling=wc,Nn=wc,Rt=Sn}if(On.done)return h(he,Rt),gn&&Na(he,un),Ut;if(Rt===null){for(;!On.done;un++,On=ye.next())On=Ge(he,On.value,Ve),On!==null&&(re=T(On,re,un),Nn===null?Ut=On:Nn.sibling=On,Nn=On);return gn&&Na(he,un),Ut}for(Rt=m(Rt);!On.done;un++,On=ye.next())On=Oe(Rt,he,un,On.value,Ve),On!==null&&(s&&On.alternate!==null&&Rt.delete(On.key===null?un:On.key),re=T(On,re,un),Nn===null?Ut=On:Nn.sibling=On,Nn=On);return s&&Rt.forEach(function(kN){return o(he,kN)}),gn&&Na(he,un),Ut}function qn(he,re,ye,Ve){if(typeof ye=="object"&&ye!==null&&ye.type===A&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:e:{for(var Ut=ye.key;re!==null;){if(re.key===Ut){if(Ut=ye.type,Ut===A){if(re.tag===7){h(he,re.sibling),Ve=S(re,ye.props.children),Ve.return=he,he=Ve;break e}}else if(re.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===k&&Ql(Ut)===re.type){h(he,re.sibling),Ve=S(re,ye.props),Ps(Ve,ye),Ve.return=he,he=Ve;break e}h(he,re);break}else o(he,re);re=re.sibling}ye.type===A?(Ve=qo(ye.props.children,he.mode,Ve,ye.key),Ve.return=he,he=Ve):(Ve=La(ye.type,ye.key,ye.props,null,he.mode,Ve),Ps(Ve,ye),Ve.return=he,he=Ve)}return U(he);case E:e:{for(Ut=ye.key;re!==null;){if(re.key===Ut)if(re.tag===4&&re.stateNode.containerInfo===ye.containerInfo&&re.stateNode.implementation===ye.implementation){h(he,re.sibling),Ve=S(re,ye.children||[]),Ve.return=he,he=Ve;break e}else{h(he,re);break}else o(he,re);re=re.sibling}Ve=td(ye,he.mode,Ve),Ve.return=he,he=Ve}return U(he);case k:return ye=Ql(ye),qn(he,re,ye,Ve)}if(le(ye))return wt(he,re,ye,Ve);if(J(ye)){if(Ut=J(ye),typeof Ut!="function")throw Error(n(150));return ye=Ut.call(ye),Ht(he,re,ye,Ve)}if(typeof ye.then=="function")return qn(he,re,Tf(ye),Ve);if(ye.$$typeof===R)return qn(he,re,rc(he,ye),Ve);sc(he,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,re!==null&&re.tag===6?(h(he,re.sibling),Ve=S(re,ye),Ve.return=he,he=Ve):(h(he,re),Ve=ed(ye,he.mode,Ve),Ve.return=he,he=Ve),U(he)):h(he,re)}return function(he,re,ye,Ve){try{tu=0;var Ut=qn(he,re,ye,Ve);return eu=null,Ut}catch(Rt){if(Rt===Kl||Rt===sn)throw Rt;var Nn=si(29,Rt,null,he.mode);return Nn.lanes=Ve,Nn.return=he,Nn}finally{}}}var vo=fd(!0),hd=fd(!1),Cr=!1;function Af(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _o(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $o(s,o,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Dt&2)!==0){var S=m.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),m.pending=o,o=Os(s),Wo(s,null,h),o}return tr(s,m,o,h),Os(s)}function el(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,zo(s,h)}}function Pt(s,o){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var S=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?S=T=U:T=T.next=U,h=h.next}while(h!==null);T===null?S=T=o:T=T.next=o}else S=T=o;h={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}var Lm=!1;function wf(){if(Lm){var s=Is;if(s!==null)throw s}}function ac(s,o,h,m){Lm=!1;var S=s.updateQueue;Cr=!1;var T=S.firstBaseUpdate,U=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var ne=G,be=ne.next;ne.next=null,U===null?T=be:U.next=be,U=ne;var ze=s.alternate;ze!==null&&(ze=ze.updateQueue,G=ze.lastBaseUpdate,G!==U&&(G===null?ze.firstBaseUpdate=be:G.next=be,ze.lastBaseUpdate=ne))}if(T!==null){var Ge=S.baseState;U=0,ze=be=ne=null,G=T;do{var Te=G.lane&-536870913,Oe=Te!==G.lane;if(Oe?(tn&Te)===Te:(m&Te)===Te){Te!==0&&Te===go&&(Lm=!0),ze!==null&&(ze=ze.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var wt=s,Ht=G;Te=o;var qn=h;switch(Ht.tag){case 1:if(wt=Ht.payload,typeof wt=="function"){Ge=wt.call(qn,Ge,Te);break e}Ge=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Ht.payload,Te=typeof wt=="function"?wt.call(qn,Ge,Te):wt,Te==null)break e;Ge=_({},Ge,Te);break e;case 2:Cr=!0}}Te=G.callback,Te!==null&&(s.flags|=64,Oe&&(s.flags|=8192),Oe=S.callbacks,Oe===null?S.callbacks=[Te]:Oe.push(Te))}else Oe={lane:Te,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ze===null?(be=ze=Oe,ne=Ge):ze=ze.next=Oe,U|=Te;if(G=G.next,G===null){if(G=S.shared.pending,G===null)break;Oe=G,G=Oe.next,Oe.next=null,S.lastBaseUpdate=Oe,S.shared.pending=null}}while(!0);ze===null&&(ne=Ge),S.baseState=ne,S.firstBaseUpdate=be,S.lastBaseUpdate=ze,T===null&&(S.shared.lanes=0),qa|=U,s.lanes=U,s.memoizedState=Ge}}function oc(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Pv(s,o){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)oc(h[s],o)}var lc=X(null),dd=X(0);function Uv(s,o){s=vs,Ce(dd,s),Ce(lc,o),vs=s|o.baseLanes}function Nm(){Ce(dd,vs),Ce(lc,lc.current)}function Cf(){vs=dd.current,oe(lc),oe(dd)}var Hr=X(null),Rr=null;function yo(s){var o=s.alternate;Ce(vn,vn.current&1),Ce(Hr,s),Rr===null&&(o===null||lc.current!==null||o.memoizedState!==null)&&(Rr=s)}function Om(s){Ce(vn,vn.current),Ce(Hr,s),Rr===null&&(Rr=s)}function zv(s){s.tag===22?(Ce(vn,vn.current),Ce(Hr,s),Rr===null&&(Rr=s)):Gr()}function Gr(){Ce(vn,vn.current),Ce(Hr,Hr.current)}function _i(s){oe(Hr),Rr===s&&(Rr=null),oe(vn)}var vn=X(0);function ps(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||DS(h)||LS(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var $n=0,Qt=null,Fn=null,dn=null,Us=!1,uc=!1,nu=!1,pd=0,Rf=0,cc=null,Im=0;function oi(){throw Error(n(321))}function Pm(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!Ar(s[h],o[h]))return!1;return!0}function md(s,o,h,m,S,T){return $n=T,Qt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=s===null||s.memoizedState===null?m_:tg,nu=!1,T=h(m,S),nu=!1,uc&&(T=iu(o,h,m,S)),Fv(s),T}function Fv(s){Z.H=fc;var o=Fn!==null&&Fn.next!==null;if($n=0,dn=Fn=Qt=null,Us=!1,Rf=0,cc=null,o)throw Error(n(300));s===null||Oi||(s=s.dependencies,s!==null&&Sf(s)&&(Oi=!0))}function iu(s,o,h,m){Qt=s;var S=0;do{if(uc&&(cc=null),Rf=0,uc=!1,25<=S)throw Error(n(301));if(S+=1,dn=Fn=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Z.H=zs,T=o(h,m)}while(uc);return T}function ru(){var s=Z.H,o=s.useState()[0];return o=typeof o.then=="function"?Df(o):o,s=s.useState()[0],(Fn!==null?Fn.memoizedState:null)!==s&&(Qt.flags|=1024),o}function Um(){var s=pd!==0;return pd=0,s}function zm(s,o,h){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~h}function Fm(s){if(Us){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Us=!1}$n=0,dn=Fn=Qt=null,uc=!1,Rf=pd=0,cc=null}function Hi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Qt.memoizedState=dn=s:dn=dn.next=s,dn}function yi(){if(Fn===null){var s=Qt.alternate;s=s!==null?s.memoizedState:null}else s=Fn.next;var o=dn===null?Qt.memoizedState:dn.next;if(o!==null)dn=o,Fn=s;else{if(s===null)throw Qt.alternate===null?Error(n(467)):Error(n(310));Fn=s,s={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},dn===null?Qt.memoizedState=dn=s:dn=dn.next=s}return dn}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Df(s){var o=Rf;return Rf+=1,cc===null&&(cc=[]),s=cd(cc,s,o),o=Qt,(dn===null?o.memoizedState:dn.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?m_:tg),s}function tl(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Df(s);if(s.$$typeof===R)return Gt(s)}throw Error(n(438,String(s)))}function Bm(s){var o=null,h=Qt.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=Qt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(S){return S.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=gd(),Qt.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(s),m=0;m<s;m++)h[m]=O;return o.index++,h}function xo(s,o){return typeof o=="function"?o(s):o}function vd(s){var o=yi();return km(o,Fn,s)}function km(s,o,h){var m=s.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=h;var S=s.baseQueue,T=m.pending;if(T!==null){if(S!==null){var U=S.next;S.next=T.next,T.next=U}o.baseQueue=S=T,m.pending=null}if(T=s.baseState,S===null)s.memoizedState=T;else{o=S.next;var G=U=null,ne=null,be=o,ze=!1;do{var Ge=be.lane&-536870913;if(Ge!==be.lane?(tn&Ge)===Ge:($n&Ge)===Ge){var Te=be.revertLane;if(Te===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Ge===go&&(ze=!0);else if(($n&Te)===Te){be=be.next,Te===go&&(ze=!0);continue}else Ge={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(G=ne=Ge,U=T):ne=ne.next=Ge,Qt.lanes|=Te,qa|=Te;Ge=be.action,nu&&h(T,Ge),T=be.hasEagerState?be.eagerState:h(T,Ge)}else Te={lane:Ge,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},ne===null?(G=ne=Te,U=T):ne=ne.next=Te,Qt.lanes|=Ge,qa|=Ge;be=be.next}while(be!==null&&be!==o);if(ne===null?U=T:ne.next=G,!Ar(T,s.memoizedState)&&(Oi=!0,ze&&(h=Is,h!==null)))throw h;s.memoizedState=T,s.baseState=U,s.baseQueue=ne,m.lastRenderedState=T}return S===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Vm(s){var o=yi(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var m=h.dispatch,S=h.pending,T=o.memoizedState;if(S!==null){h.pending=null;var U=S=S.next;do T=s(T,U.action),U=U.next;while(U!==S);Ar(T,o.memoizedState)||(Oi=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),h.lastRenderedState=T}return[T,m]}function Bv(s,o,h){var m=Qt,S=yi(),T=gn;if(T){if(h===void 0)throw Error(n(407));h=h()}else h=o();var U=!Ar((Fn||S).memoizedState,h);if(U&&(S.memoizedState=h,Oi=!0),S=S.queue,Zm(Hv.bind(null,m,S,s),[s]),S.getSnapshot!==o||U||dn!==null&&dn.memoizedState.tag&1){if(m.flags|=2048,nl(9,{destroy:void 0},Vv.bind(null,m,S,h,o),null),qt===null)throw Error(n(349));T||($n&127)!==0||kv(m,o,h)}return h}function kv(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=Qt.updateQueue,o===null?(o=gd(),Qt.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function Vv(s,o,h,m){o.value=h,o.getSnapshot=m,Gv(o)&&Wv(s)}function Hv(s,o,h){return h(function(){Gv(o)&&Wv(s)})}function Gv(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!Ar(s,h)}catch{return!0}}function Wv(s){var o=wr(s,2);o!==null&&on(o,s,2)}function Hm(s){var o=Hi();if(typeof s=="function"){var h=s;if(s=h(),nu){pt(!0);try{h()}finally{pt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:s},o}function Gm(s,o,h,m){return s.baseState=h,km(s,Fn,typeof m=="function"?m:xo)}function pS(s,o,h,m,S){if(bd(s))throw Error(n(485));if(s=o.action,s!==null){var T={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){T.listeners.push(U)}};Z.T!==null?h(!0):T.isTransition=!1,m(T),h=o.pending,h===null?(T.next=o.pending=T,Xv(o,T)):(T.next=h.next,o.pending=h.next=T)}}function Xv(s,o){var h=o.action,m=o.payload,S=s.state;if(o.isTransition){var T=Z.T,U={};Z.T=U;try{var G=h(S,m),ne=Z.S;ne!==null&&ne(U,G),qv(s,o,G)}catch(be){Wm(s,o,be)}finally{T!==null&&U.types!==null&&(T.types=U.types),Z.T=T}}else try{T=h(S,m),qv(s,o,T)}catch(be){Wm(s,o,be)}}function qv(s,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){Yv(s,o,m)},function(m){return Wm(s,o,m)}):Yv(s,o,h)}function Yv(s,o,h){o.status="fulfilled",o.value=h,jv(o),s.state=h,o=s.pending,o!==null&&(h=o.next,h===o?s.pending=null:(h=h.next,o.next=h,Xv(s,h)))}function Wm(s,o,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,jv(o),o=o.next;while(o!==m)}s.action=null}function jv(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Xm(s,o){return o}function qm(s,o){if(gn){var h=qt.formState;if(h!==null){e:{var m=Qt;if(gn){if(Gn){t:{for(var S=Gn,T=hs;S.nodeType!==8;){if(!T){S=null;break t}if(S=Za(S.nextSibling),S===null){S=null;break t}}T=S.data,S=T==="F!"||T==="F"?S:null}if(S){Gn=Za(S.nextSibling),m=S.data==="F!";break e}}Ia(m)}m=!1}m&&(o=h[0])}}return h=Hi(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:o},h.queue=m,h=h_.bind(null,Qt,m),m.dispatch=h,m=Hm(!1),T=eg.bind(null,Qt,!1,m.queue),m=Hi(),S={state:o,dispatch:null,action:s,pending:null},m.queue=S,h=pS.bind(null,Qt,S,T,h),S.dispatch=h,m.memoizedState=s,[o,h,!1]}function Zv(s){var o=yi();return Ym(o,Fn,s)}function Ym(s,o,h){if(o=km(s,o,Xm)[0],s=vd(xo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Df(o)}catch(U){throw U===Kl?sn:U}else m=o;o=yi();var S=o.queue,T=S.dispatch;return h!==o.memoizedState&&(Qt.flags|=2048,nl(9,{destroy:void 0},Kv.bind(null,S,h),null)),[m,T,s]}function Kv(s,o){s.action=o}function jm(s){var o=yi(),h=Fn;if(h!==null)return Ym(o,h,s);yi(),o=o.memoizedState,h=yi();var m=h.queue.dispatch;return h.memoizedState=s,[o,m,!1]}function nl(s,o,h,m){return s={tag:s,create:h,deps:m,inst:o,next:null},o=Qt.updateQueue,o===null&&(o=gd(),Qt.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,o.lastEffect=s),s}function _d(){return yi().memoizedState}function yd(s,o,h,m){var S=Hi();Qt.flags|=s,S.memoizedState=nl(1|o,{destroy:void 0},h,m===void 0?null:m)}function xd(s,o,h,m){var S=yi();m=m===void 0?null:m;var T=S.memoizedState.inst;Fn!==null&&m!==null&&Pm(m,Fn.memoizedState.deps)?S.memoizedState=nl(o,T,h,m):(Qt.flags|=s,S.memoizedState=nl(1|o,T,h,m))}function Qv(s,o){yd(8390656,8,s,o)}function Zm(s,o){xd(2048,8,s,o)}function Jv(s){Qt.flags|=4;var o=Qt.updateQueue;if(o===null)o=gd(),Qt.updateQueue=o,o.events=[s];else{var h=o.events;h===null?o.events=[s]:h.push(s)}}function $v(s){var o=yi().memoizedState;return Jv({ref:o,nextImpl:s}),function(){if((Dt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function e_(s,o){return xd(4,2,s,o)}function t_(s,o){return xd(4,4,s,o)}function n_(s,o){if(typeof o=="function"){s=s();var h=o(s);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function i_(s,o,h){h=h!=null?h.concat([s]):null,xd(4,4,n_.bind(null,o,s),h)}function Km(){}function r_(s,o){var h=yi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&Pm(o,m[1])?m[0]:(h.memoizedState=[s,o],s)}function s_(s,o){var h=yi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&Pm(o,m[1]))return m[0];if(m=s(),nu){pt(!0);try{s()}finally{pt(!1)}}return h.memoizedState=[m,o],m}function Qm(s,o,h){return h===void 0||($n&1073741824)!==0&&(tn&261930)===0?s.memoizedState=o:(s.memoizedState=h,s=fn(),Qt.lanes|=s,qa|=s,h)}function a_(s,o,h,m){return Ar(h,o)?h:lc.current!==null?(s=Qm(s,h,m),Ar(s,o)||(Oi=!0),s):($n&42)===0||($n&1073741824)!==0&&(tn&261930)===0?(Oi=!0,s.memoizedState=h):(s=fn(),Qt.lanes|=s,qa|=s,o)}function o_(s,o,h,m,S){var T=Q.p;Q.p=T!==0&&8>T?T:8;var U=Z.T,G={};Z.T=G,eg(s,!1,o,h);try{var ne=S(),be=Z.S;if(be!==null&&be(G,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ze=Cm(ne,m);Lf(s,o,ze,ys(s))}else Lf(s,o,m,ys(s))}catch(Ge){Lf(s,o,{then:function(){},status:"rejected",reason:Ge},ys())}finally{Q.p=T,U!==null&&G.types!==null&&(U.types=G.types),Z.T=U}}function mS(){}function Jm(s,o,h,m){if(s.tag!==5)throw Error(n(476));var S=l_(s).queue;o_(s,S,o,fe,h===null?mS:function(){return u_(s),h(m)})}function l_(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:fe},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:h},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function u_(s){var o=l_(s);o.next===null&&(o=s.alternate.memoizedState),Lf(s,o.next.queue,{},ys())}function $m(){return Gt(bg)}function c_(){return yi().memoizedState}function f_(){return yi().memoizedState}function gS(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var h=ys();s=_o(h);var m=$o(o,s,h);m!==null&&(on(m,o,h),el(m,o,h)),o={cache:Tm()},s.payload=o;return}o=o.return}}function vS(s,o,h){var m=ys();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},bd(s)?d_(o,h):(h=Jh(s,o,h,m),h!==null&&(on(h,s,m),p_(h,o,m)))}function h_(s,o,h){var m=ys();Lf(s,o,h,m)}function Lf(s,o,h,m){var S={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(bd(s))d_(o,S);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var U=o.lastRenderedState,G=T(U,h);if(S.hasEagerState=!0,S.eagerState=G,Ar(G,U))return tr(s,o,S,0),qt===null&&xf(),!1}catch{}finally{}if(h=Jh(s,o,S,m),h!==null)return on(h,s,m),p_(h,o,m),!0}return!1}function eg(s,o,h,m){if(m={lane:2,revertLane:De(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},bd(s)){if(o)throw Error(n(479))}else o=Jh(s,h,m,2),o!==null&&on(o,s,2)}function bd(s){var o=s.alternate;return s===Qt||o!==null&&o===Qt}function d_(s,o){uc=Us=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function p_(s,o,h){if((h&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,zo(s,h)}}var fc={readContext:Gt,use:tl,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useLayoutEffect:oi,useInsertionEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useSyncExternalStore:oi,useId:oi,useHostTransitionStatus:oi,useFormState:oi,useActionState:oi,useOptimistic:oi,useMemoCache:oi,useCacheRefresh:oi};fc.useEffectEvent=oi;var m_={readContext:Gt,use:tl,useCallback:function(s,o){return Hi().memoizedState=[s,o===void 0?null:o],s},useContext:Gt,useEffect:Qv,useImperativeHandle:function(s,o,h){h=h!=null?h.concat([s]):null,yd(4194308,4,n_.bind(null,o,s),h)},useLayoutEffect:function(s,o){return yd(4194308,4,s,o)},useInsertionEffect:function(s,o){yd(4,2,s,o)},useMemo:function(s,o){var h=Hi();o=o===void 0?null:o;var m=s();if(nu){pt(!0);try{s()}finally{pt(!1)}}return h.memoizedState=[m,o],m},useReducer:function(s,o,h){var m=Hi();if(h!==void 0){var S=h(o);if(nu){pt(!0);try{h(o)}finally{pt(!1)}}}else S=o;return m.memoizedState=m.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},m.queue=s,s=s.dispatch=vS.bind(null,Qt,s),[m.memoizedState,s]},useRef:function(s){var o=Hi();return s={current:s},o.memoizedState=s},useState:function(s){s=Hm(s);var o=s.queue,h=h_.bind(null,Qt,o);return o.dispatch=h,[s.memoizedState,h]},useDebugValue:Km,useDeferredValue:function(s,o){var h=Hi();return Qm(h,s,o)},useTransition:function(){var s=Hm(!1);return s=o_.bind(null,Qt,s.queue,!0,!1),Hi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,h){var m=Qt,S=Hi();if(gn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),qt===null)throw Error(n(349));(tn&127)!==0||kv(m,o,h)}S.memoizedState=h;var T={value:h,getSnapshot:o};return S.queue=T,Qv(Hv.bind(null,m,T,s),[s]),m.flags|=2048,nl(9,{destroy:void 0},Vv.bind(null,m,T,h,o),null),h},useId:function(){var s=Hi(),o=qt.identifierPrefix;if(gn){var h=aa,m=ai;h=(m&~(1<<32-$(m)-1)).toString(32)+h,o="_"+o+"R_"+h,h=pd++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=Im++,o="_"+o+"r_"+h.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:$m,useFormState:qm,useActionState:qm,useOptimistic:function(s){var o=Hi();o.memoizedState=o.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=eg.bind(null,Qt,!0,h),h.dispatch=o,[s,o]},useMemoCache:Bm,useCacheRefresh:function(){return Hi().memoizedState=gS.bind(null,Qt)},useEffectEvent:function(s){var o=Hi(),h={impl:s};return o.memoizedState=h,function(){if((Dt&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},tg={readContext:Gt,use:tl,useCallback:r_,useContext:Gt,useEffect:Zm,useImperativeHandle:i_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:vd,useRef:_d,useState:function(){return vd(xo)},useDebugValue:Km,useDeferredValue:function(s,o){var h=yi();return a_(h,Fn.memoizedState,s,o)},useTransition:function(){var s=vd(xo)[0],o=yi().memoizedState;return[typeof s=="boolean"?s:Df(s),o]},useSyncExternalStore:Bv,useId:c_,useHostTransitionStatus:$m,useFormState:Zv,useActionState:Zv,useOptimistic:function(s,o){var h=yi();return Gm(h,Fn,s,o)},useMemoCache:Bm,useCacheRefresh:f_};tg.useEffectEvent=$v;var zs={readContext:Gt,use:tl,useCallback:r_,useContext:Gt,useEffect:Zm,useImperativeHandle:i_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:Vm,useRef:_d,useState:function(){return Vm(xo)},useDebugValue:Km,useDeferredValue:function(s,o){var h=yi();return Fn===null?Qm(h,s,o):a_(h,Fn.memoizedState,s,o)},useTransition:function(){var s=Vm(xo)[0],o=yi().memoizedState;return[typeof s=="boolean"?s:Df(s),o]},useSyncExternalStore:Bv,useId:c_,useHostTransitionStatus:$m,useFormState:jm,useActionState:jm,useOptimistic:function(s,o){var h=yi();return Fn!==null?Gm(h,Fn,s,o):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:Bm,useCacheRefresh:f_};zs.useEffectEvent=$v;function Sd(s,o,h,m){o=s.memoizedState,h=h(m,o),h=h==null?o:_({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Nf={enqueueSetState:function(s,o,h){s=s._reactInternals;var m=ys(),S=_o(m);S.payload=o,h!=null&&(S.callback=h),o=$o(s,S,m),o!==null&&(on(o,s,m),el(o,s,m))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var m=ys(),S=_o(m);S.tag=1,S.payload=o,h!=null&&(S.callback=h),o=$o(s,S,m),o!==null&&(on(o,s,m),el(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=ys(),m=_o(h);m.tag=2,o!=null&&(m.callback=o),o=$o(s,m,h),o!==null&&(on(o,s,h),el(o,s,h))}};function ng(s,o,h,m,S,T,U){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,T,U):o.prototype&&o.prototype.isPureReactComponent?!Yu(h,m)||!Yu(S,T):!0}function ig(s,o,h,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==s&&Nf.enqueueReplaceState(o,o.state,null)}function il(s,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(s=s.defaultProps){h===o&&(h=_({},h));for(var S in s)h[S]===void 0&&(h[S]=s[S])}return h}function g_(s){yf(s)}function rg(s){console.error(s)}function sg(s){yf(s)}function Md(s,o){try{var h=s.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function v_(s,o,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function ag(s,o,h){return h=_o(h),h.tag=3,h.payload={element:null},h.callback=function(){Md(s,o)},h}function og(s){return s=_o(s),s.tag=3,s}function __(s,o,h,m){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var T=m.value;s.payload=function(){return S(T)},s.callback=function(){v_(o,h,m)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(s.callback=function(){v_(o,h,m),typeof S!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})})}function Gi(s,o,h,m,S){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&Fa(o,h,S,!0),h=Hr.current,h!==null){switch(h.tag){case 31:case 13:return Rr===null?_c():h.alternate===null&&li===0&&(li=3),h.flags&=-257,h.flags|=65536,h.lanes=S,m===ud?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),Wf(s,m,S)),!1;case 22:return h.flags|=65536,m===ud?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),Wf(s,m,S)),!1}throw Error(n(435,h.tag))}return Wf(s,m,S),_c(),!1}if(gn)return o=Hr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=S,m!==tc&&(s=Error(n(422),{cause:m}),Pa(fs(s,h)))):(m!==tc&&(o=Error(n(423),{cause:m}),Pa(fs(o,h))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,m=fs(m,h),S=ag(s.stateNode,m,S),Pt(s,S),li!==4&&(li=2)),!1;var T=Error(n(520),{cause:m});if(T=fs(T,h),hu===null?hu=[T]:hu.push(T),li!==4&&(li=2),o===null)return!0;m=fs(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,s=S&-S,h.lanes|=s,s=ag(h.stateNode,m,s),Pt(h,s),!1;case 1:if(o=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Si===null||!Si.has(T))))return h.flags|=65536,S&=-S,h.lanes|=S,S=og(S),__(S,s,h,m),Pt(h,S),!1}h=h.return}while(h!==null);return!1}var Ed=Error(n(461)),Oi=!1;function nr(s,o,h,m){o.child=s===null?hd(o,null,h,m):vo(o,s.child,h,m)}function lg(s,o,h,m,S){h=h.render;var T=o.ref;if("ref"in m){var U={};for(var G in m)G!=="ref"&&(U[G]=m[G])}else U=m;return Qo(o),m=md(s,o,h,U,T,S),G=Um(),s!==null&&!Oi?(zm(s,o,S),xi(s,o,S)):(gn&&G&&Oa(o),o.flags|=1,nr(s,o,m,S),o.child)}function su(s,o,h,m,S){if(s===null){var T=h.type;return typeof T=="function"&&!$h(T)&&T.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=T,Td(s,o,T,m,S)):(s=La(h.type,null,m,o,o.mode,S),s.ref=o.ref,s.return=o,o.child=s)}if(T=s.child,!Ld(s,S)){var U=T.memoizedProps;if(h=h.compare,h=h!==null?h:Yu,h(U,m)&&s.ref===o.ref)return xi(s,o,S)}return o.flags|=1,s=Br(T,m),s.ref=o.ref,s.return=o,o.child=s}function Td(s,o,h,m,S){if(s!==null){var T=s.memoizedProps;if(Yu(T,m)&&s.ref===o.ref)if(Oi=!1,o.pendingProps=m=T,Ld(s,S))(s.flags&131072)!==0&&(Oi=!0);else return o.lanes=s.lanes,xi(s,o,S)}return hc(s,o,h,m,S)}function au(s,o,h,m){var S=m.children,T=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,s!==null){for(m=o.child=s.child,S=0;m!==null;)S=S|m.lanes|m.childLanes,m=m.sibling;m=S&~T}else m=0,o.child=null;return Wr(s,o,T,h,m)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mf(o,T!==null?T.cachePool:null),T!==null?Uv(o,T):Nm(),zv(o);else return m=o.lanes=536870912,Wr(s,o,T!==null?T.baseLanes|h:h,h,m)}else T!==null?(Mf(o,T.cachePool),Uv(o,T),Gr(),o.memoizedState=null):(s!==null&&Mf(o,null),Nm(),Gr());return nr(s,o,S,h),o.child}function ka(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Wr(s,o,h,m,S){var T=ld();return T=T===null?null:{parent:Ni._currentValue,pool:T},o.memoizedState={baseLanes:h,cachePool:T},s!==null&&Mf(o,null),Nm(),zv(o),s!==null&&Fa(s,o,m,!0),o.childLanes=S,null}function Ad(s,o){return o=Dd({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function y_(s,o,h){return vo(o,s.child,null,h),s=Ad(o,o.pendingProps),s.flags|=2,_i(o),o.memoizedState=null,s}function wd(s,o,h){var m=o.pendingProps,S=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(gn){if(m.mode==="hidden")return s=Ad(o,m),o.lanes=536870912,ka(null,s);if(Om(o),(s=Gn)?(s=KT(s,hs),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ho!==null?{id:ai,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},h=Ju(s),h.return=o,o.child=h,di=o,Gn=null)):s=null,s===null)throw Ia(o);return o.lanes=536870912,null}return Ad(o,m)}var T=s.memoizedState;if(T!==null){var U=T.dehydrated;if(Om(o),S)if(o.flags&256)o.flags&=-257,o=y_(s,o,h);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(n(558));else if(Oi||Fa(s,o,h,!1),S=(h&s.childLanes)!==0,Oi||S){if(m=qt,m!==null&&(U=Fl(m,h),U!==0&&U!==T.retryLane))throw T.retryLane=U,wr(s,U),on(m,s,U),Ed;_c(),o=y_(s,o,h)}else s=T.treeContext,Gn=Za(U.nextSibling),di=o,gn=!0,po=null,hs=!1,s!==null&&id(o,s),o=Ad(o,m),o.flags|=4096;return o}return s=Br(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function ou(s,o){var h=o.ref;if(h===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(s===null||s.ref!==h)&&(o.flags|=4194816)}}function hc(s,o,h,m,S){return Qo(o),h=md(s,o,h,m,void 0,S),m=Um(),s!==null&&!Oi?(zm(s,o,S),xi(s,o,S)):(gn&&m&&Oa(o),o.flags|=1,nr(s,o,h,S),o.child)}function Of(s,o,h,m,S,T){return Qo(o),o.updateQueue=null,h=iu(o,m,h,S),Fv(s),m=Um(),s!==null&&!Oi?(zm(s,o,T),xi(s,o,T)):(gn&&m&&Oa(o),o.flags|=1,nr(s,o,h,T),o.child)}function Cd(s,o,h,m,S){if(Qo(o),o.stateNode===null){var T=Xo,U=h.contextType;typeof U=="object"&&U!==null&&(T=Gt(U)),T=new h(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Nf,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},Af(o),U=h.contextType,T.context=typeof U=="object"&&U!==null?Gt(U):Xo,T.state=o.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(Sd(o,h,U,m),T.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(U=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),U!==T.state&&Nf.enqueueReplaceState(T,T.state,null),ac(o,m,T,S),wf(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){T=o.stateNode;var G=o.memoizedProps,ne=il(h,G);T.props=ne;var be=T.context,ze=h.contextType;U=Xo,typeof ze=="object"&&ze!==null&&(U=Gt(ze));var Ge=h.getDerivedStateFromProps;ze=typeof Ge=="function"||typeof T.getSnapshotBeforeUpdate=="function",G=o.pendingProps!==G,ze||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(G||be!==U)&&ig(o,T,m,U),Cr=!1;var Te=o.memoizedState;T.state=Te,ac(o,m,T,S),wf(),be=o.memoizedState,G||Te!==be||Cr?(typeof Ge=="function"&&(Sd(o,h,Ge,m),be=o.memoizedState),(ne=Cr||ng(o,h,ne,m,Te,be,U))?(ze||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=be),T.props=m,T.state=be,T.context=U,m=ne):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,Dm(s,o),U=o.memoizedProps,ze=il(h,U),T.props=ze,Ge=o.pendingProps,Te=T.context,be=h.contextType,ne=Xo,typeof be=="object"&&be!==null&&(ne=Gt(be)),G=h.getDerivedStateFromProps,(be=typeof G=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U!==Ge||Te!==ne)&&ig(o,T,m,ne),Cr=!1,Te=o.memoizedState,T.state=Te,ac(o,m,T,S),wf();var Oe=o.memoizedState;U!==Ge||Te!==Oe||Cr||s!==null&&s.dependencies!==null&&Sf(s.dependencies)?(typeof G=="function"&&(Sd(o,h,G,m),Oe=o.memoizedState),(ze=Cr||ng(o,h,ze,m,Te,Oe,ne)||s!==null&&s.dependencies!==null&&Sf(s.dependencies))?(be||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Oe,ne),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Oe,ne)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||U===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Oe),T.props=m,T.state=Oe,T.context=ne,m=ze):(typeof T.componentDidUpdate!="function"||U===s.memoizedProps&&Te===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&Te===s.memoizedState||(o.flags|=1024),m=!1)}return T=m,ou(s,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,s!==null&&m?(o.child=vo(o,s.child,null,S),o.child=vo(o,null,h,S)):nr(s,o,h,S),o.memoizedState=T.state,s=o.child):s=xi(s,o,S),s}function x_(s,o,h,m){return Zo(),o.flags|=256,nr(s,o,h,m),o.child}var ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yr(s){return{baseLanes:s,cachePool:Rm()}}function Rd(s,o,h){return s=s!==null?s.childLanes&~h:0,o&&(s|=Nr),s}function b_(s,o,h){var m=o.pendingProps,S=!1,T=(o.flags&128)!==0,U;if((U=T)||(U=s!==null&&s.memoizedState===null?!1:(vn.current&2)!==0),U&&(S=!0,o.flags&=-129),U=(o.flags&32)!==0,o.flags&=-33,s===null){if(gn){if(S?yo(o):Gr(),(s=Gn)?(s=KT(s,hs),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ho!==null?{id:ai,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},h=Ju(s),h.return=o,o.child=h,di=o,Gn=null)):s=null,s===null)throw Ia(o);return LS(s)?o.lanes=32:o.lanes=536870912,null}var G=m.children;return m=m.fallback,S?(Gr(),S=o.mode,G=Dd({mode:"hidden",children:G},S),m=qo(m,S,h,null),G.return=o,m.return=o,G.sibling=m,o.child=G,m=o.child,m.memoizedState=yr(h),m.childLanes=Rd(s,U,h),o.memoizedState=ug,ka(null,m)):(yo(o),If(o,G))}var ne=s.memoizedState;if(ne!==null&&(G=ne.dehydrated,G!==null)){if(T)o.flags&256?(yo(o),o.flags&=-257,o=cg(s,o,h)):o.memoizedState!==null?(Gr(),o.child=s.child,o.flags|=128,o=null):(Gr(),G=m.fallback,S=o.mode,m=Dd({mode:"visible",children:m.children},S),G=qo(G,S,h,null),G.flags|=2,m.return=o,G.return=o,m.sibling=G,o.child=m,vo(o,s.child,null,h),m=o.child,m.memoizedState=yr(h),m.childLanes=Rd(s,U,h),o.memoizedState=ug,o=ka(null,m));else if(yo(o),LS(G)){if(U=G.nextSibling&&G.nextSibling.dataset,U)var be=U.dgst;U=be,m=Error(n(419)),m.stack="",m.digest=U,Pa({value:m,source:null,stack:null}),o=cg(s,o,h)}else if(Oi||Fa(s,o,h,!1),U=(h&s.childLanes)!==0,Oi||U){if(U=qt,U!==null&&(m=Fl(U,h),m!==0&&m!==ne.retryLane))throw ne.retryLane=m,wr(s,m),on(U,s,m),Ed;DS(G)||_c(),o=cg(s,o,h)}else DS(G)?(o.flags|=192,o.child=s.child,o=null):(s=ne.treeContext,Gn=Za(G.nextSibling),di=o,gn=!0,po=null,hs=!1,s!==null&&id(o,s),o=If(o,m.children),o.flags|=4096);return o}return S?(Gr(),G=m.fallback,S=o.mode,ne=s.child,be=ne.sibling,m=Br(ne,{mode:"hidden",children:m.children}),m.subtreeFlags=ne.subtreeFlags&65011712,be!==null?G=Br(be,G):(G=qo(G,S,h,null),G.flags|=2),G.return=o,m.return=o,m.sibling=G,o.child=m,ka(null,m),m=o.child,G=s.child.memoizedState,G===null?G=yr(h):(S=G.cachePool,S!==null?(ne=Ni._currentValue,S=S.parent!==ne?{parent:ne,pool:ne}:S):S=Rm(),G={baseLanes:G.baseLanes|h,cachePool:S}),m.memoizedState=G,m.childLanes=Rd(s,U,h),o.memoizedState=ug,ka(s.child,m)):(yo(o),h=s.child,s=h.sibling,h=Br(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,s!==null&&(U=o.deletions,U===null?(o.deletions=[s],o.flags|=16):U.push(s)),o.child=h,o.memoizedState=null,h)}function If(s,o){return o=Dd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Dd(s,o){return s=si(22,s,null,o),s.lanes=0,s}function cg(s,o,h){return vo(o,s.child,null,h),s=If(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function S_(s,o,h){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),sd(s.return,o,h)}function lu(s,o,h,m,S,T){var U=s.memoizedState;U===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:S,treeForkCount:T}:(U.isBackwards=o,U.rendering=null,U.renderingStartTime=0,U.last=m,U.tail=h,U.tailMode=S,U.treeForkCount=T)}function Xr(s,o,h){var m=o.pendingProps,S=m.revealOrder,T=m.tail;m=m.children;var U=vn.current,G=(U&2)!==0;if(G?(U=U&1|2,o.flags|=128):U&=1,Ce(vn,U),nr(s,o,m,h),m=gn?ec:0,!G&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&S_(s,h,o);else if(s.tag===19)S_(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(S){case"forwards":for(h=o.child,S=null;h!==null;)s=h.alternate,s!==null&&ps(s)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),lu(o,!1,S,h,T,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(s=S.alternate,s!==null&&ps(s)===null){o.child=S;break}s=S.sibling,S.sibling=h,h=S,S=s}lu(o,!0,h,null,T,m);break;case"together":lu(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function xi(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),qa|=o.lanes,(h&o.childLanes)===0)if(s!==null){if(Fa(s,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,h=Br(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Br(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function Ld(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Sf(s)))}function _S(s,o,h){switch(o.tag){case 3:it(o,o.stateNode.containerInfo),mo(o,Ni,s.memoizedState.cache),Zo();break;case 27:case 5:ft(o);break;case 4:it(o,o.stateNode.containerInfo);break;case 10:mo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Om(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(yo(o),o.flags|=128,null):(h&o.child.childLanes)!==0?b_(s,o,h):(yo(o),s=xi(s,o,h),s!==null?s.sibling:null);yo(o);break;case 19:var S=(s.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(Fa(s,o,h,!1),m=(h&o.childLanes)!==0),S){if(m)return Xr(s,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ce(vn,vn.current),m)break;return null;case 22:return o.lanes=0,au(s,o,h,o.pendingProps);case 24:mo(o,Ni,s.memoizedState.cache)}return xi(s,o,h)}function Nd(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps)Oi=!0;else{if(!Ld(s,h)&&(o.flags&128)===0)return Oi=!1,_S(s,o,h);Oi=(s.flags&131072)!==0}else Oi=!1,gn&&(o.flags&1048576)!==0&&Rv(o,ec,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=Ql(o.elementType),o.type=s,typeof s=="function")$h(s)?(m=il(s,m),o.tag=1,o=Cd(null,o,s,m,h)):(o.tag=0,o=hc(null,o,s,m,h));else{if(s!=null){var S=s.$$typeof;if(S===N){o.tag=11,o=lg(null,o,s,m,h);break e}else if(S===B){o.tag=14,o=su(null,o,s,m,h);break e}}throw o=ce(s)||s,Error(n(306,o,""))}}return o;case 0:return hc(s,o,o.type,o.pendingProps,h);case 1:return m=o.type,S=il(m,o.pendingProps),Cd(s,o,m,S,h);case 3:e:{if(it(o,o.stateNode.containerInfo),s===null)throw Error(n(387));m=o.pendingProps;var T=o.memoizedState;S=T.element,Dm(s,o),ac(o,m,null,h);var U=o.memoizedState;if(m=U.cache,mo(o,Ni,m),m!==T.cache&&ad(o,[Ni],h,!0),wf(),m=U.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:U.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=x_(s,o,m,h);break e}else if(m!==S){S=fs(Error(n(424)),o),Pa(S),o=x_(s,o,m,h);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Gn=Za(s.firstChild),di=o,gn=!0,po=null,hs=!0,h=hd(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Zo(),m===S){o=xi(s,o,h);break e}nr(s,o,m,h)}o=o.child}return o;case 26:return ou(s,o),s===null?(h=nA(o.type,null,o.pendingProps,null))?o.memoizedState=h:gn||(h=o.type,s=o.pendingProps,m=A_(me.current).createElement(h),m[ri]=o,m[ki]=s,Ir(m,h,s),H(m),o.stateNode=m):o.memoizedState=nA(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ft(o),s===null&&gn&&(m=o.stateNode=$T(o.type,o.pendingProps,me.current),di=o,hs=!0,S=Gn,Sc(o.type)?(NS=S,Gn=Za(m.firstChild)):Gn=S),nr(s,o,o.pendingProps.children,h),ou(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&gn&&((S=m=Gn)&&(m=gN(m,o.type,o.pendingProps,hs),m!==null?(o.stateNode=m,di=o,Gn=Za(m.firstChild),hs=!1,S=!0):S=!1),S||Ia(o)),ft(o),S=o.type,T=o.pendingProps,U=s!==null?s.memoizedProps:null,m=T.children,wS(S,T)?m=null:U!==null&&wS(S,U)&&(o.flags|=32),o.memoizedState!==null&&(S=md(s,o,ru,null,null,h),bg._currentValue=S),ou(s,o),nr(s,o,m,h),o.child;case 6:return s===null&&gn&&((s=h=Gn)&&(h=vN(h,o.pendingProps,hs),h!==null?(o.stateNode=h,di=o,Gn=null,s=!0):s=!1),s||Ia(o)),null;case 13:return b_(s,o,h);case 4:return it(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=vo(o,null,m,h):nr(s,o,m,h),o.child;case 11:return lg(s,o,o.type,o.pendingProps,h);case 7:return nr(s,o,o.pendingProps,h),o.child;case 8:return nr(s,o,o.pendingProps.children,h),o.child;case 12:return nr(s,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,mo(o,o.type,m.value),nr(s,o,m.children,h),o.child;case 9:return S=o.type._context,m=o.pendingProps.children,Qo(o),S=Gt(S),m=m(S),o.flags|=1,nr(s,o,m,h),o.child;case 14:return su(s,o,o.type,o.pendingProps,h);case 15:return Td(s,o,o.type,o.pendingProps,h);case 19:return Xr(s,o,h);case 31:return wd(s,o,h);case 22:return au(s,o,h,o.pendingProps);case 24:return Qo(o),m=Gt(Ni),s===null?(S=ld(),S===null&&(S=qt,T=Tm(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=h),S=T),o.memoizedState={parent:m,cache:S},Af(o),mo(o,Ni,S)):((s.lanes&h)!==0&&(Dm(s,o),ac(o,null,null,h),wf()),S=s.memoizedState,T=o.memoizedState,S.parent!==m?(S={parent:m,cache:m},o.memoizedState=S,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=S),mo(o,Ni,m)):(m=T.cache,mo(o,Ni,m),m!==S.cache&&ad(o,[Ni],h,!0))),nr(s,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Va(s){s.flags|=4}function Pf(s,o,h,m,S){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(S&335544128)===S)if(s.stateNode.complete)s.flags|=8192;else if(ci())s.flags|=8192;else throw Ba=ud,Ef}else s.flags&=-16777217}function fg(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!oA(o))if(ci())s.flags|=8192;else throw Ba=ud,Ef}function bo(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?en():536870912,s.lanes|=o,Zn|=o)}function Ha(s,o){if(!gn)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Bn(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(o)for(var S=s.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags&65011712,m|=S.flags&65011712,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=m,s.childLanes=h,o}function Uf(s,o,h){var m=o.pendingProps;switch(nd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(o),null;case 1:return Bn(o),null;case 3:return h=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),za(Ni),ee(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(nc(o)?Va(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rd())),Bn(o),null;case 26:var S=o.type,T=o.memoizedState;return s===null?(Va(o),T!==null?(Bn(o),fg(o,T)):(Bn(o),Pf(o,S,null,m,h))):T?T!==s.memoizedState?(Va(o),Bn(o),fg(o,T)):(Bn(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&Va(o),Bn(o),Pf(o,S,s,m,h)),null;case 27:if(yt(o),h=me.current,S=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Va(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Bn(o),null}s=Ue.current,nc(o)?Dv(o):(s=$T(S,m,h),o.stateNode=s,Va(o))}return Bn(o),null;case 5:if(yt(o),S=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Va(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Bn(o),null}if(T=Ue.current,nc(o))Dv(o);else{var U=A_(me.current);switch(T){case 1:T=U.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:T=U.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":T=U.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":T=U.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":T=U.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof m.is=="string"?U.createElement("select",{is:m.is}):U.createElement("select"),m.multiple?T.multiple=!0:m.size&&(T.size=m.size);break;default:T=typeof m.is=="string"?U.createElement(S,{is:m.is}):U.createElement(S)}}T[ri]=o,T[ki]=m;e:for(U=o.child;U!==null;){if(U.tag===5||U.tag===6)T.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===o)break e;for(;U.sibling===null;){if(U.return===null||U.return===o)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}o.stateNode=T;e:switch(Ir(T,S,m),S){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Va(o)}}return Bn(o),Pf(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,h),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Va(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(s=me.current,nc(o)){if(s=o.stateNode,h=o.memoizedProps,m=null,S=di,S!==null)switch(S.tag){case 27:case 5:m=S.memoizedProps}s[ri]=o,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||HT(s.nodeValue,h)),s||Ia(o,!0)}else s=A_(s).createTextNode(m),s[ri]=o,o.stateNode=s}return Bn(o),null;case 31:if(h=o.memoizedState,s===null||s.memoizedState!==null){if(m=nc(o),h!==null){if(s===null){if(!m)throw Error(n(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[ri]=o}else Zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bn(o),s=!1}else h=rd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return o.flags&256?(_i(o),o):(_i(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Bn(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=nc(o),m!==null&&m.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[ri]=o}else Zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bn(o),S=!1}else S=rd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=S),S=!0;if(!S)return o.flags&256?(_i(o),o):(_i(o),null)}return _i(o),(o.flags&128)!==0?(o.lanes=h,o):(h=m!==null,s=s!==null&&s.memoizedState!==null,h&&(m=o.child,S=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(S=m.alternate.memoizedState.cachePool.pool),T=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==S&&(m.flags|=2048)),h!==s&&h&&(o.child.flags|=8192),bo(o,o.updateQueue),Bn(o),null);case 4:return ee(),s===null&&SS(o.stateNode.containerInfo),Bn(o),null;case 10:return za(o.type),Bn(o),null;case 19:if(oe(vn),m=o.memoizedState,m===null)return Bn(o),null;if(S=(o.flags&128)!==0,T=m.rendering,T===null)if(S)Ha(m,!1);else{if(li!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=ps(s),T!==null){for(o.flags|=128,Ha(m,!1),s=T.updateQueue,o.updateQueue=s,bo(o,s),o.subtreeFlags=0,s=h,h=o.child;h!==null;)Qu(h,s),h=h.sibling;return Ce(vn,vn.current&1|2),gn&&Na(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&F()>bi&&(o.flags|=128,S=!0,Ha(m,!1),o.lanes=4194304)}else{if(!S)if(s=ps(T),s!==null){if(o.flags|=128,S=!0,s=s.updateQueue,o.updateQueue=s,bo(o,s),Ha(m,!0),m.tail===null&&m.tailMode==="hidden"&&!T.alternate&&!gn)return Bn(o),null}else 2*F()-m.renderingStartTime>bi&&h!==536870912&&(o.flags|=128,S=!0,Ha(m,!1),o.lanes=4194304);m.isBackwards?(T.sibling=o.child,o.child=T):(s=m.last,s!==null?s.sibling=T:o.child=T,m.last=T)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=F(),s.sibling=null,h=vn.current,Ce(vn,S?h&1|2:h&1),gn&&Na(o,m.treeForkCount),s):(Bn(o),null);case 22:case 23:return _i(o),Cf(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(Bn(o),o.subtreeFlags&6&&(o.flags|=8192)):Bn(o),h=o.updateQueue,h!==null&&bo(o,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),s!==null&&oe(Jo),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),za(Ni),Bn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Fs(s,o){switch(nd(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return za(Ni),ee(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return yt(o),null;case 31:if(o.memoizedState!==null){if(_i(o),o.alternate===null)throw Error(n(340));Zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(_i(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Zo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return oe(vn),null;case 4:return ee(),null;case 10:return za(o.type),null;case 22:case 23:return _i(o),Cf(),s!==null&&oe(Jo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return za(Ni),null;case 25:return null;default:return null}}function ms(s,o){switch(nd(o),o.tag){case 3:za(Ni),ee();break;case 26:case 27:case 5:yt(o);break;case 4:ee();break;case 31:o.memoizedState!==null&&_i(o);break;case 13:_i(o);break;case 19:oe(vn);break;case 10:za(o.type);break;case 22:case 23:_i(o),Cf(),s!==null&&oe(Jo);break;case 24:za(Ni)}}function Bs(s,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var S=m.next;h=S;do{if((h.tag&s)===s){m=void 0;var T=h.create,U=h.inst;m=T(),U.destroy=m}h=h.next}while(h!==S)}}catch(G){Tn(o,o.return,G)}}function ur(s,o,h){try{var m=o.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var T=S.next;m=T;do{if((m.tag&s)===s){var U=m.inst,G=U.destroy;if(G!==void 0){U.destroy=void 0,S=o;var ne=h,be=G;try{be()}catch(ze){Tn(S,ne,ze)}}}m=m.next}while(m!==T)}}catch(ze){Tn(o,o.return,ze)}}function oa(s){var o=s.updateQueue;if(o!==null){var h=s.stateNode;try{Pv(o,h)}catch(m){Tn(s,s.return,m)}}}function ir(s,o,h){h.props=il(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){Tn(s,o,m)}}function So(s,o){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(S){Tn(s,o,S)}}function cr(s,o){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(S){Tn(s,o,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){Tn(s,o,S)}else h.current=null}function zf(s){var o=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(S){Tn(s,s.return,S)}}function Wi(s,o,h){try{var m=s.stateNode;cN(m,s.type,h,o),m[ki]=o}catch(S){Tn(s,s.return,S)}}function ei(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Sc(s.type)||s.tag===4}function pn(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ei(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Sc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ga(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(s),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=uo));else if(m!==4&&(m===27&&Sc(s.type)&&(h=s.stateNode,o=null),s=s.child,s!==null))for(Ga(s,o,h),s=s.sibling;s!==null;)Ga(s,o,h),s=s.sibling}function Dr(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(m!==4&&(m===27&&Sc(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(Dr(s,o,h),s=s.sibling;s!==null;)Dr(s,o,h),s=s.sibling}function Od(s){var o=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,S=o.attributes;S.length;)o.removeAttributeNode(S[0]);Ir(o,m,h),o[ri]=s,o[ki]=h}catch(T){Tn(s,s.return,T)}}var ks=!1,Wn=!1,la=!1,M_=typeof WeakSet=="function"?WeakSet:Set,rr=null;function yS(s,o){if(s=s.containerInfo,TS=O_,s=Tv(s),xm(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var S=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var U=0,G=-1,ne=-1,be=0,ze=0,Ge=s,Te=null;t:for(;;){for(var Oe;Ge!==h||S!==0&&Ge.nodeType!==3||(G=U+S),Ge!==T||m!==0&&Ge.nodeType!==3||(ne=U+m),Ge.nodeType===3&&(U+=Ge.nodeValue.length),(Oe=Ge.firstChild)!==null;)Te=Ge,Ge=Oe;for(;;){if(Ge===s)break t;if(Te===h&&++be===S&&(G=U),Te===T&&++ze===m&&(ne=U),(Oe=Ge.nextSibling)!==null)break;Ge=Te,Te=Ge.parentNode}Ge=Oe}h=G===-1||ne===-1?null:{start:G,end:ne}}else h=null}h=h||{start:0,end:0}}else h=null;for(AS={focusedElem:s,selectionRange:h},O_=!1,rr=o;rr!==null;)if(o=rr,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,rr=s;else for(;rr!==null;){switch(o=rr,T=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)S=s[h],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,h=o,S=T.memoizedProps,T=T.memoizedState,m=h.stateNode;try{var wt=il(h.type,S);s=m.getSnapshotBeforeUpdate(wt,T),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ht){Tn(h,h.return,Ht)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,h=s.nodeType,h===9)RS(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":RS(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,rr=s;break}rr=o.return}}function ti(s,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Gs(s,h),m&4&&Bs(5,h);break;case 1:if(Gs(s,h),m&4)if(s=h.stateNode,o===null)try{s.componentDidMount()}catch(U){Tn(h,h.return,U)}else{var S=il(h.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(S,o,s.__reactInternalSnapshotBeforeUpdate)}catch(U){Tn(h,h.return,U)}}m&64&&oa(h),m&512&&So(h,h.return);break;case 3:if(Gs(s,h),m&64&&(s=h.updateQueue,s!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{Pv(s,o)}catch(U){Tn(h,h.return,U)}}break;case 27:o===null&&m&4&&Od(h);case 26:case 5:Gs(s,h),o===null&&m&4&&zf(h),m&512&&So(h,h.return);break;case 12:Gs(s,h);break;case 31:Gs(s,h),m&4&&rl(s,h);break;case 13:Gs(s,h),m&4&&dc(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=g.bind(null,h),_N(s,h))));break;case 22:if(m=h.memoizedState!==null||ks,!m){o=o!==null&&o.memoizedState!==null||Wn,S=ks;var T=Wn;ks=m,(Wn=o)&&!T?Lr(s,h,(h.subtreeFlags&8772)!==0):Gs(s,h),ks=S,Wn=T}break;case 30:break;default:Gs(s,h)}}function Ff(s){var o=s.alternate;o!==null&&(s.alternate=null,Ff(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ao(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var In=null,xr=!1;function Vs(s,o,h){for(h=h.child;h!==null;)Id(s,o,h),h=h.sibling}function Id(s,o,h){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(qe,h)}catch{}switch(h.tag){case 26:Wn||cr(h,o),Vs(s,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Wn||cr(h,o);var m=In,S=xr;Sc(h.type)&&(In=h.stateNode,xr=!1),Vs(s,o,h),_g(h.stateNode),In=m,xr=S;break;case 5:Wn||cr(h,o);case 6:if(m=In,S=xr,In=null,Vs(s,o,h),In=m,xr=S,In!==null)if(xr)try{(In.nodeType===9?In.body:In.nodeName==="HTML"?In.ownerDocument.body:In).removeChild(h.stateNode)}catch(T){Tn(h,o,T)}else try{In.removeChild(h.stateNode)}catch(T){Tn(h,o,T)}break;case 18:In!==null&&(xr?(s=In,jT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),Hd(s)):jT(In,h.stateNode));break;case 4:m=In,S=xr,In=h.stateNode.containerInfo,xr=!0,Vs(s,o,h),In=m,xr=S;break;case 0:case 11:case 14:case 15:ur(2,h,o),Wn||ur(4,h,o),Vs(s,o,h);break;case 1:Wn||(cr(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&ir(h,o,m)),Vs(s,o,h);break;case 21:Vs(s,o,h);break;case 22:Wn=(m=Wn)||h.memoizedState!==null,Vs(s,o,h),Wn=m;break;default:Vs(s,o,h)}}function rl(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hd(s)}catch(h){Tn(o,o.return,h)}}}function dc(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hd(s)}catch(h){Tn(o,o.return,h)}}function hg(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new M_),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new M_),o;default:throw Error(n(435,s.tag))}}function Mo(s,o){var h=hg(s);o.forEach(function(m){if(!h.has(m)){h.add(m);var S=x.bind(null,s,m);m.then(S,S)}})}function Xi(s,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var S=h[m],T=s,U=o,G=U;e:for(;G!==null;){switch(G.tag){case 27:if(Sc(G.type)){In=G.stateNode,xr=!1;break e}break;case 5:In=G.stateNode,xr=!1;break e;case 3:case 4:In=G.stateNode.containerInfo,xr=!0;break e}G=G.return}if(In===null)throw Error(n(160));Id(T,U,S),In=null,xr=!1,T=S.alternate,T!==null&&(T.return=null),S.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)sl(o,s),o=o.sibling}var Hs=null;function sl(s,o){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xi(o,s),qi(s),m&4&&(ur(3,s,s.return),Bs(3,s),ur(5,s,s.return));break;case 1:Xi(o,s),qi(s),m&512&&(Wn||h===null||cr(h,h.return)),m&64&&ks&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var S=Hs;if(Xi(o,s),qi(s),m&512&&(Wn||h===null||cr(h,h.return)),m&4){var T=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,S=S.ownerDocument||S;t:switch(m){case"title":T=S.getElementsByTagName("title")[0],(!T||T[ra]||T[ri]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=S.createElement(m),S.head.insertBefore(T,S.querySelector("head > title"))),Ir(T,m,h),T[ri]=s,H(T),m=T;break e;case"link":var U=sA("link","href",S).get(m+(h.href||""));if(U){for(var G=0;G<U.length;G++)if(T=U[G],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(G,1);break t}}T=S.createElement(m),Ir(T,m,h),S.head.appendChild(T);break;case"meta":if(U=sA("meta","content",S).get(m+(h.content||""))){for(G=0;G<U.length;G++)if(T=U[G],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(G,1);break t}}T=S.createElement(m),Ir(T,m,h),S.head.appendChild(T);break;default:throw Error(n(468,m))}T[ri]=s,H(T),m=T}s.stateNode=m}else aA(S,s.type,s.stateNode);else s.stateNode=rA(S,m,s.memoizedProps);else T!==m?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,m===null?aA(S,s.type,s.stateNode):rA(S,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Wi(s,s.memoizedProps,h.memoizedProps)}break;case 27:Xi(o,s),qi(s),m&512&&(Wn||h===null||cr(h,h.return)),h!==null&&m&4&&Wi(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Xi(o,s),qi(s),m&512&&(Wn||h===null||cr(h,h.return)),s.flags&32){S=s.stateNode;try{Li(S,"")}catch(wt){Tn(s,s.return,wt)}}m&4&&s.stateNode!=null&&(S=s.memoizedProps,Wi(s,S,h!==null?h.memoizedProps:S)),m&1024&&(la=!0);break;case 6:if(Xi(o,s),qi(s),m&4){if(s.stateNode===null)throw Error(n(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(wt){Tn(s,s.return,wt)}}break;case 3:if(R_=null,S=Hs,Hs=w_(o.containerInfo),Xi(o,s),Hs=S,qi(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Hd(o.containerInfo)}catch(wt){Tn(s,s.return,wt)}la&&(la=!1,Pd(s));break;case 4:m=Hs,Hs=w_(s.stateNode.containerInfo),Xi(o,s),qi(s),Hs=m;break;case 12:Xi(o,s),qi(s);break;case 31:Xi(o,s),qi(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Mo(s,m)));break;case 13:Xi(o,s),qi(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(pc=F()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Mo(s,m)));break;case 22:S=s.memoizedState!==null;var ne=h!==null&&h.memoizedState!==null,be=ks,ze=Wn;if(ks=be||S,Wn=ze||ne,Xi(o,s),Wn=ze,ks=be,qi(s),m&8192)e:for(o=s.stateNode,o._visibility=S?o._visibility&-2:o._visibility|1,S&&(h===null||ne||ks||Wn||Wa(s)),h=null,o=s;;){if(o.tag===5||o.tag===26){if(h===null){ne=h=o;try{if(T=ne.stateNode,S)U=T.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{G=ne.stateNode;var Ge=ne.memoizedProps.style,Te=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null;G.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(wt){Tn(ne,ne.return,wt)}}}else if(o.tag===6){if(h===null){ne=o;try{ne.stateNode.nodeValue=S?"":ne.memoizedProps}catch(wt){Tn(ne,ne.return,wt)}}}else if(o.tag===18){if(h===null){ne=o;try{var Oe=ne.stateNode;S?ZT(Oe,!0):ZT(ne.stateNode,!1)}catch(wt){Tn(ne,ne.return,wt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Mo(s,h))));break;case 19:Xi(o,s),qi(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Mo(s,m)));break;case 30:break;case 21:break;default:Xi(o,s),qi(s)}}function qi(s){var o=s.flags;if(o&2){try{for(var h,m=s.return;m!==null;){if(ei(m)){h=m;break}m=m.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var S=h.stateNode,T=pn(s);Dr(s,T,S);break;case 5:var U=h.stateNode;h.flags&32&&(Li(U,""),h.flags&=-33);var G=pn(s);Dr(s,G,U);break;case 3:case 4:var ne=h.stateNode.containerInfo,be=pn(s);Ga(s,be,ne);break;default:throw Error(n(161))}}catch(ze){Tn(s,s.return,ze)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Pd(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Pd(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Gs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ti(s,o.alternate,o),o=o.sibling}function Wa(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:ur(4,o,o.return),Wa(o);break;case 1:cr(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&ir(o,o.return,h),Wa(o);break;case 27:_g(o.stateNode);case 26:case 5:cr(o,o.return),Wa(o);break;case 22:o.memoizedState===null&&Wa(o);break;case 30:Wa(o);break;default:Wa(o)}s=s.sibling}}function Lr(s,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,S=s,T=o,U=T.flags;switch(T.tag){case 0:case 11:case 15:Lr(S,T,h),Bs(4,T);break;case 1:if(Lr(S,T,h),m=T,S=m.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(be){Tn(m,m.return,be)}if(m=T,S=m.updateQueue,S!==null){var G=m.stateNode;try{var ne=S.shared.hiddenCallbacks;if(ne!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ne.length;S++)oc(ne[S],G)}catch(be){Tn(m,m.return,be)}}h&&U&64&&oa(T),So(T,T.return);break;case 27:Od(T);case 26:case 5:Lr(S,T,h),h&&m===null&&U&4&&zf(T),So(T,T.return);break;case 12:Lr(S,T,h);break;case 31:Lr(S,T,h),h&&U&4&&rl(S,T);break;case 13:Lr(S,T,h),h&&U&4&&dc(S,T);break;case 22:T.memoizedState===null&&Lr(S,T,h),So(T,T.return);break;case 30:break;default:Lr(S,T,h)}o=o.sibling}}function al(s,o){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Zl(h))}function uu(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Zl(s))}function fr(s,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)dg(s,o,h,m),o=o.sibling}function dg(s,o,h,m){var S=o.flags;switch(o.tag){case 0:case 11:case 15:fr(s,o,h,m),S&2048&&Bs(9,o);break;case 1:fr(s,o,h,m);break;case 3:fr(s,o,h,m),S&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Zl(s)));break;case 12:if(S&2048){fr(s,o,h,m),s=o.stateNode;try{var T=o.memoizedProps,U=T.id,G=T.onPostCommit;typeof G=="function"&&G(U,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ne){Tn(o,o.return,ne)}}else fr(s,o,h,m);break;case 31:fr(s,o,h,m);break;case 13:fr(s,o,h,m);break;case 23:break;case 22:T=o.stateNode,U=o.alternate,o.memoizedState!==null?T._visibility&2?fr(s,o,h,m):Xa(s,o):T._visibility&2?fr(s,o,h,m):(T._visibility|=2,hr(s,o,h,m,(o.subtreeFlags&10256)!==0||!1)),S&2048&&al(U,o);break;case 24:fr(s,o,h,m),S&2048&&uu(o.alternate,o);break;default:fr(s,o,h,m)}}function hr(s,o,h,m,S){for(S=S&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=s,U=o,G=h,ne=m,be=U.flags;switch(U.tag){case 0:case 11:case 15:hr(T,U,G,ne,S),Bs(8,U);break;case 23:break;case 22:var ze=U.stateNode;U.memoizedState!==null?ze._visibility&2?hr(T,U,G,ne,S):Xa(T,U):(ze._visibility|=2,hr(T,U,G,ne,S)),S&&be&2048&&al(U.alternate,U);break;case 24:hr(T,U,G,ne,S),S&&be&2048&&uu(U.alternate,U);break;default:hr(T,U,G,ne,S)}o=o.sibling}}function Xa(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=s,m=o,S=m.flags;switch(m.tag){case 22:Xa(h,m),S&2048&&al(m.alternate,m);break;case 24:Xa(h,m),S&2048&&uu(m.alternate,m);break;default:Xa(h,m)}o=o.sibling}}var cu=8192;function gs(s,o,h){if(s.subtreeFlags&cu)for(s=s.child;s!==null;)Ud(s,o,h),s=s.sibling}function Ud(s,o,h){switch(s.tag){case 26:gs(s,o,h),s.flags&cu&&s.memoizedState!==null&&DN(h,Hs,s.memoizedState,s.memoizedProps);break;case 5:gs(s,o,h);break;case 3:case 4:var m=Hs;Hs=w_(s.stateNode.containerInfo),gs(s,o,h),Hs=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=cu,cu=16777216,gs(s,o,h),cu=m):gs(s,o,h));break;default:gs(s,o,h)}}function fu(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function ol(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];rr=m,pi(m,s)}fu(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qr(s),s=s.sibling}function qr(s){switch(s.tag){case 0:case 11:case 15:ol(s),s.flags&2048&&ur(9,s,s.return);break;case 3:ol(s);break;case 12:ol(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Yr(s)):ol(s);break;default:ol(s)}}function Yr(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];rr=m,pi(m,s)}fu(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:ur(8,o,o.return),Yr(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Yr(o));break;default:Yr(o)}s=s.sibling}}function pi(s,o){for(;rr!==null;){var h=rr;switch(h.tag){case 0:case 11:case 15:ur(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Zl(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,rr=m;else e:for(h=s;rr!==null;){m=rr;var S=m.sibling,T=m.return;if(Ff(m),m===h){rr=null;break e}if(S!==null){S.return=T,rr=S;break e}rr=T}}}var Eo={getCacheForType:function(s){var o=Gt(Ni),h=o.data.get(s);return h===void 0&&(h=s(),o.data.set(s,h)),h},cacheSignal:function(){return Gt(Ni).controller.signal}},Jt=typeof WeakMap=="function"?WeakMap:Map,Dt=0,qt=null,an=null,tn=0,_n=0,br=null,Ws=!1,ua=!1,pg=!1,vs=0,li=0,qa=0,ll=0,Bf=0,Nr=0,Zn=0,hu=null,mi=null,gi=!1,pc=0,mg=0,bi=1/0,ui=null,Si=null,Pn=0,_s=null,mc=null,Xs=0,gc=0,vc=null,kf=null,ul=0,du=null;function ys(){return(Dt&2)!==0&&tn!==0?tn&-tn:Z.T!==null?De():Bl()}function fn(){if(Nr===0)if((tn&536870912)===0||gn){var s=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),Nr=s}else Nr=536870912;return s=Hr.current,s!==null&&(s.flags|=32),Nr}function on(s,o,h){(s===qt&&(_n===2||_n===9)||s.cancelPendingCommit!==null)&&(fl(s,0),Ii(s,tn,Nr,!1)),ii(s,h),((Dt&2)===0||s!==qt)&&(s===qt&&((Dt&2)===0&&(ll|=h),li===4&&Ii(s,tn,Nr,!1)),Ke(s))}function hn(s,o,h){if((Dt&6)!==0)throw Error(n(327));var m=!h&&(o&127)===0&&(o&s.expiredLanes)===0||tt(s,o),S=m?Vf(s,o):Or(s,o,!0),T=m;do{if(S===0){ua&&!m&&Ii(s,o,0,!1);break}else{if(h=s.current.alternate,T&&!Un(h)){S=Or(s,o,!1),T=!1;continue}if(S===2){if(T=o,s.errorRecoveryDisabledLanes&T)var U=0;else U=s.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){o=U;e:{var G=s;S=hu;var ne=G.current.memoizedState.isDehydrated;if(ne&&(fl(G,U).flags|=256),U=Or(G,U,!1),U!==2){if(pg&&!ne){G.errorRecoveryDisabledLanes|=T,ll|=T,S=4;break e}T=mi,mi=S,T!==null&&(mi===null?mi=T:mi.push.apply(mi,T))}S=U}if(T=!1,S!==2)continue}}if(S===1){fl(s,0),Ii(s,o,0,!0);break}e:{switch(m=s,T=S,T){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Ii(m,o,Nr,!Ws);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(S=pc+300-F(),10<S)){if(Ii(m,o,Nr,!Ws),Be(m,0,!0)!==0)break e;Xs=o,m.timeoutHandle=qT(mn.bind(null,m,h,mi,ui,gi,o,Nr,ll,Zn,Ws,T,"Throttled",-0,0),S);break e}mn(m,h,mi,ui,gi,o,Nr,ll,Zn,Ws,T,null,-0,0)}}break}while(!0);Ke(s)}function mn(s,o,h,m,S,T,U,G,ne,be,ze,Ge,Te,Oe){if(s.timeoutHandle=-1,Ge=o.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:uo},Ud(o,T,Ge);var wt=(T&62914560)===T?pc-F():(T&4194048)===T?mg-F():0;if(wt=LN(Ge,wt),wt!==null){Xs=T,s.cancelPendingCommit=wt(Ao.bind(null,s,o,T,h,m,S,U,G,ne,ze,Ge,null,Te,Oe)),Ii(s,T,U,!be);return}}Ao(s,o,T,h,m,S,U,G,ne)}function Un(s){for(var o=s;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var S=h[m],T=S.getSnapshot;S=S.value;try{if(!Ar(T(),S))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ii(s,o,h,m){o&=~Bf,o&=~ll,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var S=o;0<S;){var T=31-$(S),U=1<<T;m[T]=-1,S&=~U}h!==0&&Uo(s,h,o)}function ca(){return(Dt&6)===0?(_t(0),!1):!0}function cl(){if(an!==null){if(_n===0)var s=an.return;else s=an,Ua=Ko=null,Fm(s),eu=null,tu=0,s=an;for(;s!==null;)ms(s.alternate,s),s=s.return;an=null}}function fl(s,o){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,dN(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Xs=0,cl(),qt=s,an=h=Br(s.current,null),tn=o,_n=0,br=null,Ws=!1,ua=tt(s,o),pg=!1,Zn=Nr=Bf=ll=qa=li=0,mi=hu=null,gi=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var S=31-$(m),T=1<<S;o|=s[S],m&=~T}return vs=o,xf(),h}function Ya(s,o){Qt=null,Z.H=fc,o===Kl||o===sn?(o=Jl(),_n=3):o===Ef?(o=Jl(),_n=4):_n=o===Ed?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,br=o,an===null&&(li=1,Md(s,fs(o,s.current)))}function ci(){var s=Hr.current;return s===null?!0:(tn&4194048)===tn?Rr===null:(tn&62914560)===tn||(tn&536870912)!==0?s===Rr:!1}function To(){var s=Z.H;return Z.H=fc,s===null?fc:s}function hl(){var s=Z.A;return Z.A=Eo,s}function _c(){li=4,Ws||(tn&4194048)!==tn&&Hr.current!==null||(ua=!0),(qa&134217727)===0&&(ll&134217727)===0||qt===null||Ii(qt,tn,Nr,!1)}function Or(s,o,h){var m=Dt;Dt|=2;var S=To(),T=hl();(qt!==s||tn!==o)&&(ui=null,fl(s,o)),o=!1;var U=li;e:do try{if(_n!==0&&an!==null){var G=an,ne=br;switch(_n){case 8:cl(),U=6;break e;case 3:case 2:case 9:case 6:Hr.current===null&&(o=!0);var be=_n;if(_n=0,br=null,pu(s,G,ne,be),h&&ua){U=0;break e}break;default:be=_n,_n=0,br=null,pu(s,G,ne,be)}}yc(),U=li;break}catch(ze){Ya(s,ze)}while(!0);return o&&s.shellSuspendCounter++,Ua=Ko=null,Dt=m,Z.H=S,Z.A=T,an===null&&(qt=null,tn=0,xf()),U}function yc(){for(;an!==null;)zd(an)}function Vf(s,o){var h=Dt;Dt|=2;var m=To(),S=hl();qt!==s||tn!==o?(ui=null,bi=F()+500,fl(s,o)):ua=tt(s,o);e:do try{if(_n!==0&&an!==null){o=an;var T=br;t:switch(_n){case 1:_n=0,br=null,pu(s,o,T,1);break;case 2:case 9:if(Vr(T)){_n=0,br=null,Hf(o);break}o=function(){_n!==2&&_n!==9||qt!==s||(_n=7),Ke(s)},T.then(o,o);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:Vr(T)?(_n=0,br=null,Hf(o)):(_n=0,br=null,pu(s,o,T,7));break;case 5:var U=null;switch(an.tag){case 26:U=an.memoizedState;case 5:case 27:var G=an;if(U?oA(U):G.stateNode.complete){_n=0,br=null;var ne=G.sibling;if(ne!==null)an=ne;else{var be=G.return;be!==null?(an=be,dl(be)):an=null}break t}}_n=0,br=null,pu(s,o,T,5);break;case 6:_n=0,br=null,pu(s,o,T,6);break;case 8:cl(),li=6;break e;default:throw Error(n(462))}}jr();break}catch(ze){Ya(s,ze)}while(!0);return Ua=Ko=null,Z.H=m,Z.A=S,Dt=h,an!==null?0:(qt=null,tn=0,xf(),li)}function jr(){for(;an!==null&&!$e();)zd(an)}function zd(s){var o=Nd(s.alternate,s,vs);s.memoizedProps=s.pendingProps,o===null?dl(s):an=o}function Hf(s){var o=s,h=o.alternate;switch(o.tag){case 15:case 0:o=Of(h,o,o.pendingProps,o.type,void 0,tn);break;case 11:o=Of(h,o,o.pendingProps,o.type.render,o.ref,tn);break;case 5:Fm(o);default:ms(h,o),o=an=Qu(o,vs),o=Nd(h,o,vs)}s.memoizedProps=s.pendingProps,o===null?dl(s):an=o}function pu(s,o,h,m){Ua=Ko=null,Fm(o),eu=null,tu=0;var S=o.return;try{if(Gi(s,S,o,h,tn)){li=1,Md(s,fs(h,s.current)),an=null;return}}catch(T){if(S!==null)throw an=S,T;li=1,Md(s,fs(h,s.current)),an=null;return}o.flags&32768?(gn||m===1?s=!0:ua||(tn&536870912)!==0?s=!1:(Ws=s=!0,(m===2||m===9||m===3||m===6)&&(m=Hr.current,m!==null&&m.tag===13&&(m.flags|=16384))),Gf(o,s)):dl(o)}function dl(s){var o=s;do{if((o.flags&32768)!==0){Gf(o,Ws);return}s=o.return;var h=Uf(o.alternate,o,vs);if(h!==null){an=h;return}if(o=o.sibling,o!==null){an=o;return}an=o=s}while(o!==null);li===0&&(li=5)}function Gf(s,o){do{var h=Fs(s.alternate,s);if(h!==null){h.flags&=32767,an=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(s=s.sibling,s!==null)){an=s;return}an=s=h}while(s!==null);li=6,an=null}function Ao(s,o,h,m,S,T,U,G,ne){s.cancelPendingCommit=null;do xc();while(Pn!==0);if((Dt&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(T=o.lanes|o.childLanes,T|=er,Bi(s,h,T,U,G,ne),s===qt&&(an=qt=null,tn=0),mc=o,_s=s,Xs=h,gc=T,vc=S,kf=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,C(_e,function(){return Fd(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Z.T,Z.T=null,S=Q.p,Q.p=2,U=Dt,Dt|=4;try{yS(s,o,h)}finally{Dt=U,Q.p=S,Z.T=m}}Pn=1,Pi(),wo(),mu()}}function Pi(){if(Pn===1){Pn=0;var s=_s,o=mc,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=Z.T,Z.T=null;var m=Q.p;Q.p=2;var S=Dt;Dt|=4;try{sl(o,s);var T=AS,U=Tv(s.containerInfo),G=T.focusedElem,ne=T.selectionRange;if(U!==G&&G&&G.ownerDocument&&Hn(G.ownerDocument.documentElement,G)){if(ne!==null&&xm(G)){var be=ne.start,ze=ne.end;if(ze===void 0&&(ze=be),"selectionStart"in G)G.selectionStart=be,G.selectionEnd=Math.min(ze,G.value.length);else{var Ge=G.ownerDocument||document,Te=Ge&&Ge.defaultView||window;if(Te.getSelection){var Oe=Te.getSelection(),wt=G.textContent.length,Ht=Math.min(ne.start,wt),qn=ne.end===void 0?Ht:Math.min(ne.end,wt);!Oe.extend&&Ht>qn&&(U=qn,qn=Ht,Ht=U);var he=ju(G,Ht),re=ju(G,qn);if(he&&re&&(Oe.rangeCount!==1||Oe.anchorNode!==he.node||Oe.anchorOffset!==he.offset||Oe.focusNode!==re.node||Oe.focusOffset!==re.offset)){var ye=Ge.createRange();ye.setStart(he.node,he.offset),Oe.removeAllRanges(),Ht>qn?(Oe.addRange(ye),Oe.extend(re.node,re.offset)):(ye.setEnd(re.node,re.offset),Oe.addRange(ye))}}}}for(Ge=[],Oe=G;Oe=Oe.parentNode;)Oe.nodeType===1&&Ge.push({element:Oe,left:Oe.scrollLeft,top:Oe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ge.length;G++){var Ve=Ge[G];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}O_=!!TS,AS=TS=null}finally{Dt=S,Q.p=m,Z.T=h}}s.current=o,Pn=2}}function wo(){if(Pn===2){Pn=0;var s=_s,o=mc,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=Z.T,Z.T=null;var m=Q.p;Q.p=2;var S=Dt;Dt|=4;try{ti(s,o.alternate,o)}finally{Dt=S,Q.p=m,Z.T=h}}Pn=3}}function mu(){if(Pn===4||Pn===3){Pn=0,q();var s=_s,o=mc,h=Xs,m=kf;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pn=5:(Pn=0,mc=_s=null,ja(s,s.pendingLanes));var S=s.pendingLanes;if(S===0&&(Si=null),so(h),o=o.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(qe,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Z.T,S=Q.p,Q.p=2,Z.T=null;try{for(var T=s.onRecoverableError,U=0;U<m.length;U++){var G=m[U];T(G.value,{componentStack:G.stack})}}finally{Z.T=o,Q.p=S}}(Xs&3)!==0&&xc(),Ke(s),S=s.pendingLanes,(h&261930)!==0&&(S&42)!==0?s===du?ul++:(ul=0,du=s):ul=0,_t(0)}}function ja(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Zl(o)))}function xc(){return Pi(),wo(),mu(),Fd()}function Fd(){if(Pn!==5)return!1;var s=_s,o=gc;gc=0;var h=so(Xs),m=Z.T,S=Q.p;try{Q.p=32>h?32:h,Z.T=null,h=vc,vc=null;var T=_s,U=Xs;if(Pn=0,mc=_s=null,Xs=0,(Dt&6)!==0)throw Error(n(331));var G=Dt;if(Dt|=4,qr(T.current),dg(T,T.current,U,h),Dt=G,_t(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(qe,T)}catch{}return!0}finally{Q.p=S,Z.T=m,ja(s,o)}}function gg(s,o,h){o=fs(h,o),o=ag(s.stateNode,o,2),s=$o(s,o,2),s!==null&&(ii(s,2),Ke(s))}function Tn(s,o,h){if(s.tag===3)gg(s,s,h);else for(;o!==null;){if(o.tag===3){gg(o,s,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))){s=fs(h,s),h=og(2),m=$o(o,h,2),m!==null&&(__(h,m,o,s),ii(m,2),Ke(m));break}}o=o.return}}function Wf(s,o,h){var m=s.pingCache;if(m===null){m=s.pingCache=new Jt;var S=new Set;m.set(o,S)}else S=m.get(o),S===void 0&&(S=new Set,m.set(o,S));S.has(h)||(pg=!0,S.add(h),s=l.bind(null,s,o,h),o.then(s,s))}function l(s,o,h){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,qt===s&&(tn&h)===h&&(li===4||li===3&&(tn&62914560)===tn&&300>F()-pc?(Dt&2)===0&&fl(s,0):Bf|=h,Zn===tn&&(Zn=0)),Ke(s)}function c(s,o){o===0&&(o=en()),s=wr(s,o),s!==null&&(ii(s,o),Ke(s))}function g(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),c(s,h)}function x(s,o){var h=0;switch(s.tag){case 31:case 13:var m=s.stateNode,S=s.memoizedState;S!==null&&(h=S.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),c(s,h)}function C(s,o){return Ee(s,o)}var L=null,V=null,ie=!1,Ne=!1,Xe=!1,ut=0;function Ke(s){s!==V&&s.next===null&&(V===null?L=V=s:V=V.next=s),Ne=!0,ie||(ie=!0,pe())}function _t(s,o){if(!Xe&&Ne){Xe=!0;do for(var h=!1,m=L;m!==null;){if(s!==0){var S=m.pendingLanes;if(S===0)var T=0;else{var U=m.suspendedLanes,G=m.pingedLanes;T=(1<<31-$(42|s)+1)-1,T&=S&~(U&~G),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,Me(m,T))}else T=tn,T=Be(m,m===qt?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||tt(m,T)||(h=!0,Me(m,T));m=m.next}while(h);Xe=!1}}function Zt(){Mi()}function Mi(){Ne=ie=!1;var s=0;ut!==0&&hN()&&(s=ut);for(var o=F(),h=null,m=L;m!==null;){var S=m.next,T=bc(m,o);T===0?(m.next=null,h===null?L=S:h.next=S,S===null&&(V=h)):(h=m,(s!==0||(T&3)!==0)&&(Ne=!0)),m=S}Pn!==0&&Pn!==5||_t(s),ut!==0&&(ut=0)}function bc(s,o){for(var h=s.suspendedLanes,m=s.pingedLanes,S=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var U=31-$(T),G=1<<U,ne=S[U];ne===-1?((G&h)===0||(G&m)!==0)&&(S[U]=Lt(G,o)):ne<=o&&(s.expiredLanes|=G),T&=~G}if(o=qt,h=tn,h=Be(s,s===o?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===o&&(_n===2||_n===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Ct(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||tt(s,h)){if(o=h&-h,o===s.callbackPriority)return o;switch(m!==null&&Ct(m),so(h)){case 2:case 8:h=Fe;break;case 32:h=_e;break;case 268435456:h=He;break;default:h=_e}return m=pl.bind(null,s),h=Ee(h,m),s.callbackPriority=o,s.callbackNode=h,o}return m!==null&&m!==null&&Ct(m),s.callbackPriority=2,s.callbackNode=null,2}function pl(s,o){if(Pn!==0&&Pn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(xc()&&s.callbackNode!==h)return null;var m=tn;return m=Be(s,s===qt?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(hn(s,m,o),bc(s,F()),s.callbackNode!=null&&s.callbackNode===h?pl.bind(null,s):null)}function Me(s,o){if(xc())return null;hn(s,o,!0)}function pe(){pN(function(){(Dt&6)!==0?Ee(Le,Zt):Mi()})}function De(){if(ut===0){var s=go;s===0&&(s=et,et<<=1,(et&261888)===0&&(et=256)),ut=s}return ut}function ot(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:af(""+s)}function zt(s,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,s.id&&h.setAttribute("form",s.id),o.parentNode.insertBefore(h,o),s=new FormData(s),h.parentNode.removeChild(h),s}function fi(s,o,h,m,S){if(o==="submit"&&h&&h.stateNode===S){var T=ot((S[ki]||null).action),U=m.submitter;U&&(o=(o=U[ki]||null)?ot(o.formAction):U.getAttribute("formAction"),o!==null&&(T=o,U=null));var G=new uf("action","action",null,m,S);s.push({event:G,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ut!==0){var ne=U?zt(S,U):new FormData(S);Jm(h,{pending:!0,data:ne,method:S.method,action:T},null,ne)}}else typeof T=="function"&&(G.preventDefault(),ne=U?zt(S,U):new FormData(S),Jm(h,{pending:!0,data:ne,method:S.method,action:T},T,ne))},currentTarget:S}]})}}for(var Bt=0;Bt<_f.length;Bt++){var bn=_f[Bt],sr=bn.toLowerCase(),wn=bn[0].toUpperCase()+bn.slice(1);Ls(sr,"on"+wn)}Ls(Qh,"onAnimationEnd"),Ls(vf,"onAnimationIteration"),Ls(Sm,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(wv,"onTransitionRun"),Ls(fS,"onTransitionStart"),Ls(Cv,"onTransitionCancel"),Ls(Mm,"onTransitionEnd"),de("onMouseEnter",["mouseout","mouseover"]),de("onMouseLeave",["mouseout","mouseover"]),de("onPointerEnter",["pointerout","pointerover"]),de("onPointerLeave",["pointerout","pointerover"]),Se("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Se("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Se("onBeforeInput",["compositionend","keypress","textInput","paste"]),Se("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Se("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Se("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qs));function FT(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],S=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var U=m.length-1;0<=U;U--){var G=m[U],ne=G.instance,be=G.currentTarget;if(G=G.listener,ne!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=be;try{T(S)}catch(ze){yf(ze)}S.currentTarget=null,T=ne}else for(U=0;U<m.length;U++){if(G=m[U],ne=G.instance,be=G.currentTarget,G=G.listener,ne!==T&&S.isPropagationStopped())break e;T=G,S.currentTarget=be;try{T(S)}catch(ze){yf(ze)}S.currentTarget=null,T=ne}}}}function yn(s,o){var h=o[ls];h===void 0&&(h=o[ls]=new Set);var m=s+"__bubble";h.has(m)||(BT(o,s,2,!1),h.add(m))}function bS(s,o,h){var m=0;o&&(m|=4),BT(h,s,m,o)}var E_="_reactListening"+Math.random().toString(36).slice(2);function SS(s){if(!s[E_]){s[E_]=!0,ue.forEach(function(h){h!=="selectionchange"&&(xS.has(h)||bS(h,!1,s),bS(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[E_]||(o[E_]=!0,bS("selectionchange",!1,o))}}function BT(s,o,h,m){switch(pA(o)){case 2:var S=IN;break;case 8:S=PN;break;default:S=zS}h=S.bind(null,o,h,s),S=void 0,!rm||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),m?S!==void 0?s.addEventListener(o,h,{capture:!0,passive:S}):s.addEventListener(o,h,!0):S!==void 0?s.addEventListener(o,h,{passive:S}):s.addEventListener(o,h,!1)}function MS(s,o,h,m,S){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var U=m.tag;if(U===3||U===4){var G=m.stateNode.containerInfo;if(G===S)break;if(U===4)for(U=m.return;U!==null;){var ne=U.tag;if((ne===3||ne===4)&&U.stateNode.containerInfo===S)return;U=U.return}for(;G!==null;){if(U=oo(G),U===null)return;if(ne=U.tag,ne===5||ne===6||ne===26||ne===27){m=T=U;continue e}G=G.parentNode}}m=m.return}im(function(){var be=T,ze=Fh(h),Ge=[];e:{var Te=Ds.get(s);if(Te!==void 0){var Oe=uf,wt=s;switch(s){case"keypress":if(lf(h)===0)break e;case"keydown":case"keyup":Oe=Wl;break;case"focusin":wt="focus",Oe=Hh;break;case"focusout":wt="blur",Oe=Hh;break;case"beforeblur":case"afterblur":Oe=Hh;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=dv;break;case Qh:case vf:case Sm:Oe=lS;break;case Mm:Oe=cS;break;case"scroll":case"scrollend":Oe=sv;break;case"wheel":Oe=mv;break;case"copy":case"cut":case"paste":Oe=uv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=lm;break;case"toggle":case"beforetoggle":Oe=vv}var Ht=(o&4)!==0,qn=!Ht&&(s==="scroll"||s==="scrollend"),he=Ht?Te!==null?Te+"Capture":null:Te;Ht=[];for(var re=be,ye;re!==null;){var Ve=re;if(ye=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||ye===null||he===null||(Ve=Bu(re,he),Ve!=null&&Ht.push(vg(re,Ve,ye))),qn)break;re=re.return}0<Ht.length&&(Te=new Oe(Te,wt,null,h,ze),Ge.push({event:Te,listeners:Ht}))}}if((o&7)===0){e:{if(Te=s==="mouseover"||s==="pointerover",Oe=s==="mouseout"||s==="pointerout",Te&&h!==zh&&(wt=h.relatedTarget||h.fromElement)&&(oo(wt)||wt[os]))break e;if((Oe||Te)&&(Te=ze.window===ze?ze:(Te=ze.ownerDocument)?Te.defaultView||Te.parentWindow:window,Oe?(wt=h.relatedTarget||h.toElement,Oe=be,wt=wt?oo(wt):null,wt!==null&&(qn=a(wt),Ht=wt.tag,wt!==qn||Ht!==5&&Ht!==27&&Ht!==6)&&(wt=null)):(Oe=null,wt=be),Oe!==wt)){if(Ht=sm,Ve="onMouseLeave",he="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(Ht=lm,Ve="onPointerLeave",he="onPointerEnter",re="pointer"),qn=Oe==null?Te:ko(Oe),ye=wt==null?Te:ko(wt),Te=new Ht(Ve,re+"leave",Oe,h,ze),Te.target=qn,Te.relatedTarget=ye,Ve=null,oo(ze)===be&&(Ht=new Ht(he,re+"enter",wt,h,ze),Ht.target=ye,Ht.relatedTarget=qn,Ve=Ht),qn=Ve,Oe&&wt)t:{for(Ht=oN,he=Oe,re=wt,ye=0,Ve=he;Ve;Ve=Ht(Ve))ye++;Ve=0;for(var Ut=re;Ut;Ut=Ht(Ut))Ve++;for(;0<ye-Ve;)he=Ht(he),ye--;for(;0<Ve-ye;)re=Ht(re),Ve--;for(;ye--;){if(he===re||re!==null&&he===re.alternate){Ht=he;break t}he=Ht(he),re=Ht(re)}Ht=null}else Ht=null;Oe!==null&&kT(Ge,Te,Oe,Ht,!1),wt!==null&&qn!==null&&kT(Ge,qn,wt,Ht,!0)}}e:{if(Te=be?ko(be):window,Oe=Te.nodeName&&Te.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Te.type==="file")var Nn=mm;else if(pm(Te))if(Ca)Nn=Ev;else{Nn=_m;var Rt=Sv}else Oe=Te.nodeName,!Oe||Oe.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?be&&Cs(be.elementType)&&(Nn=mm):Nn=Mv;if(Nn&&(Nn=Nn(s,be))){Zh(Ge,Nn,h,ze);break e}Rt&&Rt(s,Te,be),s==="focusout"&&be&&Te.type==="number"&&be.memoizedProps.value!=null&&jn(Te,"number",Te.value)}switch(Rt=be?ko(be):window,s){case"focusin":(pm(Rt)||Rt.contentEditable==="true")&&(Ra=Rt,Da=be,Zu=null);break;case"focusout":Zu=Da=Ra=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Ku(Ge,h,ze);break;case"selectionchange":if(Av)break;case"keydown":case"keyup":Ku(Ge,h,ze)}var un;if(Xl)e:{switch(s){case"compositionstart":var Sn="onCompositionStart";break e;case"compositionend":Sn="onCompositionEnd";break e;case"compositionupdate":Sn="onCompositionUpdate";break e}Sn=void 0}else ql?jh(s,h)&&(Sn="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Sn="onCompositionStart");Sn&&(cm&&h.locale!=="ko"&&(ql||Sn!=="onCompositionStart"?Sn==="onCompositionEnd"&&ql&&(un=of()):(cs=ze,kh="value"in cs?cs.value:cs.textContent,ql=!0)),Rt=T_(be,Sn),0<Rt.length&&(Sn=new Gh(Sn,s,null,h,ze),Ge.push({event:Sn,listeners:Rt}),un?Sn.data=un:(un=fm(h),un!==null&&(Sn.data=un)))),(un=Yh?xv(s,h):hm(s,h))&&(Sn=T_(be,"onBeforeInput"),0<Sn.length&&(Rt=new Gh("onBeforeInput","beforeinput",null,h,ze),Ge.push({event:Rt,listeners:Sn}),Rt.data=un)),fi(Ge,s,be,h,ze)}FT(Ge,o)})}function vg(s,o,h){return{instance:s,listener:o,currentTarget:h}}function T_(s,o){for(var h=o+"Capture",m=[];s!==null;){var S=s,T=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||T===null||(S=Bu(s,h),S!=null&&m.unshift(vg(s,S,T)),S=Bu(s,o),S!=null&&m.push(vg(s,S,T))),s.tag===3)return m;s=s.return}return[]}function oN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function kT(s,o,h,m,S){for(var T=o._reactName,U=[];h!==null&&h!==m;){var G=h,ne=G.alternate,be=G.stateNode;if(G=G.tag,ne!==null&&ne===m)break;G!==5&&G!==26&&G!==27||be===null||(ne=be,S?(be=Bu(h,T),be!=null&&U.unshift(vg(h,be,ne))):S||(be=Bu(h,T),be!=null&&U.push(vg(h,be,ne)))),h=h.return}U.length!==0&&s.push({event:o,listeners:U})}var lN=/\r\n?/g,uN=/\u0000|\uFFFD/g;function VT(s){return(typeof s=="string"?s:""+s).replace(lN,`
`).replace(uN,"")}function HT(s,o){return o=VT(o),VT(s)===o}function Xn(s,o,h,m,S,T){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Li(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Li(s,""+m);break;case"className":It(s,"class",m);break;case"tabIndex":It(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":It(s,h,m);break;case"style":Vl(s,m,T);break;case"data":if(o!=="object"){It(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=af(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(o!=="input"&&Xn(s,o,"name",S.name,S,null),Xn(s,o,"formEncType",S.formEncType,S,null),Xn(s,o,"formMethod",S.formMethod,S,null),Xn(s,o,"formTarget",S.formTarget,S,null)):(Xn(s,o,"encType",S.encType,S,null),Xn(s,o,"method",S.method,S,null),Xn(s,o,"target",S.target,S,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=af(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=uo);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=af(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":yn("beforetoggle",s),yn("toggle",s),Tt(s,"popover",m);break;case"xlinkActuate":At(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":At(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":At(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":At(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":At(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":At(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":At(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":At(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":At(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Tt(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=iv.get(h)||h,Tt(s,h,m))}}function ES(s,o,h,m,S,T){switch(h){case"style":Vl(s,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"children":typeof m=="string"?Li(s,m):(typeof m=="number"||typeof m=="bigint")&&Li(s,""+m);break;case"onScroll":m!=null&&yn("scroll",s);break;case"onScrollEnd":m!=null&&yn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=uo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!we.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),o=h.slice(2,S?h.length-7:void 0),T=s[ki]||null,T=T!=null?T[h]:null,typeof T=="function"&&s.removeEventListener(o,T,S),typeof m=="function")){typeof T!="function"&&T!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(o,m,S);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):Tt(s,h,m)}}}function Ir(s,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yn("error",s),yn("load",s);var m=!1,S=!1,T;for(T in h)if(h.hasOwnProperty(T)){var U=h[T];if(U!=null)switch(T){case"src":m=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Xn(s,o,T,U,h,null)}}S&&Xn(s,o,"srcSet",h.srcSet,h,null),m&&Xn(s,o,"src",h.src,h,null);return;case"input":yn("invalid",s);var G=T=U=S=null,ne=null,be=null;for(m in h)if(h.hasOwnProperty(m)){var ze=h[m];if(ze!=null)switch(m){case"name":S=ze;break;case"type":U=ze;break;case"checked":ne=ze;break;case"defaultChecked":be=ze;break;case"value":T=ze;break;case"defaultValue":G=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,o));break;default:Xn(s,o,m,ze,h,null)}}sa(s,T,G,ne,be,U,S,!1);return;case"select":yn("invalid",s),m=U=T=null;for(S in h)if(h.hasOwnProperty(S)&&(G=h[S],G!=null))switch(S){case"value":T=G;break;case"defaultValue":U=G;break;case"multiple":m=G;default:Xn(s,o,S,G,h,null)}o=T,h=U,s.multiple=!!m,o!=null?Er(s,!!m,o,!1):h!=null&&Er(s,!!m,h,!0);return;case"textarea":yn("invalid",s),T=S=m=null;for(U in h)if(h.hasOwnProperty(U)&&(G=h[U],G!=null))switch(U){case"value":m=G;break;case"defaultValue":S=G;break;case"children":T=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:Xn(s,o,U,G,h,null)}Vi(s,m,S,T);return;case"option":for(ne in h)if(h.hasOwnProperty(ne)&&(m=h[ne],m!=null))switch(ne){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Xn(s,o,ne,m,h,null)}return;case"dialog":yn("beforetoggle",s),yn("toggle",s),yn("cancel",s),yn("close",s);break;case"iframe":case"object":yn("load",s);break;case"video":case"audio":for(m=0;m<qs.length;m++)yn(qs[m],s);break;case"image":yn("error",s),yn("load",s);break;case"details":yn("toggle",s);break;case"embed":case"source":case"link":yn("error",s),yn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in h)if(h.hasOwnProperty(be)&&(m=h[be],m!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Xn(s,o,be,m,h,null)}return;default:if(Cs(o)){for(ze in h)h.hasOwnProperty(ze)&&(m=h[ze],m!==void 0&&ES(s,o,ze,m,h,void 0));return}}for(G in h)h.hasOwnProperty(G)&&(m=h[G],m!=null&&Xn(s,o,G,m,h,null))}function cN(s,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,T=null,U=null,G=null,ne=null,be=null,ze=null;for(Oe in h){var Ge=h[Oe];if(h.hasOwnProperty(Oe)&&Ge!=null)switch(Oe){case"checked":break;case"value":break;case"defaultValue":ne=Ge;default:m.hasOwnProperty(Oe)||Xn(s,o,Oe,null,m,Ge)}}for(var Te in m){var Oe=m[Te];if(Ge=h[Te],m.hasOwnProperty(Te)&&(Oe!=null||Ge!=null))switch(Te){case"type":T=Oe;break;case"name":S=Oe;break;case"checked":be=Oe;break;case"defaultChecked":ze=Oe;break;case"value":U=Oe;break;case"defaultValue":G=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,o));break;default:Oe!==Ge&&Xn(s,o,Te,Oe,m,Ge)}}Di(s,U,G,ne,be,ze,T,S);return;case"select":Oe=U=G=Te=null;for(T in h)if(ne=h[T],h.hasOwnProperty(T)&&ne!=null)switch(T){case"value":break;case"multiple":Oe=ne;default:m.hasOwnProperty(T)||Xn(s,o,T,null,m,ne)}for(S in m)if(T=m[S],ne=h[S],m.hasOwnProperty(S)&&(T!=null||ne!=null))switch(S){case"value":Te=T;break;case"defaultValue":G=T;break;case"multiple":U=T;default:T!==ne&&Xn(s,o,S,T,m,ne)}o=G,h=U,m=Oe,Te!=null?Er(s,!!h,Te,!1):!!m!=!!h&&(o!=null?Er(s,!!h,o,!0):Er(s,!!h,h?[]:"",!1));return;case"textarea":Oe=Te=null;for(G in h)if(S=h[G],h.hasOwnProperty(G)&&S!=null&&!m.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Xn(s,o,G,null,m,S)}for(U in m)if(S=m[U],T=h[U],m.hasOwnProperty(U)&&(S!=null||T!=null))switch(U){case"value":Te=S;break;case"defaultValue":Oe=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==T&&Xn(s,o,U,S,m,T)}Cn(s,Te,Oe);return;case"option":for(var wt in h)if(Te=h[wt],h.hasOwnProperty(wt)&&Te!=null&&!m.hasOwnProperty(wt))switch(wt){case"selected":s.selected=!1;break;default:Xn(s,o,wt,null,m,Te)}for(ne in m)if(Te=m[ne],Oe=h[ne],m.hasOwnProperty(ne)&&Te!==Oe&&(Te!=null||Oe!=null))switch(ne){case"selected":s.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:Xn(s,o,ne,Te,m,Oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in h)Te=h[Ht],h.hasOwnProperty(Ht)&&Te!=null&&!m.hasOwnProperty(Ht)&&Xn(s,o,Ht,null,m,Te);for(be in m)if(Te=m[be],Oe=h[be],m.hasOwnProperty(be)&&Te!==Oe&&(Te!=null||Oe!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,o));break;default:Xn(s,o,be,Te,m,Oe)}return;default:if(Cs(o)){for(var qn in h)Te=h[qn],h.hasOwnProperty(qn)&&Te!==void 0&&!m.hasOwnProperty(qn)&&ES(s,o,qn,void 0,m,Te);for(ze in m)Te=m[ze],Oe=h[ze],!m.hasOwnProperty(ze)||Te===Oe||Te===void 0&&Oe===void 0||ES(s,o,ze,Te,m,Oe);return}}for(var he in h)Te=h[he],h.hasOwnProperty(he)&&Te!=null&&!m.hasOwnProperty(he)&&Xn(s,o,he,null,m,Te);for(Ge in m)Te=m[Ge],Oe=h[Ge],!m.hasOwnProperty(Ge)||Te===Oe||Te==null&&Oe==null||Xn(s,o,Ge,Te,m,Oe)}function GT(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var S=h[m],T=S.transferSize,U=S.initiatorType,G=S.duration;if(T&&G&&GT(U)){for(U=0,G=S.responseEnd,m+=1;m<h.length;m++){var ne=h[m],be=ne.startTime;if(be>G)break;var ze=ne.transferSize,Ge=ne.initiatorType;ze&&GT(Ge)&&(ne=ne.responseEnd,U+=ze*(ne<G?1:(G-be)/(ne-be)))}if(--m,o+=8*(T+U)/(S.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var TS=null,AS=null;function A_(s){return s.nodeType===9?s:s.ownerDocument}function WT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XT(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function wS(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var CS=null;function hN(){var s=window.event;return s&&s.type==="popstate"?s===CS?!1:(CS=s,!0):(CS=null,!1)}var qT=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,YT=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof YT<"u"?function(s){return YT.resolve(null).then(s).catch(mN)}:qT;function mN(s){setTimeout(function(){throw s})}function Sc(s){return s==="head"}function jT(s,o){var h=o,m=0;do{var S=h.nextSibling;if(s.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"||h==="/&"){if(m===0){s.removeChild(S),Hd(o);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")_g(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,_g(h);for(var T=h.firstChild;T;){var U=T.nextSibling,G=T.nodeName;T[ra]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=U}}else h==="body"&&_g(s.ownerDocument.body);h=S}while(h);Hd(o)}function ZT(s,o){var h=s;s=0;do{var m=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=m}while(h)}function RS(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":RS(h),ao(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function gN(s,o,h,m){for(;s.nodeType===1;){var S=h;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[ra])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==S.rel||s.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var T=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Za(s.nextSibling),s===null)break}return null}function vN(s,o,h){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Za(s.nextSibling),s===null))return null;return s}function KT(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Za(s.nextSibling),s===null))return null;return s}function DS(s){return s.data==="$?"||s.data==="$~"}function LS(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function _N(s,o){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||h.readyState!=="loading")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Za(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var NS=null;function QT(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(o===0)return Za(s.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}s=s.nextSibling}return null}function JT(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return s;o--}else h!=="/$"&&h!=="/&"||o++}s=s.previousSibling}return null}function $T(s,o,h){switch(o=A_(h),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function _g(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ao(s)}var Ka=new Map,eA=new Set;function w_(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var gu=Q.d;Q.d={f:yN,r:xN,D:bN,C:SN,L:MN,m:EN,X:AN,S:TN,M:wN};function yN(){var s=gu.f(),o=ca();return s||o}function xN(s){var o=lo(s);o!==null&&o.tag===5&&o.type==="form"?u_(o):gu.r(s)}var Bd=typeof document>"u"?null:document;function tA(s,o,h){var m=Bd;if(m&&typeof o=="string"&&o){var S=Vt(o);S='link[rel="'+s+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),eA.has(S)||(eA.add(S),s={rel:s,crossOrigin:h,href:o},m.querySelector(S)===null&&(o=m.createElement("link"),Ir(o,"link",s),H(o),m.head.appendChild(o)))}}function bN(s){gu.D(s),tA("dns-prefetch",s,null)}function SN(s,o){gu.C(s,o),tA("preconnect",s,o)}function MN(s,o,h){gu.L(s,o,h);var m=Bd;if(m&&s&&o){var S='link[rel="preload"][as="'+Vt(o)+'"]';o==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+Vt(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+Vt(h.imageSizes)+'"]')):S+='[href="'+Vt(s)+'"]';var T=S;switch(o){case"style":T=kd(s);break;case"script":T=Vd(s)}Ka.has(T)||(s=_({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:s,as:o},h),Ka.set(T,s),m.querySelector(S)!==null||o==="style"&&m.querySelector(yg(T))||o==="script"&&m.querySelector(xg(T))||(o=m.createElement("link"),Ir(o,"link",s),H(o),m.head.appendChild(o)))}}function EN(s,o){gu.m(s,o);var h=Bd;if(h&&s){var m=o&&typeof o.as=="string"?o.as:"script",S='link[rel="modulepreload"][as="'+Vt(m)+'"][href="'+Vt(s)+'"]',T=S;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Vd(s)}if(!Ka.has(T)&&(s=_({rel:"modulepreload",href:s},o),Ka.set(T,s),h.querySelector(S)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(xg(T)))return}m=h.createElement("link"),Ir(m,"link",s),H(m),h.head.appendChild(m)}}}function TN(s,o,h){gu.S(s,o,h);var m=Bd;if(m&&s){var S=Aa(m).hoistableStyles,T=kd(s);o=o||"default";var U=S.get(T);if(!U){var G={loading:0,preload:null};if(U=m.querySelector(yg(T)))G.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":o},h),(h=Ka.get(T))&&OS(s,h);var ne=U=m.createElement("link");H(ne),Ir(ne,"link",s),ne._p=new Promise(function(be,ze){ne.onload=be,ne.onerror=ze}),ne.addEventListener("load",function(){G.loading|=1}),ne.addEventListener("error",function(){G.loading|=2}),G.loading|=4,C_(U,o,m)}U={type:"stylesheet",instance:U,count:1,state:G},S.set(T,U)}}}function AN(s,o){gu.X(s,o);var h=Bd;if(h&&s){var m=Aa(h).hoistableScripts,S=Vd(s),T=m.get(S);T||(T=h.querySelector(xg(S)),T||(s=_({src:s,async:!0},o),(o=Ka.get(S))&&IS(s,o),T=h.createElement("script"),H(T),Ir(T,"link",s),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(S,T))}}function wN(s,o){gu.M(s,o);var h=Bd;if(h&&s){var m=Aa(h).hoistableScripts,S=Vd(s),T=m.get(S);T||(T=h.querySelector(xg(S)),T||(s=_({src:s,async:!0,type:"module"},o),(o=Ka.get(S))&&IS(s,o),T=h.createElement("script"),H(T),Ir(T,"link",s),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(S,T))}}function nA(s,o,h,m){var S=(S=me.current)?w_(S):null;if(!S)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=kd(h.href),h=Aa(S).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=kd(h.href);var T=Aa(S).hoistableStyles,U=T.get(s);if(U||(S=S.ownerDocument||S,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,U),(T=S.querySelector(yg(s)))&&!T._p&&(U.instance=T,U.state.loading=5),Ka.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ka.set(s,h),T||CN(S,s,h,U.state))),o&&m===null)throw Error(n(528,""));return U}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Vd(h),h=Aa(S).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function kd(s){return'href="'+Vt(s)+'"'}function yg(s){return'link[rel="stylesheet"]['+s+"]"}function iA(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function CN(s,o,h,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Ir(o,"link",h),H(o),s.head.appendChild(o))}function Vd(s){return'[src="'+Vt(s)+'"]'}function xg(s){return"script[async]"+s}function rA(s,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Vt(h.href)+'"]');if(m)return o.instance=m,H(m),m;var S=_({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),H(m),Ir(m,"style",S),C_(m,h.precedence,s),o.instance=m;case"stylesheet":S=kd(h.href);var T=s.querySelector(yg(S));if(T)return o.state.loading|=4,o.instance=T,H(T),T;m=iA(h),(S=Ka.get(S))&&OS(m,S),T=(s.ownerDocument||s).createElement("link"),H(T);var U=T;return U._p=new Promise(function(G,ne){U.onload=G,U.onerror=ne}),Ir(T,"link",m),o.state.loading|=4,C_(T,h.precedence,s),o.instance=T;case"script":return T=Vd(h.src),(S=s.querySelector(xg(T)))?(o.instance=S,H(S),S):(m=h,(S=Ka.get(T))&&(m=_({},h),IS(m,S)),s=s.ownerDocument||s,S=s.createElement("script"),H(S),Ir(S,"link",m),s.head.appendChild(S),o.instance=S);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,C_(m,h.precedence,s));return o.instance}function C_(s,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=m.length?m[m.length-1]:null,T=S,U=0;U<m.length;U++){var G=m[U];if(G.dataset.precedence===o)T=G;else if(T!==S)break}T?T.parentNode.insertBefore(s,T.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(s,o.firstChild))}function OS(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function IS(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var R_=null;function sA(s,o,h){if(R_===null){var m=new Map,S=R_=new Map;S.set(h,m)}else S=R_,m=S.get(h),m||(m=new Map,S.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),S=0;S<h.length;S++){var T=h[S];if(!(T[ra]||T[ri]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var U=T.getAttribute(o)||"";U=s+U;var G=m.get(U);G?G.push(T):m.set(U,[T])}}return m}function aA(s,o,h){s=s.ownerDocument||s,s.head.insertBefore(h,o==="title"?s.querySelector("head > title"):null)}function RN(s,o,h){if(h===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function oA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function DN(s,o,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var S=kd(m.href),T=o.querySelector(yg(S));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=D_.bind(s),o.then(s,s)),h.state.loading|=4,h.instance=T,H(T);return}T=o.ownerDocument||o,m=iA(m),(S=Ka.get(S))&&OS(m,S),T=T.createElement("link"),H(T);var U=T;U._p=new Promise(function(G,ne){U.onload=G,U.onerror=ne}),Ir(T,"link",m),h.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=D_.bind(s),o.addEventListener("load",h),o.addEventListener("error",h))}}var PS=0;function LN(s,o){return s.stylesheets&&s.count===0&&N_(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var m=setTimeout(function(){if(s.stylesheets&&N_(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+o);0<s.imgBytes&&PS===0&&(PS=62500*fN());var S=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&N_(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>PS?50:800)+o);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(S)}}:null}function D_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)N_(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var L_=null;function N_(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,L_=new Map,o.forEach(NN,s),L_=null,D_.call(s))}function NN(s,o){if(!(o.state.loading&4)){var h=L_.get(s);if(h)var m=h.get(null);else{h=new Map,L_.set(s,h);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<S.length;T++){var U=S[T];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),m=U)}m&&h.set(null,m)}S=o.instance,U=S.getAttribute("data-precedence"),T=h.get(U)||m,T===m&&h.set(null,S),h.set(U,S),this.count++,m=D_.bind(this),S.addEventListener("load",m),S.addEventListener("error",m),T?T.parentNode.insertBefore(S,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),o.state.loading|=4}}var bg={$$typeof:R,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function ON(s,o,h,m,S,T,U,G,ne){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=m,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function lA(s,o,h,m,S,T,U,G,ne,be,ze,Ge){return s=new ON(s,o,h,U,ne,be,ze,Ge,G),o=1,T===!0&&(o|=24),T=si(3,null,null,o),s.current=T,T.stateNode=s,o=Tm(),o.refCount++,s.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:h,cache:o},Af(T),s}function uA(s){return s?(s=Xo,s):Xo}function cA(s,o,h,m,S,T){S=uA(S),m.context===null?m.context=S:m.pendingContext=S,m=_o(o),m.payload={element:h},T=T===void 0?null:T,T!==null&&(m.callback=T),h=$o(s,m,o),h!==null&&(on(h,s,o),el(h,s,o))}function fA(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function US(s,o){fA(s,o),(s=s.alternate)&&fA(s,o)}function hA(s){if(s.tag===13||s.tag===31){var o=wr(s,67108864);o!==null&&on(o,s,67108864),US(s,67108864)}}function dA(s){if(s.tag===13||s.tag===31){var o=ys();o=Fo(o);var h=wr(s,o);h!==null&&on(h,s,o),US(s,o)}}var O_=!0;function IN(s,o,h,m){var S=Z.T;Z.T=null;var T=Q.p;try{Q.p=2,zS(s,o,h,m)}finally{Q.p=T,Z.T=S}}function PN(s,o,h,m){var S=Z.T;Z.T=null;var T=Q.p;try{Q.p=8,zS(s,o,h,m)}finally{Q.p=T,Z.T=S}}function zS(s,o,h,m){if(O_){var S=FS(m);if(S===null)MS(s,o,m,I_,h),mA(s,m);else if(zN(S,s,o,h,m))m.stopPropagation();else if(mA(s,m),o&4&&-1<UN.indexOf(s)){for(;S!==null;){var T=lo(S);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var U=je(T.pendingLanes);if(U!==0){var G=T;for(G.pendingLanes|=2,G.entangledLanes|=2;U;){var ne=1<<31-$(U);G.entanglements[1]|=ne,U&=~ne}Ke(T),(Dt&6)===0&&(bi=F()+500,_t(0))}}break;case 31:case 13:G=wr(T,2),G!==null&&on(G,T,2),ca(),US(T,2)}if(T=FS(m),T===null&&MS(s,o,m,I_,h),T===S)break;S=T}S!==null&&m.stopPropagation()}else MS(s,o,m,null,h)}}function FS(s){return s=Fh(s),BS(s)}var I_=null;function BS(s){if(I_=null,s=oo(s),s!==null){var o=a(s);if(o===null)s=null;else{var h=o.tag;if(h===13){if(s=u(o),s!==null)return s;s=null}else if(h===31){if(s=f(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return I_=s,null}function pA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ae()){case Le:return 2;case Fe:return 8;case _e:case st:return 32;case He:return 268435456;default:return 32}default:return 32}}var kS=!1,Mc=null,Ec=null,Tc=null,Sg=new Map,Mg=new Map,Ac=[],UN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mA(s,o){switch(s){case"focusin":case"focusout":Mc=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":Tc=null;break;case"pointerover":case"pointerout":Sg.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mg.delete(o.pointerId)}}function Eg(s,o,h,m,S,T){return s===null||s.nativeEvent!==T?(s={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:T,targetContainers:[S]},o!==null&&(o=lo(o),o!==null&&hA(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),s)}function zN(s,o,h,m,S){switch(o){case"focusin":return Mc=Eg(Mc,s,o,h,m,S),!0;case"dragenter":return Ec=Eg(Ec,s,o,h,m,S),!0;case"mouseover":return Tc=Eg(Tc,s,o,h,m,S),!0;case"pointerover":var T=S.pointerId;return Sg.set(T,Eg(Sg.get(T)||null,s,o,h,m,S)),!0;case"gotpointercapture":return T=S.pointerId,Mg.set(T,Eg(Mg.get(T)||null,s,o,h,m,S)),!0}return!1}function gA(s){var o=oo(s.target);if(o!==null){var h=a(o);if(h!==null){if(o=h.tag,o===13){if(o=u(h),o!==null){s.blockedOn=o,vr(s.priority,function(){dA(h)});return}}else if(o===31){if(o=f(h),o!==null){s.blockedOn=o,vr(s.priority,function(){dA(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function P_(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=FS(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);zh=m,h.target.dispatchEvent(m),zh=null}else return o=lo(h),o!==null&&hA(o),s.blockedOn=h,!1;o.shift()}return!0}function vA(s,o,h){P_(s)&&h.delete(o)}function FN(){kS=!1,Mc!==null&&P_(Mc)&&(Mc=null),Ec!==null&&P_(Ec)&&(Ec=null),Tc!==null&&P_(Tc)&&(Tc=null),Sg.forEach(vA),Mg.forEach(vA)}function U_(s,o){s.blockedOn===o&&(s.blockedOn=null,kS||(kS=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,FN)))}var z_=null;function _A(s){z_!==s&&(z_=s,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){z_===s&&(z_=null);for(var o=0;o<s.length;o+=3){var h=s[o],m=s[o+1],S=s[o+2];if(typeof m!="function"){if(BS(m||h)===null)continue;break}var T=lo(h);T!==null&&(s.splice(o,3),o-=3,Jm(T,{pending:!0,data:S,method:h.method,action:m},m,S))}}))}function Hd(s){function o(ne){return U_(ne,s)}Mc!==null&&U_(Mc,s),Ec!==null&&U_(Ec,s),Tc!==null&&U_(Tc,s),Sg.forEach(o),Mg.forEach(o);for(var h=0;h<Ac.length;h++){var m=Ac[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Ac.length&&(h=Ac[0],h.blockedOn===null);)gA(h),h.blockedOn===null&&Ac.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var S=h[m],T=h[m+1],U=S[ki]||null;if(typeof T=="function")U||_A(h);else if(U){var G=null;if(T&&T.hasAttribute("formAction")){if(S=T,U=T[ki]||null)G=U.formAction;else if(BS(S)!==null)continue}else G=U.action;typeof G=="function"?h[m+1]=G:(h.splice(m,3),m-=3),_A(h)}}}function yA(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(U){return S=U})},focusReset:"manual",scroll:"manual"})}function o(){S!==null&&(S(),S=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,S=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),S!==null&&(S(),S=null)}}}function VS(s){this._internalRoot=s}F_.prototype.render=VS.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,m=ys();cA(h,m,s,o,null,null)},F_.prototype.unmount=VS.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;cA(s.current,2,null,s,null,null),ca(),o[os]=null}};function F_(s){this._internalRoot=s}F_.prototype.unstable_scheduleHydration=function(s){if(s){var o=Bl();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Ac.length&&o!==0&&o<Ac[h].priority;h++);Ac.splice(h,0,s),h===0&&gA(s)}};var xA=e.version;if(xA!=="19.2.4")throw Error(n(527,xA,"19.2.4"));Q.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=p(o),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var BN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B_.isDisabled&&B_.supportsFiber)try{qe=B_.inject(BN),nt=B_}catch{}}return Ag.createRoot=function(s,o){if(!i(s))throw Error(n(299));var h=!1,m="",S=g_,T=rg,U=sg;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(U=o.onRecoverableError)),o=lA(s,1,!1,null,null,h,m,null,S,T,U,yA),s[os]=o.current,SS(s),new VS(o)},Ag.hydrateRoot=function(s,o,h){if(!i(s))throw Error(n(299));var m=!1,S="",T=g_,U=rg,G=sg,ne=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(G=h.onRecoverableError),h.formState!==void 0&&(ne=h.formState)),o=lA(s,1,!0,o,h??null,m,S,ne,T,U,G,yA),o.context=uA(null),h=o.current,m=ys(),m=Fo(m),S=_o(m),S.callback=null,$o(h,S,m),h=m,o.current.lanes=h,ii(o,h),Ke(o),s[os]=o.current,SS(s),new F_(o)},Ag.version="19.2.4",Ag}var DA;function KN(){if(DA)return WS.exports;DA=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),WS.exports=ZN(),WS.exports}var QN=KN();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var LA="popstate";function JN(r={}){function e(n,i){let{pathname:a,search:u,hash:f}=n.location;return hM("",{pathname:a,search:u,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:d0(i)}return eO(e,t,null,r)}function Ri(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Rl(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $N(){return Math.random().toString(36).substring(2,10)}function NA(r,e){return{usr:r.state,key:r.key,idx:e}}function hM(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Xp(e):e,state:t,key:e&&e.key||n||$N()}}function d0({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Xp(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function eO(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,u=i.history,f="POP",d=null,p=v();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function v(){return(u.state||{idx:null}).idx}function _(){f="POP";let w=v(),M=w==null?null:w-p;p=w,d&&d({action:f,location:A.location,delta:M})}function y(w,M){f="PUSH";let D=hM(A.location,w,M);p=v()+1;let R=NA(D,p),N=A.createHref(D);try{u.pushState(R,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(N)}a&&d&&d({action:f,location:A.location,delta:1})}function b(w,M){f="REPLACE";let D=hM(A.location,w,M);p=v();let R=NA(D,p),N=A.createHref(D);u.replaceState(R,"",N),a&&d&&d({action:f,location:A.location,delta:0})}function E(w){return tO(w)}let A={get action(){return f},get location(){return r(i,u)},listen(w){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(LA,_),d=w,()=>{i.removeEventListener(LA,_),d=null}},createHref(w){return e(i,w)},createURL:E,encodeLocation(w){let M=E(w);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:y,replace:b,go(w){return u.go(w)}};return A}function tO(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ri(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:d0(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function f3(r,e,t="/"){return nO(r,e,t,!1)}function nO(r,e,t,n){let i=typeof e=="string"?Xp(e):e,a=Iu(i.pathname||"/",t);if(a==null)return null;let u=h3(r);iO(u);let f=null;for(let d=0;f==null&&d<u.length;++d){let p=pO(a);f=hO(u[d],p,n)}return f}function h3(r,e=[],t=[],n="",i=!1){let a=(u,f,d=i,p)=>{let v={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(n)&&d)return;Ri(v.relativePath.startsWith(n),`Absolute route path "${v.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(n.length)}let _=Lu([n,v.relativePath]),y=t.concat(v);u.children&&u.children.length>0&&(Ri(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),h3(u.children,e,y,_,d)),!(u.path==null&&!u.index)&&e.push({path:_,score:cO(_,u.index),routesMeta:y})};return r.forEach((u,f)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))a(u,f);else for(let p of d3(u.path))a(u,f,!0,p)}),e}function d3(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let u=d3(n.join("/")),f=[];return f.push(...u.map(d=>d===""?a:[a,d].join("/"))),i&&f.push(...u),f.map(d=>r.startsWith("/")&&d===""?"/":d)}function iO(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:fO(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var rO=/^:[\w-]+$/,sO=3,aO=2,oO=1,lO=10,uO=-2,OA=r=>r==="*";function cO(r,e){let t=r.split("/"),n=t.length;return t.some(OA)&&(n+=uO),e&&(n+=aO),t.filter(i=>!OA(i)).reduce((i,a)=>i+(rO.test(a)?sO:a===""?oO:lO),n)}function fO(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function hO(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",u=[];for(let f=0;f<n.length;++f){let d=n[f],p=f===n.length-1,v=a==="/"?e:e.slice(a.length)||"/",_=rx({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},v),y=d.route;if(!_&&p&&t&&!n[n.length-1].route.index&&(_=rx({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},v)),!_)return null;Object.assign(i,_.params),u.push({params:i,pathname:Lu([a,_.pathname]),pathnameBase:_O(Lu([a,_.pathnameBase])),route:y}),_.pathnameBase!=="/"&&(a=Lu([a,_.pathnameBase]))}return u}function rx(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=dO(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],u=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:n.reduce((p,{paramName:v,isOptional:_},y)=>{if(v==="*"){let E=f[y]||"";u=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const b=f[y];return _&&!b?p[v]=void 0:p[v]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:r}}function dO(r,e=!1,t=!0){Rl(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,d)=>(n.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function pO(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rl(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Iu(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var mO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gO(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Xp(r):r,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=IA(t.substring(1),"/"):a=IA(t,e)):a=e,{pathname:a,search:yO(n),hash:xO(i)}}function IA(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function jS(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vO(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function p3(r){let e=vO(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function m3(r,e,t,n=!1){let i;typeof r=="string"?i=Xp(r):(i={...r},Ri(!i.pathname||!i.pathname.includes("?"),jS("?","pathname","search",i)),Ri(!i.pathname||!i.pathname.includes("#"),jS("#","pathname","hash",i)),Ri(!i.search||!i.search.includes("#"),jS("#","search","hash",i)));let a=r===""||i.pathname==="",u=a?"/":i.pathname,f;if(u==null)f=t;else{let _=e.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),_-=1;i.pathname=y.join("/")}f=_>=0?e[_]:"/"}let d=gO(i,f),p=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||v)&&(d.pathname+="/"),d}var Lu=r=>r.join("/").replace(/\/\/+/g,"/"),_O=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),yO=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,xO=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,bO=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function SO(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function MO(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var g3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function v3(r,e){let t=r;if(typeof t!="string"||!mO.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,i=!1;if(g3)try{let a=new URL(window.location.href),u=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=Iu(u.pathname,e);u.origin===a.origin&&f!=null?t=f+u.search+u.hash:i=!0}catch{Rl(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _3=["POST","PUT","PATCH","DELETE"];new Set(_3);var EO=["GET",..._3];new Set(EO);var qp=se.createContext(null);qp.displayName="DataRouter";var pb=se.createContext(null);pb.displayName="DataRouterState";var TO=se.createContext(!1),y3=se.createContext({isTransitioning:!1});y3.displayName="ViewTransition";var AO=se.createContext(new Map);AO.displayName="Fetchers";var wO=se.createContext(null);wO.displayName="Await";var io=se.createContext(null);io.displayName="Navigation";var H0=se.createContext(null);H0.displayName="Location";var Il=se.createContext({outlet:null,matches:[],isDataRoute:!1});Il.displayName="Route";var hE=se.createContext(null);hE.displayName="RouteError";var x3="REACT_ROUTER_ERROR",CO="REDIRECT",RO="ROUTE_ERROR_RESPONSE";function DO(r){if(r.startsWith(`${x3}:${CO}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function LO(r){if(r.startsWith(`${x3}:${RO}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new bO(e.status,e.statusText,e.data)}catch{}}function NO(r,{relative:e}={}){Ri(G0(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=se.useContext(io),{hash:i,pathname:a,search:u}=W0(r,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:Lu([t,a])),n.createHref({pathname:f,search:u,hash:i})}function G0(){return se.useContext(H0)!=null}function Jc(){return Ri(G0(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(H0).location}var b3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function S3(r){se.useContext(io).static||se.useLayoutEffect(r)}function M3(){let{isDataRoute:r}=se.useContext(Il);return r?qO():OO()}function OO(){Ri(G0(),"useNavigate() may be used only in the context of a <Router> component.");let r=se.useContext(qp),{basename:e,navigator:t}=se.useContext(io),{matches:n}=se.useContext(Il),{pathname:i}=Jc(),a=JSON.stringify(p3(n)),u=se.useRef(!1);return S3(()=>{u.current=!0}),se.useCallback((d,p={})=>{if(Rl(u.current,b3),!u.current)return;if(typeof d=="number"){t.go(d);return}let v=m3(d,JSON.parse(a),i,p.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Lu([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,a,i,r])}se.createContext(null);function IO(){let{matches:r}=se.useContext(Il),e=r[r.length-1];return e?e.params:{}}function W0(r,{relative:e}={}){let{matches:t}=se.useContext(Il),{pathname:n}=Jc(),i=JSON.stringify(p3(t));return se.useMemo(()=>m3(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function PO(r,e){return E3(r,e)}function E3(r,e,t,n,i){var D;Ri(G0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=se.useContext(io),{matches:u}=se.useContext(Il),f=u[u.length-1],d=f?f.params:{},p=f?f.pathname:"/",v=f?f.pathnameBase:"/",_=f&&f.route;{let R=_&&_.path||"";A3(p,!_||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=Jc(),b;if(e){let R=typeof e=="string"?Xp(e):e;Ri(v==="/"||((D=R.pathname)==null?void 0:D.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${R.pathname}" was given in the \`location\` prop.`),b=R}else b=y;let E=b.pathname||"/",A=E;if(v!=="/"){let R=v.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=f3(r,{pathname:A});Rl(_||w!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Rl(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=kO(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:Lu([v,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?v:Lu([v,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),u,t,n,i);return e&&M?se.createElement(H0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},M):M}function UO(){let r=XO(),e=SO(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",r),u=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:a},"ErrorBoundary")," or"," ",se.createElement("code",{style:a},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),t?se.createElement("pre",{style:i},t):null,u)}var zO=se.createElement(UO,null),T3=class extends se.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=LO(r.digest);t&&(r=t)}let e=r!==void 0?se.createElement(Il.Provider,{value:this.props.routeContext},se.createElement(hE.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?se.createElement(FO,{error:r},e):e}};T3.contextType=TO;var ZS=new WeakMap;function FO({children:r,error:e}){let{basename:t}=se.useContext(io);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=DO(e.digest);if(n){let i=ZS.get(e);if(i)throw i;let a=v3(n.location,t);if(g3&&!ZS.get(e))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw ZS.set(e,u),u}return se.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return r}function BO({routeContext:r,match:e,children:t}){let n=se.useContext(qp);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),se.createElement(Il.Provider,{value:r},t)}function kO(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,u=t==null?void 0:t.errors;if(u!=null){let v=a.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);Ri(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let f=!1,d=-1;if(t)for(let v=0;v<a.length;v++){let _=a[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=v),_.route.id){let{loaderData:y,errors:b}=t,E=_.route.loader&&!y.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||E){f=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let p=t&&n?(v,_)=>{var y,b;n(v,{location:t.location,params:((b=(y=t.matches)==null?void 0:y[0])==null?void 0:b.params)??{},unstable_pattern:MO(t.matches),errorInfo:_})}:void 0;return a.reduceRight((v,_,y)=>{let b,E=!1,A=null,w=null;t&&(b=u&&_.route.id?u[_.route.id]:void 0,A=_.route.errorElement||zO,f&&(d<0&&y===0?(A3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,w=null):d===y&&(E=!0,w=_.route.hydrateFallbackElement||null)));let M=e.concat(a.slice(0,y+1)),D=()=>{let R;return b?R=A:E?R=w:_.route.Component?R=se.createElement(_.route.Component,null):_.route.element?R=_.route.element:R=v,se.createElement(BO,{match:_,routeContext:{outlet:v,matches:M,isDataRoute:t!=null},children:R})};return t&&(_.route.ErrorBoundary||_.route.errorElement||y===0)?se.createElement(T3,{location:t.location,revalidation:t.revalidation,component:A,error:b,children:D(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:p}):D()},null)}function dE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VO(r){let e=se.useContext(qp);return Ri(e,dE(r)),e}function HO(r){let e=se.useContext(pb);return Ri(e,dE(r)),e}function GO(r){let e=se.useContext(Il);return Ri(e,dE(r)),e}function pE(r){let e=GO(r),t=e.matches[e.matches.length-1];return Ri(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function WO(){return pE("useRouteId")}function XO(){var n;let r=se.useContext(hE),e=HO("useRouteError"),t=pE("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function qO(){let{router:r}=VO("useNavigate"),e=pE("useNavigate"),t=se.useRef(!1);return S3(()=>{t.current=!0}),se.useCallback(async(i,a={})=>{Rl(t.current,b3),t.current&&(typeof i=="number"?await r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var PA={};function A3(r,e,t){!e&&!PA[r]&&(PA[r]=!0,Rl(!1,t))}se.memo(YO);function YO({routes:r,future:e,state:t,onError:n}){return E3(r,void 0,t,n,e)}function mE(r){Ri(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jO({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:u}){Ri(!G0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),d=se.useMemo(()=>({basename:f,navigator:i,static:a,unstable_useTransitions:u,future:{}}),[f,i,a,u]);typeof t=="string"&&(t=Xp(t));let{pathname:p="/",search:v="",hash:_="",state:y=null,key:b="default"}=t,E=se.useMemo(()=>{let A=Iu(p,f);return A==null?null:{location:{pathname:A,search:v,hash:_,state:y,key:b},navigationType:n}},[f,p,v,_,y,b,n]);return Rl(E!=null,`<Router basename="${f}"> is not able to match the URL "${p}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:se.createElement(io.Provider,{value:d},se.createElement(H0.Provider,{children:e,value:E}))}function w3({children:r,location:e}){return PO(dM(r),e)}function dM(r,e=[]){let t=[];return se.Children.forEach(r,(n,i)=>{if(!se.isValidElement(n))return;let a=[...e,i];if(n.type===se.Fragment){t.push.apply(t,dM(n.props.children,a));return}Ri(n.type===mE,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ri(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=dM(n.props.children,a)),t.push(u)}),t}var ky="get",Vy="application/x-www-form-urlencoded";function mb(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function ZO(r){return mb(r)&&r.tagName.toLowerCase()==="button"}function KO(r){return mb(r)&&r.tagName.toLowerCase()==="form"}function QO(r){return mb(r)&&r.tagName.toLowerCase()==="input"}function JO(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $O(r,e){return r.button===0&&(!e||e==="_self")&&!JO(r)}var k_=null;function eI(){if(k_===null)try{new FormData(document.createElement("form"),0),k_=!1}catch{k_=!0}return k_}var tI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function KS(r){return r!=null&&!tI.has(r)?(Rl(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vy}"`),null):r}function nI(r,e){let t,n,i,a,u;if(KO(r)){let f=r.getAttribute("action");n=f?Iu(f,e):null,t=r.getAttribute("method")||ky,i=KS(r.getAttribute("enctype"))||Vy,a=new FormData(r)}else if(ZO(r)||QO(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||f.getAttribute("action");if(n=d?Iu(d,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||ky,i=KS(r.getAttribute("formenctype"))||KS(f.getAttribute("enctype"))||Vy,a=new FormData(f,r),!eI()){let{name:p,type:v,value:_}=r;if(v==="image"){let y=p?`${p}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else p&&a.append(p,_)}}else{if(mb(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ky,n=null,i=Vy,u=r}return a&&i==="text/plain"&&(u=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gE(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function iI(r,e,t,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&Iu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function rI(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sI(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function aI(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let u=await rI(a,t);return u.links?u.links():[]}return[]}));return cI(n.flat(1).filter(sI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function UA(r,e,t,n,i,a){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,f=(d,p)=>{var v;return t[p].pathname!==d.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,p)=>u(d,p)||f(d,p)):a==="data"?e.filter((d,p)=>{var _;let v=n.routes[d.route.id];if(!v||!v.hasLoader)return!1;if(u(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function oI(r,e,{includeHydrateFallback:t}={}){return lI(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function lI(r){return[...new Set(r)]}function uI(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function cI(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(uI(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function C3(){let r=se.useContext(qp);return gE(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function fI(){let r=se.useContext(pb);return gE(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var vE=se.createContext(void 0);vE.displayName="FrameworkContext";function R3(){let r=se.useContext(vE);return gE(r,"You must render this element inside a <HydratedRouter> element"),r}function hI(r,e){let t=se.useContext(vE),[n,i]=se.useState(!1),[a,u]=se.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:v,onTouchStart:_}=e,y=se.useRef(null);se.useEffect(()=>{if(r==="render"&&u(!0),r==="viewport"){let A=M=>{M.forEach(D=>{u(D.isIntersecting)})},w=new IntersectionObserver(A,{threshold:.5});return y.current&&w.observe(y.current),()=>{w.disconnect()}}},[r]),se.useEffect(()=>{if(n){let A=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(A)}}},[n]);let b=()=>{i(!0)},E=()=>{i(!1),u(!1)};return t?r!=="intent"?[a,y,{}]:[a,y,{onFocus:wg(f,b),onBlur:wg(d,E),onMouseEnter:wg(p,b),onMouseLeave:wg(v,E),onTouchStart:wg(_,b)}]:[!1,y,{}]}function wg(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function dI({page:r,...e}){let{router:t}=C3(),n=se.useMemo(()=>f3(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?se.createElement(mI,{page:r,matches:n,...e}):null}function pI(r){let{manifest:e,routeModules:t}=R3(),[n,i]=se.useState([]);return se.useEffect(()=>{let a=!1;return aI(r,e,t).then(u=>{a||i(u)}),()=>{a=!0}},[r,e,t]),n}function mI({page:r,matches:e,...t}){let n=Jc(),{future:i,manifest:a,routeModules:u}=R3(),{basename:f}=C3(),{loaderData:d,matches:p}=fI(),v=se.useMemo(()=>UA(r,e,p,a,n,"data"),[r,e,p,a,n]),_=se.useMemo(()=>UA(r,e,p,a,n,"assets"),[r,e,p,a,n]),y=se.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let A=new Set,w=!1;if(e.forEach(D=>{var N;let R=a.routes[D.route.id];!R||!R.hasLoader||(!v.some(P=>P.route.id===D.route.id)&&D.route.id in d&&((N=u[D.route.id])!=null&&N.shouldRevalidate)||R.hasClientLoader?w=!0:A.add(D.route.id))}),A.size===0)return[];let M=iI(r,f,i.unstable_trailingSlashAwareDataRequests,"data");return w&&A.size>0&&M.searchParams.set("_routes",e.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[M.pathname+M.search]},[f,i.unstable_trailingSlashAwareDataRequests,d,n,a,v,e,r,u]),b=se.useMemo(()=>oI(_,a),[_,a]),E=pI(_);return se.createElement(se.Fragment,null,y.map(A=>se.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),b.map(A=>se.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),E.map(({key:A,link:w})=>se.createElement("link",{key:A,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function gI(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vI&&(window.__reactRouterVersion="7.13.0")}catch{}function _I({basename:r,children:e,unstable_useTransitions:t,window:n}){let i=se.useRef();i.current==null&&(i.current=JN({window:n,v5Compat:!0}));let a=i.current,[u,f]=se.useState({action:a.action,location:a.location}),d=se.useCallback(p=>{t===!1?f(p):se.startTransition(()=>f(p))},[t]);return se.useLayoutEffect(()=>a.listen(d),[a,d]),se.createElement(jO,{basename:r,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:t})}var D3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L3=se.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:u,state:f,target:d,to:p,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y,...b},E){let{basename:A,unstable_useTransitions:w}=se.useContext(io),M=typeof p=="string"&&D3.test(p),D=v3(p,A);p=D.to;let R=NO(p,{relative:i}),[N,P,z]=hI(n,b),B=SI(p,{replace:u,state:f,target:d,preventScrollReset:v,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:y,unstable_useTransitions:w});function k(O){e&&e(O),O.defaultPrevented||B(O)}let I=se.createElement("a",{...b,...z,href:D.absoluteURL||R,onClick:D.isExternal||a?e:k,ref:gI(E,P),target:d,"data-discover":!M&&t==="render"?"true":void 0});return N&&!M?se.createElement(se.Fragment,null,I,se.createElement(dI,{page:R})):I});L3.displayName="Link";var yI=se.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:u,viewTransition:f,children:d,...p},v){let _=W0(u,{relative:p.relative}),y=Jc(),b=se.useContext(pb),{navigator:E,basename:A}=se.useContext(io),w=b!=null&&wI(_)&&f===!0,M=E.encodeLocation?E.encodeLocation(_).pathname:_.pathname,D=y.pathname,R=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(D=D.toLowerCase(),R=R?R.toLowerCase():null,M=M.toLowerCase()),R&&A&&(R=Iu(R,A)||R);const N=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let P=D===M||!i&&D.startsWith(M)&&D.charAt(N)==="/",z=R!=null&&(R===M||!i&&R.startsWith(M)&&R.charAt(M.length)==="/"),B={isActive:P,isPending:z,isTransitioning:w},k=P?e:void 0,I;typeof n=="function"?I=n(B):I=[n,P?"active":null,z?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(B):a;return se.createElement(L3,{...p,"aria-current":k,className:I,ref:v,style:O,to:u,viewTransition:f},typeof d=="function"?d(B):d)});yI.displayName="NavLink";var xI=se.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:u=ky,action:f,onSubmit:d,relative:p,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y,...b},E)=>{let{unstable_useTransitions:A}=se.useContext(io),w=TI(),M=AI(f,{relative:p}),D=u.toLowerCase()==="get"?"get":"post",R=typeof f=="string"&&D3.test(f),N=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let z=P.nativeEvent.submitter,B=(z==null?void 0:z.getAttribute("formmethod"))||u,k=()=>w(z||P.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:i,state:a,relative:p,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:y});A&&t!==!1?se.startTransition(()=>k()):k()};return se.createElement("form",{ref:E,method:D,action:M,onSubmit:n?d:N,...b,"data-discover":!R&&r==="render"?"true":void 0})});xI.displayName="Form";function bI(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N3(r){let e=se.useContext(qp);return Ri(e,bI(r)),e}function SI(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let p=M3(),v=Jc(),_=W0(r,{relative:a});return se.useCallback(y=>{if($O(y,e)){y.preventDefault();let b=t!==void 0?t:d0(v)===d0(_),E=()=>p(r,{replace:b,state:n,preventScrollReset:i,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f});d?se.startTransition(()=>E()):E()}},[v,p,_,t,n,e,r,i,a,u,f,d])}var MI=0,EI=()=>`__${String(++MI)}__`;function TI(){let{router:r}=N3("useSubmit"),{basename:e}=se.useContext(io),t=WO(),n=r.fetch,i=r.navigate;return se.useCallback(async(a,u={})=>{let{action:f,method:d,encType:p,formData:v,body:_}=nI(a,e);if(u.navigate===!1){let y=u.fetcherKey||EI();await n(y,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:_,formMethod:u.method||d,formEncType:u.encType||p,flushSync:u.flushSync})}else await i(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:v,body:_,formMethod:u.method||d,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[n,i,e,t])}function AI(r,{relative:e}={}){let{basename:t}=se.useContext(io),n=se.useContext(Il);Ri(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...W0(r||".",{relative:e})},u=Jc();if(r==null){a.search=u.search;let f=new URLSearchParams(a.search),d=f.getAll("index");if(d.some(v=>v==="")){f.delete("index"),d.filter(_=>_).forEach(_=>f.append("index",_));let v=f.toString();a.search=v?`?${v}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Lu([t,a.pathname])),d0(a)}function wI(r,{relative:e}={}){let t=se.useContext(y3);Ri(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=N3("useViewTransitionState"),i=W0(r,{relative:e});if(!t.isTransitioning)return!1;let a=Iu(t.currentLocation.pathname,n)||t.currentLocation.pathname,u=Iu(t.nextLocation.pathname,n)||t.nextLocation.pathname;return rx(i.pathname,u)!=null||rx(i.pathname,a)!=null}const CI="/assets/Jordan_L_Wright-D96LxDAo.pdf";class Hy extends se.Component{render(){return Qe.jsxs("span",{className:"icon-container",title:this.props.title,children:[Qe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:"17",height:"17",viewBox:"0 0 17 17",children:Qe.jsx("path",{fill:"#747474",d:this.props.icon})}),Qe.jsx("span",{className:"assistive-text",children:this.props.assistiveText})]})}}const Gy={close:"M10.3639206,8.94970703 L13.863892,12.4496784 C14.2544163,12.8402027 14.2544163,13.4733677 13.863892,13.863892 C13.4733677,14.2544163 12.8402027,14.2544163 12.4496784,13.863892 L8.94970703,10.3639206 L5.44973562,13.863892 C5.05921133,14.2544163 4.42604635,14.2544163 4.03552206,13.863892 C3.64499777,13.4733677 3.64499777,12.8402027 4.03552206,12.4496784 L7.53549347,8.94970703 L4.03552206,5.44973562 C3.64499777,5.05921133 3.64499777,4.42604635 4.03552206,4.03552206 C4.42604635,3.64499777 5.05921133,3.64499777 5.44973562,4.03552206 L8.94970703,7.53549347 L12.4496784,4.03552206 C12.8402027,3.64499777 13.4733677,3.64499777 13.863892,4.03552206 C14.2544163,4.42604635 14.2544163,5.05921133 13.863892,5.44973562 L10.3639206,8.94970703 Z",outboundlink:"M13.3333333,10.3333333 L15.8333333,10.3333333 L15.8333333,13.6666667 C15.8333333,15.5076158 14.3409492,17 12.5,17 L3.33333333,17 C1.49238417,17 2.2545125e-16,15.5076158 0,13.6666667 L0,4.5 C-2.2545125e-16,2.65905083 1.49238417,1.16666667 3.33333333,1.16666667 L6.66666667,1.16666667 L6.66666667,3.66666667 L3.33333333,3.66666667 C2.87309604,3.66666667 2.5,4.03976271 2.5,4.5 L2.5,13.6666667 C2.5,14.126904 2.87309604,14.5 3.33333333,14.5 L12.5,14.5 C12.9602373,14.5 13.3333333,14.126904 13.3333333,13.6666667 L13.3333333,10.3333333 Z M16.647313,0.530963881 C16.8244904,0.714699695 16.9340405,0.96367982 16.9437878,1.24458564 L17.0963865,5.6422932 C17.1188881,6.29076007 16.6061767,6.88103624 15.9512135,6.96071193 C15.2962504,7.04038762 14.7470567,6.57929127 14.7245552,5.93082441 L14.6529666,3.86773096 L11.4001689,7.00892118 C10.9215574,7.47111091 10.2176975,7.51869815 9.82805377,7.11521024 C9.43841002,6.71172233 9.51053262,6.00995194 9.98914411,5.54776221 L13.2419418,2.40657199 L11.1826035,2.26302613 C10.535317,2.21790712 10.0936681,1.65295599 10.1961532,1.00117247 C10.2986382,0.349388941 10.9064482,-0.14240982 11.5537347,-0.0972908096 L15.9434377,0.208692769 C16.2238322,0.228237627 16.4688374,0.34641025 16.6462779,0.529892018 L16.647313,0.530963881 Z"};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const X0="182",uh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ch={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},O3=0,pM=1,I3=2,RI=3,P3=0,Mp=1,Qg=2,ph=3,Pu=0,As=1,No=2,Al=0,yh=1,mM=2,gM=3,vM=4,U3=5,Pc=100,z3=101,F3=102,B3=103,k3=104,V3=200,H3=201,G3=202,W3=203,sx=204,ax=205,X3=206,q3=207,Y3=208,j3=209,Z3=210,K3=211,Q3=212,J3=213,$3=214,ox=0,lx=1,ux=2,Ch=3,cx=4,fx=5,hx=6,dx=7,q0=0,eR=1,tR=2,to=0,_E=1,yE=2,xE=3,gb=4,bE=5,SE=6,ME=7,_M="attached",nR="detached",vb=300,Dl=301,Xc=302,p0=303,m0=304,Yp=306,g0=1e3,Qs=1001,v0=1002,Ki=1003,EE=1004,DI=1004,_p=1005,LI=1005,hi=1006,Jg=1007,NI=1007,Ml=1008,OI=1008,Ss=1009,TE=1010,AE=1011,Cp=1012,_b=1013,no=1014,Ts=1015,Ll=1016,yb=1017,xb=1018,Rp=1020,wE=35902,CE=35899,RE=1021,DE=1022,ts=1023,Nl=1026,zc=1027,bb=1028,Y0=1029,Rh=1030,Sb=1031,II=1032,Mb=1033,$g=33776,e0=33777,t0=33778,n0=33779,px=35840,mx=35841,gx=35842,vx=35843,_x=36196,yx=37492,xx=37496,bx=37488,Sx=37489,Mx=37490,Ex=37491,Tx=37808,Ax=37809,wx=37810,Cx=37811,Rx=37812,Dx=37813,Lx=37814,Nx=37815,Ox=37816,Ix=37817,Px=37818,Ux=37819,zx=37820,Fx=37821,Bx=36492,kx=36494,Vx=36495,Hx=36283,Gx=36284,Wx=36285,Xx=36286,iR=2200,rR=2201,sR=2202,_0=2300,qx=2301,Wy=2302,mh=2400,gh=2401,y0=2402,Eb=2500,LE=2501,PI=0,UI=1,zI=2,aR=3200,FI=3201,BI=3202,kI=3203,$c=0,oR=1,Cu="",$r="srgb",qc="srgb-linear",x0="linear",kn="srgb",VI="",HI="rg",GI="ga",WI=0,fh=7680,XI=7681,qI=7682,YI=7683,jI=34055,ZI=34056,KI=5386,QI=512,JI=513,$I=514,eP=515,tP=516,nP=517,iP=518,yM=519,lR=512,uR=513,cR=514,Tb=515,fR=516,hR=517,Ab=518,dR=519,b0=35044,rP=35048,sP=35040,aP=35045,oP=35049,lP=35041,uP=35046,cP=35050,fP=35042,hP="100",xM="300 es",ma=2e3,Dp=2001,dP={COMPUTE:"compute",RENDER:"render"},pP={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},mP={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function pR(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const gP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function yp(r,e){return new gP[r](e)}function mR(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function S0(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function gR(){const r=S0("canvas");return r.style.display="block",r}const zA={};let Yc=null;function vP(r){Yc=r}function _P(){return Yc}function M0(...r){const e="THREE."+r.shift();Yc?Yc("log",e,...r):console.log(e,...r)}function gt(...r){const e="THREE."+r.shift();Yc?Yc("warn",e,...r):console.warn(e,...r)}function Ot(...r){const e="THREE."+r.shift();Yc?Yc("error",e,...r):console.error(e,...r)}function Lp(...r){const e=r.join(" ");e in zA||(zA[e]=!0,gt(...r))}function yP(r,e,t){return new Promise(function(n,i){function a(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}let Pl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,u=i.length;a<u;a++)i[a].call(this,e);e.target=null}}};const Kr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FA=1234567;const xh=Math.PI/180,Np=180/Math.PI;function ya(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Kr[r&255]+Kr[r>>8&255]+Kr[r>>16&255]+Kr[r>>24&255]+"-"+Kr[e&255]+Kr[e>>8&255]+"-"+Kr[e>>16&15|64]+Kr[e>>24&255]+"-"+Kr[t&63|128]+Kr[t>>8&255]+"-"+Kr[t>>16&255]+Kr[t>>24&255]+Kr[n&255]+Kr[n>>8&255]+Kr[n>>16&255]+Kr[n>>24&255]).toLowerCase()}function Wt(r,e,t){return Math.max(e,Math.min(t,r))}function NE(r,e){return(r%e+e)%e}function xP(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function bP(r,e,t){return r!==e?(t-r)/(e-r):0}function i0(r,e,t){return(1-t)*r+t*e}function SP(r,e,t,n){return i0(r,e,1-Math.exp(-t*n))}function MP(r,e=1){return e-Math.abs(NE(r,e*2)-e)}function EP(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function TP(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function AP(r,e){return r+Math.floor(Math.random()*(e-r+1))}function wP(r,e){return r+Math.random()*(e-r)}function CP(r){return r*(.5-Math.random())}function RP(r){r!==void 0&&(FA=r);let e=FA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function DP(r){return r*xh}function LP(r){return r*Np}function NP(r){return(r&r-1)===0&&r!==0}function OP(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function IP(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function PP(r,e,t,n,i){const a=Math.cos,u=Math.sin,f=a(t/2),d=u(t/2),p=a((e+n)/2),v=u((e+n)/2),_=a((e-n)/2),y=u((e-n)/2),b=a((n-e)/2),E=u((n-e)/2);switch(i){case"XYX":r.set(f*v,d*_,d*y,f*p);break;case"YZY":r.set(d*y,f*v,d*_,f*p);break;case"ZXZ":r.set(d*_,d*y,f*v,f*p);break;case"XZX":r.set(f*v,d*E,d*b,f*p);break;case"YXY":r.set(d*b,f*v,d*E,f*p);break;case"ZYZ":r.set(d*E,d*b,f*v,f*p);break;default:gt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ms(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function ln(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const vR={DEG2RAD:xh,RAD2DEG:Np,generateUUID:ya,clamp:Wt,euclideanModulo:NE,mapLinear:xP,inverseLerp:bP,lerp:i0,damp:SP,pingpong:MP,smoothstep:EP,smootherstep:TP,randInt:AP,randFloat:wP,randFloatSpread:CP,seededRandom:RP,degToRad:DP,radToDeg:LP,isPowerOfTwo:NP,ceilPowerOfTwo:OP,floorPowerOfTwo:IP,setQuaternionFromProperEuler:PP,normalize:ln,denormalize:Ms};class ke{constructor(e=0,t=0){ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Wt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,u=this.y-e.y;return this.x=a*n-u*i+e.x,this.y=a*i+u*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ns{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,a,u,f){let d=n[i+0],p=n[i+1],v=n[i+2],_=n[i+3],y=a[u+0],b=a[u+1],E=a[u+2],A=a[u+3];if(f<=0){e[t+0]=d,e[t+1]=p,e[t+2]=v,e[t+3]=_;return}if(f>=1){e[t+0]=y,e[t+1]=b,e[t+2]=E,e[t+3]=A;return}if(_!==A||d!==y||p!==b||v!==E){let w=d*y+p*b+v*E+_*A;w<0&&(y=-y,b=-b,E=-E,A=-A,w=-w);let M=1-f;if(w<.9995){const D=Math.acos(w),R=Math.sin(D);M=Math.sin(M*D)/R,f=Math.sin(f*D)/R,d=d*M+y*f,p=p*M+b*f,v=v*M+E*f,_=_*M+A*f}else{d=d*M+y*f,p=p*M+b*f,v=v*M+E*f,_=_*M+A*f;const D=1/Math.sqrt(d*d+p*p+v*v+_*_);d*=D,p*=D,v*=D,_*=D}}e[t]=d,e[t+1]=p,e[t+2]=v,e[t+3]=_}static multiplyQuaternionsFlat(e,t,n,i,a,u){const f=n[i],d=n[i+1],p=n[i+2],v=n[i+3],_=a[u],y=a[u+1],b=a[u+2],E=a[u+3];return e[t]=f*E+v*_+d*b-p*y,e[t+1]=d*E+v*y+p*_-f*b,e[t+2]=p*E+v*b+f*y-d*_,e[t+3]=v*E-f*_-d*y-p*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,a=e._z,u=e._order,f=Math.cos,d=Math.sin,p=f(n/2),v=f(i/2),_=f(a/2),y=d(n/2),b=d(i/2),E=d(a/2);switch(u){case"XYZ":this._x=y*v*_+p*b*E,this._y=p*b*_-y*v*E,this._z=p*v*E+y*b*_,this._w=p*v*_-y*b*E;break;case"YXZ":this._x=y*v*_+p*b*E,this._y=p*b*_-y*v*E,this._z=p*v*E-y*b*_,this._w=p*v*_+y*b*E;break;case"ZXY":this._x=y*v*_-p*b*E,this._y=p*b*_+y*v*E,this._z=p*v*E+y*b*_,this._w=p*v*_-y*b*E;break;case"ZYX":this._x=y*v*_-p*b*E,this._y=p*b*_+y*v*E,this._z=p*v*E-y*b*_,this._w=p*v*_+y*b*E;break;case"YZX":this._x=y*v*_+p*b*E,this._y=p*b*_+y*v*E,this._z=p*v*E-y*b*_,this._w=p*v*_-y*b*E;break;case"XZY":this._x=y*v*_-p*b*E,this._y=p*b*_-y*v*E,this._z=p*v*E+y*b*_,this._w=p*v*_+y*b*E;break;default:gt("Quaternion: .setFromEuler() encountered an unknown order: "+u)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],a=t[8],u=t[1],f=t[5],d=t[9],p=t[2],v=t[6],_=t[10],y=n+f+_;if(y>0){const b=.5/Math.sqrt(y+1);this._w=.25/b,this._x=(v-d)*b,this._y=(a-p)*b,this._z=(u-i)*b}else if(n>f&&n>_){const b=2*Math.sqrt(1+n-f-_);this._w=(v-d)/b,this._x=.25*b,this._y=(i+u)/b,this._z=(a+p)/b}else if(f>_){const b=2*Math.sqrt(1+f-n-_);this._w=(a-p)/b,this._x=(i+u)/b,this._y=.25*b,this._z=(d+v)/b}else{const b=2*Math.sqrt(1+_-n-f);this._w=(u-i)/b,this._x=(a+p)/b,this._y=(d+v)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,a=e._z,u=e._w,f=t._x,d=t._y,p=t._z,v=t._w;return this._x=n*v+u*f+i*p-a*d,this._y=i*v+u*d+a*f-n*p,this._z=a*v+u*p+n*d-i*f,this._w=u*v-n*f-i*d-a*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,i=e._y,a=e._z,u=e._w,f=this.dot(e);f<0&&(n=-n,i=-i,a=-a,u=-u,f=-f);let d=1-t;if(f<.9995){const p=Math.acos(f),v=Math.sin(p);d=Math.sin(d*p)/v,t=Math.sin(t*p)/v,this._x=this._x*d+n*t,this._y=this._y*d+i*t,this._z=this._z*d+a*t,this._w=this._w*d+u*t,this._onChangeCallback()}else this._x=this._x*d+n*t,this._y=this._y*d+i*t,this._z=this._z*d+a*t,this._w=this._w*d+u*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(BA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(BA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=e.elements,u=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*u,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*u,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*u,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,a=e.x,u=e.y,f=e.z,d=e.w,p=2*(u*i-f*n),v=2*(f*t-a*i),_=2*(a*n-u*t);return this.x=t+d*p+u*_-f*v,this.y=n+d*v+f*p-a*_,this.z=i+d*_+a*v-u*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,a=e.z,u=t.x,f=t.y,d=t.z;return this.x=i*d-a*f,this.y=a*u-n*d,this.z=n*f-i*u,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return QS.copy(this).projectOnVector(e),this.sub(QS)}reflect(e){return this.sub(QS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Wt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QS=new j,BA=new ns;class nn{constructor(e,t,n,i,a,u,f,d,p){nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,u,f,d,p)}set(e,t,n,i,a,u,f,d,p){const v=this.elements;return v[0]=e,v[1]=i,v[2]=f,v[3]=t,v[4]=a,v[5]=d,v[6]=n,v[7]=u,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,u=n[0],f=n[3],d=n[6],p=n[1],v=n[4],_=n[7],y=n[2],b=n[5],E=n[8],A=i[0],w=i[3],M=i[6],D=i[1],R=i[4],N=i[7],P=i[2],z=i[5],B=i[8];return a[0]=u*A+f*D+d*P,a[3]=u*w+f*R+d*z,a[6]=u*M+f*N+d*B,a[1]=p*A+v*D+_*P,a[4]=p*w+v*R+_*z,a[7]=p*M+v*N+_*B,a[2]=y*A+b*D+E*P,a[5]=y*w+b*R+E*z,a[8]=y*M+b*N+E*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],u=e[4],f=e[5],d=e[6],p=e[7],v=e[8];return t*u*v-t*f*p-n*a*v+n*f*d+i*a*p-i*u*d}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],u=e[4],f=e[5],d=e[6],p=e[7],v=e[8],_=v*u-f*p,y=f*d-v*a,b=p*a-u*d,E=t*_+n*y+i*b;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/E;return e[0]=_*A,e[1]=(i*p-v*n)*A,e[2]=(f*n-i*u)*A,e[3]=y*A,e[4]=(v*t-i*d)*A,e[5]=(i*a-f*t)*A,e[6]=b*A,e[7]=(n*d-p*t)*A,e[8]=(u*t-n*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,a,u,f){const d=Math.cos(a),p=Math.sin(a);return this.set(n*d,n*p,-n*(d*u+p*f)+u+e,-i*p,i*d,-i*(-p*u+d*f)+f+t,0,0,1),this}scale(e,t){return this.premultiply(JS.makeScale(e,t)),this}rotate(e){return this.premultiply(JS.makeRotation(-e)),this}translate(e,t){return this.premultiply(JS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const JS=new nn,kA=new nn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),VA=new nn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function UP(){const r={enabled:!0,workingColorSpace:qc,spaces:{},convert:function(i,a,u){return this.enabled===!1||a===u||!a||!u||(this.spaces[a].transfer===kn&&(i.r=Nu(i.r),i.g=Nu(i.g),i.b=Nu(i.b)),this.spaces[a].primaries!==this.spaces[u].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===kn&&(i.r=Ep(i.r),i.g=Ep(i.g),i.b=Ep(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Cu?x0:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,u){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return Lp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return Lp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[qc]:{primaries:e,whitePoint:n,transfer:x0,toXYZ:kA,fromXYZ:VA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:$r},outputColorSpaceConfig:{drawingBufferColorSpace:$r}},[$r]:{primaries:e,whitePoint:n,transfer:kn,toXYZ:kA,fromXYZ:VA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:$r}}}),r}const Mn=UP();function Nu(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Ep(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Wd;class _R{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Wd===void 0&&(Wd=S0("canvas")),Wd.width=e.width,Wd.height=e.height;const i=Wd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Wd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=S0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let u=0;u<a.length;u++)a[u]=Nu(a[u]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Nu(t[n]/255)*255):t[n]=Nu(t[n]);return{data:t,width:e.width,height:e.height}}else return gt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zP=0;class Fc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zP++}),this.uuid=ya(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let u=0,f=i.length;u<f;u++)i[u].isDataTexture?a.push($S(i[u].image)):a.push($S(i[u]))}else a=$S(i);n.url=a}return t||(e.images[this.uuid]=n),n}}function $S(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?_R.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(gt("Texture: Unable to serialize Texture."),{})}let FP=0;const e1=new j;class Fi extends Pl{constructor(e=Fi.DEFAULT_IMAGE,t=Fi.DEFAULT_MAPPING,n=Qs,i=Qs,a=hi,u=Ml,f=ts,d=Ss,p=Fi.DEFAULT_ANISOTROPY,v=Cu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:FP++}),this.uuid=ya(),this.name="",this.source=new Fc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=u,this.anisotropy=p,this.format=f,this.internalFormat=null,this.type=d,this.offset=new ke(0,0),this.repeat=new ke(1,1),this.center=new ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(e1).x}get height(){return this.source.getSize(e1).y}get depth(){return this.source.getSize(e1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){gt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){gt(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case g0:e.x=e.x-Math.floor(e.x);break;case Qs:e.x=e.x<0?0:1;break;case v0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case g0:e.y=e.y-Math.floor(e.y);break;case Qs:e.y=e.y<0?0:1;break;case v0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Fi.DEFAULT_IMAGE=null;Fi.DEFAULT_MAPPING=vb;Fi.DEFAULT_ANISOTROPY=1;class Dn{constructor(e=0,t=0,n=0,i=1){Dn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=this.w,u=e.elements;return this.x=u[0]*t+u[4]*n+u[8]*i+u[12]*a,this.y=u[1]*t+u[5]*n+u[9]*i+u[13]*a,this.z=u[2]*t+u[6]*n+u[10]*i+u[14]*a,this.w=u[3]*t+u[7]*n+u[11]*i+u[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,a;const d=e.elements,p=d[0],v=d[4],_=d[8],y=d[1],b=d[5],E=d[9],A=d[2],w=d[6],M=d[10];if(Math.abs(v-y)<.01&&Math.abs(_-A)<.01&&Math.abs(E-w)<.01){if(Math.abs(v+y)<.1&&Math.abs(_+A)<.1&&Math.abs(E+w)<.1&&Math.abs(p+b+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(p+1)/2,N=(b+1)/2,P=(M+1)/2,z=(v+y)/4,B=(_+A)/4,k=(E+w)/4;return R>N&&R>P?R<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(R),i=z/n,a=B/n):N>P?N<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(N),n=z/i,a=k/i):P<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(P),n=B/a,i=k/a),this.set(n,i,a,t),this}let D=Math.sqrt((w-E)*(w-E)+(_-A)*(_-A)+(y-v)*(y-v));return Math.abs(D)<.001&&(D=1),this.x=(w-E)/D,this.y=(_-A)/D,this.z=(y-v)/D,this.w=Math.acos((p+b+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this.w=Wt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this.w=Wt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class OE extends Pl{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:hi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Dn(0,0,e,t),this.scissorTest=!1,this.viewport=new Dn(0,0,e,t);const i={width:e,height:t,depth:n.depth},a=new Fi(i);this.textures=[];const u=n.count;for(let f=0;f<u;f++)this.textures[f]=a.clone(),this.textures[f].isRenderTargetTexture=!0,this.textures[f].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:hi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Fc(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xa extends OE{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class wb extends Fi{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ki,this.minFilter=Ki,this.wrapR=Qs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class BP extends xa{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wb(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Cb extends Fi{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ki,this.minFilter=Ki,this.wrapR=Qs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kP extends xa{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Cb(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class dr{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Co.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Co.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Co.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let u=0,f=a.count;u<f;u++)e.isMesh===!0?e.getVertexPosition(u,Co):Co.fromBufferAttribute(a,u),Co.applyMatrix4(e.matrixWorld),this.expandByPoint(Co);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),V_.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),V_.copy(n.boundingBox)),V_.applyMatrix4(e.matrixWorld),this.union(V_)}const i=e.children;for(let a=0,u=i.length;a<u;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Co),Co.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cg),H_.subVectors(this.max,Cg),Xd.subVectors(e.a,Cg),qd.subVectors(e.b,Cg),Yd.subVectors(e.c,Cg),Cc.subVectors(qd,Xd),Rc.subVectors(Yd,qd),Xf.subVectors(Xd,Yd);let t=[0,-Cc.z,Cc.y,0,-Rc.z,Rc.y,0,-Xf.z,Xf.y,Cc.z,0,-Cc.x,Rc.z,0,-Rc.x,Xf.z,0,-Xf.x,-Cc.y,Cc.x,0,-Rc.y,Rc.x,0,-Xf.y,Xf.x,0];return!t1(t,Xd,qd,Yd,H_)||(t=[1,0,0,0,1,0,0,0,1],!t1(t,Xd,qd,Yd,H_))?!1:(G_.crossVectors(Cc,Rc),t=[G_.x,G_.y,G_.z],t1(t,Xd,qd,Yd,H_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Co).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Co).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const vu=[new j,new j,new j,new j,new j,new j,new j,new j],Co=new j,V_=new dr,Xd=new j,qd=new j,Yd=new j,Cc=new j,Rc=new j,Xf=new j,Cg=new j,H_=new j,G_=new j,qf=new j;function t1(r,e,t,n,i){for(let a=0,u=r.length-3;a<=u;a+=3){qf.fromArray(r,a);const f=i.x*Math.abs(qf.x)+i.y*Math.abs(qf.y)+i.z*Math.abs(qf.z),d=e.dot(qf),p=t.dot(qf),v=n.dot(qf);if(Math.max(-Math.max(d,p,v),Math.min(d,p,v))>f)return!1}return!0}const VP=new dr,Rg=new j,n1=new j;class pr{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):VP.setFromPoints(e).getCenter(n);let i=0;for(let a=0,u=e.length;a<u;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rg.subVectors(e,this.center);const t=Rg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Rg,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(n1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rg.copy(e.center).add(n1)),this.expandByPoint(Rg.copy(e.center).sub(n1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const _u=new j,i1=new j,W_=new j,Dc=new j,r1=new j,X_=new j,s1=new j;class Nh{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_u)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_u.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_u.copy(this.origin).addScaledVector(this.direction,t),_u.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){i1.copy(e).add(t).multiplyScalar(.5),W_.copy(t).sub(e).normalize(),Dc.copy(this.origin).sub(i1);const a=e.distanceTo(t)*.5,u=-this.direction.dot(W_),f=Dc.dot(this.direction),d=-Dc.dot(W_),p=Dc.lengthSq(),v=Math.abs(1-u*u);let _,y,b,E;if(v>0)if(_=u*d-f,y=u*f-d,E=a*v,_>=0)if(y>=-E)if(y<=E){const A=1/v;_*=A,y*=A,b=_*(_+u*y+2*f)+y*(u*_+y+2*d)+p}else y=a,_=Math.max(0,-(u*y+f)),b=-_*_+y*(y+2*d)+p;else y=-a,_=Math.max(0,-(u*y+f)),b=-_*_+y*(y+2*d)+p;else y<=-E?(_=Math.max(0,-(-u*a+f)),y=_>0?-a:Math.min(Math.max(-a,-d),a),b=-_*_+y*(y+2*d)+p):y<=E?(_=0,y=Math.min(Math.max(-a,-d),a),b=y*(y+2*d)+p):(_=Math.max(0,-(u*a+f)),y=_>0?a:Math.min(Math.max(-a,-d),a),b=-_*_+y*(y+2*d)+p);else y=u>0?-a:a,_=Math.max(0,-(u*y+f)),b=-_*_+y*(y+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,_),i&&i.copy(i1).addScaledVector(W_,y),b}intersectSphere(e,t){_u.subVectors(e.center,this.origin);const n=_u.dot(this.direction),i=_u.dot(_u)-n*n,a=e.radius*e.radius;if(i>a)return null;const u=Math.sqrt(a-i),f=n-u,d=n+u;return d<0?null:f<0?this.at(d,t):this.at(f,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,a,u,f,d;const p=1/this.direction.x,v=1/this.direction.y,_=1/this.direction.z,y=this.origin;return p>=0?(n=(e.min.x-y.x)*p,i=(e.max.x-y.x)*p):(n=(e.max.x-y.x)*p,i=(e.min.x-y.x)*p),v>=0?(a=(e.min.y-y.y)*v,u=(e.max.y-y.y)*v):(a=(e.max.y-y.y)*v,u=(e.min.y-y.y)*v),n>u||a>i||((a>n||isNaN(n))&&(n=a),(u<i||isNaN(i))&&(i=u),_>=0?(f=(e.min.z-y.z)*_,d=(e.max.z-y.z)*_):(f=(e.max.z-y.z)*_,d=(e.min.z-y.z)*_),n>d||f>i)||((f>n||n!==n)&&(n=f),(d<i||i!==i)&&(i=d),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,_u)!==null}intersectTriangle(e,t,n,i,a){r1.subVectors(t,e),X_.subVectors(n,e),s1.crossVectors(r1,X_);let u=this.direction.dot(s1),f;if(u>0){if(i)return null;f=1}else if(u<0)f=-1,u=-u;else return null;Dc.subVectors(this.origin,e);const d=f*this.direction.dot(X_.crossVectors(Dc,X_));if(d<0)return null;const p=f*this.direction.dot(r1.cross(Dc));if(p<0||d+p>u)return null;const v=-f*Dc.dot(s1);return v<0?null:this.at(v/u,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xt{constructor(e,t,n,i,a,u,f,d,p,v,_,y,b,E,A,w){Xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,a,u,f,d,p,v,_,y,b,E,A,w)}set(e,t,n,i,a,u,f,d,p,v,_,y,b,E,A,w){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=i,M[1]=a,M[5]=u,M[9]=f,M[13]=d,M[2]=p,M[6]=v,M[10]=_,M[14]=y,M[3]=b,M[7]=E,M[11]=A,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,i=1/jd.setFromMatrixColumn(e,0).length(),a=1/jd.setFromMatrixColumn(e,1).length(),u=1/jd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,a=e.z,u=Math.cos(n),f=Math.sin(n),d=Math.cos(i),p=Math.sin(i),v=Math.cos(a),_=Math.sin(a);if(e.order==="XYZ"){const y=u*v,b=u*_,E=f*v,A=f*_;t[0]=d*v,t[4]=-d*_,t[8]=p,t[1]=b+E*p,t[5]=y-A*p,t[9]=-f*d,t[2]=A-y*p,t[6]=E+b*p,t[10]=u*d}else if(e.order==="YXZ"){const y=d*v,b=d*_,E=p*v,A=p*_;t[0]=y+A*f,t[4]=E*f-b,t[8]=u*p,t[1]=u*_,t[5]=u*v,t[9]=-f,t[2]=b*f-E,t[6]=A+y*f,t[10]=u*d}else if(e.order==="ZXY"){const y=d*v,b=d*_,E=p*v,A=p*_;t[0]=y-A*f,t[4]=-u*_,t[8]=E+b*f,t[1]=b+E*f,t[5]=u*v,t[9]=A-y*f,t[2]=-u*p,t[6]=f,t[10]=u*d}else if(e.order==="ZYX"){const y=u*v,b=u*_,E=f*v,A=f*_;t[0]=d*v,t[4]=E*p-b,t[8]=y*p+A,t[1]=d*_,t[5]=A*p+y,t[9]=b*p-E,t[2]=-p,t[6]=f*d,t[10]=u*d}else if(e.order==="YZX"){const y=u*d,b=u*p,E=f*d,A=f*p;t[0]=d*v,t[4]=A-y*_,t[8]=E*_+b,t[1]=_,t[5]=u*v,t[9]=-f*v,t[2]=-p*v,t[6]=b*_+E,t[10]=y-A*_}else if(e.order==="XZY"){const y=u*d,b=u*p,E=f*d,A=f*p;t[0]=d*v,t[4]=-_,t[8]=p*v,t[1]=y*_+A,t[5]=u*v,t[9]=b*_-E,t[2]=E*_-b,t[6]=f*v,t[10]=A*_+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(HP,e,GP)}lookAt(e,t,n){const i=this.elements;return fa.subVectors(e,t),fa.lengthSq()===0&&(fa.z=1),fa.normalize(),Lc.crossVectors(n,fa),Lc.lengthSq()===0&&(Math.abs(n.z)===1?fa.x+=1e-4:fa.z+=1e-4,fa.normalize(),Lc.crossVectors(n,fa)),Lc.normalize(),q_.crossVectors(fa,Lc),i[0]=Lc.x,i[4]=q_.x,i[8]=fa.x,i[1]=Lc.y,i[5]=q_.y,i[9]=fa.y,i[2]=Lc.z,i[6]=q_.z,i[10]=fa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,u=n[0],f=n[4],d=n[8],p=n[12],v=n[1],_=n[5],y=n[9],b=n[13],E=n[2],A=n[6],w=n[10],M=n[14],D=n[3],R=n[7],N=n[11],P=n[15],z=i[0],B=i[4],k=i[8],I=i[12],O=i[1],W=i[5],J=i[9],K=i[13],ce=i[2],le=i[6],Z=i[10],Q=i[14],fe=i[3],Ie=i[7],Pe=i[11],X=i[15];return a[0]=u*z+f*O+d*ce+p*fe,a[4]=u*B+f*W+d*le+p*Ie,a[8]=u*k+f*J+d*Z+p*Pe,a[12]=u*I+f*K+d*Q+p*X,a[1]=v*z+_*O+y*ce+b*fe,a[5]=v*B+_*W+y*le+b*Ie,a[9]=v*k+_*J+y*Z+b*Pe,a[13]=v*I+_*K+y*Q+b*X,a[2]=E*z+A*O+w*ce+M*fe,a[6]=E*B+A*W+w*le+M*Ie,a[10]=E*k+A*J+w*Z+M*Pe,a[14]=E*I+A*K+w*Q+M*X,a[3]=D*z+R*O+N*ce+P*fe,a[7]=D*B+R*W+N*le+P*Ie,a[11]=D*k+R*J+N*Z+P*Pe,a[15]=D*I+R*K+N*Q+P*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],u=e[1],f=e[5],d=e[9],p=e[13],v=e[2],_=e[6],y=e[10],b=e[14],E=e[3],A=e[7],w=e[11],M=e[15],D=d*b-p*y,R=f*b-p*_,N=f*y-d*_,P=u*b-p*v,z=u*y-d*v,B=u*_-f*v;return t*(A*D-w*R+M*N)-n*(E*D-w*P+M*z)+i*(E*R-A*P+M*B)-a*(E*N-A*z+w*B)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],u=e[4],f=e[5],d=e[6],p=e[7],v=e[8],_=e[9],y=e[10],b=e[11],E=e[12],A=e[13],w=e[14],M=e[15],D=_*w*p-A*y*p+A*d*b-f*w*b-_*d*M+f*y*M,R=E*y*p-v*w*p-E*d*b+u*w*b+v*d*M-u*y*M,N=v*A*p-E*_*p+E*f*b-u*A*b-v*f*M+u*_*M,P=E*_*d-v*A*d-E*f*y+u*A*y+v*f*w-u*_*w,z=t*D+n*R+i*N+a*P;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/z;return e[0]=D*B,e[1]=(A*y*a-_*w*a-A*i*b+n*w*b+_*i*M-n*y*M)*B,e[2]=(f*w*a-A*d*a+A*i*p-n*w*p-f*i*M+n*d*M)*B,e[3]=(_*d*a-f*y*a-_*i*p+n*y*p+f*i*b-n*d*b)*B,e[4]=R*B,e[5]=(v*w*a-E*y*a+E*i*b-t*w*b-v*i*M+t*y*M)*B,e[6]=(E*d*a-u*w*a-E*i*p+t*w*p+u*i*M-t*d*M)*B,e[7]=(u*y*a-v*d*a+v*i*p-t*y*p-u*i*b+t*d*b)*B,e[8]=N*B,e[9]=(E*_*a-v*A*a-E*n*b+t*A*b+v*n*M-t*_*M)*B,e[10]=(u*A*a-E*f*a+E*n*p-t*A*p-u*n*M+t*f*M)*B,e[11]=(v*f*a-u*_*a-v*n*p+t*_*p+u*n*b-t*f*b)*B,e[12]=P*B,e[13]=(v*A*i-E*_*i+E*n*y-t*A*y-v*n*w+t*_*w)*B,e[14]=(E*f*i-u*A*i-E*n*d+t*A*d+u*n*w-t*f*w)*B,e[15]=(u*_*i-v*f*i+v*n*d-t*_*d-u*n*y+t*f*y)*B,this}scale(e){const t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),a=1-n,u=e.x,f=e.y,d=e.z,p=a*u,v=a*f;return this.set(p*u+n,p*f-i*d,p*d+i*f,0,p*f+i*d,v*f+n,v*d-i*u,0,p*d-i*f,v*d+i*u,a*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,a,u){return this.set(1,n,a,0,e,1,u,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,a=t._x,u=t._y,f=t._z,d=t._w,p=a+a,v=u+u,_=f+f,y=a*p,b=a*v,E=a*_,A=u*v,w=u*_,M=f*_,D=d*p,R=d*v,N=d*_,P=n.x,z=n.y,B=n.z;return i[0]=(1-(A+M))*P,i[1]=(b+N)*P,i[2]=(E-R)*P,i[3]=0,i[4]=(b-N)*z,i[5]=(1-(y+M))*z,i[6]=(w+D)*z,i[7]=0,i[8]=(E+R)*B,i[9]=(w-D)*B,i[10]=(1-(y+A))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return n.set(1,1,1),t.identity(),this;let a=jd.set(i[0],i[1],i[2]).length();const u=jd.set(i[4],i[5],i[6]).length(),f=jd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),Ro.copy(this);const p=1/a,v=1/u,_=1/f;return Ro.elements[0]*=p,Ro.elements[1]*=p,Ro.elements[2]*=p,Ro.elements[4]*=v,Ro.elements[5]*=v,Ro.elements[6]*=v,Ro.elements[8]*=_,Ro.elements[9]*=_,Ro.elements[10]*=_,t.setFromRotationMatrix(Ro),n.x=a,n.y=u,n.z=f,this}makePerspective(e,t,n,i,a,u,f=ma,d=!1){const p=this.elements,v=2*a/(t-e),_=2*a/(n-i),y=(t+e)/(t-e),b=(n+i)/(n-i);let E,A;if(d)E=a/(u-a),A=u*a/(u-a);else if(f===ma)E=-(u+a)/(u-a),A=-2*u*a/(u-a);else if(f===Dp)E=-u/(u-a),A=-u*a/(u-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+f);return p[0]=v,p[4]=0,p[8]=y,p[12]=0,p[1]=0,p[5]=_,p[9]=b,p[13]=0,p[2]=0,p[6]=0,p[10]=E,p[14]=A,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,i,a,u,f=ma,d=!1){const p=this.elements,v=2/(t-e),_=2/(n-i),y=-(t+e)/(t-e),b=-(n+i)/(n-i);let E,A;if(d)E=1/(u-a),A=u/(u-a);else if(f===ma)E=-2/(u-a),A=-(u+a)/(u-a);else if(f===Dp)E=-1/(u-a),A=-a/(u-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+f);return p[0]=v,p[4]=0,p[8]=0,p[12]=y,p[1]=0,p[5]=_,p[9]=0,p[13]=b,p[2]=0,p[6]=0,p[10]=E,p[14]=A,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const jd=new j,Ro=new Xt,HP=new j(0,0,0),GP=new j(1,1,1),Lc=new j,q_=new j,fa=new j,HA=new Xt,GA=new ns;class Sa{constructor(e=0,t=0,n=0,i=Sa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,a=i[0],u=i[4],f=i[8],d=i[1],p=i[5],v=i[9],_=i[2],y=i[6],b=i[10];switch(t){case"XYZ":this._y=Math.asin(Wt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-v,b),this._z=Math.atan2(-u,a)):(this._x=Math.atan2(y,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Wt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(f,b),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-_,a),this._z=0);break;case"ZXY":this._x=Math.asin(Wt(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-_,b),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-Wt(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(y,b),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(Wt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,p),this._y=Math.atan2(-_,a)):(this._x=0,this._y=Math.atan2(f,b));break;case"XZY":this._z=Math.asin(-Wt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(y,p),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-v,b),this._y=0);break;default:gt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return HA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HA,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return GA.setFromEuler(this),this.setFromQuaternion(GA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sa.DEFAULT_ORDER="XYZ";class Op{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let WP=0;const WA=new j,Zd=new ns,yu=new Xt,Y_=new j,Dg=new j,XP=new j,qP=new ns,XA=new j(1,0,0),qA=new j(0,1,0),YA=new j(0,0,1),jA={type:"added"},YP={type:"removed"},Kd={type:"childadded",child:null},a1={type:"childremoved",child:null};class Ln extends Pl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:WP++}),this.uuid=ya(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ln.DEFAULT_UP.clone();const e=new j,t=new Sa,n=new ns,i=new j(1,1,1);function a(){n.setFromEuler(t,!1)}function u(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Xt},normalMatrix:{value:new nn}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=Ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Op,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(XA,e)}rotateY(e){return this.rotateOnAxis(qA,e)}rotateZ(e){return this.rotateOnAxis(YA,e)}translateOnAxis(e,t){return WA.copy(e).applyQuaternion(this.quaternion),this.position.add(WA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XA,e)}translateY(e){return this.translateOnAxis(qA,e)}translateZ(e){return this.translateOnAxis(YA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(yu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Y_.copy(e):Y_.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Dg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yu.lookAt(Dg,Y_,this.up):yu.lookAt(Y_,Dg,this.up),this.quaternion.setFromRotationMatrix(yu),i&&(yu.extractRotation(i.matrixWorld),Zd.setFromRotationMatrix(yu),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Ot("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jA),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null):Ot("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(YP),a1.child=e,this.dispatchEvent(a1),a1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),yu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yu.multiply(e.parent.matrixWorld)),e.applyMatrix4(yu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jA),Kd.child=e,this.dispatchEvent(Kd),Kd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const u=this.children[n].getObjectByProperty(e,t);if(u!==void 0)return u}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let a=0,u=i.length;a<u;a++)i[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dg,e,XP),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Dg,qP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,u=i.length;a<u;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(f=>({...f,boundingBox:f.boundingBox?f.boundingBox.toJSON():void 0,boundingSphere:f.boundingSphere?f.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(f=>({...f})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(f,d){return f[d.uuid]===void 0&&(f[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const f=this.geometry.parameters;if(f!==void 0&&f.shapes!==void 0){const d=f.shapes;if(Array.isArray(d))for(let p=0,v=d.length;p<v;p++){const _=d[p];a(e.shapes,_)}else a(e.shapes,d)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const f=[];for(let d=0,p=this.material.length;d<p;d++)f.push(a(e.materials,this.material[d]));i.material=f}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let f=0;f<this.children.length;f++)i.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let f=0;f<this.animations.length;f++){const d=this.animations[f];i.animations.push(a(e.animations,d))}}if(t){const f=u(e.geometries),d=u(e.materials),p=u(e.textures),v=u(e.images),_=u(e.shapes),y=u(e.skeletons),b=u(e.animations),E=u(e.nodes);f.length>0&&(n.geometries=f),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),v.length>0&&(n.images=v),_.length>0&&(n.shapes=_),y.length>0&&(n.skeletons=y),b.length>0&&(n.animations=b),E.length>0&&(n.nodes=E)}return n.object=i,n;function u(f){const d=[];for(const p in f){const v=f[p];delete v.metadata,d.push(v)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Ln.DEFAULT_UP=new j(0,1,0);Ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Do=new j,xu=new j,o1=new j,bu=new j,Qd=new j,Jd=new j,ZA=new j,l1=new j,u1=new j,c1=new j,f1=new Dn,h1=new Dn,d1=new Dn;class Ks{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Do.subVectors(e,t),i.cross(Do);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,n,i,a){Do.subVectors(i,t),xu.subVectors(n,t),o1.subVectors(e,t);const u=Do.dot(Do),f=Do.dot(xu),d=Do.dot(o1),p=xu.dot(xu),v=xu.dot(o1),_=u*p-f*f;if(_===0)return a.set(0,0,0),null;const y=1/_,b=(p*d-f*v)*y,E=(u*v-f*d)*y;return a.set(1-b-E,E,b)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,bu)===null?!1:bu.x>=0&&bu.y>=0&&bu.x+bu.y<=1}static getInterpolation(e,t,n,i,a,u,f,d){return this.getBarycoord(e,t,n,i,bu)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(a,bu.x),d.addScaledVector(u,bu.y),d.addScaledVector(f,bu.z),d)}static getInterpolatedAttribute(e,t,n,i,a,u){return f1.setScalar(0),h1.setScalar(0),d1.setScalar(0),f1.fromBufferAttribute(e,t),h1.fromBufferAttribute(e,n),d1.fromBufferAttribute(e,i),u.setScalar(0),u.addScaledVector(f1,a.x),u.addScaledVector(h1,a.y),u.addScaledVector(d1,a.z),u}static isFrontFacing(e,t,n,i){return Do.subVectors(n,t),xu.subVectors(e,t),Do.cross(xu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Do.subVectors(this.c,this.b),xu.subVectors(this.a,this.b),Do.cross(xu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ks.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,a){return Ks.getInterpolation(e,this.a,this.b,this.c,t,n,i,a)}containsPoint(e){return Ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,a=this.c;let u,f;Qd.subVectors(i,n),Jd.subVectors(a,n),l1.subVectors(e,n);const d=Qd.dot(l1),p=Jd.dot(l1);if(d<=0&&p<=0)return t.copy(n);u1.subVectors(e,i);const v=Qd.dot(u1),_=Jd.dot(u1);if(v>=0&&_<=v)return t.copy(i);const y=d*_-v*p;if(y<=0&&d>=0&&v<=0)return u=d/(d-v),t.copy(n).addScaledVector(Qd,u);c1.subVectors(e,a);const b=Qd.dot(c1),E=Jd.dot(c1);if(E>=0&&b<=E)return t.copy(a);const A=b*p-d*E;if(A<=0&&p>=0&&E<=0)return f=p/(p-E),t.copy(n).addScaledVector(Jd,f);const w=v*E-b*_;if(w<=0&&_-v>=0&&b-E>=0)return ZA.subVectors(a,i),f=(_-v)/(_-v+(b-E)),t.copy(i).addScaledVector(ZA,f);const M=1/(w+A+y);return u=A*M,f=y*M,t.copy(n).addScaledVector(Qd,u).addScaledVector(Jd,f)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const yR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nc={h:0,s:0,l:0},j_={h:0,s:0,l:0};function p1(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class xt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$r){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=Mn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Mn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=Mn.workingColorSpace){if(e=NE(e,1),t=Wt(t,0,1),n=Wt(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,u=2*n-a;this.r=p1(u,a,e+1/3),this.g=p1(u,a,e),this.b=p1(u,a,e-1/3)}return Mn.colorSpaceToWorking(this,i),this}setStyle(e,t=$r){function n(a){a!==void 0&&parseFloat(a)<1&&gt("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const u=i[1],f=i[2];switch(u){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:gt("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],u=a.length;if(u===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(u===6)return this.setHex(parseInt(a,16),t);gt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$r){const n=yR[e.toLowerCase()];return n!==void 0?this.setHex(n,t):gt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nu(e.r),this.g=Nu(e.g),this.b=Nu(e.b),this}copyLinearToSRGB(e){return this.r=Ep(e.r),this.g=Ep(e.g),this.b=Ep(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$r){return Mn.workingToColorSpace(Qr.copy(this),e),Math.round(Wt(Qr.r*255,0,255))*65536+Math.round(Wt(Qr.g*255,0,255))*256+Math.round(Wt(Qr.b*255,0,255))}getHexString(e=$r){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Mn.workingColorSpace){Mn.workingToColorSpace(Qr.copy(this),t);const n=Qr.r,i=Qr.g,a=Qr.b,u=Math.max(n,i,a),f=Math.min(n,i,a);let d,p;const v=(f+u)/2;if(f===u)d=0,p=0;else{const _=u-f;switch(p=v<=.5?_/(u+f):_/(2-u-f),u){case n:d=(i-a)/_+(i<a?6:0);break;case i:d=(a-n)/_+2;break;case a:d=(n-i)/_+4;break}d/=6}return e.h=d,e.s=p,e.l=v,e}getRGB(e,t=Mn.workingColorSpace){return Mn.workingToColorSpace(Qr.copy(this),t),e.r=Qr.r,e.g=Qr.g,e.b=Qr.b,e}getStyle(e=$r){Mn.workingToColorSpace(Qr.copy(this),e);const t=Qr.r,n=Qr.g,i=Qr.b;return e!==$r?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Nc),this.setHSL(Nc.h+e,Nc.s+t,Nc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Nc),e.getHSL(j_);const n=i0(Nc.h,j_.h,t),i=i0(Nc.s,j_.s,t),a=i0(Nc.l,j_.l,t);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*i,this.g=a[1]*t+a[4]*n+a[7]*i,this.b=a[2]*t+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new xt;xt.NAMES=yR;let jP=0;class rs extends Pl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jP++}),this.uuid=ya(),this.name="",this.type="Material",this.blending=yh,this.side=Pu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sx,this.blendDst=ax,this.blendEquation=Pc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=Ch,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fh,this.stencilZFail=fh,this.stencilZPass=fh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){gt(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){gt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==yh&&(n.blending=this.blending),this.side!==Pu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==sx&&(n.blendSrc=this.blendSrc),this.blendDst!==ax&&(n.blendDst=this.blendDst),this.blendEquation!==Pc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ch&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==yM&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==fh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==fh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(a){const u=[];for(const f in a){const d=a[f];delete d.metadata,u.push(d)}return u}if(t){const a=i(e.textures),u=i(e.images);a.length>0&&(n.textures=a),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ef extends rs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sa,this.combine=q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ru=ZP();function ZP(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,i[d]=24,i[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,i[d]=-p-1,i[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,i[d]=13,i[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,i[d]=24,i[d|256]=24):(n[d]=31744,n[d|256]=64512,i[d]=13,i[d|256]=13)}const a=new Uint32Array(2048),u=new Uint32Array(64),f=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,v=0;for(;(p&8388608)===0;)p<<=1,v-=8388608;p&=-8388609,v+=947912704,a[d]=p|v}for(let d=1024;d<2048;++d)a[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(f[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:a,exponentTable:u,offsetTable:f}}function js(r){Math.abs(r)>65504&&gt("DataUtils.toHalfFloat(): Value out of range."),r=Wt(r,-65504,65504),Ru.floatView[0]=r;const e=Ru.uint32View[0],t=e>>23&511;return Ru.baseTable[t]+((e&8388607)>>Ru.shiftTable[t])}function Xg(r){const e=r>>10;return Ru.uint32View[0]=Ru.mantissaTable[Ru.offsetTable[e]+(r&1023)]+Ru.exponentTable[e],Ru.floatView[0]}class KP{static toHalfFloat(e){return js(e)}static fromHalfFloat(e){return Xg(e)}}const ar=new j,Z_=new ke;let QP=0;class Yn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:QP++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=b0,this.updateRanges=[],this.gpuType=Ts,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Z_.fromBufferAttribute(this,t),Z_.applyMatrix3(e),this.setXY(t,Z_.x,Z_.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix3(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix4(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ar.fromBufferAttribute(this,t),ar.applyNormalMatrix(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ar.fromBufferAttribute(this,t),ar.transformDirection(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ms(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==b0&&(e.usage=this.usage),e}}class JP extends Yn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class $P extends Yn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class eU extends Yn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class tU extends Yn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class IE extends Yn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class nU extends Yn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class PE extends Yn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class iU extends Yn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Xg(this.array[e*this.itemSize]);return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=js(t),this}getY(e){let t=Xg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=js(t),this}getZ(e){let t=Xg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=js(t),this}getW(e){let t=Xg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=js(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(n),this.array[e+2]=js(i),this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.array[e+0]=js(t),this.array[e+1]=js(n),this.array[e+2]=js(i),this.array[e+3]=js(a),this}}class St extends Yn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let rU=0;const Qa=new Xt,m1=new Ln,$d=new j,ha=new dr,Lg=new dr,Sr=new j;class Kt extends Pl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rU++}),this.uuid=ya(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pR(e)?PE:IE)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new nn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qa.makeRotationFromQuaternion(e),this.applyMatrix4(Qa),this}rotateX(e){return Qa.makeRotationX(e),this.applyMatrix4(Qa),this}rotateY(e){return Qa.makeRotationY(e),this.applyMatrix4(Qa),this}rotateZ(e){return Qa.makeRotationZ(e),this.applyMatrix4(Qa),this}translate(e,t,n){return Qa.makeTranslation(e,t,n),this.applyMatrix4(Qa),this}scale(e,t,n){return Qa.makeScale(e,t,n),this.applyMatrix4(Qa),this}lookAt(e){return m1.lookAt(e),m1.updateMatrix(),this.applyMatrix4(m1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($d).negate(),this.translate($d.x,$d.y,$d.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,a=e.length;i<a;i++){const u=e[i];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new St(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&gt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ot("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const a=t[n];ha.setFromBufferAttribute(a),this.morphTargetsRelative?(Sr.addVectors(this.boundingBox.min,ha.min),this.boundingBox.expandByPoint(Sr),Sr.addVectors(this.boundingBox.max,ha.max),this.boundingBox.expandByPoint(Sr)):(this.boundingBox.expandByPoint(ha.min),this.boundingBox.expandByPoint(ha.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ot('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Ot("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(ha.setFromBufferAttribute(e),t)for(let a=0,u=t.length;a<u;a++){const f=t[a];Lg.setFromBufferAttribute(f),this.morphTargetsRelative?(Sr.addVectors(ha.min,Lg.min),ha.expandByPoint(Sr),Sr.addVectors(ha.max,Lg.max),ha.expandByPoint(Sr)):(ha.expandByPoint(Lg.min),ha.expandByPoint(Lg.max))}ha.getCenter(n);let i=0;for(let a=0,u=e.count;a<u;a++)Sr.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(Sr));if(t)for(let a=0,u=t.length;a<u;a++){const f=t[a],d=this.morphTargetsRelative;for(let p=0,v=f.count;p<v;p++)Sr.fromBufferAttribute(f,p),d&&($d.fromBufferAttribute(e,p),Sr.add($d)),i=Math.max(i,n.distanceToSquared(Sr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&Ot('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Ot("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yn(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),f=[],d=[];for(let k=0;k<n.count;k++)f[k]=new j,d[k]=new j;const p=new j,v=new j,_=new j,y=new ke,b=new ke,E=new ke,A=new j,w=new j;function M(k,I,O){p.fromBufferAttribute(n,k),v.fromBufferAttribute(n,I),_.fromBufferAttribute(n,O),y.fromBufferAttribute(a,k),b.fromBufferAttribute(a,I),E.fromBufferAttribute(a,O),v.sub(p),_.sub(p),b.sub(y),E.sub(y);const W=1/(b.x*E.y-E.x*b.y);isFinite(W)&&(A.copy(v).multiplyScalar(E.y).addScaledVector(_,-b.y).multiplyScalar(W),w.copy(_).multiplyScalar(b.x).addScaledVector(v,-E.x).multiplyScalar(W),f[k].add(A),f[I].add(A),f[O].add(A),d[k].add(w),d[I].add(w),d[O].add(w))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let k=0,I=D.length;k<I;++k){const O=D[k],W=O.start,J=O.count;for(let K=W,ce=W+J;K<ce;K+=3)M(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const R=new j,N=new j,P=new j,z=new j;function B(k){P.fromBufferAttribute(i,k),z.copy(P);const I=f[k];R.copy(I),R.sub(P.multiplyScalar(P.dot(I))).normalize(),N.crossVectors(z,I);const W=N.dot(d[k])<0?-1:1;u.setXYZW(k,R.x,R.y,R.z,W)}for(let k=0,I=D.length;k<I;++k){const O=D[k],W=O.start,J=O.count;for(let K=W,ce=W+J;K<ce;K+=3)B(e.getX(K+0)),B(e.getX(K+1)),B(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Yn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,b=n.count;y<b;y++)n.setXYZ(y,0,0,0);const i=new j,a=new j,u=new j,f=new j,d=new j,p=new j,v=new j,_=new j;if(e)for(let y=0,b=e.count;y<b;y+=3){const E=e.getX(y+0),A=e.getX(y+1),w=e.getX(y+2);i.fromBufferAttribute(t,E),a.fromBufferAttribute(t,A),u.fromBufferAttribute(t,w),v.subVectors(u,a),_.subVectors(i,a),v.cross(_),f.fromBufferAttribute(n,E),d.fromBufferAttribute(n,A),p.fromBufferAttribute(n,w),f.add(v),d.add(v),p.add(v),n.setXYZ(E,f.x,f.y,f.z),n.setXYZ(A,d.x,d.y,d.z),n.setXYZ(w,p.x,p.y,p.z)}else for(let y=0,b=t.count;y<b;y+=3)i.fromBufferAttribute(t,y+0),a.fromBufferAttribute(t,y+1),u.fromBufferAttribute(t,y+2),v.subVectors(u,a),_.subVectors(i,a),v.cross(_),n.setXYZ(y+0,v.x,v.y,v.z),n.setXYZ(y+1,v.x,v.y,v.z),n.setXYZ(y+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Sr.fromBufferAttribute(e,t),Sr.normalize(),e.setXYZ(t,Sr.x,Sr.y,Sr.z)}toNonIndexed(){function e(f,d){const p=f.array,v=f.itemSize,_=f.normalized,y=new p.constructor(d.length*v);let b=0,E=0;for(let A=0,w=d.length;A<w;A++){f.isInterleavedBufferAttribute?b=d[A]*f.data.stride+f.offset:b=d[A]*v;for(let M=0;M<v;M++)y[E++]=p[b++]}return new Yn(y,v,_)}if(this.index===null)return gt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kt,n=this.index.array,i=this.attributes;for(const f in i){const d=i[f],p=e(d,n);t.setAttribute(f,p)}const a=this.morphAttributes;for(const f in a){const d=[],p=a[f];for(let v=0,_=p.length;v<_;v++){const y=p[v],b=e(y,n);d.push(b)}t.morphAttributes[f]=d}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let f=0,d=u.length;f<d;f++){const p=u[f];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const i={};let a=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],v=[];for(let _=0,y=p.length;_<y;_++){const b=p[_];v.push(b.toJSON(e.data))}v.length>0&&(i[d]=v,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const f=this.boundingSphere;return f!==null&&(e.data.boundingSphere=f.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const p in i){const v=i[p];this.setAttribute(p,v.clone(t))}const a=e.morphAttributes;for(const p in a){const v=[],_=a[p];for(let y=0,b=_.length;y<b;y++)v.push(_[y].clone(t));this.morphAttributes[p]=v}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let p=0,v=u.length;p<v;p++){const _=u[p];this.addGroup(_.start,_.count,_.materialIndex)}const f=e.boundingBox;f!==null&&(this.boundingBox=f.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KA=new Xt,Yf=new Nh,K_=new pr,QA=new j,Q_=new j,J_=new j,$_=new j,g1=new j,ey=new j,JA=new j,ty=new j;class Qi extends Ln{constructor(e=new Kt,t=new ef){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=i.length;a<u;a++){const f=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=a}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,a=n.morphAttributes.position,u=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const f=this.morphTargetInfluences;if(a&&f){ey.set(0,0,0);for(let d=0,p=a.length;d<p;d++){const v=f[d],_=a[d];v!==0&&(g1.fromBufferAttribute(_,e),u?ey.addScaledVector(g1,v):ey.addScaledVector(g1.sub(t),v))}t.add(ey)}return t}raycast(e,t){const n=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),K_.copy(n.boundingSphere),K_.applyMatrix4(a),Yf.copy(e.ray).recast(e.near),!(K_.containsPoint(Yf.origin)===!1&&(Yf.intersectSphere(K_,QA)===null||Yf.origin.distanceToSquared(QA)>(e.far-e.near)**2))&&(KA.copy(a).invert(),Yf.copy(e.ray).applyMatrix4(KA),!(n.boundingBox!==null&&Yf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Yf)))}_computeIntersections(e,t,n){let i;const a=this.geometry,u=this.material,f=a.index,d=a.attributes.position,p=a.attributes.uv,v=a.attributes.uv1,_=a.attributes.normal,y=a.groups,b=a.drawRange;if(f!==null)if(Array.isArray(u))for(let E=0,A=y.length;E<A;E++){const w=y[E],M=u[w.materialIndex],D=Math.max(w.start,b.start),R=Math.min(f.count,Math.min(w.start+w.count,b.start+b.count));for(let N=D,P=R;N<P;N+=3){const z=f.getX(N),B=f.getX(N+1),k=f.getX(N+2);i=ny(this,M,e,n,p,v,_,z,B,k),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const E=Math.max(0,b.start),A=Math.min(f.count,b.start+b.count);for(let w=E,M=A;w<M;w+=3){const D=f.getX(w),R=f.getX(w+1),N=f.getX(w+2);i=ny(this,u,e,n,p,v,_,D,R,N),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(d!==void 0)if(Array.isArray(u))for(let E=0,A=y.length;E<A;E++){const w=y[E],M=u[w.materialIndex],D=Math.max(w.start,b.start),R=Math.min(d.count,Math.min(w.start+w.count,b.start+b.count));for(let N=D,P=R;N<P;N+=3){const z=N,B=N+1,k=N+2;i=ny(this,M,e,n,p,v,_,z,B,k),i&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const E=Math.max(0,b.start),A=Math.min(d.count,b.start+b.count);for(let w=E,M=A;w<M;w+=3){const D=w,R=w+1,N=w+2;i=ny(this,u,e,n,p,v,_,D,R,N),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function sU(r,e,t,n,i,a,u,f){let d;if(e.side===As?d=n.intersectTriangle(u,a,i,!0,f):d=n.intersectTriangle(i,a,u,e.side===Pu,f),d===null)return null;ty.copy(f),ty.applyMatrix4(r.matrixWorld);const p=t.ray.origin.distanceTo(ty);return p<t.near||p>t.far?null:{distance:p,point:ty.clone(),object:r}}function ny(r,e,t,n,i,a,u,f,d,p){r.getVertexPosition(f,Q_),r.getVertexPosition(d,J_),r.getVertexPosition(p,$_);const v=sU(r,e,t,n,Q_,J_,$_,JA);if(v){const _=new j;Ks.getBarycoord(JA,Q_,J_,$_,_),i&&(v.uv=Ks.getInterpolatedAttribute(i,f,d,p,_,new ke)),a&&(v.uv1=Ks.getInterpolatedAttribute(a,f,d,p,_,new ke)),u&&(v.normal=Ks.getInterpolatedAttribute(u,f,d,p,_,new j),v.normal.dot(n.direction)>0&&v.normal.multiplyScalar(-1));const y={a:f,b:d,c:p,normal:new j,materialIndex:0};Ks.getNormal(Q_,J_,$_,y.normal),v.face=y,v.barycoord=_}return v}class Oh extends Kt{constructor(e=1,t=1,n=1,i=1,a=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:a,depthSegments:u};const f=this;i=Math.floor(i),a=Math.floor(a),u=Math.floor(u);const d=[],p=[],v=[],_=[];let y=0,b=0;E("z","y","x",-1,-1,n,t,e,u,a,0),E("z","y","x",1,-1,n,t,-e,u,a,1),E("x","z","y",1,1,e,n,t,i,u,2),E("x","z","y",1,-1,e,n,-t,i,u,3),E("x","y","z",1,-1,e,t,n,i,a,4),E("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(d),this.setAttribute("position",new St(p,3)),this.setAttribute("normal",new St(v,3)),this.setAttribute("uv",new St(_,2));function E(A,w,M,D,R,N,P,z,B,k,I){const O=N/B,W=P/k,J=N/2,K=P/2,ce=z/2,le=B+1,Z=k+1;let Q=0,fe=0;const Ie=new j;for(let Pe=0;Pe<Z;Pe++){const X=Pe*W-K;for(let oe=0;oe<le;oe++){const Ce=oe*O-J;Ie[A]=Ce*D,Ie[w]=X*R,Ie[M]=ce,p.push(Ie.x,Ie.y,Ie.z),Ie[A]=0,Ie[w]=0,Ie[M]=z>0?1:-1,v.push(Ie.x,Ie.y,Ie.z),_.push(oe/B),_.push(1-Pe/k),Q+=1}}for(let Pe=0;Pe<k;Pe++)for(let X=0;X<B;X++){const oe=y+X+le*Pe,Ce=y+X+le*(Pe+1),Ue=y+(X+1)+le*(Pe+1),rt=y+(X+1)+le*Pe;d.push(oe,Ce,rt),d.push(Ce,Ue,rt),fe+=6}f.addGroup(b,fe,I),b+=fe,y+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ip(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(gt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function bs(r){const e={};for(let t=0;t<r.length;t++){const n=Ip(r[t]);for(const i in n)e[i]=n[i]}return e}function aU(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function xR(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Mn.workingColorSpace}const Yx={clone:Ip,merge:bs};var oU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ma extends rs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=oU,this.fragmentShader=lU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ip(e.uniforms),this.uniformsGroups=aU(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?t.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?t.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?t.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?t.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?t.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?t.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?t.uniforms[i]={type:"m4",value:u.toArray()}:t.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Rb extends Ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt,this.projectionMatrixInverse=new Xt,this.coordinateSystem=ma,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Oc=new j,$A=new ke,ew=new ke;class Zi extends Rb{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Np*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Np*2*Math.atan(Math.tan(xh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Oc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Oc.x,Oc.y).multiplyScalar(-e/Oc.z),Oc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Oc.x,Oc.y).multiplyScalar(-e/Oc.z)}getViewSize(e,t){return this.getViewBounds(e,$A,ew),t.subVectors(ew,$A)}setViewOffset(e,t,n,i,a,u){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(xh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,p=u.fullHeight;a+=u.offsetX*i/d,t-=u.offsetY*n/p,i*=u.width/d,n*=u.height/p}const f=this.filmOffset;f!==0&&(a+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ep=-90,tp=1;class bR extends Ln{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Zi(ep,tp,e,t);i.layers=this.layers,this.add(i);const a=new Zi(ep,tp,e,t);a.layers=this.layers,this.add(a);const u=new Zi(ep,tp,e,t);u.layers=this.layers,this.add(u);const f=new Zi(ep,tp,e,t);f.layers=this.layers,this.add(f);const d=new Zi(ep,tp,e,t);d.layers=this.layers,this.add(d);const p=new Zi(ep,tp,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,a,u,f,d]=t;for(const p of t)this.remove(p);if(e===ma)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),f.up.set(0,1,0),f.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===Dp)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),f.up.set(0,-1,0),f.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,u,f,d,p,v]=this.children,_=e.getRenderTarget(),y=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,a),e.setRenderTarget(n,1,i),e.render(t,u),e.setRenderTarget(n,2,i),e.render(t,f),e.setRenderTarget(n,3,i),e.render(t,d),e.setRenderTarget(n,4,i),e.render(t,p),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,i),e.render(t,v),e.setRenderTarget(_,y,b),e.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class j0 extends Fi{constructor(e=[],t=Dl,n,i,a,u,f,d,p,v){super(e,t,n,i,a,u,f,d,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class UE extends xa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new j0(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Oh(5,5,5),a=new Ma({name:"CubemapFromEquirect",uniforms:Ip(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:As,blending:Al});a.uniforms.tEquirect.value=t;const u=new Qi(i,a),f=t.minFilter;return t.minFilter===Ml&&(t.minFilter=hi),new bR(1,10,this).update(e,u),t.minFilter=f,u.geometry.dispose(),u.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const a=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,n,i);e.setRenderTarget(a)}}class xp extends Ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uU={type:"move"};class Xy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,u=null;const f=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){u=!0;for(const A of e.hand.values()){const w=t.getJointPose(A,n),M=this._getHandJoint(p,A);w!==null&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=w.radius),M.visible=w!==null}const v=p.joints["index-finger-tip"],_=p.joints["thumb-tip"],y=v.position.distanceTo(_.position),b=.02,E=.005;p.inputState.pinching&&y>b+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&y<=b-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(d.matrix.fromArray(a.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,a.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(a.linearVelocity)):d.hasLinearVelocity=!1,a.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(a.angularVelocity)):d.hasAngularVelocity=!1));f!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&a!==null&&(i=a),i!==null&&(f.matrix.fromArray(i.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,i.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(i.linearVelocity)):f.hasLinearVelocity=!1,i.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(i.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(uU)))}return f!==null&&(f.visible=i!==null),d!==null&&(d.visible=a!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new xp;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Db{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=t}clone(){return new Db(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Lb{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=t,this.far=n}clone(){return new Lb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class zE extends Ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sa,this.environmentIntensity=1,this.environmentRotation=new Sa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Nb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=b0,this.updateRanges=[],this.version=0,this.uuid=ya()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ya()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ya()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xs=new j;class ga{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)xs.fromBufferAttribute(this,t),xs.applyMatrix4(e),this.setXYZ(t,xs.x,xs.y,xs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)xs.fromBufferAttribute(this,t),xs.applyNormalMatrix(e),this.setXYZ(t,xs.x,xs.y,xs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)xs.fromBufferAttribute(this,t),xs.transformDirection(e),this.setXYZ(t,xs.x,xs.y,xs.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ms(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ms(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ms(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ms(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ms(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),n=ln(n,this.array),i=ln(i,this.array),a=ln(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){M0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ga(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){M0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ob extends rs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let np;const Ng=new j,ip=new j,rp=new j,sp=new ke,Og=new ke,SR=new Xt,iy=new j,Ig=new j,ry=new j,tw=new ke,v1=new ke,nw=new ke;class FE extends Ln{constructor(e=new Ob){if(super(),this.isSprite=!0,this.type="Sprite",np===void 0){np=new Kt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Nb(t,5);np.setIndex([0,1,2,0,2,3]),np.setAttribute("position",new ga(n,3,0,!1)),np.setAttribute("uv",new ga(n,2,3,!1))}this.geometry=np,this.material=e,this.center=new ke(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Ot('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ip.setFromMatrixScale(this.matrixWorld),SR.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),rp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ip.multiplyScalar(-rp.z);const n=this.material.rotation;let i,a;n!==0&&(a=Math.cos(n),i=Math.sin(n));const u=this.center;sy(iy.set(-.5,-.5,0),rp,u,ip,i,a),sy(Ig.set(.5,-.5,0),rp,u,ip,i,a),sy(ry.set(.5,.5,0),rp,u,ip,i,a),tw.set(0,0),v1.set(1,0),nw.set(1,1);let f=e.ray.intersectTriangle(iy,Ig,ry,!1,Ng);if(f===null&&(sy(Ig.set(-.5,.5,0),rp,u,ip,i,a),v1.set(0,1),f=e.ray.intersectTriangle(iy,ry,Ig,!1,Ng),f===null))return;const d=e.ray.origin.distanceTo(Ng);d<e.near||d>e.far||t.push({distance:d,point:Ng.clone(),uv:Ks.getInterpolation(Ng,iy,Ig,ry,tw,v1,nw,new ke),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function sy(r,e,t,n,i,a){sp.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Og.x=a*sp.x-i*sp.y,Og.y=i*sp.x+a*sp.y):Og.copy(sp),r.copy(e),r.x+=Og.x,r.y+=Og.y,r.applyMatrix4(SR)}const ay=new j,iw=new j;class MR extends Ln{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let a;for(a=0;a<i.length&&!(t<i[a].distance);a++);return i.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ay.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(ay);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ay.setFromMatrixPosition(e.matrixWorld),iw.setFromMatrixPosition(this.matrixWorld);const n=ay.distanceTo(iw)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a;i++){let u=t[i].distance;if(t[i].object.visible&&(u-=u*t[i].hysteresis),n>=u)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,a=n.length;i<a;i++){const u=n[i];t.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return t}}const rw=new j,sw=new Dn,aw=new Dn,cU=new j,ow=new Xt,oy=new j,_1=new pr,lw=new Xt,y1=new Nh;class ER extends Qi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_M,this.bindMatrix=new Xt,this.bindMatrixInverse=new Xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new dr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingBox.expandByPoint(oy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingSphere.expandByPoint(oy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_1.copy(this.boundingSphere),_1.applyMatrix4(i),e.ray.intersectsSphere(_1)!==!1&&(lw.copy(i).invert(),y1.copy(e.ray).applyMatrix4(lw),!(this.boundingBox!==null&&y1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,y1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_M?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nR?this.bindMatrixInverse.copy(this.bindMatrix).invert():gt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;sw.fromBufferAttribute(i.attributes.skinIndex,e),aw.fromBufferAttribute(i.attributes.skinWeight,e),rw.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const u=aw.getComponent(a);if(u!==0){const f=sw.getComponent(a);ow.multiplyMatrices(n.bones[f].matrixWorld,n.boneInverses[f]),t.addScaledVector(cU.copy(rw).applyMatrix4(ow),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}class BE extends Ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Io extends Fi{constructor(e=null,t=1,n=1,i,a,u,f,d,p=Ki,v=Ki,_,y){super(null,u,f,d,p,v,i,a,_,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const uw=new Xt,fU=new Xt;class Ib{constructor(e=[],t=[]){this.uuid=ya(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){gt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Xt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Xt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let a=0,u=e.length;a<u;a++){const f=e[a]?e[a].matrixWorld:fU;uw.multiplyMatrices(f,t[a]),uw.toArray(n,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ib(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Io(t,e,e,ts,Ts);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const a=e.bones[n];let u=t[a];u===void 0&&(gt("Skeleton: No bone found with UUID:",a),u=new BE),this.bones.push(u),this.boneInverses.push(new Xt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const u=t[i];e.bones.push(u.uuid);const f=n[i];e.boneInverses.push(f.toArray())}return e}}class Pp extends Yn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ap=new Xt,cw=new Xt,ly=[],fw=new dr,hU=new Xt,Pg=new Qi,Ug=new pr;class TR extends Qi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Pp(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,hU)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new dr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ap),fw.copy(e.boundingBox).applyMatrix4(ap),this.boundingBox.union(fw)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new pr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,ap),Ug.copy(e.boundingSphere).applyMatrix4(ap),this.boundingSphere.union(Ug)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,a=n.length+1,u=e*a+1;for(let f=0;f<n.length;f++)n[f]=i[u+f]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Pg.geometry=this.geometry,Pg.material=this.material,Pg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ug.copy(this.boundingSphere),Ug.applyMatrix4(n),e.ray.intersectsSphere(Ug)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,ap),cw.multiplyMatrices(n,ap),Pg.matrixWorld=cw,Pg.raycast(e,ly);for(let u=0,f=ly.length;u<f;u++){const d=ly[u];d.instanceId=a,d.object=this,t.push(d)}ly.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Io(new Float32Array(i*this.count),i,this.count,bb,Ts));const a=this.morphTexture.source.data.data;let u=0;for(let p=0;p<n.length;p++)u+=n[p];const f=this.geometry.morphTargetsRelative?1:1-u,d=i*e;a[d]=f,a.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const x1=new j,dU=new j,pU=new nn;class Tu{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=x1.subVectors(n,t).cross(dU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(x1),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||pU.getNormalMatrix(e),i=this.coplanarPoint(x1).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jf=new pr,mU=new ke(.5,.5),uy=new j;class jp{constructor(e=new Tu,t=new Tu,n=new Tu,i=new Tu,a=new Tu,u=new Tu){this.planes=[e,t,n,i,a,u]}set(e,t,n,i,a,u){const f=this.planes;return f[0].copy(e),f[1].copy(t),f[2].copy(n),f[3].copy(i),f[4].copy(a),f[5].copy(u),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=ma,n=!1){const i=this.planes,a=e.elements,u=a[0],f=a[1],d=a[2],p=a[3],v=a[4],_=a[5],y=a[6],b=a[7],E=a[8],A=a[9],w=a[10],M=a[11],D=a[12],R=a[13],N=a[14],P=a[15];if(i[0].setComponents(p-u,b-v,M-E,P-D).normalize(),i[1].setComponents(p+u,b+v,M+E,P+D).normalize(),i[2].setComponents(p+f,b+_,M+A,P+R).normalize(),i[3].setComponents(p-f,b-_,M-A,P-R).normalize(),n)i[4].setComponents(d,y,w,N).normalize(),i[5].setComponents(p-d,b-y,M-w,P-N).normalize();else if(i[4].setComponents(p-d,b-y,M-w,P-N).normalize(),t===ma)i[5].setComponents(p+d,b+y,M+w,P+N).normalize();else if(t===Dp)i[5].setComponents(d,y,w,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),jf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),jf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jf)}intersectsSprite(e){jf.center.set(0,0,0);const t=mU.distanceTo(e.center);return jf.radius=.7071067811865476+t,jf.applyMatrix4(e.matrixWorld),this.intersectsSphere(jf)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(uy.x=i.normal.x>0?e.max.x:e.min.x,uy.y=i.normal.y>0?e.max.y:e.min.y,uy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ml=new Xt,gl=new jp;class Pb{constructor(){this.coordinateSystem=ma}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ml.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gl.setFromProjectionMatrix(ml,i.coordinateSystem,i.reversedDepth),gl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ml.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gl.setFromProjectionMatrix(ml,i.coordinateSystem,i.reversedDepth),gl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ml.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gl.setFromProjectionMatrix(ml,i.coordinateSystem,i.reversedDepth),gl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ml.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gl.setFromProjectionMatrix(ml,i.coordinateSystem,i.reversedDepth),gl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(ml.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),gl.setFromProjectionMatrix(ml,i.coordinateSystem,i.reversedDepth),gl.containsPoint(e))return!0}return!1}clone(){return new Pb}}function b1(r,e){return r-e}function gU(r,e){return r.z-e.z}function vU(r,e){return e.z-r.z}class _U{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const a=this.pool,u=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const f=a[this.index];u.push(f),this.index++,f.start=e,f.count=t,f.z=n,f.index=i}reset(){this.list.length=0,this.index=0}}const Ys=new Xt,yU=new xt(1,1,1),hw=new jp,xU=new Pb,cy=new dr,Zf=new pr,zg=new j,dw=new j,bU=new j,S1=new _U,Jr=new Qi,fy=[];function SU(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let a=0;a<i;a++)for(let u=0;u<n;u++)e.setComponent(a+t,u,r.getComponent(a,u))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function Kf(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class AR extends Qi{constructor(e,t,n=t*2,i){super(new Kt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Io(t,e,e,ts,Ts);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Io(t,e,e,Y0,no);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Io(t,e,e,ts,Ts);n.colorSpace=Mn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const u=e.getAttribute(a),{array:f,itemSize:d,normalized:p}=u,v=new f.constructor(n*d),_=new Yn(v,d,p);t.setAttribute(a,_)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Yn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),a=t.getAttribute(n);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Ys),this.getBoundingBoxAt(a,cy).applyMatrix4(Ys),e.union(cy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,Ys),this.getBoundingSphereAt(a,Zf).applyMatrix4(Ys),e.union(Zf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(b1),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;Ys.identity().toArray(a.image.data,i*16),a.needsUpdate=!0;const u=this._colorsTexture;return u&&(yU.toArray(u.image.data,i*4),u.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const u=e.getIndex();if(u!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?u.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(b1),d=this._availableGeometryIds.shift(),a[d]=i):(d=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(d,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,a=n.getIndex(),u=t.getIndex(),f=this._geometryInfo[e];if(i&&u.count>f.reservedIndexCount||t.attributes.position.count>f.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=f.vertexStart,p=f.reservedVertexCount;f.vertexCount=t.getAttribute("position").count;for(const v in n.attributes){const _=t.getAttribute(v),y=n.getAttribute(v);SU(_,y,d);const b=_.itemSize;for(let E=_.count,A=p;E<A;E++){const w=d+E;for(let M=0;M<b;M++)y.setComponent(w,M,0)}y.needsUpdate=!0,y.addUpdateRange(d*b,p*b)}if(i){const v=f.indexStart,_=f.reservedIndexCount;f.indexCount=t.getIndex().count;for(let y=0;y<u.count;y++)a.setX(v+y,d+u.getX(y));for(let y=u.count,b=_;y<b;y++)a.setX(v+y,d);a.needsUpdate=!0,a.addUpdateRange(v,f.reservedIndexCount)}return f.start=i?f.indexStart:f.vertexStart,f.count=i?f.indexCount:f.vertexCount,f.boundingBox=null,t.boundingBox!==null&&(f.boundingBox=t.boundingBox.clone()),f.boundingSphere=null,t.boundingSphere!==null&&(f.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,a=n.length;i<a;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((u,f)=>f).sort((u,f)=>n[u].vertexStart-n[f].vertexStart),a=this.geometry;for(let u=0,f=n.length;u<f;u++){const d=i[u],p=n[d];if(p.active!==!1){if(a.index!==null){if(p.indexStart!==t){const{indexStart:v,vertexStart:_,reservedIndexCount:y}=p,b=a.index,E=b.array,A=e-_;for(let w=v;w<v+y;w++)E[w]=E[w]+A;b.array.copyWithin(t,v,v+y),b.addUpdateRange(t,y),b.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:v,reservedVertexCount:_}=p,y=a.attributes;for(const b in y){const E=y[b],{array:A,itemSize:w}=E;A.copyWithin(e*w,v*w,(v+_)*w),E.addUpdateRange(e*w,_*w),E.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=a.index?p.indexStart:p.vertexStart,this._nextIndexStart=a.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const a=new dr,u=n.index,f=n.attributes.position;for(let d=i.start,p=i.start+i.count;d<p;d++){let v=d;u&&(v=u.getX(v)),a.expandByPoint(zg.fromBufferAttribute(f,v))}i.boundingBox=a}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const a=new pr;this.getBoundingBoxAt(e,cy),cy.getCenter(a.center);const u=n.index,f=n.attributes.position;let d=0;for(let p=i.start,v=i.start+i.count;p<v;p++){let _=p;u&&(_=u.getX(_)),zg.fromBufferAttribute(f,_),d=Math.max(d,a.center.distanceToSquared(zg))}a.radius=Math.sqrt(d),i.boundingSphere=a}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(b1);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),a=new Int32Array(e);Kf(this._multiDrawCounts,i),Kf(this._multiDrawStarts,a),this._multiDrawCounts=i,this._multiDrawStarts=a,this._maxInstanceCount=e;const u=this._indirectTexture,f=this._matricesTexture,d=this._colorsTexture;u.dispose(),this._initIndirectTexture(),Kf(u.image.data,this._indirectTexture.image.data),f.dispose(),this._initMatricesTexture(),Kf(f.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Kf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(f=>f.active);if(Math.max(...n.map(f=>f.vertexStart+f.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Kt,this._initializeGeometry(a));const u=this.geometry;a.index&&Kf(a.index.array,u.index.array);for(const f in a.attributes)Kf(a.attributes[f].array,u.attributes[f].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,a=this.matrixWorld,u=this.geometry;Jr.material=this.material,Jr.geometry.index=u.index,Jr.geometry.attributes=u.attributes,Jr.geometry.boundingBox===null&&(Jr.geometry.boundingBox=new dr),Jr.geometry.boundingSphere===null&&(Jr.geometry.boundingSphere=new pr);for(let f=0,d=n.length;f<d;f++){if(!n[f].visible||!n[f].active)continue;const p=n[f].geometryIndex,v=i[p];Jr.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(f,Jr.matrixWorld).premultiply(a),this.getBoundingBoxAt(p,Jr.geometry.boundingBox),this.getBoundingSphereAt(p,Jr.geometry.boundingSphere),Jr.raycast(e,fy);for(let _=0,y=fy.length;_<y;_++){const b=fy[_];b.object=this,b.batchId=f,t.push(b)}fy.length=0}Jr.material=null,Jr.geometry.index=null,Jr.geometry.attributes={},Jr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=i.getIndex(),f=u===null?1:u.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,v=this._multiDrawCounts,_=this._geometryInfo,y=this.perObjectFrustumCulled,b=this._indirectTexture,E=b.image.data,A=n.isArrayCamera?xU:hw;y&&!n.isArrayCamera&&(Ys.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),hw.setFromProjectionMatrix(Ys,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){Ys.copy(this.matrixWorld).invert(),zg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ys),dw.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ys);for(let R=0,N=d.length;R<N;R++)if(d[R].visible&&d[R].active){const P=d[R].geometryIndex;this.getMatrixAt(R,Ys),this.getBoundingSphereAt(P,Zf).applyMatrix4(Ys);let z=!1;if(y&&(z=!A.intersectsSphere(Zf,n)),!z){const B=_[P],k=bU.subVectors(Zf.center,zg).dot(dw);S1.push(B.start,B.count,k,R)}}const M=S1.list,D=this.customSort;D===null?M.sort(a.transparent?vU:gU):D.call(this,M,n);for(let R=0,N=M.length;R<N;R++){const P=M[R];p[w]=P.start*f,v[w]=P.count,E[w]=P.index,w++}S1.reset()}else for(let M=0,D=d.length;M<D;M++)if(d[M].visible&&d[M].active){const R=d[M].geometryIndex;let N=!1;if(y&&(this.getMatrixAt(M,Ys),this.getBoundingSphereAt(R,Zf).applyMatrix4(Ys),N=!A.intersectsSphere(Zf,n)),!N){const P=_[R];p[w]=P.start*f,v[w]=P.count,E[w]=M,w++}}b.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,a,u){this.onBeforeRender(e,null,i,a,u)}}class ws extends rs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jx=new j,Zx=new j,pw=new Xt,Fg=new Nh,hy=new pr,M1=new j,mw=new j;let jc=class extends Ln{constructor(e=new Kt,t=new ws){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,a=t.count;i<a;i++)jx.fromBufferAttribute(t,i-1),Zx.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=jx.distanceTo(Zx);e.setAttribute("lineDistance",new St(n,1))}else gt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hy.copy(n.boundingSphere),hy.applyMatrix4(i),hy.radius+=a,e.ray.intersectsSphere(hy)===!1)return;pw.copy(i).invert(),Fg.copy(e.ray).applyMatrix4(pw);const f=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,p=this.isLineSegments?2:1,v=n.index,y=n.attributes.position;if(v!==null){const b=Math.max(0,u.start),E=Math.min(v.count,u.start+u.count);for(let A=b,w=E-1;A<w;A+=p){const M=v.getX(A),D=v.getX(A+1),R=dy(this,e,Fg,d,M,D,A);R&&t.push(R)}if(this.isLineLoop){const A=v.getX(E-1),w=v.getX(b),M=dy(this,e,Fg,d,A,w,E-1);M&&t.push(M)}}else{const b=Math.max(0,u.start),E=Math.min(y.count,u.start+u.count);for(let A=b,w=E-1;A<w;A+=p){const M=dy(this,e,Fg,d,A,A+1,A);M&&t.push(M)}if(this.isLineLoop){const A=dy(this,e,Fg,d,E-1,b,E-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=i.length;a<u;a++){const f=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=a}}}}};function dy(r,e,t,n,i,a,u){const f=r.geometry.attributes.position;if(jx.fromBufferAttribute(f,i),Zx.fromBufferAttribute(f,a),t.distanceSqToSegment(jx,Zx,M1,mw)>n)return;M1.applyMatrix4(r.matrixWorld);const p=e.ray.origin.distanceTo(M1);if(!(p<e.near||p>e.far))return{distance:p,point:mw.clone().applyMatrix4(r.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:r}}const gw=new j,vw=new j;class Ul extends jc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,a=t.count;i<a;i+=2)gw.fromBufferAttribute(t,i),vw.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+gw.distanceTo(vw);e.setAttribute("lineDistance",new St(n,1))}else gt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wR extends jc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class kE extends rs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _w=new Xt,bM=new Nh,py=new pr,my=new j;class CR extends Ln{constructor(e=new Kt,t=new kE){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(i),py.radius+=a,e.ray.intersectsSphere(py)===!1)return;_w.copy(i).invert(),bM.copy(e.ray).applyMatrix4(_w);const f=a/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,p=n.index,_=n.attributes.position;if(p!==null){const y=Math.max(0,u.start),b=Math.min(p.count,u.start+u.count);for(let E=y,A=b;E<A;E++){const w=p.getX(E);my.fromBufferAttribute(_,w),yw(my,w,d,i,e,t,this)}}else{const y=Math.max(0,u.start),b=Math.min(_.count,u.start+u.count);for(let E=y,A=b;E<A;E++)my.fromBufferAttribute(_,E),yw(my,E,d,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,u=i.length;a<u;a++){const f=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=a}}}}}function yw(r,e,t,n,i,a,u){const f=bM.distanceSqToPoint(r);if(f<t){const d=new j;bM.closestPointToPoint(r,d),d.applyMatrix4(n);const p=i.ray.origin.distanceTo(d);if(p<i.near||p>i.far)return;a.push({distance:p,distanceToRay:Math.sqrt(f),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:u})}}class RR extends Fi{constructor(e,t,n,i,a=hi,u=hi,f,d,p){super(e,t,n,i,a,u,f,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const v=this;function _(){v.needsUpdate=!0,v._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(_))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class MU extends RR{constructor(e,t,n,i,a,u,f,d){super({},e,t,n,i,a,u,f,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class EU extends Fi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ki,this.minFilter=Ki,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ub extends Fi{constructor(e,t,n,i,a,u,f,d,p,v,_,y){super(null,u,f,d,p,v,i,a,_,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class TU extends Ub{constructor(e,t,n,i,a,u){super(e,t,n,a,u),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Qs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class AU extends Ub{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Dl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class DR extends Fi{constructor(e,t,n,i,a,u,f,d,p){super(e,t,n,i,a,u,f,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Up extends Fi{constructor(e,t,n=no,i,a,u,f=Ki,d=Ki,p,v=Nl,_=1){if(v!==Nl&&v!==zc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:_};super(y,i,a,u,f,d,v,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Fc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class LR extends Up{constructor(e,t=no,n=Dl,i,a,u=Ki,f=Ki,d,p=Nl){const v={width:e,height:e,depth:1},_=[v,v,v,v,v,v];super(e,e,t,n,i,a,u,f,d,p),this.image=_,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class VE extends Fi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class zb extends Kt{constructor(e=1,t=1,n=4,i=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),a=Math.max(1,Math.floor(a));const u=[],f=[],d=[],p=[],v=t/2,_=Math.PI/2*e,y=t,b=2*_+y,E=n*2+a,A=i+1,w=new j,M=new j;for(let D=0;D<=E;D++){let R=0,N=0,P=0,z=0;if(D<=n){const I=D/n,O=I*Math.PI/2;N=-v-e*Math.cos(O),P=e*Math.sin(O),z=-e*Math.cos(O),R=I*_}else if(D<=n+a){const I=(D-n)/a;N=-v+I*t,P=e,z=0,R=_+I*y}else{const I=(D-n-a)/n,O=I*Math.PI/2;N=v+e*Math.sin(O),P=e*Math.cos(O),z=e*Math.sin(O),R=_+y+I*_}const B=Math.max(0,Math.min(1,R/b));let k=0;D===0?k=.5/i:D===E&&(k=-.5/i);for(let I=0;I<=i;I++){const O=I/i,W=O*Math.PI*2,J=Math.sin(W),K=Math.cos(W);M.x=-P*K,M.y=N,M.z=P*J,f.push(M.x,M.y,M.z),w.set(-P*K,z,P*J),w.normalize(),d.push(w.x,w.y,w.z),p.push(O+k,B)}if(D>0){const I=(D-1)*A;for(let O=0;O<i;O++){const W=I+O,J=I+O+1,K=D*A+O,ce=D*A+O+1;u.push(W,J,K),u.push(J,ce,K)}}}this.setIndex(u),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Fb extends Kt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const a=[],u=[],f=[],d=[],p=new j,v=new ke;u.push(0,0,0),f.push(0,0,1),d.push(.5,.5);for(let _=0,y=3;_<=t;_++,y+=3){const b=n+_/t*i;p.x=e*Math.cos(b),p.y=e*Math.sin(b),u.push(p.x,p.y,p.z),f.push(0,0,1),v.x=(u[y]/e+1)/2,v.y=(u[y+1]/e+1)/2,d.push(v.x,v.y)}for(let _=1;_<=t;_++)a.push(_,_+1,0);this.setIndex(a),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Z0 extends Kt{constructor(e=1,t=1,n=1,i=32,a=1,u=!1,f=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:a,openEnded:u,thetaStart:f,thetaLength:d};const p=this;i=Math.floor(i),a=Math.floor(a);const v=[],_=[],y=[],b=[];let E=0;const A=[],w=n/2;let M=0;D(),u===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(v),this.setAttribute("position",new St(_,3)),this.setAttribute("normal",new St(y,3)),this.setAttribute("uv",new St(b,2));function D(){const N=new j,P=new j;let z=0;const B=(t-e)/n;for(let k=0;k<=a;k++){const I=[],O=k/a,W=O*(t-e)+e;for(let J=0;J<=i;J++){const K=J/i,ce=K*d+f,le=Math.sin(ce),Z=Math.cos(ce);P.x=W*le,P.y=-O*n+w,P.z=W*Z,_.push(P.x,P.y,P.z),N.set(le,B,Z).normalize(),y.push(N.x,N.y,N.z),b.push(K,1-O),I.push(E++)}A.push(I)}for(let k=0;k<i;k++)for(let I=0;I<a;I++){const O=A[I][k],W=A[I+1][k],J=A[I+1][k+1],K=A[I][k+1];(e>0||I!==0)&&(v.push(O,W,K),z+=3),(t>0||I!==a-1)&&(v.push(W,J,K),z+=3)}p.addGroup(M,z,0),M+=z}function R(N){const P=E,z=new ke,B=new j;let k=0;const I=N===!0?e:t,O=N===!0?1:-1;for(let J=1;J<=i;J++)_.push(0,w*O,0),y.push(0,O,0),b.push(.5,.5),E++;const W=E;for(let J=0;J<=i;J++){const ce=J/i*d+f,le=Math.cos(ce),Z=Math.sin(ce);B.x=I*Z,B.y=w*O,B.z=I*le,_.push(B.x,B.y,B.z),y.push(0,O,0),z.x=le*.5+.5,z.y=Z*.5*O+.5,b.push(z.x,z.y),E++}for(let J=0;J<i;J++){const K=P+J,ce=W+J;N===!0?v.push(ce,ce+1,K):v.push(ce+1,ce,K),k+=3}p.addGroup(M,k,N===!0?1:2),M+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class K0 extends Z0{constructor(e=1,t=1,n=32,i=1,a=!1,u=0,f=Math.PI*2){super(0,e,t,n,i,a,u,f),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:u,thetaLength:f}}static fromJSON(e){return new K0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class tf extends Kt{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const a=[],u=[];f(i),p(n),v(),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(a.slice(),3)),this.setAttribute("uv",new St(u,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function f(D){const R=new j,N=new j,P=new j;for(let z=0;z<t.length;z+=3)b(t[z+0],R),b(t[z+1],N),b(t[z+2],P),d(R,N,P,D)}function d(D,R,N,P){const z=P+1,B=[];for(let k=0;k<=z;k++){B[k]=[];const I=D.clone().lerp(N,k/z),O=R.clone().lerp(N,k/z),W=z-k;for(let J=0;J<=W;J++)J===0&&k===z?B[k][J]=I:B[k][J]=I.clone().lerp(O,J/W)}for(let k=0;k<z;k++)for(let I=0;I<2*(z-k)-1;I++){const O=Math.floor(I/2);I%2===0?(y(B[k][O+1]),y(B[k+1][O]),y(B[k][O])):(y(B[k][O+1]),y(B[k+1][O+1]),y(B[k+1][O]))}}function p(D){const R=new j;for(let N=0;N<a.length;N+=3)R.x=a[N+0],R.y=a[N+1],R.z=a[N+2],R.normalize().multiplyScalar(D),a[N+0]=R.x,a[N+1]=R.y,a[N+2]=R.z}function v(){const D=new j;for(let R=0;R<a.length;R+=3){D.x=a[R+0],D.y=a[R+1],D.z=a[R+2];const N=w(D)/2/Math.PI+.5,P=M(D)/Math.PI+.5;u.push(N,1-P)}E(),_()}function _(){for(let D=0;D<u.length;D+=6){const R=u[D+0],N=u[D+2],P=u[D+4],z=Math.max(R,N,P),B=Math.min(R,N,P);z>.9&&B<.1&&(R<.2&&(u[D+0]+=1),N<.2&&(u[D+2]+=1),P<.2&&(u[D+4]+=1))}}function y(D){a.push(D.x,D.y,D.z)}function b(D,R){const N=D*3;R.x=e[N+0],R.y=e[N+1],R.z=e[N+2]}function E(){const D=new j,R=new j,N=new j,P=new j,z=new ke,B=new ke,k=new ke;for(let I=0,O=0;I<a.length;I+=9,O+=6){D.set(a[I+0],a[I+1],a[I+2]),R.set(a[I+3],a[I+4],a[I+5]),N.set(a[I+6],a[I+7],a[I+8]),z.set(u[O+0],u[O+1]),B.set(u[O+2],u[O+3]),k.set(u[O+4],u[O+5]),P.copy(D).add(R).add(N).divideScalar(3);const W=w(P);A(z,O+0,D,W),A(B,O+2,R,W),A(k,O+4,N,W)}}function A(D,R,N,P){P<0&&D.x===1&&(u[R]=D.x-1),N.x===0&&N.z===0&&(u[R]=P/2/Math.PI+.5)}function w(D){return Math.atan2(D.z,-D.x)}function M(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tf(e.vertices,e.indices,e.radius,e.detail)}}class Bb extends tf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,u,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bb(e.radius,e.detail)}}const gy=new j,vy=new j,E1=new j,_y=new Ks;class NR extends Kt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(xh*t),u=e.getIndex(),f=e.getAttribute("position"),d=u?u.count:f.count,p=[0,0,0],v=["a","b","c"],_=new Array(3),y={},b=[];for(let E=0;E<d;E+=3){u?(p[0]=u.getX(E),p[1]=u.getX(E+1),p[2]=u.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:A,b:w,c:M}=_y;if(A.fromBufferAttribute(f,p[0]),w.fromBufferAttribute(f,p[1]),M.fromBufferAttribute(f,p[2]),_y.getNormal(E1),_[0]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,_[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,_[2]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,!(_[0]===_[1]||_[1]===_[2]||_[2]===_[0]))for(let D=0;D<3;D++){const R=(D+1)%3,N=_[D],P=_[R],z=_y[v[D]],B=_y[v[R]],k=`${N}_${P}`,I=`${P}_${N}`;I in y&&y[I]?(E1.dot(y[I].normal)<=a&&(b.push(z.x,z.y,z.z),b.push(B.x,B.y,B.z)),y[I]=null):k in y||(y[k]={index0:p[D],index1:p[R],normal:E1.clone()})}}for(const E in y)if(y[E]){const{index0:A,index1:w}=y[E];gy.fromBufferAttribute(f,A),vy.fromBufferAttribute(f,w),b.push(gy.x,gy.y,gy.z),b.push(vy.x,vy.y,vy.z)}this.setAttribute("position",new St(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Po{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){gt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),a=0;t.push(0);for(let u=1;u<=e;u++)n=this.getPoint(u/e),a+=n.distanceTo(i),t.push(a),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const a=n.length;let u;t?u=t:u=e*n[a-1];let f=0,d=a-1,p;for(;f<=d;)if(i=Math.floor(f+(d-f)/2),p=n[i]-u,p<0)f=i+1;else if(p>0)d=i-1;else{d=i;break}if(i=d,n[i]===u)return i/(a-1);const v=n[i],y=n[i+1]-v,b=(u-v)/y;return(i+b)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const u=this.getPoint(i),f=this.getPoint(a),d=t||(u.isVector2?new ke:new j);return d.copy(f).sub(u).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new j,i=[],a=[],u=[],f=new j,d=new Xt;for(let b=0;b<=e;b++){const E=b/e;i[b]=this.getTangentAt(E,new j)}a[0]=new j,u[0]=new j;let p=Number.MAX_VALUE;const v=Math.abs(i[0].x),_=Math.abs(i[0].y),y=Math.abs(i[0].z);v<=p&&(p=v,n.set(1,0,0)),_<=p&&(p=_,n.set(0,1,0)),y<=p&&n.set(0,0,1),f.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],f),u[0].crossVectors(i[0],a[0]);for(let b=1;b<=e;b++){if(a[b]=a[b-1].clone(),u[b]=u[b-1].clone(),f.crossVectors(i[b-1],i[b]),f.length()>Number.EPSILON){f.normalize();const E=Math.acos(Wt(i[b-1].dot(i[b]),-1,1));a[b].applyMatrix4(d.makeRotationAxis(f,E))}u[b].crossVectors(i[b],a[b])}if(t===!0){let b=Math.acos(Wt(a[0].dot(a[e]),-1,1));b/=e,i[0].dot(f.crossVectors(a[0],a[e]))>0&&(b=-b);for(let E=1;E<=e;E++)a[E].applyMatrix4(d.makeRotationAxis(i[E],b*E)),u[E].crossVectors(i[E],a[E])}return{tangents:i,normals:a,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kb extends Po{constructor(e=0,t=0,n=1,i=1,a=0,u=Math.PI*2,f=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=u,this.aClockwise=f,this.aRotation=d}getPoint(e,t=new ke){const n=t,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const u=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(u?a=0:a=i),this.aClockwise===!0&&!u&&(a===i?a=-i:a=a-i);const f=this.aStartAngle+e*a;let d=this.aX+this.xRadius*Math.cos(f),p=this.aY+this.yRadius*Math.sin(f);if(this.aRotation!==0){const v=Math.cos(this.aRotation),_=Math.sin(this.aRotation),y=d-this.aX,b=p-this.aY;d=y*v-b*_+this.aX,p=y*_+b*v+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class OR extends kb{constructor(e,t,n,i,a,u){super(e,t,n,n,i,a,u),this.isArcCurve=!0,this.type="ArcCurve"}}function HE(){let r=0,e=0,t=0,n=0;function i(a,u,f,d){r=a,e=f,t=-3*a+3*u-2*f-d,n=2*a-2*u+f+d}return{initCatmullRom:function(a,u,f,d,p){i(u,f,p*(f-a),p*(d-u))},initNonuniformCatmullRom:function(a,u,f,d,p,v,_){let y=(u-a)/p-(f-a)/(p+v)+(f-u)/v,b=(f-u)/v-(d-u)/(v+_)+(d-f)/_;y*=v,b*=v,i(u,f,y,b)},calc:function(a){const u=a*a,f=u*a;return r+e*a+t*u+n*f}}}const yy=new j,T1=new HE,A1=new HE,w1=new HE;class IR extends Po{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new j){const n=t,i=this.points,a=i.length,u=(a-(this.closed?0:1))*e;let f=Math.floor(u),d=u-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/a)+1)*a:d===0&&f===a-1&&(f=a-2,d=1);let p,v;this.closed||f>0?p=i[(f-1)%a]:(yy.subVectors(i[0],i[1]).add(i[0]),p=yy);const _=i[f%a],y=i[(f+1)%a];if(this.closed||f+2<a?v=i[(f+2)%a]:(yy.subVectors(i[a-1],i[a-2]).add(i[a-1]),v=yy),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(_),b),A=Math.pow(_.distanceToSquared(y),b),w=Math.pow(y.distanceToSquared(v),b);A<1e-4&&(A=1),E<1e-4&&(E=A),w<1e-4&&(w=A),T1.initNonuniformCatmullRom(p.x,_.x,y.x,v.x,E,A,w),A1.initNonuniformCatmullRom(p.y,_.y,y.y,v.y,E,A,w),w1.initNonuniformCatmullRom(p.z,_.z,y.z,v.z,E,A,w)}else this.curveType==="catmullrom"&&(T1.initCatmullRom(p.x,_.x,y.x,v.x,this.tension),A1.initCatmullRom(p.y,_.y,y.y,v.y,this.tension),w1.initCatmullRom(p.z,_.z,y.z,v.z,this.tension));return n.set(T1.calc(d),A1.calc(d),w1.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function xw(r,e,t,n,i){const a=(n-e)*.5,u=(i-t)*.5,f=r*r,d=r*f;return(2*t-2*n+a+u)*d+(-3*t+3*n-2*a-u)*f+a*r+t}function wU(r,e){const t=1-r;return t*t*e}function CU(r,e){return 2*(1-r)*r*e}function RU(r,e){return r*r*e}function r0(r,e,t,n){return wU(r,e)+CU(r,t)+RU(r,n)}function DU(r,e){const t=1-r;return t*t*t*e}function LU(r,e){const t=1-r;return 3*t*t*r*e}function NU(r,e){return 3*(1-r)*r*r*e}function OU(r,e){return r*r*r*e}function s0(r,e,t,n,i){return DU(r,e)+LU(r,t)+NU(r,n)+OU(r,i)}class GE extends Po{constructor(e=new ke,t=new ke,n=new ke,i=new ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ke){const n=t,i=this.v0,a=this.v1,u=this.v2,f=this.v3;return n.set(s0(e,i.x,a.x,u.x,f.x),s0(e,i.y,a.y,u.y,f.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PR extends Po{constructor(e=new j,t=new j,n=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new j){const n=t,i=this.v0,a=this.v1,u=this.v2,f=this.v3;return n.set(s0(e,i.x,a.x,u.x,f.x),s0(e,i.y,a.y,u.y,f.y),s0(e,i.z,a.z,u.z,f.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WE extends Po{constructor(e=new ke,t=new ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ke){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UR extends Po{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XE extends Po{constructor(e=new ke,t=new ke,n=new ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ke){const n=t,i=this.v0,a=this.v1,u=this.v2;return n.set(r0(e,i.x,a.x,u.x),r0(e,i.y,a.y,u.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qE extends Po{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,i=this.v0,a=this.v1,u=this.v2;return n.set(r0(e,i.x,a.x,u.x),r0(e,i.y,a.y,u.y),r0(e,i.z,a.z,u.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YE extends Po{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ke){const n=t,i=this.points,a=(i.length-1)*e,u=Math.floor(a),f=a-u,d=i[u===0?u:u-1],p=i[u],v=i[u>i.length-2?i.length-1:u+1],_=i[u>i.length-3?i.length-1:u+2];return n.set(xw(f,d.x,p.x,v.x,_.x),xw(f,d.y,p.y,v.y,_.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new ke().fromArray(i))}return this}}var Kx=Object.freeze({__proto__:null,ArcCurve:OR,CatmullRomCurve3:IR,CubicBezierCurve:GE,CubicBezierCurve3:PR,EllipseCurve:kb,LineCurve:WE,LineCurve3:UR,QuadraticBezierCurve:XE,QuadraticBezierCurve3:qE,SplineCurve:YE});class zR extends Po{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Kx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=n){const u=i[a]-n,f=this.curves[a],d=f.getLength(),p=d===0?0:1-u/d;return f.getPointAt(p,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,a=this.curves;i<a.length;i++){const u=a[i],f=u.isEllipseCurve?e*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?e*u.points.length:e,d=u.getPoints(f);for(let p=0;p<d.length;p++){const v=d[p];n&&n.equals(v)||(t.push(v),n=v)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Kx[i.type]().fromJSON(i))}return this}}class Qx extends zR{constructor(e){super(),this.type="Path",this.currentPoint=new ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new WE(this.currentPoint.clone(),new ke(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const a=new XE(this.currentPoint.clone(),new ke(e,t),new ke(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,a,u){const f=new GE(this.currentPoint.clone(),new ke(e,t),new ke(n,i),new ke(a,u));return this.curves.push(f),this.currentPoint.set(a,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new YE(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,a,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+f,t+d,n,i,a,u),this}absarc(e,t,n,i,a,u){return this.absellipse(e,t,n,n,i,a,u),this}ellipse(e,t,n,i,a,u,f,d){const p=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(e+p,t+v,n,i,a,u,f,d),this}absellipse(e,t,n,i,a,u,f,d){const p=new kb(e,t,n,i,a,u,f,d);if(this.curves.length>0){const _=p.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class bh extends Qx{constructor(e){super(e),this.uuid=ya(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Qx().fromJSON(i))}return this}}function IU(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let a=FR(r,0,i,t,!0);const u=[];if(!a||a.next===a.prev)return u;let f,d,p;if(n&&(a=BU(r,e,a,t)),r.length>80*t){f=r[0],d=r[1];let v=f,_=d;for(let y=t;y<i;y+=t){const b=r[y],E=r[y+1];b<f&&(f=b),E<d&&(d=E),b>v&&(v=b),E>_&&(_=E)}p=Math.max(v-f,_-d),p=p!==0?32767/p:0}return E0(a,u,t,f,d,p,0),u}function FR(r,e,t,n,i){let a;if(i===KU(r,e,t,n)>0)for(let u=e;u<t;u+=n)a=bw(u/n|0,r[u],r[u+1],a);else for(let u=t-n;u>=e;u-=n)a=bw(u/n|0,r[u],r[u+1],a);return a&&zp(a,a.next)&&(A0(a),a=a.next),a}function Dh(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(zp(t,t.next)||wi(t.prev,t,t.next)===0)){if(A0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function E0(r,e,t,n,i,a,u){if(!r)return;!u&&a&&WU(r,n,i,a);let f=r;for(;r.prev!==r.next;){const d=r.prev,p=r.next;if(a?UU(r,n,i,a):PU(r)){e.push(d.i,r.i,p.i),A0(r),r=p.next,f=p.next;continue}if(r=p,r===f){u?u===1?(r=zU(Dh(r),e),E0(r,e,t,n,i,a,2)):u===2&&FU(r,e,t,n,i,a):E0(Dh(r),e,t,n,i,a,1);break}}}function PU(r){const e=r.prev,t=r,n=r.next;if(wi(e,t,n)>=0)return!1;const i=e.x,a=t.x,u=n.x,f=e.y,d=t.y,p=n.y,v=Math.min(i,a,u),_=Math.min(f,d,p),y=Math.max(i,a,u),b=Math.max(f,d,p);let E=n.next;for(;E!==e;){if(E.x>=v&&E.x<=y&&E.y>=_&&E.y<=b&&qg(i,f,a,d,u,p,E.x,E.y)&&wi(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function UU(r,e,t,n){const i=r.prev,a=r,u=r.next;if(wi(i,a,u)>=0)return!1;const f=i.x,d=a.x,p=u.x,v=i.y,_=a.y,y=u.y,b=Math.min(f,d,p),E=Math.min(v,_,y),A=Math.max(f,d,p),w=Math.max(v,_,y),M=SM(b,E,e,t,n),D=SM(A,w,e,t,n);let R=r.prevZ,N=r.nextZ;for(;R&&R.z>=M&&N&&N.z<=D;){if(R.x>=b&&R.x<=A&&R.y>=E&&R.y<=w&&R!==i&&R!==u&&qg(f,v,d,_,p,y,R.x,R.y)&&wi(R.prev,R,R.next)>=0||(R=R.prevZ,N.x>=b&&N.x<=A&&N.y>=E&&N.y<=w&&N!==i&&N!==u&&qg(f,v,d,_,p,y,N.x,N.y)&&wi(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;R&&R.z>=M;){if(R.x>=b&&R.x<=A&&R.y>=E&&R.y<=w&&R!==i&&R!==u&&qg(f,v,d,_,p,y,R.x,R.y)&&wi(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;N&&N.z<=D;){if(N.x>=b&&N.x<=A&&N.y>=E&&N.y<=w&&N!==i&&N!==u&&qg(f,v,d,_,p,y,N.x,N.y)&&wi(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function zU(r,e){let t=r;do{const n=t.prev,i=t.next.next;!zp(n,i)&&kR(n,t,t.next,i)&&T0(n,i)&&T0(i,n)&&(e.push(n.i,t.i,i.i),A0(t),A0(t.next),t=r=i),t=t.next}while(t!==r);return Dh(t)}function FU(r,e,t,n,i,a){let u=r;do{let f=u.next.next;for(;f!==u.prev;){if(u.i!==f.i&&YU(u,f)){let d=VR(u,f);u=Dh(u,u.next),d=Dh(d,d.next),E0(u,e,t,n,i,a,0),E0(d,e,t,n,i,a,0);return}f=f.next}u=u.next}while(u!==r)}function BU(r,e,t,n){const i=[];for(let a=0,u=e.length;a<u;a++){const f=e[a]*n,d=a<u-1?e[a+1]*n:r.length,p=FR(r,f,d,n,!1);p===p.next&&(p.steiner=!0),i.push(qU(p))}i.sort(kU);for(let a=0;a<i.length;a++)t=VU(i[a],t);return t}function kU(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function VU(r,e){const t=HU(r,e);if(!t)return e;const n=VR(t,r);return Dh(n,n.next),Dh(t,t.next)}function HU(r,e){let t=e;const n=r.x,i=r.y;let a=-1/0,u;if(zp(r,t))return t;do{if(zp(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const _=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=n&&_>a&&(a=_,u=t.x<t.next.x?t:t.next,_===n))return u}t=t.next}while(t!==e);if(!u)return null;const f=u,d=u.x,p=u.y;let v=1/0;t=u;do{if(n>=t.x&&t.x>=d&&n!==t.x&&BR(i<p?n:a,i,d,p,i<p?a:n,i,t.x,t.y)){const _=Math.abs(i-t.y)/(n-t.x);T0(t,r)&&(_<v||_===v&&(t.x>u.x||t.x===u.x&&GU(u,t)))&&(u=t,v=_)}t=t.next}while(t!==f);return u}function GU(r,e){return wi(r.prev,r,e.prev)<0&&wi(e.next,r,r.next)<0}function WU(r,e,t,n){let i=r;do i.z===0&&(i.z=SM(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,XU(i)}function XU(r){let e,t=1;do{let n=r,i;r=null;let a=null;for(e=0;n;){e++;let u=n,f=0;for(let p=0;p<t&&(f++,u=u.nextZ,!!u);p++);let d=t;for(;f>0||d>0&&u;)f!==0&&(d===0||!u||n.z<=u.z)?(i=n,n=n.nextZ,f--):(i=u,u=u.nextZ,d--),a?a.nextZ=i:r=i,i.prevZ=a,a=i;n=u}a.nextZ=null,t*=2}while(e>1);return r}function SM(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function qU(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function BR(r,e,t,n,i,a,u,f){return(i-u)*(e-f)>=(r-u)*(a-f)&&(r-u)*(n-f)>=(t-u)*(e-f)&&(t-u)*(a-f)>=(i-u)*(n-f)}function qg(r,e,t,n,i,a,u,f){return!(r===u&&e===f)&&BR(r,e,t,n,i,a,u,f)}function YU(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!jU(r,e)&&(T0(r,e)&&T0(e,r)&&ZU(r,e)&&(wi(r.prev,r,e.prev)||wi(r,e.prev,e))||zp(r,e)&&wi(r.prev,r,r.next)>0&&wi(e.prev,e,e.next)>0)}function wi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function zp(r,e){return r.x===e.x&&r.y===e.y}function kR(r,e,t,n){const i=by(wi(r,e,t)),a=by(wi(r,e,n)),u=by(wi(t,n,r)),f=by(wi(t,n,e));return!!(i!==a&&u!==f||i===0&&xy(r,t,e)||a===0&&xy(r,n,e)||u===0&&xy(t,r,n)||f===0&&xy(t,e,n))}function xy(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function by(r){return r>0?1:r<0?-1:0}function jU(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&kR(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function T0(r,e){return wi(r.prev,r,r.next)<0?wi(r,e,r.next)>=0&&wi(r,r.prev,e)>=0:wi(r,e,r.prev)<0||wi(r,r.next,e)<0}function ZU(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,a=(r.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function VR(r,e){const t=MM(r.i,r.x,r.y),n=MM(e.i,e.x,e.y),i=r.next,a=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function bw(r,e,t,n){const i=MM(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function A0(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function MM(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function KU(r,e,t,n){let i=0;for(let a=e,u=t-n;a<t;a+=n)i+=(r[u]-r[a])*(r[a+1]+r[u+1]),u=a;return i}class QU{static triangulate(e,t,n=2){return IU(e,t,n)}}class Oo{static area(e){const t=e.length;let n=0;for(let i=t-1,a=0;a<t;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return n*.5}static isClockWise(e){return Oo.area(e)<0}static triangulateShape(e,t){const n=[],i=[],a=[];Sw(e),Mw(n,e);let u=e.length;t.forEach(Sw);for(let d=0;d<t.length;d++)i.push(u),u+=t[d].length,Mw(n,t[d]);const f=QU.triangulate(n,i);for(let d=0;d<f.length;d+=3)a.push(f.slice(d,d+3));return a}}function Sw(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function Mw(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Vb extends Kt{constructor(e=new bh([new ke(.5,.5),new ke(-.5,.5),new ke(-.5,-.5),new ke(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],a=[];for(let f=0,d=e.length;f<d;f++){const p=e[f];u(p)}this.setAttribute("position",new St(i,3)),this.setAttribute("uv",new St(a,2)),this.computeVertexNormals();function u(f){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,v=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:b-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:JU;let R,N=!1,P,z,B,k;if(M){R=M.getSpacedPoints(v),N=!0,y=!1;const ge=M.isCatmullRomCurve3?M.closed:!1;P=M.computeFrenetFrames(v,ge),z=new j,B=new j,k=new j}y||(w=0,b=0,E=0,A=0);const I=f.extractPoints(p);let O=I.shape;const W=I.holes;if(!Oo.isClockWise(O)){O=O.reverse();for(let ge=0,We=W.length;ge<We;ge++){const Ae=W[ge];Oo.isClockWise(Ae)&&(W[ge]=Ae.reverse())}}function K(ge){const Ae=10000000000000001e-36;let xe=ge[0];for(let Y=1;Y<=ge.length;Y++){const dt=Y%ge.length,Ee=ge[dt],Ct=Ee.x-xe.x,$e=Ee.y-xe.y,q=Ct*Ct+$e*$e,F=Math.max(Math.abs(Ee.x),Math.abs(Ee.y),Math.abs(xe.x),Math.abs(xe.y)),ae=Ae*F*F;if(q<=ae){ge.splice(dt,1),Y--;continue}xe=Ee}}K(O),W.forEach(K);const ce=W.length,le=O;for(let ge=0;ge<ce;ge++){const We=W[ge];O=O.concat(We)}function Z(ge,We,Ae){return We||Ot("ExtrudeGeometry: vec does not exist"),ge.clone().addScaledVector(We,Ae)}const Q=O.length;function fe(ge,We,Ae){let xe,Y,dt;const Ee=ge.x-We.x,Ct=ge.y-We.y,$e=Ae.x-ge.x,q=Ae.y-ge.y,F=Ee*Ee+Ct*Ct,ae=Ee*q-Ct*$e;if(Math.abs(ae)>Number.EPSILON){const Le=Math.sqrt(F),Fe=Math.sqrt($e*$e+q*q),_e=We.x-Ct/Le,st=We.y+Ee/Le,He=Ae.x-q/Fe,Ze=Ae.y+$e/Fe,Mt=((He-_e)*q-(Ze-st)*$e)/(Ee*q-Ct*$e);xe=_e+Ee*Mt-ge.x,Y=st+Ct*Mt-ge.y;const qe=xe*xe+Y*Y;if(qe<=2)return new ke(xe,Y);dt=Math.sqrt(qe/2)}else{let Le=!1;Ee>Number.EPSILON?$e>Number.EPSILON&&(Le=!0):Ee<-Number.EPSILON?$e<-Number.EPSILON&&(Le=!0):Math.sign(Ct)===Math.sign(q)&&(Le=!0),Le?(xe=-Ct,Y=Ee,dt=Math.sqrt(F)):(xe=Ee,Y=Ct,dt=Math.sqrt(F/2))}return new ke(xe/dt,Y/dt)}const Ie=[];for(let ge=0,We=le.length,Ae=We-1,xe=ge+1;ge<We;ge++,Ae++,xe++)Ae===We&&(Ae=0),xe===We&&(xe=0),Ie[ge]=fe(le[ge],le[Ae],le[xe]);const Pe=[];let X,oe=Ie.concat();for(let ge=0,We=ce;ge<We;ge++){const Ae=W[ge];X=[];for(let xe=0,Y=Ae.length,dt=Y-1,Ee=xe+1;xe<Y;xe++,dt++,Ee++)dt===Y&&(dt=0),Ee===Y&&(Ee=0),X[xe]=fe(Ae[xe],Ae[dt],Ae[Ee]);Pe.push(X),oe=oe.concat(X)}let Ce;if(w===0)Ce=Oo.triangulateShape(le,W);else{const ge=[],We=[];for(let Ae=0;Ae<w;Ae++){const xe=Ae/w,Y=b*Math.cos(xe*Math.PI/2),dt=E*Math.sin(xe*Math.PI/2)+A;for(let Ee=0,Ct=le.length;Ee<Ct;Ee++){const $e=Z(le[Ee],Ie[Ee],dt);ee($e.x,$e.y,-Y),xe===0&&ge.push($e)}for(let Ee=0,Ct=ce;Ee<Ct;Ee++){const $e=W[Ee];X=Pe[Ee];const q=[];for(let F=0,ae=$e.length;F<ae;F++){const Le=Z($e[F],X[F],dt);ee(Le.x,Le.y,-Y),xe===0&&q.push(Le)}xe===0&&We.push(q)}}Ce=Oo.triangulateShape(ge,We)}const Ue=Ce.length,rt=E+A;for(let ge=0;ge<Q;ge++){const We=y?Z(O[ge],oe[ge],rt):O[ge];N?(B.copy(P.normals[0]).multiplyScalar(We.x),z.copy(P.binormals[0]).multiplyScalar(We.y),k.copy(R[0]).add(B).add(z),ee(k.x,k.y,k.z)):ee(We.x,We.y,0)}for(let ge=1;ge<=v;ge++)for(let We=0;We<Q;We++){const Ae=y?Z(O[We],oe[We],rt):O[We];N?(B.copy(P.normals[ge]).multiplyScalar(Ae.x),z.copy(P.binormals[ge]).multiplyScalar(Ae.y),k.copy(R[ge]).add(B).add(z),ee(k.x,k.y,k.z)):ee(Ae.x,Ae.y,_/v*ge)}for(let ge=w-1;ge>=0;ge--){const We=ge/w,Ae=b*Math.cos(We*Math.PI/2),xe=E*Math.sin(We*Math.PI/2)+A;for(let Y=0,dt=le.length;Y<dt;Y++){const Ee=Z(le[Y],Ie[Y],xe);ee(Ee.x,Ee.y,_+Ae)}for(let Y=0,dt=W.length;Y<dt;Y++){const Ee=W[Y];X=Pe[Y];for(let Ct=0,$e=Ee.length;Ct<$e;Ct++){const q=Z(Ee[Ct],X[Ct],xe);N?ee(q.x,q.y+R[v-1].y,R[v-1].x+Ae):ee(q.x,q.y,_+Ae)}}}me(),Re();function me(){const ge=i.length/3;if(y){let We=0,Ae=Q*We;for(let xe=0;xe<Ue;xe++){const Y=Ce[xe];ft(Y[2]+Ae,Y[1]+Ae,Y[0]+Ae)}We=v+w*2,Ae=Q*We;for(let xe=0;xe<Ue;xe++){const Y=Ce[xe];ft(Y[0]+Ae,Y[1]+Ae,Y[2]+Ae)}}else{for(let We=0;We<Ue;We++){const Ae=Ce[We];ft(Ae[2],Ae[1],Ae[0])}for(let We=0;We<Ue;We++){const Ae=Ce[We];ft(Ae[0]+Q*v,Ae[1]+Q*v,Ae[2]+Q*v)}}n.addGroup(ge,i.length/3-ge,0)}function Re(){const ge=i.length/3;let We=0;it(le,We),We+=le.length;for(let Ae=0,xe=W.length;Ae<xe;Ae++){const Y=W[Ae];it(Y,We),We+=Y.length}n.addGroup(ge,i.length/3-ge,1)}function it(ge,We){let Ae=ge.length;for(;--Ae>=0;){const xe=Ae;let Y=Ae-1;Y<0&&(Y=ge.length-1);for(let dt=0,Ee=v+w*2;dt<Ee;dt++){const Ct=Q*dt,$e=Q*(dt+1),q=We+xe+Ct,F=We+Y+Ct,ae=We+Y+$e,Le=We+xe+$e;yt(q,F,ae,Le)}}}function ee(ge,We,Ae){d.push(ge),d.push(We),d.push(Ae)}function ft(ge,We,Ae){Yt(ge),Yt(We),Yt(Ae);const xe=i.length/3,Y=D.generateTopUV(n,i,xe-3,xe-2,xe-1);Et(Y[0]),Et(Y[1]),Et(Y[2])}function yt(ge,We,Ae,xe){Yt(ge),Yt(We),Yt(xe),Yt(We),Yt(Ae),Yt(xe);const Y=i.length/3,dt=D.generateSideWallUV(n,i,Y-6,Y-3,Y-2,Y-1);Et(dt[0]),Et(dt[1]),Et(dt[3]),Et(dt[1]),Et(dt[2]),Et(dt[3])}function Yt(ge){i.push(d[ge*3+0]),i.push(d[ge*3+1]),i.push(d[ge*3+2])}function Et(ge){a.push(ge.x),a.push(ge.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return $U(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,u=e.shapes.length;a<u;a++){const f=t[e.shapes[a]];n.push(f)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Kx[i.type]().fromJSON(i)),new Vb(n,e.options)}}const JU={generateTopUV:function(r,e,t,n,i){const a=e[t*3],u=e[t*3+1],f=e[n*3],d=e[n*3+1],p=e[i*3],v=e[i*3+1];return[new ke(a,u),new ke(f,d),new ke(p,v)]},generateSideWallUV:function(r,e,t,n,i,a){const u=e[t*3],f=e[t*3+1],d=e[t*3+2],p=e[n*3],v=e[n*3+1],_=e[n*3+2],y=e[i*3],b=e[i*3+1],E=e[i*3+2],A=e[a*3],w=e[a*3+1],M=e[a*3+2];return Math.abs(f-v)<Math.abs(u-p)?[new ke(u,1-d),new ke(p,1-_),new ke(y,1-E),new ke(A,1-M)]:[new ke(f,1-d),new ke(v,1-_),new ke(b,1-E),new ke(w,1-M)]}};function $U(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const a=r[n];t.shapes.push(a.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Hb extends tf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hb(e.radius,e.detail)}}class Gb extends Kt{constructor(e=[new ke(0,-.5),new ke(.5,0),new ke(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Wt(i,0,Math.PI*2);const a=[],u=[],f=[],d=[],p=[],v=1/t,_=new j,y=new ke,b=new j,E=new j,A=new j;let w=0,M=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:w=e[D+1].x-e[D].x,M=e[D+1].y-e[D].y,b.x=M*1,b.y=-w,b.z=M*0,A.copy(b),b.normalize(),d.push(b.x,b.y,b.z);break;case e.length-1:d.push(A.x,A.y,A.z);break;default:w=e[D+1].x-e[D].x,M=e[D+1].y-e[D].y,b.x=M*1,b.y=-w,b.z=M*0,E.copy(b),b.x+=A.x,b.y+=A.y,b.z+=A.z,b.normalize(),d.push(b.x,b.y,b.z),A.copy(E)}for(let D=0;D<=t;D++){const R=n+D*v*i,N=Math.sin(R),P=Math.cos(R);for(let z=0;z<=e.length-1;z++){_.x=e[z].x*N,_.y=e[z].y,_.z=e[z].x*P,u.push(_.x,_.y,_.z),y.x=D/t,y.y=z/(e.length-1),f.push(y.x,y.y);const B=d[3*z+0]*N,k=d[3*z+1],I=d[3*z+0]*P;p.push(B,k,I)}}for(let D=0;D<t;D++)for(let R=0;R<e.length-1;R++){const N=R+D*e.length,P=N,z=N+e.length,B=N+e.length+1,k=N+1;a.push(P,z,k),a.push(B,k,z)}this.setIndex(a),this.setAttribute("position",new St(u,3)),this.setAttribute("uv",new St(f,2)),this.setAttribute("normal",new St(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gb(e.points,e.segments,e.phiStart,e.phiLength)}}class Q0 extends tf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Q0(e.radius,e.detail)}}class Zp extends Kt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const a=e/2,u=t/2,f=Math.floor(n),d=Math.floor(i),p=f+1,v=d+1,_=e/f,y=t/d,b=[],E=[],A=[],w=[];for(let M=0;M<v;M++){const D=M*y-u;for(let R=0;R<p;R++){const N=R*_-a;E.push(N,-D,0),A.push(0,0,1),w.push(R/f),w.push(1-M/d)}}for(let M=0;M<d;M++)for(let D=0;D<f;D++){const R=D+p*M,N=D+p*(M+1),P=D+1+p*(M+1),z=D+1+p*M;b.push(R,N,z),b.push(N,P,z)}this.setIndex(b),this.setAttribute("position",new St(E,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zp(e.width,e.height,e.widthSegments,e.heightSegments)}}class Wb extends Kt{constructor(e=.5,t=1,n=32,i=1,a=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:u},n=Math.max(3,n),i=Math.max(1,i);const f=[],d=[],p=[],v=[];let _=e;const y=(t-e)/i,b=new j,E=new ke;for(let A=0;A<=i;A++){for(let w=0;w<=n;w++){const M=a+w/n*u;b.x=_*Math.cos(M),b.y=_*Math.sin(M),d.push(b.x,b.y,b.z),p.push(0,0,1),E.x=(b.x/t+1)/2,E.y=(b.y/t+1)/2,v.push(E.x,E.y)}_+=y}for(let A=0;A<i;A++){const w=A*(n+1);for(let M=0;M<n;M++){const D=M+w,R=D,N=D+n+1,P=D+n+2,z=D+1;f.push(R,N,z),f.push(N,P,z)}}this.setIndex(f),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Xb extends Kt{constructor(e=new bh([new ke(0,.5),new ke(-.5,-.5),new ke(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],a=[],u=[];let f=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let v=0;v<e.length;v++)p(e[v]),this.addGroup(f,d,v),f+=d,d=0;this.setIndex(n),this.setAttribute("position",new St(i,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(u,2));function p(v){const _=i.length/3,y=v.extractPoints(t);let b=y.shape;const E=y.holes;Oo.isClockWise(b)===!1&&(b=b.reverse());for(let w=0,M=E.length;w<M;w++){const D=E[w];Oo.isClockWise(D)===!0&&(E[w]=D.reverse())}const A=Oo.triangulateShape(b,E);for(let w=0,M=E.length;w<M;w++){const D=E[w];b=b.concat(D)}for(let w=0,M=b.length;w<M;w++){const D=b[w];i.push(D.x,D.y,0),a.push(0,0,1),u.push(D.x,D.y)}for(let w=0,M=A.length;w<M;w++){const D=A[w],R=D[0]+_,N=D[1]+_,P=D[2]+_;n.push(R,N,P),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ez(t,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const u=t[e.shapes[i]];n.push(u)}return new Xb(n,e.curveSegments)}}function ez(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class J0 extends Kt{constructor(e=1,t=32,n=16,i=0,a=Math.PI*2,u=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:a,thetaStart:u,thetaLength:f},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(u+f,Math.PI);let p=0;const v=[],_=new j,y=new j,b=[],E=[],A=[],w=[];for(let M=0;M<=n;M++){const D=[],R=M/n;let N=0;M===0&&u===0?N=.5/t:M===n&&d===Math.PI&&(N=-.5/t);for(let P=0;P<=t;P++){const z=P/t;_.x=-e*Math.cos(i+z*a)*Math.sin(u+R*f),_.y=e*Math.cos(u+R*f),_.z=e*Math.sin(i+z*a)*Math.sin(u+R*f),E.push(_.x,_.y,_.z),y.copy(_).normalize(),A.push(y.x,y.y,y.z),w.push(z+N,1-R),D.push(p++)}v.push(D)}for(let M=0;M<n;M++)for(let D=0;D<t;D++){const R=v[M][D+1],N=v[M][D],P=v[M+1][D],z=v[M+1][D+1];(M!==0||u>0)&&b.push(R,N,z),(M!==n-1||d<Math.PI)&&b.push(N,P,z)}this.setIndex(b),this.setAttribute("position",new St(E,3)),this.setAttribute("normal",new St(A,3)),this.setAttribute("uv",new St(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qb extends tf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qb(e.radius,e.detail)}}class Yb extends Kt{constructor(e=1,t=.4,n=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:a},n=Math.floor(n),i=Math.floor(i);const u=[],f=[],d=[],p=[],v=new j,_=new j,y=new j;for(let b=0;b<=n;b++)for(let E=0;E<=i;E++){const A=E/i*a,w=b/n*Math.PI*2;_.x=(e+t*Math.cos(w))*Math.cos(A),_.y=(e+t*Math.cos(w))*Math.sin(A),_.z=t*Math.sin(w),f.push(_.x,_.y,_.z),v.x=e*Math.cos(A),v.y=e*Math.sin(A),y.subVectors(_,v).normalize(),d.push(y.x,y.y,y.z),p.push(E/i),p.push(b/n)}for(let b=1;b<=n;b++)for(let E=1;E<=i;E++){const A=(i+1)*b+E-1,w=(i+1)*(b-1)+E-1,M=(i+1)*(b-1)+E,D=(i+1)*b+E;u.push(A,w,D),u.push(w,M,D)}this.setIndex(u),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jb extends Kt{constructor(e=1,t=.4,n=64,i=8,a=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:a,q:u},n=Math.floor(n),i=Math.floor(i);const f=[],d=[],p=[],v=[],_=new j,y=new j,b=new j,E=new j,A=new j,w=new j,M=new j;for(let R=0;R<=n;++R){const N=R/n*a*Math.PI*2;D(N,a,u,e,b),D(N+.01,a,u,e,E),w.subVectors(E,b),M.addVectors(E,b),A.crossVectors(w,M),M.crossVectors(A,w),A.normalize(),M.normalize();for(let P=0;P<=i;++P){const z=P/i*Math.PI*2,B=-t*Math.cos(z),k=t*Math.sin(z);_.x=b.x+(B*M.x+k*A.x),_.y=b.y+(B*M.y+k*A.y),_.z=b.z+(B*M.z+k*A.z),d.push(_.x,_.y,_.z),y.subVectors(_,b).normalize(),p.push(y.x,y.y,y.z),v.push(R/n),v.push(P/i)}}for(let R=1;R<=n;R++)for(let N=1;N<=i;N++){const P=(i+1)*(R-1)+(N-1),z=(i+1)*R+(N-1),B=(i+1)*R+N,k=(i+1)*(R-1)+N;f.push(P,z,k),f.push(z,B,k)}this.setIndex(f),this.setAttribute("position",new St(d,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(v,2));function D(R,N,P,z,B){const k=Math.cos(R),I=Math.sin(R),O=P/N*R,W=Math.cos(O);B.x=z*(2+W)*.5*k,B.y=z*(2+W)*I*.5,B.z=z*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Zb extends Kt{constructor(e=new qE(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,n=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:a};const u=e.computeFrenetFrames(t,a);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const f=new j,d=new j,p=new ke;let v=new j;const _=[],y=[],b=[],E=[];A(),this.setIndex(E),this.setAttribute("position",new St(_,3)),this.setAttribute("normal",new St(y,3)),this.setAttribute("uv",new St(b,2));function A(){for(let R=0;R<t;R++)w(R);w(a===!1?t:0),D(),M()}function w(R){v=e.getPointAt(R/t,v);const N=u.normals[R],P=u.binormals[R];for(let z=0;z<=i;z++){const B=z/i*Math.PI*2,k=Math.sin(B),I=-Math.cos(B);d.x=I*N.x+k*P.x,d.y=I*N.y+k*P.y,d.z=I*N.z+k*P.z,d.normalize(),y.push(d.x,d.y,d.z),f.x=v.x+n*d.x,f.y=v.y+n*d.y,f.z=v.z+n*d.z,_.push(f.x,f.y,f.z)}}function M(){for(let R=1;R<=t;R++)for(let N=1;N<=i;N++){const P=(i+1)*(R-1)+(N-1),z=(i+1)*R+(N-1),B=(i+1)*R+N,k=(i+1)*(R-1)+N;E.push(P,z,k),E.push(z,B,k)}}function D(){for(let R=0;R<=t;R++)for(let N=0;N<=i;N++)p.x=R/t,p.y=N/i,b.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Zb(new Kx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jE extends Kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new j,a=new j;if(e.index!==null){const u=e.attributes.position,f=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:f.count,materialIndex:0}]);for(let p=0,v=d.length;p<v;++p){const _=d[p],y=_.start,b=_.count;for(let E=y,A=y+b;E<A;E+=3)for(let w=0;w<3;w++){const M=f.getX(E+w),D=f.getX(E+(w+1)%3);i.fromBufferAttribute(u,M),a.fromBufferAttribute(u,D),Ew(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const u=e.attributes.position;for(let f=0,d=u.count/3;f<d;f++)for(let p=0;p<3;p++){const v=3*f+p,_=3*f+(p+1)%3;i.fromBufferAttribute(u,v),a.fromBufferAttribute(u,_),Ew(i,a,n)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Ew(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var Tw=Object.freeze({__proto__:null,BoxGeometry:Oh,CapsuleGeometry:zb,CircleGeometry:Fb,ConeGeometry:K0,CylinderGeometry:Z0,DodecahedronGeometry:Bb,EdgesGeometry:NR,ExtrudeGeometry:Vb,IcosahedronGeometry:Hb,LatheGeometry:Gb,OctahedronGeometry:Q0,PlaneGeometry:Zp,PolyhedronGeometry:tf,RingGeometry:Wb,ShapeGeometry:Xb,SphereGeometry:J0,TetrahedronGeometry:qb,TorusGeometry:Yb,TorusKnotGeometry:jb,TubeGeometry:Zb,WireframeGeometry:jE});class HR extends rs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ZE extends Ma{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class KE extends rs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GR extends KE{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class WR extends rs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sa,this.combine=q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class XR extends rs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qR extends rs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class YR extends rs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sa,this.combine=q0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QE extends rs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JE extends rs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class jR extends rs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$c,this.normalScale=new ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZR extends ws{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function vh(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function KR(r){function e(i,a){return r[i]-r[a]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function EM(r,e,t){const n=r.length,i=new r.constructor(n);for(let a=0,u=0;u!==n;++a){const f=t[a]*e;for(let d=0;d!==e;++d)i[u++]=r[f+d]}return i}function $E(r,e,t,n){let i=1,a=r[0];for(;a!==void 0&&a[n]===void 0;)a=r[i++];if(a===void 0)return;let u=a[n];if(u!==void 0)if(Array.isArray(u))do u=a[n],u!==void 0&&(e.push(a.time),t.push(...u)),a=r[i++];while(a!==void 0);else if(u.toArray!==void 0)do u=a[n],u!==void 0&&(e.push(a.time),u.toArray(t,t.length)),a=r[i++];while(a!==void 0);else do u=a[n],u!==void 0&&(e.push(a.time),t.push(u)),a=r[i++];while(a!==void 0)}function tz(r,e,t,n,i=30){const a=r.clone();a.name=e;const u=[];for(let d=0;d<a.tracks.length;++d){const p=a.tracks[d],v=p.getValueSize(),_=[],y=[];for(let b=0;b<p.times.length;++b){const E=p.times[b]*i;if(!(E<t||E>=n)){_.push(p.times[b]);for(let A=0;A<v;++A)y.push(p.values[b*v+A])}}_.length!==0&&(p.times=vh(_,p.times.constructor),p.values=vh(y,p.values.constructor),u.push(p))}a.tracks=u;let f=1/0;for(let d=0;d<a.tracks.length;++d)f>a.tracks[d].times[0]&&(f=a.tracks[d].times[0]);for(let d=0;d<a.tracks.length;++d)a.tracks[d].shift(-1*f);return a.resetDuration(),a}function nz(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,a=e/n;for(let u=0;u<i;++u){const f=t.tracks[u],d=f.ValueTypeName;if(d==="bool"||d==="string")continue;const p=r.tracks.find(function(M){return M.name===f.name&&M.ValueTypeName===d});if(p===void 0)continue;let v=0;const _=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=_/3);let y=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=b/3);const E=f.times.length-1;let A;if(a<=f.times[0]){const M=v,D=_-v;A=f.values.slice(M,D)}else if(a>=f.times[E]){const M=E*_+v,D=M+_-v;A=f.values.slice(M,D)}else{const M=f.createInterpolant(),D=v,R=_-v;M.evaluate(a),A=M.resultBuffer.slice(D,R)}d==="quaternion"&&new ns().fromArray(A).normalize().conjugate().toArray(A);const w=p.times.length;for(let M=0;M<w;++M){const D=M*b+y;if(d==="quaternion")ns.multiplyQuaternionsFlat(p.values,D,A,0,p.values,D);else{const R=b-y*2;for(let N=0;N<R;++N)p.values[D+N]-=A[N]}}}return r.blendMode=LE,r}class iz{static convertArray(e,t){return vh(e,t)}static isTypedArray(e){return mR(e)}static getKeyframeOrder(e){return KR(e)}static sortedArray(e,t,n){return EM(e,t,n)}static flattenJSON(e,t,n,i){$E(e,t,n,i)}static subclip(e,t,n,i,a=30){return tz(e,t,n,i,a)}static makeClipAdditive(e,t=0,n=e,i=30){return nz(e,t,n,i)}}class $0{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{let u;n:{i:if(!(e<i)){for(let f=n+2;;){if(i===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===f)break;if(a=i,i=t[++n],e<i)break t}u=t.length;break n}if(!(e>=a)){const f=t[1];e<f&&(n=2,a=f);for(let d=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(i=a,a=t[--n-1],e>=a)break t}u=n,n=0;break n}break e}for(;n<u;){const f=n+u>>>1;e<t[f]?u=f:n=f+1}if(i=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let u=0;u!==i;++u)t[u]=n[a+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class QR extends $0{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mh,endingEnd:mh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let a=e-2,u=e+1,f=i[a],d=i[u];if(f===void 0)switch(this.getSettings_().endingStart){case gh:a=e,f=2*t-n;break;case y0:a=i.length-2,f=t+i[a]-i[a+1];break;default:a=e,f=n}if(d===void 0)switch(this.getSettings_().endingEnd){case gh:u=e,d=2*n-t;break;case y0:u=1,d=n+i[1]-i[0];break;default:u=e-1,d=t}const p=(n-t)*.5,v=this.valueSize;this._weightPrev=p/(t-f),this._weightNext=p/(d-n),this._offsetPrev=a*v,this._offsetNext=u*v}interpolate_(e,t,n,i){const a=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=e*f,p=d-f,v=this._offsetPrev,_=this._offsetNext,y=this._weightPrev,b=this._weightNext,E=(n-t)/(i-t),A=E*E,w=A*E,M=-y*w+2*y*A-y*E,D=(1+y)*w+(-1.5-2*y)*A+(-.5+y)*E+1,R=(-1-b)*w+(1.5+b)*A+.5*E,N=b*w-b*A;for(let P=0;P!==f;++P)a[P]=M*u[v+P]+D*u[p+P]+R*u[d+P]+N*u[_+P];return a}}class eT extends $0{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=e*f,p=d-f,v=(n-t)/(i-t),_=1-v;for(let y=0;y!==f;++y)a[y]=u[p+y]*_+u[d+y]*v;return a}}class JR extends $0{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ro{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vh(t,this.TimeBufferType),this.values=vh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:vh(e.times,Array),values:vh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new JR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new eT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new QR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _0:t=this.InterpolantFactoryMethodDiscrete;break;case qx:t=this.InterpolantFactoryMethodLinear;break;case Wy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return gt("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _0;case this.InterpolantFactoryMethodLinear:return qx;case this.InterpolantFactoryMethodSmooth:return Wy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let a=0,u=i-1;for(;a!==i&&n[a]<e;)++a;for(;u!==-1&&n[u]>t;)--u;if(++u,a!==0||u!==i){a>=u&&(u=Math.max(u,1),a=u-1);const f=this.getValueSize();this.times=n.slice(a,u),this.values=this.values.slice(a*f,u*f)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Ot("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;a===0&&(Ot("KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let f=0;f!==a;f++){const d=n[f];if(typeof d=="number"&&isNaN(d)){Ot("KeyframeTrack: Time is not a valid number.",this,f,d),e=!1;break}if(u!==null&&u>d){Ot("KeyframeTrack: Out of order keys.",this,f,d,u),e=!1;break}u=d}if(i!==void 0&&mR(i))for(let f=0,d=i.length;f!==d;++f){const p=i[f];if(isNaN(p)){Ot("KeyframeTrack: Value is not a valid number.",this,f,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Wy,a=e.length-1;let u=1;for(let f=1;f<a;++f){let d=!1;const p=e[f],v=e[f+1];if(p!==v&&(f!==1||p!==e[0]))if(i)d=!0;else{const _=f*n,y=_-n,b=_+n;for(let E=0;E!==n;++E){const A=t[_+E];if(A!==t[y+E]||A!==t[b+E]){d=!0;break}}}if(d){if(f!==u){e[u]=e[f];const _=f*n,y=u*n;for(let b=0;b!==n;++b)t[y+b]=t[_+b]}++u}}if(a>0){e[u]=e[a];for(let f=a*n,d=u*n,p=0;p!==n;++p)t[d+p]=t[f+p];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=t.slice(0,u*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ro.prototype.ValueTypeName="";ro.prototype.TimeBufferType=Float32Array;ro.prototype.ValueBufferType=Float32Array;ro.prototype.DefaultInterpolation=qx;class Ih extends ro{constructor(e,t,n){super(e,t,n)}}Ih.prototype.ValueTypeName="bool";Ih.prototype.ValueBufferType=Array;Ih.prototype.DefaultInterpolation=_0;Ih.prototype.InterpolantFactoryMethodLinear=void 0;Ih.prototype.InterpolantFactoryMethodSmooth=void 0;class tT extends ro{constructor(e,t,n,i){super(e,t,n,i)}}tT.prototype.ValueTypeName="color";class w0 extends ro{constructor(e,t,n,i){super(e,t,n,i)}}w0.prototype.ValueTypeName="number";class $R extends $0{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=(n-t)/(i-t);let p=e*f;for(let v=p+f;p!==v;p+=4)ns.slerpFlat(a,0,u,p-f,u,p,d);return a}}class ev extends ro{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new $R(this.times,this.values,this.getValueSize(),e)}}ev.prototype.ValueTypeName="quaternion";ev.prototype.InterpolantFactoryMethodSmooth=void 0;class Ph extends ro{constructor(e,t,n){super(e,t,n)}}Ph.prototype.ValueTypeName="string";Ph.prototype.ValueBufferType=Array;Ph.prototype.DefaultInterpolation=_0;Ph.prototype.InterpolantFactoryMethodLinear=void 0;Ph.prototype.InterpolantFactoryMethodSmooth=void 0;class C0 extends ro{constructor(e,t,n,i){super(e,t,n,i)}}C0.prototype.ValueTypeName="vector";class R0{constructor(e="",t=-1,n=[],i=Eb){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ya(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let u=0,f=n.length;u!==f;++u)t.push(sz(n[u]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,u=n.length;a!==u;++a)t.push(ro.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const a=t.length,u=[];for(let f=0;f<a;f++){let d=[],p=[];d.push((f+a-1)%a,f,(f+1)%a),p.push(0,1,0);const v=KR(d);d=EM(d,1,v),p=EM(p,1,v),!i&&d[0]===0&&(d.push(a),p.push(p[0])),u.push(new w0(".morphTargetInfluences["+t[f].name+"]",d,p).scale(1/n))}return new this(e,-1,u)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let f=0,d=e.length;f<d;f++){const p=e[f],v=p.name.match(a);if(v&&v.length>1){const _=v[1];let y=i[_];y||(i[_]=y=[]),y.push(p)}}const u=[];for(const f in i)u.push(this.CreateFromMorphTargetSequence(f,i[f],t,n));return u}static parseAnimation(e,t){if(gt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Ot("AnimationClip: No animation in JSONLoader data."),null;const n=function(_,y,b,E,A){if(b.length!==0){const w=[],M=[];$E(b,w,M,E),w.length!==0&&A.push(new _(y,w,M))}},i=[],a=e.name||"default",u=e.fps||30,f=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let _=0;_<p.length;_++){const y=p[_].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const b={};let E;for(E=0;E<y.length;E++)if(y[E].morphTargets)for(let A=0;A<y[E].morphTargets.length;A++)b[y[E].morphTargets[A]]=-1;for(const A in b){const w=[],M=[];for(let D=0;D!==y[E].morphTargets.length;++D){const R=y[E];w.push(R.time),M.push(R.morphTarget===A?1:0)}i.push(new w0(".morphTargetInfluence["+A+"]",w,M))}d=b.length*u}else{const b=".bones["+t[_].name+"]";n(C0,b+".position",y,"pos",i),n(ev,b+".quaternion",y,"rot",i),n(C0,b+".scale",y,"scl",i)}}return i.length===0?null:new this(a,d,i,f)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function rz(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return w0;case"vector":case"vector2":case"vector3":case"vector4":return C0;case"color":return tT;case"quaternion":return ev;case"bool":case"boolean":return Ih;case"string":return Ph}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function sz(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=rz(r.type);if(r.times===void 0){const t=[],n=[];$E(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const El={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class nT{constructor(e,t,n){const i=this;let a=!1,u=0,f=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(v){f++,a===!1&&i.onStart!==void 0&&i.onStart(v,u,f),a=!0},this.itemEnd=function(v){u++,i.onProgress!==void 0&&i.onProgress(v,u,f),u===f&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(v){i.onError!==void 0&&i.onError(v)},this.resolveURL=function(v){return d?d(v):v},this.setURLModifier=function(v){return d=v,this},this.addHandler=function(v,_){return p.push(v,_),this},this.removeHandler=function(v){const _=p.indexOf(v);return _!==-1&&p.splice(_,2),this},this.getHandler=function(v){for(let _=0,y=p.length;_<y;_+=2){const b=p[_],E=p[_+1];if(b.global&&(b.lastIndex=0),b.test(v))return E}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const eD=new nT;class ia{constructor(e){this.manager=e!==void 0?e:eD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,a){n.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ia.DEFAULT_MATERIAL_NAME="__DEFAULT";const Su={};class az extends Error{constructor(e,t){super(e),this.response=t}}class Uu extends ia{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=El.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Su[e]!==void 0){Su[e].push({onLoad:t,onProgress:n,onError:i});return}Su[e]=[],Su[e].push({onLoad:t,onProgress:n,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),f=this.mimeType,d=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&gt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const v=Su[e],_=p.body.getReader(),y=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),b=y?parseInt(y):0,E=b!==0;let A=0;const w=new ReadableStream({start(M){D();function D(){_.read().then(({done:R,value:N})=>{if(R)M.close();else{A+=N.byteLength;const P=new ProgressEvent("progress",{lengthComputable:E,loaded:A,total:b});for(let z=0,B=v.length;z<B;z++){const k=v[z];k.onProgress&&k.onProgress(P)}M.enqueue(N),D()}},R=>{M.error(R)})}}});return new Response(w)}else throw new az(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>new DOMParser().parseFromString(v,f));case"json":return p.json();default:if(f==="")return p.text();{const _=/charset="?([^;"\s]*)"?/i.exec(f),y=_&&_[1]?_[1].toLowerCase():void 0,b=new TextDecoder(y);return p.arrayBuffer().then(E=>b.decode(E))}}}).then(p=>{El.add(`file:${e}`,p);const v=Su[e];delete Su[e];for(let _=0,y=v.length;_<y;_++){const b=v[_];b.onLoad&&b.onLoad(p)}}).catch(p=>{const v=Su[e];if(v===void 0)throw this.manager.itemError(e),p;delete Su[e];for(let _=0,y=v.length;_<y;_++){const b=v[_];b.onError&&b.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class oz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=new Uu(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{t(a.parse(JSON.parse(f)))}catch(d){i?i(d):Ot(d),a.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=R0.parse(e[n]);t.push(i)}return t}}class lz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=[],f=new Ub,d=new Uu(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(a.withCredentials);let p=0;function v(_){d.load(e[_],function(y){const b=a.parse(y,!0);u[_]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},p+=1,p===6&&(b.mipmapCount===1&&(f.minFilter=hi),f.image=u,f.format=b.format,f.needsUpdate=!0,t&&t(f))},n,i)}if(Array.isArray(e))for(let _=0,y=e.length;_<y;++_)v(_);else d.load(e,function(_){const y=a.parse(_,!0);if(y.isCubemap){const b=y.mipmaps.length/y.mipmapCount;for(let E=0;E<b;E++){u[E]={mipmaps:[]};for(let A=0;A<y.mipmapCount;A++)u[E].mipmaps.push(y.mipmaps[E*y.mipmapCount+A]),u[E].format=y.format,u[E].width=y.width,u[E].height=y.height}f.image=u}else f.image.width=y.width,f.image.height=y.height,f.mipmaps=y.mipmaps;y.mipmapCount===1&&(f.minFilter=hi),f.format=y.format,f.needsUpdate=!0,t&&t(f)},n,i);return f}}const op=new WeakMap;class D0 extends ia{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,u=El.get(`image:${e}`);if(u!==void 0){if(u.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(u),a.manager.itemEnd(e)},0);else{let _=op.get(u);_===void 0&&(_=[],op.set(u,_)),_.push({onLoad:t,onError:i})}return u}const f=S0("img");function d(){v(),t&&t(this);const _=op.get(this)||[];for(let y=0;y<_.length;y++){const b=_[y];b.onLoad&&b.onLoad(this)}op.delete(this),a.manager.itemEnd(e)}function p(_){v(),i&&i(_),El.remove(`image:${e}`);const y=op.get(this)||[];for(let b=0;b<y.length;b++){const E=y[b];E.onError&&E.onError(_)}op.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function v(){f.removeEventListener("load",d,!1),f.removeEventListener("error",p,!1)}return f.addEventListener("load",d,!1),f.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),El.add(`image:${e}`,f),a.manager.itemStart(e),f.src=e,f}}class uz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=new j0;a.colorSpace=$r;const u=new D0(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let f=0;function d(p){u.load(e[p],function(v){a.images[p]=v,f++,f===6&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}for(let p=0;p<e.length;++p)d(p);return a}}class cz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=new Io,f=new Uu(this.manager);return f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setPath(this.path),f.setWithCredentials(a.withCredentials),f.load(e,function(d){let p;try{p=a.parse(d)}catch(v){if(i!==void 0)i(v);else{v(v);return}}p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:Qs,u.wrapT=p.wrapT!==void 0?p.wrapT:Qs,u.magFilter=p.magFilter!==void 0?p.magFilter:hi,u.minFilter=p.minFilter!==void 0?p.minFilter:hi,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(u.colorSpace=p.colorSpace),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=Ml),p.mipmapCount===1&&(u.minFilter=hi),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,t&&t(u,p)},n,i),u}}class fz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=new Fi,u=new D0(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(f){a.image=f,a.needsUpdate=!0,t!==void 0&&t(a)},n,i),a}}class nf extends Ln{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class tD extends nf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const C1=new Xt,Aw=new j,ww=new j;class iT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ke(512,512),this.mapType=Ss,this.map=null,this.mapPass=null,this.matrix=new Xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jp,this._frameExtents=new ke(1,1),this._viewportCount=1,this._viewports=[new Dn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Aw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Aw),ww.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ww),t.updateMatrixWorld(),C1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(C1,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(C1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hz extends iT{constructor(){super(new Zi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Np*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class nD extends nf{constructor(e,t,n=0,i=Math.PI/3,a=0,u=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.distance=n,this.angle=i,this.penumbra=a,this.decay=u,this.map=null,this.shadow=new hz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class dz extends iT{constructor(){super(new Zi(90,1,.5,500)),this.isPointLightShadow=!0}}class iD extends nf{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new dz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class Ou extends Rb{constructor(e=-1,t=1,n=1,i=-1,a=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=a,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,a,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,u=n+e,f=i+t,d=i-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=p*this.view.offsetX,u=a+p*this.view.width,f-=v*this.view.offsetY,d=f-v*this.view.height}this.projectionMatrix.makeOrthographic(a,u,f,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class pz extends iT{constructor(){super(new Ou(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rD extends nf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ln.DEFAULT_UP),this.updateMatrix(),this.target=new Ln,this.shadow=new pz}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class sD extends nf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class aD extends nf{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class rT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,a=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*i),t.addScaledVector(u[2],.488603*a),t.addScaledVector(u[3],.488603*n),t.addScaledVector(u[4],1.092548*(n*i)),t.addScaledVector(u[5],1.092548*(i*a)),t.addScaledVector(u[6],.315392*(3*a*a-1)),t.addScaledVector(u[7],1.092548*(n*a)),t.addScaledVector(u[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,a=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],2*.511664*i),t.addScaledVector(u[2],2*.511664*a),t.addScaledVector(u[3],2*.511664*n),t.addScaledVector(u[4],2*.429043*n*i),t.addScaledVector(u[5],2*.429043*i*a),t.addScaledVector(u[6],.743125*a*a-.247708),t.addScaledVector(u[7],2*.429043*n*a),t.addScaledVector(u[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-i*i)}}class oD extends nf{constructor(e=new rT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Kb extends ia{constructor(e){super(e),this.textures={}}load(e,t,n,i){const a=this,u=new Uu(a.manager);u.setPath(a.path),u.setRequestHeader(a.requestHeader),u.setWithCredentials(a.withCredentials),u.load(e,function(f){try{t(a.parse(JSON.parse(f)))}catch(d){i?i(d):Ot(d),a.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&gt("MaterialLoader: Undefined texture",a),t[a]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(i.allowOverride=e.allowOverride),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const u=e.uniforms[a];switch(i.uniforms[a]={},u.type){case"t":i.uniforms[a].value=n(u.value);break;case"c":i.uniforms[a].value=new xt().setHex(u.value);break;case"v2":i.uniforms[a].value=new ke().fromArray(u.value);break;case"v3":i.uniforms[a].value=new j().fromArray(u.value);break;case"v4":i.uniforms[a].value=new Dn().fromArray(u.value);break;case"m3":i.uniforms[a].value=new nn().fromArray(u.value);break;case"m4":i.uniforms[a].value=new Xt().fromArray(u.value);break;default:i.uniforms[a].value=u.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new ke().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Kb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:HR,SpriteMaterial:Ob,RawShaderMaterial:ZE,ShaderMaterial:Ma,PointsMaterial:kE,MeshPhysicalMaterial:GR,MeshStandardMaterial:KE,MeshPhongMaterial:WR,MeshToonMaterial:XR,MeshNormalMaterial:qR,MeshLambertMaterial:YR,MeshDepthMaterial:QE,MeshDistanceMaterial:JE,MeshBasicMaterial:ef,MeshMatcapMaterial:jR,LineDashedMaterial:ZR,LineBasicMaterial:ws,Material:rs};return new t[e]}}class TM{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class sT extends Kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lD extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=new Uu(a.manager);u.setPath(a.path),u.setRequestHeader(a.requestHeader),u.setWithCredentials(a.withCredentials),u.load(e,function(f){try{t(a.parse(JSON.parse(f)))}catch(d){i?i(d):Ot(d),a.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(b,E){if(t[E]!==void 0)return t[E];const w=b.interleavedBuffers[E],M=a(b,w.buffer),D=yp(w.type,M),R=new Nb(D,w.stride);return R.uuid=w.uuid,t[E]=R,R}function a(b,E){if(n[E]!==void 0)return n[E];const w=b.arrayBuffers[E],M=new Uint32Array(w).buffer;return n[E]=M,M}const u=e.isInstancedBufferGeometry?new sT:new Kt,f=e.data.index;if(f!==void 0){const b=yp(f.type,f.array);u.setIndex(new Yn(b,1))}const d=e.data.attributes;for(const b in d){const E=d[b];let A;if(E.isInterleavedBufferAttribute){const w=i(e.data,E.data);A=new ga(w,E.itemSize,E.offset,E.normalized)}else{const w=yp(E.type,E.array),M=E.isInstancedBufferAttribute?Pp:Yn;A=new M(w,E.itemSize,E.normalized)}E.name!==void 0&&(A.name=E.name),E.usage!==void 0&&A.setUsage(E.usage),u.setAttribute(b,A)}const p=e.data.morphAttributes;if(p)for(const b in p){const E=p[b],A=[];for(let w=0,M=E.length;w<M;w++){const D=E[w];let R;if(D.isInterleavedBufferAttribute){const N=i(e.data,D.data);R=new ga(N,D.itemSize,D.offset,D.normalized)}else{const N=yp(D.type,D.array);R=new Yn(N,D.itemSize,D.normalized)}D.name!==void 0&&(R.name=D.name),A.push(R)}u.morphAttributes[b]=A}e.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const _=e.data.groups||e.data.drawcalls||e.data.offsets;if(_!==void 0)for(let b=0,E=_.length;b!==E;++b){const A=_[b];u.addGroup(A.start,A.count,A.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(u.boundingSphere=new pr().fromJSON(y)),e.name&&(u.name=e.name),e.userData&&(u.userData=e.userData),u}}class mz extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=this.path===""?TM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||u;const f=new Uu(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(_){i!==void 0&&i(_),_("ObjectLoader: Can't parse "+e+".",_.message);return}const v=p.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),Ot("ObjectLoader: Can't load "+e);return}a.parse(p,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?TM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Uu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const u=await a.loadAsync(e,t),f=JSON.parse(u),d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(f)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),u=this.parseImages(e.images,function(){t!==void 0&&t(p)}),f=this.parseTextures(e.textures,u),d=this.parseMaterials(e.materials,f),p=this.parseObject(e.object,a,d,f,n),v=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,v),this.bindLightTargets(p),t!==void 0){let _=!1;for(const y in u)if(u[y].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),u=this.parseTextures(e.textures,a),f=this.parseMaterials(e.materials,u),d=this.parseObject(e.object,i,f,u,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const a=new bh().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,u=e.length;a<u;a++){const f=new Ib().fromJSON(e[a],i);n[f.uuid]=f}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new lD;for(let a=0,u=e.length;a<u;a++){let f;const d=e[a];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":f=i.parse(d);break;default:d.type in Tw?f=Tw[d.type].fromJSON(d,t):gt(`ObjectLoader: Unsupported geometry type "${d.type}"`)}f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),d.userData!==void 0&&(f.userData=d.userData),n[d.uuid]=f}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const a=new Kb;a.setTextures(t);for(let u=0,f=e.length;u<f;u++){const d=e[u];n[d.uuid]===void 0&&(n[d.uuid]=a.parse(d)),i[d.uuid]=n[d.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],a=R0.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const n=this,i={};let a;function u(d){return n.manager.itemStart(d),a.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function f(d){if(typeof d=="string"){const p=d,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return u(v)}else return d.data?{data:yp(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new nT(t);a=new D0(d),a.setCrossOrigin(this.crossOrigin);for(let p=0,v=e.length;p<v;p++){const _=e[p],y=_.url;if(Array.isArray(y)){const b=[];for(let E=0,A=y.length;E<A;E++){const w=y[E],M=f(w);M!==null&&(M instanceof HTMLImageElement?b.push(M):b.push(new Io(M.data,M.width,M.height)))}i[_.uuid]=new Fc(b)}else{const b=f(_.url);i[_.uuid]=new Fc(b)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function a(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:t.resourcePath+f;return await i.loadAsync(d)}else return u.data?{data:yp(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){i=new D0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const v=[];for(let _=0,y=p.length;_<y;_++){const b=p[_],E=await a(b);E!==null&&(E instanceof HTMLImageElement?v.push(E):v.push(new Io(E.data,E.width,E.height)))}n[d.uuid]=new Fc(v)}else{const v=await a(d.url);n[d.uuid]=new Fc(v)}}}return n}parseTextures(e,t){function n(a,u){return typeof a=="number"?a:(gt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),u[a])}const i={};if(e!==void 0)for(let a=0,u=e.length;a<u;a++){const f=e[a];f.image===void 0&&gt('ObjectLoader: No "image" specified for',f.uuid),t[f.image]===void 0&&gt("ObjectLoader: Undefined image",f.image);const d=t[f.image],p=d.data;let v;Array.isArray(p)?(v=new j0,p.length===6&&(v.needsUpdate=!0)):(p&&p.data?v=new Io:v=new Fi,p&&(v.needsUpdate=!0)),v.source=d,v.uuid=f.uuid,f.name!==void 0&&(v.name=f.name),f.mapping!==void 0&&(v.mapping=n(f.mapping,gz)),f.channel!==void 0&&(v.channel=f.channel),f.offset!==void 0&&v.offset.fromArray(f.offset),f.repeat!==void 0&&v.repeat.fromArray(f.repeat),f.center!==void 0&&v.center.fromArray(f.center),f.rotation!==void 0&&(v.rotation=f.rotation),f.wrap!==void 0&&(v.wrapS=n(f.wrap[0],Cw),v.wrapT=n(f.wrap[1],Cw)),f.format!==void 0&&(v.format=f.format),f.internalFormat!==void 0&&(v.internalFormat=f.internalFormat),f.type!==void 0&&(v.type=f.type),f.colorSpace!==void 0&&(v.colorSpace=f.colorSpace),f.minFilter!==void 0&&(v.minFilter=n(f.minFilter,Rw)),f.magFilter!==void 0&&(v.magFilter=n(f.magFilter,Rw)),f.anisotropy!==void 0&&(v.anisotropy=f.anisotropy),f.flipY!==void 0&&(v.flipY=f.flipY),f.generateMipmaps!==void 0&&(v.generateMipmaps=f.generateMipmaps),f.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=f.premultiplyAlpha),f.unpackAlignment!==void 0&&(v.unpackAlignment=f.unpackAlignment),f.compareFunction!==void 0&&(v.compareFunction=f.compareFunction),f.userData!==void 0&&(v.userData=f.userData),i[f.uuid]=v}return i}parseObject(e,t,n,i,a){let u;function f(y){return t[y]===void 0&&gt("ObjectLoader: Undefined geometry",y),t[y]}function d(y){if(y!==void 0){if(Array.isArray(y)){const b=[];for(let E=0,A=y.length;E<A;E++){const w=y[E];n[w]===void 0&&gt("ObjectLoader: Undefined material",w),b.push(n[w])}return b}return n[y]===void 0&&gt("ObjectLoader: Undefined material",y),n[y]}}function p(y){return i[y]===void 0&&gt("ObjectLoader: Undefined texture",y),i[y]}let v,_;switch(e.type){case"Scene":u=new zE,e.background!==void 0&&(Number.isInteger(e.background)?u.background=new xt(e.background):u.background=p(e.background)),e.environment!==void 0&&(u.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?u.fog=new Lb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(u.fog=new Db(e.fog.color,e.fog.density)),e.fog.name!==""&&(u.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(u.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(u.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&u.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":u=new Zi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(u.focus=e.focus),e.zoom!==void 0&&(u.zoom=e.zoom),e.filmGauge!==void 0&&(u.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(u.filmOffset=e.filmOffset),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"OrthographicCamera":u=new Ou(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(u.zoom=e.zoom),e.view!==void 0&&(u.view=Object.assign({},e.view));break;case"AmbientLight":u=new sD(e.color,e.intensity);break;case"DirectionalLight":u=new rD(e.color,e.intensity),u.target=e.target||"";break;case"PointLight":u=new iD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":u=new aD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":u=new nD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),u.target=e.target||"";break;case"HemisphereLight":u=new tD(e.color,e.groundColor,e.intensity);break;case"LightProbe":const y=new rT().fromArray(e.sh);u=new oD(y,e.intensity);break;case"SkinnedMesh":v=f(e.geometry),_=d(e.material),u=new ER(v,_),e.bindMode!==void 0&&(u.bindMode=e.bindMode),e.bindMatrix!==void 0&&u.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(u.skeleton=e.skeleton);break;case"Mesh":v=f(e.geometry),_=d(e.material),u=new Qi(v,_);break;case"InstancedMesh":v=f(e.geometry),_=d(e.material);const b=e.count,E=e.instanceMatrix,A=e.instanceColor;u=new TR(v,_,b),u.instanceMatrix=new Pp(new Float32Array(E.array),16),A!==void 0&&(u.instanceColor=new Pp(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":v=f(e.geometry),_=d(e.material),u=new AR(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,_),u.geometry=v,u.perObjectFrustumCulled=e.perObjectFrustumCulled,u.sortObjects=e.sortObjects,u._drawRanges=e.drawRanges,u._reservedRanges=e.reservedRanges,u._geometryInfo=e.geometryInfo.map(w=>{let M=null,D=null;return w.boundingBox!==void 0&&(M=new dr().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(D=new pr().fromJSON(w.boundingSphere)),{...w,boundingBox:M,boundingSphere:D}}),u._instanceInfo=e.instanceInfo,u._availableInstanceIds=e._availableInstanceIds,u._availableGeometryIds=e._availableGeometryIds,u._nextIndexStart=e.nextIndexStart,u._nextVertexStart=e.nextVertexStart,u._geometryCount=e.geometryCount,u._maxInstanceCount=e.maxInstanceCount,u._maxVertexCount=e.maxVertexCount,u._maxIndexCount=e.maxIndexCount,u._geometryInitialized=e.geometryInitialized,u._matricesTexture=p(e.matricesTexture.uuid),u._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(u._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(u.boundingSphere=new pr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(u.boundingBox=new dr().fromJSON(e.boundingBox));break;case"LOD":u=new MR;break;case"Line":u=new jc(f(e.geometry),d(e.material));break;case"LineLoop":u=new wR(f(e.geometry),d(e.material));break;case"LineSegments":u=new Ul(f(e.geometry),d(e.material));break;case"PointCloud":case"Points":u=new CR(f(e.geometry),d(e.material));break;case"Sprite":u=new FE(d(e.material));break;case"Group":u=new xp;break;case"Bone":u=new BE;break;default:u=new Ln}if(u.uuid=e.uuid,e.name!==void 0&&(u.name=e.name),e.matrix!==void 0?(u.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=e.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(e.position!==void 0&&u.position.fromArray(e.position),e.rotation!==void 0&&u.rotation.fromArray(e.rotation),e.quaternion!==void 0&&u.quaternion.fromArray(e.quaternion),e.scale!==void 0&&u.scale.fromArray(e.scale)),e.up!==void 0&&u.up.fromArray(e.up),e.castShadow!==void 0&&(u.castShadow=e.castShadow),e.receiveShadow!==void 0&&(u.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(u.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(u.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(u.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(u.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(u.visible=e.visible),e.frustumCulled!==void 0&&(u.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(u.renderOrder=e.renderOrder),e.userData!==void 0&&(u.userData=e.userData),e.layers!==void 0&&(u.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let b=0;b<y.length;b++)u.add(this.parseObject(y[b],t,n,i,a))}if(e.animations!==void 0){const y=e.animations;for(let b=0;b<y.length;b++){const E=y[b];u.animations.push(a[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(u.autoUpdate=e.autoUpdate);const y=e.levels;for(let b=0;b<y.length;b++){const E=y[b],A=u.getObjectByProperty("uuid",E.object);A!==void 0&&u.addLevel(A,E.distance,E.hysteresis)}}return u}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?gt("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new Ln}})}}const gz={UVMapping:vb,CubeReflectionMapping:Dl,CubeRefractionMapping:Xc,EquirectangularReflectionMapping:p0,EquirectangularRefractionMapping:m0,CubeUVReflectionMapping:Yp},Cw={RepeatWrapping:g0,ClampToEdgeWrapping:Qs,MirroredRepeatWrapping:v0},Rw={NearestFilter:Ki,NearestMipmapNearestFilter:EE,NearestMipmapLinearFilter:_p,LinearFilter:hi,LinearMipmapNearestFilter:Jg,LinearMipmapLinearFilter:Ml},R1=new WeakMap;class vz extends ia{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&gt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&gt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,u=El.get(`image-bitmap:${e}`);if(u!==void 0){if(a.manager.itemStart(e),u.then){u.then(p=>{if(R1.has(u)===!0)i&&i(R1.get(u)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(p),a.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(u),a.manager.itemEnd(e)},0),u}const f={};f.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",f.headers=this.requestHeader,f.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,f).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(p){return El.add(`image-bitmap:${e}`,p),t&&t(p),a.manager.itemEnd(e),p}).catch(function(p){i&&i(p),R1.set(d,p),El.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});El.add(`image-bitmap:${e}`,d),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let Sy;class aT{static getContext(){return Sy===void 0&&(Sy=new(window.AudioContext||window.webkitAudioContext)),Sy}static setContext(e){Sy=e}}class _z extends ia{constructor(e){super(e)}load(e,t,n,i){const a=this,u=new Uu(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){try{const p=d.slice(0);aT.getContext().decodeAudioData(p,function(_){t(_)}).catch(f)}catch(p){f(p)}},n,i);function f(d){i?i(d):Ot(d),a.manager.itemError(e)}}}const Dw=new Xt,Lw=new Xt,Qf=new Xt;class yz{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Qf.copy(e.projectionMatrix);const i=t.eyeSep/2,a=i*t.near/t.focus,u=t.near*Math.tan(xh*t.fov*.5)/t.zoom;let f,d;Lw.elements[12]=-i,Dw.elements[12]=i,f=-u*t.aspect+a,d=u*t.aspect+a,Qf.elements[0]=2*t.near/(d-f),Qf.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(Qf),f=-u*t.aspect-a,d=u*t.aspect-a,Qf.elements[0]=2*t.near/(d-f),Qf.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(Qf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Lw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Dw)}}class uD extends Zi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class oT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Jf=new j,D1=new ns,xz=new j,$f=new j,eh=new j;class bz extends Ln{constructor(){super(),this.type="AudioListener",this.context=aT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new oT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jf,D1,xz),$f.set(0,0,-1).applyQuaternion(D1),eh.set(0,1,0).applyQuaternion(D1),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Jf.x,n),t.positionY.linearRampToValueAtTime(Jf.y,n),t.positionZ.linearRampToValueAtTime(Jf.z,n),t.forwardX.linearRampToValueAtTime($f.x,n),t.forwardY.linearRampToValueAtTime($f.y,n),t.forwardZ.linearRampToValueAtTime($f.z,n),t.upX.linearRampToValueAtTime(eh.x,n),t.upY.linearRampToValueAtTime(eh.y,n),t.upZ.linearRampToValueAtTime(eh.z,n)}else t.setPosition(Jf.x,Jf.y,Jf.z),t.setOrientation($f.x,$f.y,$f.z,eh.x,eh.y,eh.z)}}class cD extends Ln{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){gt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){gt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){gt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){gt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){gt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(gt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){gt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(gt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const th=new j,Nw=new ns,Sz=new j,nh=new j;class Mz extends cD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(th,Nw,Sz),nh.set(0,0,1).applyQuaternion(Nw);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(th.x,n),t.positionY.linearRampToValueAtTime(th.y,n),t.positionZ.linearRampToValueAtTime(th.z,n),t.orientationX.linearRampToValueAtTime(nh.x,n),t.orientationY.linearRampToValueAtTime(nh.y,n),t.orientationZ.linearRampToValueAtTime(nh.z,n)}else t.setPosition(th.x,th.y,th.z),t.setOrientation(nh.x,nh.y,nh.z)}}class Ez{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class fD{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,a,u;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,a=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,a=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let f=0;f!==i;++f)n[a+f]=n[f];u=t}else{u+=t;const f=t/u;this._mixBufferRegion(n,a,0,f,i)}this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,u=this.cumulativeWeightAdditive,f=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const d=t*this._origIndex;this._mixBufferRegion(n,i,d,1-a,t)}u>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){f.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let a=n,u=i;a!==u;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,a){if(i>=.5)for(let u=0;u!==a;++u)e[t+u]=e[n+u]}_slerp(e,t,n,i){ns.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,a){const u=this._workIndex*a;ns.multiplyQuaternionsFlat(e,u,e,t,e,n),ns.slerpFlat(e,t,e,t,e,u,i)}_lerp(e,t,n,i,a){const u=1-i;for(let f=0;f!==a;++f){const d=t+f;e[d]=e[d]*u+e[n+f]*i}}_lerpAdditive(e,t,n,i,a){for(let u=0;u!==a;++u){const f=t+u;e[f]=e[f]+e[n+u]*i}}}const lT="\\[\\]\\.:\\/",Tz=new RegExp("["+lT+"]","g"),uT="[^"+lT+"]",Az="[^"+lT.replace("\\.","")+"]",wz=/((?:WC+[\/:])*)/.source.replace("WC",uT),Cz=/(WCOD+)?/.source.replace("WCOD",Az),Rz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uT),Dz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uT),Lz=new RegExp("^"+wz+Cz+Rz+Dz+"$"),Nz=["material","materials","bones","map"];class Oz{constructor(e,t,n){const i=n||Rn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Rn{constructor(e,t,n){this.path=t,this.parsedPath=n||Rn.parseTrackName(t),this.node=Rn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Rn.Composite(e,t,n):new Rn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Tz,"")}static parseTrackName(e){const t=Lz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=n.nodeName.substring(i+1);Nz.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let u=0;u<a.length;u++){const f=a[u];if(f.name===t||f.uuid===t)return f;const d=n(f.children);if(d)return d}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=Rn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){gt("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){Ot("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Ot("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Ot("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let v=0;v<e.length;v++)if(e[v].name===p){p=v;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Ot("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Ot("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){Ot("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){Ot("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const u=e[i];if(u===void 0){const p=t.nodeName;Ot("PropertyBinding: Trying to update property for track: "+p+"."+i+" but it wasn't found.",e);return}let f=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?f=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(f=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){Ot("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Ot("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rn.Composite=Oz;Rn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rn.prototype.GetterByBindingType=[Rn.prototype._getValue_direct,Rn.prototype._getValue_array,Rn.prototype._getValue_arrayElement,Rn.prototype._getValue_toArray];Rn.prototype.SetterByBindingTypeAndVersioning=[[Rn.prototype._setValue_direct,Rn.prototype._setValue_direct_setNeedsUpdate,Rn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_array,Rn.prototype._setValue_array_setNeedsUpdate,Rn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_arrayElement,Rn.prototype._setValue_arrayElement_setNeedsUpdate,Rn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_fromArray,Rn.prototype._setValue_fromArray_setNeedsUpdate,Rn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Iz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ya(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,u=a.length;let f,d=e.length,p=this.nCachedObjects_;for(let v=0,_=arguments.length;v!==_;++v){const y=arguments[v],b=y.uuid;let E=t[b];if(E===void 0){E=d++,t[b]=E,e.push(y);for(let A=0,w=u;A!==w;++A)a[A].push(new Rn(y,n[A],i[A]))}else if(E<p){f=e[E];const A=--p,w=e[A];t[w.uuid]=E,e[E]=w,t[b]=A,e[A]=y;for(let M=0,D=u;M!==D;++M){const R=a[M],N=R[A];let P=R[E];R[E]=N,P===void 0&&(P=new Rn(y,n[M],i[M])),R[A]=P}}else e[E]!==f&&Ot("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],p=d.uuid,v=t[p];if(v!==void 0&&v>=a){const _=a++,y=e[_];t[y.uuid]=v,e[v]=y,t[p]=_,e[_]=d;for(let b=0,E=i;b!==E;++b){const A=n[b],w=A[_],M=A[v];A[v]=w,A[_]=M}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_,u=e.length;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],v=p.uuid,_=t[v];if(_!==void 0)if(delete t[v],_<a){const y=--a,b=e[y],E=--u,A=e[E];t[b.uuid]=_,e[_]=b,t[A.uuid]=y,e[y]=A,e.pop();for(let w=0,M=i;w!==M;++w){const D=n[w],R=D[y],N=D[E];D[_]=R,D[y]=N,D.pop()}}else{const y=--u,b=e[y];y>0&&(t[b.uuid]=_),e[_]=b,e.pop();for(let E=0,A=i;E!==A;++E){const w=n[E];w[_]=w[y],w.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const a=this._bindings;if(i!==void 0)return a[i];const u=this._paths,f=this._parsedPaths,d=this._objects,p=d.length,v=this.nCachedObjects_,_=new Array(p);i=a.length,n[e]=i,u.push(e),f.push(t),a.push(_);for(let y=v,b=d.length;y!==b;++y){const E=d[y];_[y]=new Rn(E,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,a=this._parsedPaths,u=this._bindings,f=u.length-1,d=u[f],p=e[f];t[p]=n,u[n]=d,u.pop(),a[n]=a[f],a.pop(),i[n]=i[f],i.pop()}}}class hD{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const a=t.tracks,u=a.length,f=new Array(u),d={endingStart:mh,endingEnd:mh};for(let p=0;p!==u;++p){const v=a[p].createInterpolant(null);f[p]=v,v.settings=d}this._interpolantSettings=d,this._interpolants=f,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,a=e._clip.duration,u=a/i,f=i/a;e.warp(1,u,t),this.warp(f,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,a=i.time,u=this.timeScale;let f=this._timeScaleInterpolant;f===null&&(f=i._lendControlInterpolant(),this._timeScaleInterpolant=f);const d=f.parameterPositions,p=f.sampleValues;return d[0]=a,d[1]=a+n,p[0]=e/u,p[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const d=(e-a)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const u=this._updateTime(t),f=this._updateWeight(e);if(f>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case LE:for(let v=0,_=d.length;v!==_;++v)d[v].evaluate(u),p[v].accumulateAdditive(f);break;case Eb:default:for(let v=0,_=d.length;v!==_;++v)d[v].evaluate(u),p[v].accumulate(i,f)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,a=this._loopCount;const u=n===sR;if(e===0)return a===-1?i:u&&(a&1)===1?t-i:i;if(n===iR){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=t||i<0){const f=Math.floor(i/t);i-=t*f,a+=Math.abs(f);const d=this.repetitions-a;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=i;if(u&&(a&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=gh,i.endingEnd=gh):(e?i.endingStart=this.zeroSlopeAtStart?gh:mh:i.endingStart=y0,t?i.endingEnd=this.zeroSlopeAtEnd?gh:mh:i.endingEnd=y0)}_scheduleFading(e,t,n){const i=this._mixer,a=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const f=u.parameterPositions,d=u.sampleValues;return f[0]=a,d[0]=t,f[1]=a+e,d[1]=n,this}}const Pz=new Float32Array(1);class Uz extends Pl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,u=e._propertyBindings,f=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let v=p[d];v===void 0&&(v={},p[d]=v);for(let _=0;_!==a;++_){const y=i[_],b=y.name;let E=v[b];if(E!==void 0)++E.referenceCount,u[_]=E;else{if(E=u[_],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,b));continue}const A=t&&t._propertyBindings[_].binding.parsedPath;E=new fD(Rn.create(n,b,A),y.ValueTypeName,y.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,b),u[_]=E}f[_].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,a=this._actionsByClip;let u=a[t];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=u;else{const f=u.knownActions;e._byClipCacheIndex=f.length,f.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,u=this._actionsByClip,f=u[a],d=f.knownActions,p=d[d.length-1],v=e._byClipCacheIndex;p._byClipCacheIndex=v,d[v]=p,d.pop(),e._byClipCacheIndex=null;const _=f.actionByRoot,y=(e._localRoot||this._root).uuid;delete _[y],d.length===0&&delete u[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,a=this._bindings;let u=i[t];u===void 0&&(u={},i[t]=u),u[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,u=this._bindingsByRootAndName,f=u[i],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete f[a],Object.keys(f).length===0&&delete u[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new eT(new Float32Array(2),new Float32Array(2),1,Pz),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const i=t||this._root,a=i.uuid;let u=typeof e=="string"?R0.findByName(i,e):e;const f=u!==null?u.uuid:e,d=this._actionsByClip[f];let p=null;if(n===void 0&&(u!==null?n=u.blendMode:n=Eb),d!==void 0){const _=d.actionByRoot[a];if(_!==void 0&&_.blendMode===n)return _;p=d.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const v=new hD(this,u,t,n);return this._bindAction(v,p),this._addInactiveAction(v,f,a),v}existingAction(e,t){const n=t||this._root,i=n.uuid,a=typeof e=="string"?R0.findByName(n,e):e,u=a?a.uuid:e,f=this._actionsByClip[u];return f!==void 0&&f.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,a=Math.sign(e),u=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(i,e,a,u);const f=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)f[p].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(a!==void 0){const u=a.knownActions;for(let f=0,d=u.length;f!==d;++f){const p=u[f];this._deactivateAction(p);const v=p._cacheIndex,_=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,_._cacheIndex=v,t[v]=_,t.pop(),this._removeInactiveBindingsForAction(p)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const u in n){const f=n[u].actionByRoot,d=f[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const u in a){const f=a[u];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class zz extends OE{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Cb(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class cT{constructor(e){this.value=e}clone(){return new cT(this.value.clone===void 0?this.value:this.value.clone())}}let Fz=0;class Bz extends Pl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Fz++}),this.name="",this.usage=b0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let u=0;u<a.length;u++)this.uniforms.push(a[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class Jx extends Nb{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class kz{constructor(e,t,n,i,a,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=a,this.normalized=u,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Ow=new Xt;class dD{constructor(e,t,n=0,i=1/0){this.ray=new Nh(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Op,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Ot("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Ow.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Ow),this}intersectObject(e,t=!0,n=[]){return AM(e,this,n,t),n.sort(Iw),n}intersectObjects(e,t=!0,n=[]){for(let i=0,a=e.length;i<a;i++)AM(e[i],this,n,t);return n.sort(Iw),n}}function Iw(r,e){return r.distance-e.distance}function AM(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const a=r.children;for(let u=0,f=a.length;u<f;u++)AM(a[u],e,t,!0)}}class Vz{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=Hz.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function Hz(){this._document.hidden===!1&&this.reset()}class wM{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Wt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Wt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Gz{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class fT{constructor(e,t,n,i){fT.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=i,this}}const Pw=new ke;class Wz{constructor(e=new ke(1/0,1/0),t=new ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Pw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Pw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uw=new j,My=new j,lp=new j,up=new j,L1=new j,Xz=new j,qz=new j;class pD{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Uw.subVectors(e,this.start),My.subVectors(this.end,this.start);const n=My.dot(My);let a=My.dot(Uw)/n;return t&&(a=Wt(a,0,1)),a}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=Xz,n=qz){const i=10000000000000001e-32;let a,u;const f=this.start,d=e.start,p=this.end,v=e.end;lp.subVectors(p,f),up.subVectors(v,d),L1.subVectors(f,d);const _=lp.dot(lp),y=up.dot(up),b=up.dot(L1);if(_<=i&&y<=i)return t.copy(f),n.copy(d),t.sub(n),t.dot(t);if(_<=i)a=0,u=b/y,u=Wt(u,0,1);else{const E=lp.dot(L1);if(y<=i)u=0,a=Wt(-E/_,0,1);else{const A=lp.dot(up),w=_*y-A*A;w!==0?a=Wt((A*b-E*y)/w,0,1):a=0,u=(A*a+b)/y,u<0?(u=0,a=Wt(-E/_,0,1)):u>1&&(u=1,a=Wt((A-E)/_,0,1))}}return t.copy(f).add(lp.multiplyScalar(a)),n.copy(d).add(up.multiplyScalar(u)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const zw=new j;class Yz extends Ln{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Kt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,f=1,d=32;u<d;u++,f++){const p=u/d*Math.PI*2,v=f/d*Math.PI*2;i.push(Math.cos(p),Math.sin(p),1,Math.cos(v),Math.sin(v),1)}n.setAttribute("position",new St(i,3));const a=new ws({fog:!1,toneMapped:!1});this.cone=new Ul(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),zw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ic=new j,Ey=new Xt,N1=new Xt;class jz extends Ul{constructor(e){const t=mD(e),n=new Kt,i=[],a=[];for(let p=0;p<t.length;p++){const v=t[p];v.parent&&v.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}n.setAttribute("position",new St(i,3)),n.setAttribute("color",new St(a,3));const u=new ws({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const f=new xt(255),d=new xt(65280);this.setColors(f,d)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");N1.copy(this.root.matrixWorld).invert();for(let a=0,u=0;a<t.length;a++){const f=t[a];f.parent&&f.parent.isBone&&(Ey.multiplyMatrices(N1,f.matrixWorld),Ic.setFromMatrixPosition(Ey),i.setXYZ(u,Ic.x,Ic.y,Ic.z),Ey.multiplyMatrices(N1,f.parent.matrixWorld),Ic.setFromMatrixPosition(Ey),i.setXYZ(u+1,Ic.x,Ic.y,Ic.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let a=0;a<i.count;a+=2)i.setXYZ(a,e.r,e.g,e.b),i.setXYZ(a+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function mD(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...mD(r.children[t]));return e}class Zz extends Qi{constructor(e,t,n){const i=new J0(t,4,2),a=new ef({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Kz=new j,Fw=new xt,Bw=new xt;class Qz extends Ln{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Q0(t);i.rotateY(Math.PI*.5),this.material=new ef({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),u=new Float32Array(a.count*3);i.setAttribute("color",new Yn(u,3)),this.add(new Qi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Fw.copy(this.light.color),Bw.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const a=n<i/2?Fw:Bw;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Kz.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jz extends Ul{constructor(e=10,t=10,n=4473924,i=8947848){n=new xt(n),i=new xt(i);const a=t/2,u=e/t,f=e/2,d=[],p=[];for(let y=0,b=0,E=-f;y<=t;y++,E+=u){d.push(-f,0,E,f,0,E),d.push(E,0,-f,E,0,f);const A=y===a?n:i;A.toArray(p,b),b+=3,A.toArray(p,b),b+=3,A.toArray(p,b),b+=3,A.toArray(p,b),b+=3}const v=new Kt;v.setAttribute("position",new St(d,3)),v.setAttribute("color",new St(p,3));const _=new ws({vertexColors:!0,toneMapped:!1});super(v,_),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $z extends Ul{constructor(e=10,t=16,n=8,i=64,a=4473924,u=8947848){a=new xt(a),u=new xt(u);const f=[],d=[];if(t>1)for(let _=0;_<t;_++){const y=_/t*(Math.PI*2),b=Math.sin(y)*e,E=Math.cos(y)*e;f.push(0,0,0),f.push(b,0,E);const A=_&1?a:u;d.push(A.r,A.g,A.b),d.push(A.r,A.g,A.b)}for(let _=0;_<n;_++){const y=_&1?a:u,b=e-e/n*_;for(let E=0;E<i;E++){let A=E/i*(Math.PI*2),w=Math.sin(A)*b,M=Math.cos(A)*b;f.push(w,0,M),d.push(y.r,y.g,y.b),A=(E+1)/i*(Math.PI*2),w=Math.sin(A)*b,M=Math.cos(A)*b,f.push(w,0,M),d.push(y.r,y.g,y.b)}}const p=new Kt;p.setAttribute("position",new St(f,3)),p.setAttribute("color",new St(d,3));const v=new ws({vertexColors:!0,toneMapped:!1});super(p,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kw=new j,Ty=new j,Vw=new j;class e4 extends Ln{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Kt;i.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new ws({fog:!1,toneMapped:!1});this.lightPlane=new jc(i,a),this.add(this.lightPlane),i=new Kt,i.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new jc(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kw.setFromMatrixPosition(this.light.matrixWorld),Ty.setFromMatrixPosition(this.light.target.matrixWorld),Vw.subVectors(Ty,kw),this.lightPlane.lookAt(Ty),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ty),this.targetLine.scale.z=Vw.length()}}const Ay=new j,Ui=new Rb;class t4 extends Ul{constructor(e){const t=new Kt,n=new ws({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],u={};f("n1","n2"),f("n2","n4"),f("n4","n3"),f("n3","n1"),f("f1","f2"),f("f2","f4"),f("f4","f3"),f("f3","f1"),f("n1","f1"),f("n2","f2"),f("n3","f3"),f("n4","f4"),f("p","n1"),f("p","n2"),f("p","n3"),f("p","n4"),f("u1","u2"),f("u2","u3"),f("u3","u1"),f("c","t"),f("p","c"),f("cn1","cn2"),f("cn3","cn4"),f("cf1","cf2"),f("cf3","cf4");function f(E,A){d(E),d(A)}function d(E){i.push(0,0,0),a.push(0,0,0),u[E]===void 0&&(u[E]=[]),u[E].push(i.length/3-1)}t.setAttribute("position",new St(i,3)),t.setAttribute("color",new St(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new xt(16755200),v=new xt(16711680),_=new xt(43775),y=new xt(16777215),b=new xt(3355443);this.setColors(p,v,_,y,b)}setColors(e,t,n,i,a){const f=this.geometry.getAttribute("color");return f.setXYZ(0,e.r,e.g,e.b),f.setXYZ(1,e.r,e.g,e.b),f.setXYZ(2,e.r,e.g,e.b),f.setXYZ(3,e.r,e.g,e.b),f.setXYZ(4,e.r,e.g,e.b),f.setXYZ(5,e.r,e.g,e.b),f.setXYZ(6,e.r,e.g,e.b),f.setXYZ(7,e.r,e.g,e.b),f.setXYZ(8,e.r,e.g,e.b),f.setXYZ(9,e.r,e.g,e.b),f.setXYZ(10,e.r,e.g,e.b),f.setXYZ(11,e.r,e.g,e.b),f.setXYZ(12,e.r,e.g,e.b),f.setXYZ(13,e.r,e.g,e.b),f.setXYZ(14,e.r,e.g,e.b),f.setXYZ(15,e.r,e.g,e.b),f.setXYZ(16,e.r,e.g,e.b),f.setXYZ(17,e.r,e.g,e.b),f.setXYZ(18,e.r,e.g,e.b),f.setXYZ(19,e.r,e.g,e.b),f.setXYZ(20,e.r,e.g,e.b),f.setXYZ(21,e.r,e.g,e.b),f.setXYZ(22,e.r,e.g,e.b),f.setXYZ(23,e.r,e.g,e.b),f.setXYZ(24,t.r,t.g,t.b),f.setXYZ(25,t.r,t.g,t.b),f.setXYZ(26,t.r,t.g,t.b),f.setXYZ(27,t.r,t.g,t.b),f.setXYZ(28,t.r,t.g,t.b),f.setXYZ(29,t.r,t.g,t.b),f.setXYZ(30,t.r,t.g,t.b),f.setXYZ(31,t.r,t.g,t.b),f.setXYZ(32,n.r,n.g,n.b),f.setXYZ(33,n.r,n.g,n.b),f.setXYZ(34,n.r,n.g,n.b),f.setXYZ(35,n.r,n.g,n.b),f.setXYZ(36,n.r,n.g,n.b),f.setXYZ(37,n.r,n.g,n.b),f.setXYZ(38,i.r,i.g,i.b),f.setXYZ(39,i.r,i.g,i.b),f.setXYZ(40,a.r,a.g,a.b),f.setXYZ(41,a.r,a.g,a.b),f.setXYZ(42,a.r,a.g,a.b),f.setXYZ(43,a.r,a.g,a.b),f.setXYZ(44,a.r,a.g,a.b),f.setXYZ(45,a.r,a.g,a.b),f.setXYZ(46,a.r,a.g,a.b),f.setXYZ(47,a.r,a.g,a.b),f.setXYZ(48,a.r,a.g,a.b),f.setXYZ(49,a.r,a.g,a.b),f.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let a,u;if(Ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,u=0;else if(this.camera.coordinateSystem===ma)a=-1,u=1;else if(this.camera.coordinateSystem===Dp)a=0,u=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Yi("c",t,e,Ui,0,0,a),Yi("t",t,e,Ui,0,0,u),Yi("n1",t,e,Ui,-n,-i,a),Yi("n2",t,e,Ui,n,-i,a),Yi("n3",t,e,Ui,-n,i,a),Yi("n4",t,e,Ui,n,i,a),Yi("f1",t,e,Ui,-n,-i,u),Yi("f2",t,e,Ui,n,-i,u),Yi("f3",t,e,Ui,-n,i,u),Yi("f4",t,e,Ui,n,i,u),Yi("u1",t,e,Ui,n*.7,i*1.1,a),Yi("u2",t,e,Ui,-n*.7,i*1.1,a),Yi("u3",t,e,Ui,0,i*2,a),Yi("cf1",t,e,Ui,-n,0,u),Yi("cf2",t,e,Ui,n,0,u),Yi("cf3",t,e,Ui,0,-i,u),Yi("cf4",t,e,Ui,0,i,u),Yi("cn1",t,e,Ui,-n,0,a),Yi("cn2",t,e,Ui,n,0,a),Yi("cn3",t,e,Ui,0,-i,a),Yi("cn4",t,e,Ui,0,i,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yi(r,e,t,n,i,a,u){Ay.set(i,a,u).unproject(n);const f=e[r];if(f!==void 0){const d=t.getAttribute("position");for(let p=0,v=f.length;p<v;p++)d.setXYZ(f[p],Ay.x,Ay.y,Ay.z)}}const wy=new dr;class n4 extends Ul{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new Kt;a.setIndex(new Yn(n,1)),a.setAttribute("position",new Yn(i,3)),super(a,new ws({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&wy.setFromObject(this.object),wy.isEmpty())return;const e=wy.min,t=wy.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class i4 extends Ul{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Kt;a.setIndex(new Yn(n,1)),a.setAttribute("position",new St(i,3)),super(a,new ws({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class r4 extends jc{constructor(e,t=1,n=16776960){const i=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Kt;u.setAttribute("position",new St(a,3)),u.computeBoundingSphere(),super(u,new ws({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const f=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Kt;d.setAttribute("position",new St(f,3)),d.computeBoundingSphere(),this.add(new Qi(d,new ef({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Hw=new j;let Cy,O1;class s4 extends Ln{constructor(e=new j(0,0,1),t=new j(0,0,0),n=1,i=16776960,a=n*.2,u=a*.2){super(),this.type="ArrowHelper",Cy===void 0&&(Cy=new Kt,Cy.setAttribute("position",new St([0,0,0,0,1,0],3)),O1=new K0(.5,1,5,1),O1.translate(0,-.5,0)),this.position.copy(t),this.line=new jc(Cy,new ws({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qi(O1,new ef({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,u)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Hw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Hw,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class a4 extends Ul{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Kt;i.setAttribute("position",new St(t,3)),i.setAttribute("color",new St(n,3));const a=new ws({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,n){const i=new xt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class o4{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Qx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,a,u){return this.currentPath.bezierCurveTo(e,t,n,i,a,u),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const D=[];for(let R=0,N=M.length;R<N;R++){const P=M[R],z=new bh;z.curves=P.curves,D.push(z)}return D}function n(M,D){const R=D.length;let N=!1;for(let P=R-1,z=0;z<R;P=z++){let B=D[P],k=D[z],I=k.x-B.x,O=k.y-B.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(B=D[z],I=-I,k=D[P],O=-O),M.y<B.y||M.y>k.y)continue;if(M.y===B.y){if(M.x===B.x)return!0}else{const W=O*(M.x-B.x)-I*(M.y-B.y);if(W===0)return!0;if(W<0)continue;N=!N}}else{if(M.y!==B.y)continue;if(k.x<=M.x&&M.x<=B.x||B.x<=M.x&&M.x<=k.x)return!0}}return N}const i=Oo.isClockWise,a=this.subPaths;if(a.length===0)return[];let u,f,d;const p=[];if(a.length===1)return f=a[0],d=new bh,d.curves=f.curves,p.push(d),p;let v=!i(a[0].getPoints());v=e?!v:v;const _=[],y=[];let b=[],E=0,A;y[E]=void 0,b[E]=[];for(let M=0,D=a.length;M<D;M++)f=a[M],A=f.getPoints(),u=i(A),u=e?!u:u,u?(!v&&y[E]&&E++,y[E]={s:new bh,p:A},y[E].s.curves=f.curves,v&&E++,b[E]=[]):b[E].push({h:f,p:A[0]});if(!y[0])return t(a);if(y.length>1){let M=!1,D=0;for(let R=0,N=y.length;R<N;R++)_[R]=[];for(let R=0,N=y.length;R<N;R++){const P=b[R];for(let z=0;z<P.length;z++){const B=P[z];let k=!0;for(let I=0;I<y.length;I++)n(B.p,y[I].p)&&(R!==I&&D++,k?(k=!1,_[I].push(B)):M=!0);k&&_[R].push(B)}}D>0&&M===!1&&(b=_)}let w;for(let M=0,D=y.length;M<D;M++){d=y[M].s,p.push(d),w=b[M];for(let R=0,N=w.length;R<N;R++)d.holes.push(w[R].h)}return p}}class l4 extends Pl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){gt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function u4(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function c4(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function f4(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function CM(r,e,t,n){const i=h4(n);switch(t){case RE:return r*e;case bb:return r*e/i.components*i.byteLength;case Y0:return r*e/i.components*i.byteLength;case Rh:return r*e*2/i.components*i.byteLength;case Sb:return r*e*2/i.components*i.byteLength;case DE:return r*e*3/i.components*i.byteLength;case ts:return r*e*4/i.components*i.byteLength;case Mb:return r*e*4/i.components*i.byteLength;case $g:case e0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case t0:case n0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case mx:case vx:return Math.max(r,16)*Math.max(e,8)/4;case px:case gx:return Math.max(r,8)*Math.max(e,8)/2;case _x:case yx:case bx:case Sx:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case xx:case Mx:case Ex:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Tx:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case Ax:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case wx:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case Cx:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case Rx:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case Dx:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case Lx:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case Nx:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case Ox:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case Ix:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case Px:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case Ux:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case zx:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case Fx:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Bx:case kx:case Vx:return Math.ceil(r/4)*Math.ceil(e/4)*16;case Hx:case Gx:return Math.ceil(r/4)*Math.ceil(e/4)*8;case Wx:case Xx:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function h4(r){switch(r){case Ss:case TE:return{byteLength:1,components:1};case Cp:case AE:case Ll:return{byteLength:2,components:1};case yb:case xb:return{byteLength:2,components:4};case no:case _b:case Ts:return{byteLength:4,components:1};case wE:case CE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class d4{static contain(e,t){return u4(e,t)}static cover(e,t){return c4(e,t)}static fill(e){return f4(e)}static getByteLength(e,t,n,i){return CM(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X0}}));typeof window<"u"&&(window.__THREE__?gt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function gD(){let r=null,e=!1,t=null,n=null;function i(a,u){t(a,u),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){r=a}}}function p4(r){const e=new WeakMap;function t(f,d){const p=f.array,v=f.usage,_=p.byteLength,y=r.createBuffer();r.bindBuffer(d,y),r.bufferData(d,p,v),f.onUploadCallback();let b;if(p instanceof Float32Array)b=r.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)b=r.HALF_FLOAT;else if(p instanceof Uint16Array)f.isFloat16BufferAttribute?b=r.HALF_FLOAT:b=r.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=r.SHORT;else if(p instanceof Uint32Array)b=r.UNSIGNED_INT;else if(p instanceof Int32Array)b=r.INT;else if(p instanceof Int8Array)b=r.BYTE;else if(p instanceof Uint8Array)b=r.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version,size:_}}function n(f,d,p){const v=d.array,_=d.updateRanges;if(r.bindBuffer(p,f),_.length===0)r.bufferSubData(p,0,v);else{_.sort((b,E)=>b.start-E.start);let y=0;for(let b=1;b<_.length;b++){const E=_[y],A=_[b];A.start<=E.start+E.count+1?E.count=Math.max(E.count,A.start+A.count-E.start):(++y,_[y]=A)}_.length=y+1;for(let b=0,E=_.length;b<E;b++){const A=_[b];r.bufferSubData(p,A.start*v.BYTES_PER_ELEMENT,v,A.start,A.count)}d.clearUpdateRanges()}d.onUploadCallback()}function i(f){return f.isInterleavedBufferAttribute&&(f=f.data),e.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=e.get(f);d&&(r.deleteBuffer(d.buffer),e.delete(f))}function u(f,d){if(f.isInterleavedBufferAttribute&&(f=f.data),f.isGLBufferAttribute){const v=e.get(f);(!v||v.version<f.version)&&e.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}const p=e.get(f);if(p===void 0)e.set(f,t(f,d));else if(p.version<f.version){if(p.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,f,d),p.version=f.version}}return{get:i,remove:a,update:u}}var m4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,g4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,v4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,y4=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,x4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,b4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,S4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,M4=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,E4=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,T4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,A4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,w4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,C4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,R4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,D4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,L4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,N4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,O4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,I4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,P4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,U4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,z4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,F4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,B4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,k4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,V4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,H4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,G4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,W4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,X4="gl_FragColor = linearToOutputTexel( gl_FragColor );",q4=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Y4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,j4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,Z4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,K4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Q4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,J4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$4=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,eF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,tF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,nF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,iF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,rF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,sF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,aF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,uF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,hF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,dF=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,pF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,mF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,gF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,vF=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_F=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,bF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,SF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,MF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,EF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,AF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wF=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,CF=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,LF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,OF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,IF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,FF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,BF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,VF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,WF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,XF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,YF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,jF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ZF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,KF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,QF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,JF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$F=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,eB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,tB=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,iB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,rB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,sB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,oB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,uB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,cB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_B=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,SB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,MB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,EB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,TB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,RB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,OB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,UB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,BB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:m4,alphahash_pars_fragment:g4,alphamap_fragment:v4,alphamap_pars_fragment:_4,alphatest_fragment:y4,alphatest_pars_fragment:x4,aomap_fragment:b4,aomap_pars_fragment:S4,batching_pars_vertex:M4,batching_vertex:E4,begin_vertex:T4,beginnormal_vertex:A4,bsdfs:w4,iridescence_fragment:C4,bumpmap_pars_fragment:R4,clipping_planes_fragment:D4,clipping_planes_pars_fragment:L4,clipping_planes_pars_vertex:N4,clipping_planes_vertex:O4,color_fragment:I4,color_pars_fragment:P4,color_pars_vertex:U4,color_vertex:z4,common:F4,cube_uv_reflection_fragment:B4,defaultnormal_vertex:k4,displacementmap_pars_vertex:V4,displacementmap_vertex:H4,emissivemap_fragment:G4,emissivemap_pars_fragment:W4,colorspace_fragment:X4,colorspace_pars_fragment:q4,envmap_fragment:Y4,envmap_common_pars_fragment:j4,envmap_pars_fragment:Z4,envmap_pars_vertex:K4,envmap_physical_pars_fragment:oF,envmap_vertex:Q4,fog_vertex:J4,fog_pars_vertex:$4,fog_fragment:eF,fog_pars_fragment:tF,gradientmap_pars_fragment:nF,lightmap_pars_fragment:iF,lights_lambert_fragment:rF,lights_lambert_pars_fragment:sF,lights_pars_begin:aF,lights_toon_fragment:lF,lights_toon_pars_fragment:uF,lights_phong_fragment:cF,lights_phong_pars_fragment:fF,lights_physical_fragment:hF,lights_physical_pars_fragment:dF,lights_fragment_begin:pF,lights_fragment_maps:mF,lights_fragment_end:gF,logdepthbuf_fragment:vF,logdepthbuf_pars_fragment:_F,logdepthbuf_pars_vertex:yF,logdepthbuf_vertex:xF,map_fragment:bF,map_pars_fragment:SF,map_particle_fragment:MF,map_particle_pars_fragment:EF,metalnessmap_fragment:TF,metalnessmap_pars_fragment:AF,morphinstance_vertex:wF,morphcolor_vertex:CF,morphnormal_vertex:RF,morphtarget_pars_vertex:DF,morphtarget_vertex:LF,normal_fragment_begin:NF,normal_fragment_maps:OF,normal_pars_fragment:IF,normal_pars_vertex:PF,normal_vertex:UF,normalmap_pars_fragment:zF,clearcoat_normal_fragment_begin:FF,clearcoat_normal_fragment_maps:BF,clearcoat_pars_fragment:kF,iridescence_pars_fragment:VF,opaque_fragment:HF,packing:GF,premultiplied_alpha_fragment:WF,project_vertex:XF,dithering_fragment:qF,dithering_pars_fragment:YF,roughnessmap_fragment:jF,roughnessmap_pars_fragment:ZF,shadowmap_pars_fragment:KF,shadowmap_pars_vertex:QF,shadowmap_vertex:JF,shadowmask_pars_fragment:$F,skinbase_vertex:eB,skinning_pars_vertex:tB,skinning_vertex:nB,skinnormal_vertex:iB,specularmap_fragment:rB,specularmap_pars_fragment:sB,tonemapping_fragment:aB,tonemapping_pars_fragment:oB,transmission_fragment:lB,transmission_pars_fragment:uB,uv_pars_fragment:cB,uv_pars_vertex:fB,uv_vertex:hB,worldpos_vertex:dB,background_vert:pB,background_frag:mB,backgroundCube_vert:gB,backgroundCube_frag:vB,cube_vert:_B,cube_frag:yB,depth_vert:xB,depth_frag:bB,distance_vert:SB,distance_frag:MB,equirect_vert:EB,equirect_frag:TB,linedashed_vert:AB,linedashed_frag:wB,meshbasic_vert:CB,meshbasic_frag:RB,meshlambert_vert:DB,meshlambert_frag:LB,meshmatcap_vert:NB,meshmatcap_frag:OB,meshnormal_vert:IB,meshnormal_frag:PB,meshphong_vert:UB,meshphong_frag:zB,meshphysical_vert:FB,meshphysical_frag:BB,meshtoon_vert:kB,meshtoon_frag:VB,points_vert:HB,points_frag:GB,shadow_vert:WB,shadow_frag:XB,sprite_vert:qB,sprite_frag:YB},mt={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new nn},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new nn}},envmap:{envMap:{value:null},envMapRotation:{value:new nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new nn},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0},uvTransform:{value:new nn}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new nn},alphaMap:{value:null},alphaMapTransform:{value:new nn},alphaTest:{value:0}}},Lo={basic:{uniforms:bs([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:bs([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new xt(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:bs([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:bs([mt.common,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.roughnessmap,mt.metalnessmap,mt.fog,mt.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:bs([mt.common,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.gradientmap,mt.fog,mt.lights,{emissive:{value:new xt(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:bs([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:bs([mt.points,mt.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:bs([mt.common,mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:bs([mt.common,mt.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:bs([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:bs([mt.sprite,mt.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new nn}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distance:{uniforms:bs([mt.common,mt.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distance_vert,fragmentShader:cn.distance_frag},shadow:{uniforms:bs([mt.lights,mt.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};Lo.physical={uniforms:bs([Lo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new nn},clearcoatNormalScale:{value:new ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new nn},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new nn},transmissionSamplerSize:{value:new ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new nn},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new nn},anisotropyVector:{value:new ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new nn}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const Ry={r:0,b:0,g:0},ih=new Sa,jB=new Xt;function ZB(r,e,t,n,i,a,u){const f=new xt(0);let d=a===!0?0:1,p,v,_=null,y=0,b=null;function E(R){let N=R.isScene===!0?R.background:null;return N&&N.isTexture&&(N=(R.backgroundBlurriness>0?t:e).get(N)),N}function A(R){let N=!1;const P=E(R);P===null?M(f,d):P&&P.isColor&&(M(P,1),N=!0);const z=r.xr.getEnvironmentBlendMode();z==="additive"?n.buffers.color.setClear(0,0,0,1,u):z==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,u),(r.autoClear||N)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function w(R,N){const P=E(N);P&&(P.isCubeTexture||P.mapping===Yp)?(v===void 0&&(v=new Qi(new Oh(1,1,1),new Ma({name:"BackgroundCubeMaterial",uniforms:Ip(Lo.backgroundCube.uniforms),vertexShader:Lo.backgroundCube.vertexShader,fragmentShader:Lo.backgroundCube.fragmentShader,side:As,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(z,B,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(v)),ih.copy(N.backgroundRotation),ih.x*=-1,ih.y*=-1,ih.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(ih.y*=-1,ih.z*=-1),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(jB.makeRotationFromEuler(ih)),v.material.toneMapped=Mn.getTransfer(P.colorSpace)!==kn,(_!==P||y!==P.version||b!==r.toneMapping)&&(v.material.needsUpdate=!0,_=P,y=P.version,b=r.toneMapping),v.layers.enableAll(),R.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new Qi(new Zp(2,2),new Ma({name:"BackgroundMaterial",uniforms:Ip(Lo.background.uniforms),vertexShader:Lo.background.vertexShader,fragmentShader:Lo.background.fragmentShader,side:Pu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,p.material.toneMapped=Mn.getTransfer(P.colorSpace)!==kn,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(_!==P||y!==P.version||b!==r.toneMapping)&&(p.material.needsUpdate=!0,_=P,y=P.version,b=r.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null))}function M(R,N){R.getRGB(Ry,xR(r)),n.buffers.color.setClear(Ry.r,Ry.g,Ry.b,N,u)}function D(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return f},setClearColor:function(R,N=1){f.set(R),d=N,M(f,d)},getClearAlpha:function(){return d},setClearAlpha:function(R){d=R,M(f,d)},render:A,addToRenderList:w,dispose:D}}function KB(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=y(null);let a=i,u=!1;function f(O,W,J,K,ce){let le=!1;const Z=_(K,J,W);a!==Z&&(a=Z,p(a.object)),le=b(O,K,J,ce),le&&E(O,K,J,ce),ce!==null&&e.update(ce,r.ELEMENT_ARRAY_BUFFER),(le||u)&&(u=!1,N(O,W,J,K),ce!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function d(){return r.createVertexArray()}function p(O){return r.bindVertexArray(O)}function v(O){return r.deleteVertexArray(O)}function _(O,W,J){const K=J.wireframe===!0;let ce=n[O.id];ce===void 0&&(ce={},n[O.id]=ce);let le=ce[W.id];le===void 0&&(le={},ce[W.id]=le);let Z=le[K];return Z===void 0&&(Z=y(d()),le[K]=Z),Z}function y(O){const W=[],J=[],K=[];for(let ce=0;ce<t;ce++)W[ce]=0,J[ce]=0,K[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:J,attributeDivisors:K,object:O,attributes:{},index:null}}function b(O,W,J,K){const ce=a.attributes,le=W.attributes;let Z=0;const Q=J.getAttributes();for(const fe in Q)if(Q[fe].location>=0){const Pe=ce[fe];let X=le[fe];if(X===void 0&&(fe==="instanceMatrix"&&O.instanceMatrix&&(X=O.instanceMatrix),fe==="instanceColor"&&O.instanceColor&&(X=O.instanceColor)),Pe===void 0||Pe.attribute!==X||X&&Pe.data!==X.data)return!0;Z++}return a.attributesNum!==Z||a.index!==K}function E(O,W,J,K){const ce={},le=W.attributes;let Z=0;const Q=J.getAttributes();for(const fe in Q)if(Q[fe].location>=0){let Pe=le[fe];Pe===void 0&&(fe==="instanceMatrix"&&O.instanceMatrix&&(Pe=O.instanceMatrix),fe==="instanceColor"&&O.instanceColor&&(Pe=O.instanceColor));const X={};X.attribute=Pe,Pe&&Pe.data&&(X.data=Pe.data),ce[fe]=X,Z++}a.attributes=ce,a.attributesNum=Z,a.index=K}function A(){const O=a.newAttributes;for(let W=0,J=O.length;W<J;W++)O[W]=0}function w(O){M(O,0)}function M(O,W){const J=a.newAttributes,K=a.enabledAttributes,ce=a.attributeDivisors;J[O]=1,K[O]===0&&(r.enableVertexAttribArray(O),K[O]=1),ce[O]!==W&&(r.vertexAttribDivisor(O,W),ce[O]=W)}function D(){const O=a.newAttributes,W=a.enabledAttributes;for(let J=0,K=W.length;J<K;J++)W[J]!==O[J]&&(r.disableVertexAttribArray(J),W[J]=0)}function R(O,W,J,K,ce,le,Z){Z===!0?r.vertexAttribIPointer(O,W,J,ce,le):r.vertexAttribPointer(O,W,J,K,ce,le)}function N(O,W,J,K){A();const ce=K.attributes,le=J.getAttributes(),Z=W.defaultAttributeValues;for(const Q in le){const fe=le[Q];if(fe.location>=0){let Ie=ce[Q];if(Ie===void 0&&(Q==="instanceMatrix"&&O.instanceMatrix&&(Ie=O.instanceMatrix),Q==="instanceColor"&&O.instanceColor&&(Ie=O.instanceColor)),Ie!==void 0){const Pe=Ie.normalized,X=Ie.itemSize,oe=e.get(Ie);if(oe===void 0)continue;const Ce=oe.buffer,Ue=oe.type,rt=oe.bytesPerElement,me=Ue===r.INT||Ue===r.UNSIGNED_INT||Ie.gpuType===_b;if(Ie.isInterleavedBufferAttribute){const Re=Ie.data,it=Re.stride,ee=Ie.offset;if(Re.isInstancedInterleavedBuffer){for(let ft=0;ft<fe.locationSize;ft++)M(fe.location+ft,Re.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let ft=0;ft<fe.locationSize;ft++)w(fe.location+ft);r.bindBuffer(r.ARRAY_BUFFER,Ce);for(let ft=0;ft<fe.locationSize;ft++)R(fe.location+ft,X/fe.locationSize,Ue,Pe,it*rt,(ee+X/fe.locationSize*ft)*rt,me)}else{if(Ie.isInstancedBufferAttribute){for(let Re=0;Re<fe.locationSize;Re++)M(fe.location+Re,Ie.meshPerAttribute);O.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Re=0;Re<fe.locationSize;Re++)w(fe.location+Re);r.bindBuffer(r.ARRAY_BUFFER,Ce);for(let Re=0;Re<fe.locationSize;Re++)R(fe.location+Re,X/fe.locationSize,Ue,Pe,X*rt,X/fe.locationSize*Re*rt,me)}}else if(Z!==void 0){const Pe=Z[Q];if(Pe!==void 0)switch(Pe.length){case 2:r.vertexAttrib2fv(fe.location,Pe);break;case 3:r.vertexAttrib3fv(fe.location,Pe);break;case 4:r.vertexAttrib4fv(fe.location,Pe);break;default:r.vertexAttrib1fv(fe.location,Pe)}}}}D()}function P(){k();for(const O in n){const W=n[O];for(const J in W){const K=W[J];for(const ce in K)v(K[ce].object),delete K[ce];delete W[J]}delete n[O]}}function z(O){if(n[O.id]===void 0)return;const W=n[O.id];for(const J in W){const K=W[J];for(const ce in K)v(K[ce].object),delete K[ce];delete W[J]}delete n[O.id]}function B(O){for(const W in n){const J=n[W];if(J[O.id]===void 0)continue;const K=J[O.id];for(const ce in K)v(K[ce].object),delete K[ce];delete J[O.id]}}function k(){I(),u=!0,a!==i&&(a=i,p(a.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:f,reset:k,resetDefaultState:I,dispose:P,releaseStatesOfGeometry:z,releaseStatesOfProgram:B,initAttributes:A,enableAttribute:w,disableUnusedAttributes:D}}function QB(r,e,t){let n;function i(p){n=p}function a(p,v){r.drawArrays(n,p,v),t.update(v,n,1)}function u(p,v,_){_!==0&&(r.drawArraysInstanced(n,p,v,_),t.update(v,n,_))}function f(p,v,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,v,0,_);let b=0;for(let E=0;E<_;E++)b+=v[E];t.update(b,n,1)}function d(p,v,_,y){if(_===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let E=0;E<p.length;E++)u(p[E],v[E],y[E]);else{b.multiDrawArraysInstancedWEBGL(n,p,0,v,0,y,0,_);let E=0;for(let A=0;A<_;A++)E+=v[A]*y[A];t.update(E,n,1)}}this.setMode=i,this.render=a,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function JB(r,e,t,n){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function u(B){return!(B!==ts&&n.convert(B)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function f(B){const k=B===Ll&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(B!==Ss&&n.convert(B)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==Ts&&!k)}function d(B){if(B==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const v=d(p);v!==p&&(gt("WebGLRenderer:",p,"not supported, using",v,"instead."),p=v);const _=t.logarithmicDepthBuffer===!0,y=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),b=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),E=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_TEXTURE_SIZE),w=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),M=r.getParameter(r.MAX_VERTEX_ATTRIBS),D=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),R=r.getParameter(r.MAX_VARYING_VECTORS),N=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),P=r.getParameter(r.MAX_SAMPLES),z=r.getParameter(r.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:d,textureFormatReadable:u,textureTypeReadable:f,precision:p,logarithmicDepthBuffer:_,reversedDepthBuffer:y,maxTextures:b,maxVertexTextures:E,maxTextureSize:A,maxCubemapSize:w,maxAttributes:M,maxVertexUniforms:D,maxVaryings:R,maxFragmentUniforms:N,maxSamples:P,samples:z}}function $B(r){const e=this;let t=null,n=0,i=!1,a=!1;const u=new Tu,f=new nn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(_,y){const b=_.length!==0||y||n!==0||i;return i=y,n=_.length,b},this.beginShadows=function(){a=!0,v(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(_,y){t=v(_,y,0)},this.setState=function(_,y,b){const E=_.clippingPlanes,A=_.clipIntersection,w=_.clipShadows,M=r.get(_);if(!i||E===null||E.length===0||a&&!w)a?v(null):p();else{const D=a?0:n,R=D*4;let N=M.clippingState||null;d.value=N,N=v(E,y,R,b);for(let P=0;P!==R;++P)N[P]=t[P];M.clippingState=N,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=D}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function v(_,y,b,E){const A=_!==null?_.length:0;let w=null;if(A!==0){if(w=d.value,E!==!0||w===null){const M=b+A*4,D=y.matrixWorldInverse;f.getNormalMatrix(D),(w===null||w.length<M)&&(w=new Float32Array(M));for(let R=0,N=b;R!==A;++R,N+=4)u.copy(_[R]).applyMatrix4(D,f),u.normal.toArray(w,N),w[N+3]=u.constant}d.value=w,d.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,w}}function e5(r){let e=new WeakMap;function t(u,f){return f===p0?u.mapping=Dl:f===m0&&(u.mapping=Xc),u}function n(u){if(u&&u.isTexture){const f=u.mapping;if(f===p0||f===m0)if(e.has(u)){const d=e.get(u).texture;return t(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const p=new UE(d.height);return p.fromEquirectangularTexture(r,u),e.set(u,p),u.addEventListener("dispose",i),t(p.texture,u.mapping)}else return null}}return u}function i(u){const f=u.target;f.removeEventListener("dispose",i);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const Bc=4,Gw=[.125,.215,.35,.446,.526,.582],dh=20,t5=256,Bg=new Ou,Ww=new xt;let I1=null,P1=0,U1=0,z1=!1;const n5=new j;class RM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,a={}){const{size:u=256,position:f=n5}=a;I1=this._renderer.getRenderTarget(),P1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),z1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,n,i,d,f),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Yw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(I1,P1,U1),this._renderer.xr.enabled=z1,e.scissorTest=!1,cp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Dl||e.mapping===Xc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),I1=this._renderer.getRenderTarget(),P1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),z1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:hi,minFilter:hi,generateMipmaps:!1,type:Ll,format:ts,colorSpace:qc,depthBuffer:!1},i=Xw(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Xw(e,t,n);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=i5(a)),this._blurMaterial=s5(a,e,t),this._ggxMaterial=r5(a,e,t)}return i}_compileMaterial(e){const t=new Qi(new Kt,e);this._renderer.compile(t,Bg)}_sceneToCubeUV(e,t,n,i,a){const d=new Zi(90,1,t,n),p=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],_=this._renderer,y=_.autoClear,b=_.toneMapping;_.getClearColor(Ww),_.toneMapping=to,_.autoClear=!1,_.state.buffers.depth.getReversed()&&(_.setRenderTarget(i),_.clearDepth(),_.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Qi(new Oh,new ef({name:"PMREM.Background",side:As,depthWrite:!1,depthTest:!1})));const A=this._backgroundBox,w=A.material;let M=!1;const D=e.background;D?D.isColor&&(w.color.copy(D),e.background=null,M=!0):(w.color.copy(Ww),M=!0);for(let R=0;R<6;R++){const N=R%3;N===0?(d.up.set(0,p[R],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x+v[R],a.y,a.z)):N===1?(d.up.set(0,0,p[R]),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y+v[R],a.z)):(d.up.set(0,p[R],0),d.position.set(a.x,a.y,a.z),d.lookAt(a.x,a.y,a.z+v[R]));const P=this._cubeSize;cp(i,N*P,R>2?P:0,P,P),_.setRenderTarget(i),M&&_.render(A,d),_.render(e,d)}_.toneMapping=b,_.autoClear=y,e.background=D}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Dl||e.mapping===Xc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Yw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qw());const a=i?this._cubemapMaterial:this._equirectMaterial,u=this._lodMeshes[0];u.material=a;const f=a.uniforms;f.envMap.value=e;const d=this._cubeSize;cp(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(u,Bg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,a=this._pingPongRenderTarget,u=this._ggxMaterial,f=this._lodMeshes[n];f.material=u;const d=u.uniforms,p=n/(this._lodMeshes.length-1),v=t/(this._lodMeshes.length-1),_=Math.sqrt(p*p-v*v),y=0+p*1.25,b=_*y,{_lodMax:E}=this,A=this._sizeLods[n],w=3*A*(n>E-Bc?n-E+Bc:0),M=4*(this._cubeSize-A);d.envMap.value=e.texture,d.roughness.value=b,d.mipInt.value=E-t,cp(a,w,M,3*A,2*A),i.setRenderTarget(a),i.render(f,Bg),d.envMap.value=a.texture,d.roughness.value=0,d.mipInt.value=E-n,cp(e,w,M,3*A,2*A),i.setRenderTarget(e),i.render(f,Bg)}_blur(e,t,n,i,a){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,n,i,"latitudinal",a),this._halfBlur(u,e,n,n,i,"longitudinal",a)}_halfBlur(e,t,n,i,a,u,f){const d=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&Ot("blur direction must be either latitudinal or longitudinal!");const v=3,_=this._lodMeshes[i];_.material=p;const y=p.uniforms,b=this._sizeLods[n]-1,E=isFinite(a)?Math.PI/(2*b):2*Math.PI/(2*dh-1),A=a/E,w=isFinite(a)?1+Math.floor(v*A):dh;w>dh&&gt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${dh}`);const M=[];let D=0;for(let B=0;B<dh;++B){const k=B/A,I=Math.exp(-k*k/2);M.push(I),B===0?D+=I:B<w&&(D+=2*I)}for(let B=0;B<M.length;B++)M[B]=M[B]/D;y.envMap.value=e.texture,y.samples.value=w,y.weights.value=M,y.latitudinal.value=u==="latitudinal",f&&(y.poleAxis.value=f);const{_lodMax:R}=this;y.dTheta.value=E,y.mipInt.value=R-n;const N=this._sizeLods[i],P=3*N*(i>R-Bc?i-R+Bc:0),z=4*(this._cubeSize-N);cp(t,P,z,3*N,2*N),d.setRenderTarget(t),d.render(_,Bg)}}function i5(r){const e=[],t=[],n=[];let i=r;const a=r-Bc+1+Gw.length;for(let u=0;u<a;u++){const f=Math.pow(2,i);e.push(f);let d=1/f;u>r-Bc?d=Gw[u-r+Bc-1]:u===0&&(d=0),t.push(d);const p=1/(f-2),v=-p,_=1+p,y=[v,v,_,v,_,_,v,v,_,_,v,_],b=6,E=6,A=3,w=2,M=1,D=new Float32Array(A*E*b),R=new Float32Array(w*E*b),N=new Float32Array(M*E*b);for(let z=0;z<b;z++){const B=z%3*2/3-1,k=z>2?0:-1,I=[B,k,0,B+2/3,k,0,B+2/3,k+1,0,B,k,0,B+2/3,k+1,0,B,k+1,0];D.set(I,A*E*z),R.set(y,w*E*z);const O=[z,z,z,z,z,z];N.set(O,M*E*z)}const P=new Kt;P.setAttribute("position",new Yn(D,A)),P.setAttribute("uv",new Yn(R,w)),P.setAttribute("faceIndex",new Yn(N,M)),n.push(new Qi(P,null)),i>Bc&&i--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function Xw(r,e,t){const n=new xa(r,e,t);return n.texture.mapping=Yp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function cp(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function r5(r,e,t){return new Ma({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:t5,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Qb(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Al,depthTest:!1,depthWrite:!1})}function s5(r,e,t){const n=new Float32Array(dh),i=new j(0,1,0);return new Ma({name:"SphericalGaussianBlur",defines:{n:dh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Al,depthTest:!1,depthWrite:!1})}function qw(){return new Ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Al,depthTest:!1,depthWrite:!1})}function Yw(){return new Ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Qb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Al,depthTest:!1,depthWrite:!1})}function Qb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function a5(r){let e=new WeakMap,t=null;function n(f){if(f&&f.isTexture){const d=f.mapping,p=d===p0||d===m0,v=d===Dl||d===Xc;if(p||v){let _=e.get(f);const y=_!==void 0?_.texture.pmremVersion:0;if(f.isRenderTargetTexture&&f.pmremVersion!==y)return t===null&&(t=new RM(r)),_=p?t.fromEquirectangular(f,_):t.fromCubemap(f,_),_.texture.pmremVersion=f.pmremVersion,e.set(f,_),_.texture;if(_!==void 0)return _.texture;{const b=f.image;return p&&b&&b.height>0||v&&b&&i(b)?(t===null&&(t=new RM(r)),_=p?t.fromEquirectangular(f):t.fromCubemap(f),_.texture.pmremVersion=f.pmremVersion,e.set(f,_),f.addEventListener("dispose",a),_.texture):null}}}return f}function i(f){let d=0;const p=6;for(let v=0;v<p;v++)f[v]!==void 0&&d++;return d===p}function a(f){const d=f.target;d.removeEventListener("dispose",a);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function u(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:u}}function o5(r){const e={};function t(n){if(e[n]!==void 0)return e[n];const i=r.getExtension(n);return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&Lp("WebGLRenderer: "+n+" extension not supported."),i}}}function l5(r,e,t,n){const i={},a=new WeakMap;function u(_){const y=_.target;y.index!==null&&e.remove(y.index);for(const E in y.attributes)e.remove(y.attributes[E]);y.removeEventListener("dispose",u),delete i[y.id];const b=a.get(y);b&&(e.remove(b),a.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function f(_,y){return i[y.id]===!0||(y.addEventListener("dispose",u),i[y.id]=!0,t.memory.geometries++),y}function d(_){const y=_.attributes;for(const b in y)e.update(y[b],r.ARRAY_BUFFER)}function p(_){const y=[],b=_.index,E=_.attributes.position;let A=0;if(b!==null){const D=b.array;A=b.version;for(let R=0,N=D.length;R<N;R+=3){const P=D[R+0],z=D[R+1],B=D[R+2];y.push(P,z,z,B,B,P)}}else if(E!==void 0){const D=E.array;A=E.version;for(let R=0,N=D.length/3-1;R<N;R+=3){const P=R+0,z=R+1,B=R+2;y.push(P,z,z,B,B,P)}}else return;const w=new(pR(y)?PE:IE)(y,1);w.version=A;const M=a.get(_);M&&e.remove(M),a.set(_,w)}function v(_){const y=a.get(_);if(y){const b=_.index;b!==null&&y.version<b.version&&p(_)}else p(_);return a.get(_)}return{get:f,update:d,getWireframeAttribute:v}}function u5(r,e,t){let n;function i(y){n=y}let a,u;function f(y){a=y.type,u=y.bytesPerElement}function d(y,b){r.drawElements(n,b,a,y*u),t.update(b,n,1)}function p(y,b,E){E!==0&&(r.drawElementsInstanced(n,b,a,y*u,E),t.update(b,n,E))}function v(y,b,E){if(E===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,b,0,a,y,0,E);let w=0;for(let M=0;M<E;M++)w+=b[M];t.update(w,n,1)}function _(y,b,E,A){if(E===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let M=0;M<y.length;M++)p(y[M]/u,b[M],A[M]);else{w.multiDrawElementsInstancedWEBGL(n,b,0,a,y,0,A,0,E);let M=0;for(let D=0;D<E;D++)M+=b[D]*A[D];t.update(M,n,1)}}this.setMode=i,this.setIndex=f,this.render=d,this.renderInstances=p,this.renderMultiDraw=v,this.renderMultiDrawInstances=_}function c5(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,u,f){switch(t.calls++,u){case r.TRIANGLES:t.triangles+=f*(a/3);break;case r.LINES:t.lines+=f*(a/2);break;case r.LINE_STRIP:t.lines+=f*(a-1);break;case r.LINE_LOOP:t.lines+=f*a;break;case r.POINTS:t.points+=f*a;break;default:Ot("WebGLInfo: Unknown draw mode:",u);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function f5(r,e,t){const n=new WeakMap,i=new Dn;function a(u,f,d){const p=u.morphTargetInfluences,v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,_=v!==void 0?v.length:0;let y=n.get(f);if(y===void 0||y.count!==_){let O=function(){k.dispose(),n.delete(f),f.removeEventListener("dispose",O)};var b=O;y!==void 0&&y.texture.dispose();const E=f.morphAttributes.position!==void 0,A=f.morphAttributes.normal!==void 0,w=f.morphAttributes.color!==void 0,M=f.morphAttributes.position||[],D=f.morphAttributes.normal||[],R=f.morphAttributes.color||[];let N=0;E===!0&&(N=1),A===!0&&(N=2),w===!0&&(N=3);let P=f.attributes.position.count*N,z=1;P>e.maxTextureSize&&(z=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const B=new Float32Array(P*z*4*_),k=new wb(B,P,z,_);k.type=Ts,k.needsUpdate=!0;const I=N*4;for(let W=0;W<_;W++){const J=M[W],K=D[W],ce=R[W],le=P*z*4*W;for(let Z=0;Z<J.count;Z++){const Q=Z*I;E===!0&&(i.fromBufferAttribute(J,Z),B[le+Q+0]=i.x,B[le+Q+1]=i.y,B[le+Q+2]=i.z,B[le+Q+3]=0),A===!0&&(i.fromBufferAttribute(K,Z),B[le+Q+4]=i.x,B[le+Q+5]=i.y,B[le+Q+6]=i.z,B[le+Q+7]=0),w===!0&&(i.fromBufferAttribute(ce,Z),B[le+Q+8]=i.x,B[le+Q+9]=i.y,B[le+Q+10]=i.z,B[le+Q+11]=ce.itemSize===4?i.w:1)}}y={count:_,texture:k,size:new ke(P,z)},n.set(f,y),f.addEventListener("dispose",O)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)d.getUniforms().setValue(r,"morphTexture",u.morphTexture,t);else{let E=0;for(let w=0;w<p.length;w++)E+=p[w];const A=f.morphTargetsRelative?1:1-E;d.getUniforms().setValue(r,"morphTargetBaseInfluence",A),d.getUniforms().setValue(r,"morphTargetInfluences",p)}d.getUniforms().setValue(r,"morphTargetsTexture",y.texture,t),d.getUniforms().setValue(r,"morphTargetsTextureSize",y.size)}return{update:a}}function h5(r,e,t,n){let i=new WeakMap;function a(d){const p=n.render.frame,v=d.geometry,_=e.get(d,v);if(i.get(_)!==p&&(e.update(_),i.set(_,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",f)===!1&&d.addEventListener("dispose",f),i.get(d)!==p&&(t.update(d.instanceMatrix,r.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,r.ARRAY_BUFFER),i.set(d,p))),d.isSkinnedMesh){const y=d.skeleton;i.get(y)!==p&&(y.update(),i.set(y,p))}return _}function u(){i=new WeakMap}function f(d){const p=d.target;p.removeEventListener("dispose",f),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:a,dispose:u}}const d5={[_E]:"LINEAR_TONE_MAPPING",[yE]:"REINHARD_TONE_MAPPING",[xE]:"CINEON_TONE_MAPPING",[gb]:"ACES_FILMIC_TONE_MAPPING",[SE]:"AGX_TONE_MAPPING",[ME]:"NEUTRAL_TONE_MAPPING",[bE]:"CUSTOM_TONE_MAPPING"};function p5(r,e,t,n,i){const a=new xa(e,t,{type:r,depthBuffer:n,stencilBuffer:i}),u=new xa(e,t,{type:Ll,depthBuffer:!1,stencilBuffer:!1}),f=new Kt;f.setAttribute("position",new St([-1,3,0,-1,-1,0,3,-1,0],3)),f.setAttribute("uv",new St([0,2,0,0,2,0],2));const d=new ZE({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Qi(f,d),v=new Ou(-1,1,1,-1,0,1);let _=null,y=null,b=!1,E,A=null,w=[],M=!1;this.setSize=function(D,R){a.setSize(D,R),u.setSize(D,R);for(let N=0;N<w.length;N++){const P=w[N];P.setSize&&P.setSize(D,R)}},this.setEffects=function(D){w=D,M=w.length>0&&w[0].isRenderPass===!0;const R=a.width,N=a.height;for(let P=0;P<w.length;P++){const z=w[P];z.setSize&&z.setSize(R,N)}},this.begin=function(D,R){if(b||D.toneMapping===to&&w.length===0)return!1;if(A=R,R!==null){const N=R.width,P=R.height;(a.width!==N||a.height!==P)&&this.setSize(N,P)}return M===!1&&D.setRenderTarget(a),E=D.toneMapping,D.toneMapping=to,!0},this.hasRenderPass=function(){return M},this.end=function(D,R){D.toneMapping=E,b=!0;let N=a,P=u;for(let z=0;z<w.length;z++){const B=w[z];if(B.enabled!==!1&&(B.render(D,P,N,R),B.needsSwap!==!1)){const k=N;N=P,P=k}}if(_!==D.outputColorSpace||y!==D.toneMapping){_=D.outputColorSpace,y=D.toneMapping,d.defines={},Mn.getTransfer(_)===kn&&(d.defines.SRGB_TRANSFER="");const z=d5[y];z&&(d.defines[z]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=N.texture,D.setRenderTarget(A),D.render(p,v),A=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){a.dispose(),u.dispose(),f.dispose(),d.dispose()}}const vD=new Fi,DM=new Up(1,1),_D=new wb,yD=new Cb,xD=new j0,jw=[],Zw=[],Kw=new Float32Array(16),Qw=new Float32Array(9),Jw=new Float32Array(4);function Kp(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let a=jw[i];if(a===void 0&&(a=new Float32Array(i),jw[i]=a),e!==0){n.toArray(a,0);for(let u=1,f=0;u!==e;++u)f+=t,r[u].toArray(a,f)}return a}function mr(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function gr(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Jb(r,e){let t=Zw[e];t===void 0&&(t=new Int32Array(e),Zw[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function m5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function g5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;r.uniform2fv(this.addr,e),gr(t,e)}}function v5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(mr(t,e))return;r.uniform3fv(this.addr,e),gr(t,e)}}function _5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;r.uniform4fv(this.addr,e),gr(t,e)}}function y5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(mr(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,n))return;Jw.set(n),r.uniformMatrix2fv(this.addr,!1,Jw),gr(t,n)}}function x5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(mr(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,n))return;Qw.set(n),r.uniformMatrix3fv(this.addr,!1,Qw),gr(t,n)}}function b5(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(mr(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),gr(t,e)}else{if(mr(t,n))return;Kw.set(n),r.uniformMatrix4fv(this.addr,!1,Kw),gr(t,n)}}function S5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function M5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;r.uniform2iv(this.addr,e),gr(t,e)}}function E5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mr(t,e))return;r.uniform3iv(this.addr,e),gr(t,e)}}function T5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;r.uniform4iv(this.addr,e),gr(t,e)}}function A5(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function w5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mr(t,e))return;r.uniform2uiv(this.addr,e),gr(t,e)}}function C5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mr(t,e))return;r.uniform3uiv(this.addr,e),gr(t,e)}}function R5(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mr(t,e))return;r.uniform4uiv(this.addr,e),gr(t,e)}}function D5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let a;this.type===r.SAMPLER_2D_SHADOW?(DM.compareFunction=t.isReversedDepthBuffer()?Ab:Tb,a=DM):a=vD,t.setTexture2D(e||a,i)}function L5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||yD,i)}function N5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||xD,i)}function O5(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||_D,i)}function I5(r){switch(r){case 5126:return m5;case 35664:return g5;case 35665:return v5;case 35666:return _5;case 35674:return y5;case 35675:return x5;case 35676:return b5;case 5124:case 35670:return S5;case 35667:case 35671:return M5;case 35668:case 35672:return E5;case 35669:case 35673:return T5;case 5125:return A5;case 36294:return w5;case 36295:return C5;case 36296:return R5;case 35678:case 36198:case 36298:case 36306:case 35682:return D5;case 35679:case 36299:case 36307:return L5;case 35680:case 36300:case 36308:case 36293:return N5;case 36289:case 36303:case 36311:case 36292:return O5}}function P5(r,e){r.uniform1fv(this.addr,e)}function U5(r,e){const t=Kp(e,this.size,2);r.uniform2fv(this.addr,t)}function z5(r,e){const t=Kp(e,this.size,3);r.uniform3fv(this.addr,t)}function F5(r,e){const t=Kp(e,this.size,4);r.uniform4fv(this.addr,t)}function B5(r,e){const t=Kp(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function k5(r,e){const t=Kp(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function V5(r,e){const t=Kp(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function H5(r,e){r.uniform1iv(this.addr,e)}function G5(r,e){r.uniform2iv(this.addr,e)}function W5(r,e){r.uniform3iv(this.addr,e)}function X5(r,e){r.uniform4iv(this.addr,e)}function q5(r,e){r.uniform1uiv(this.addr,e)}function Y5(r,e){r.uniform2uiv(this.addr,e)}function j5(r,e){r.uniform3uiv(this.addr,e)}function Z5(r,e){r.uniform4uiv(this.addr,e)}function K5(r,e,t){const n=this.cache,i=e.length,a=Jb(t,i);mr(n,a)||(r.uniform1iv(this.addr,a),gr(n,a));let u;this.type===r.SAMPLER_2D_SHADOW?u=DM:u=vD;for(let f=0;f!==i;++f)t.setTexture2D(e[f]||u,a[f])}function Q5(r,e,t){const n=this.cache,i=e.length,a=Jb(t,i);mr(n,a)||(r.uniform1iv(this.addr,a),gr(n,a));for(let u=0;u!==i;++u)t.setTexture3D(e[u]||yD,a[u])}function J5(r,e,t){const n=this.cache,i=e.length,a=Jb(t,i);mr(n,a)||(r.uniform1iv(this.addr,a),gr(n,a));for(let u=0;u!==i;++u)t.setTextureCube(e[u]||xD,a[u])}function $5(r,e,t){const n=this.cache,i=e.length,a=Jb(t,i);mr(n,a)||(r.uniform1iv(this.addr,a),gr(n,a));for(let u=0;u!==i;++u)t.setTexture2DArray(e[u]||_D,a[u])}function ek(r){switch(r){case 5126:return P5;case 35664:return U5;case 35665:return z5;case 35666:return F5;case 35674:return B5;case 35675:return k5;case 35676:return V5;case 5124:case 35670:return H5;case 35667:case 35671:return G5;case 35668:case 35672:return W5;case 35669:case 35673:return X5;case 5125:return q5;case 36294:return Y5;case 36295:return j5;case 36296:return Z5;case 35678:case 36198:case 36298:case 36306:case 35682:return K5;case 35679:case 36299:case 36307:return Q5;case 35680:case 36300:case 36308:case 36293:return J5;case 36289:case 36303:case 36311:case 36292:return $5}}class tk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=I5(t.type)}}class nk{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=ek(t.type)}}class ik{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let a=0,u=i.length;a!==u;++a){const f=i[a];f.setValue(e,t[f.id],n)}}}const F1=/(\w+)(\])?(\[|\.)?/g;function $w(r,e){r.seq.push(e),r.map[e.id]=e}function rk(r,e,t){const n=r.name,i=n.length;for(F1.lastIndex=0;;){const a=F1.exec(n),u=F1.lastIndex;let f=a[1];const d=a[2]==="]",p=a[3];if(d&&(f=f|0),p===void 0||p==="["&&u+2===i){$w(t,p===void 0?new tk(f,r,e):new nk(f,r,e));break}else{let _=t.map[f];_===void 0&&(_=new ik(f),$w(t,_)),t=_}}}class qy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let u=0;u<n;++u){const f=e.getActiveUniform(t,u),d=e.getUniformLocation(t,f.name);rk(f,d,this)}const i=[],a=[];for(const u of this.seq)u.type===e.SAMPLER_2D_SHADOW||u.type===e.SAMPLER_CUBE_SHADOW||u.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(u):a.push(u);i.length>0&&(this.seq=i.concat(a))}setValue(e,t,n,i){const a=this.map[t];a!==void 0&&a.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let a=0,u=t.length;a!==u;++a){const f=t[a],d=n[f.id];d.needsUpdate!==!1&&f.setValue(e,d.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,a=e.length;i!==a;++i){const u=e[i];u.id in t&&n.push(u)}return n}}function eC(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const sk=37297;let ak=0;function ok(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let u=i;u<a;u++){const f=u+1;n.push(`${f===e?">":" "} ${f}: ${t[u]}`)}return n.join(`
`)}const tC=new nn;function lk(r){Mn._getMatrix(tC,Mn.workingColorSpace,r);const e=`mat3( ${tC.elements.map(t=>t.toFixed(4))} )`;switch(Mn.getTransfer(r)){case x0:return[e,"LinearTransferOETF"];case kn:return[e,"sRGBTransferOETF"];default:return gt("WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function nC(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),a=(r.getShaderInfoLog(e)||"").trim();if(n&&a==="")return"";const u=/ERROR: 0:(\d+)/.exec(a);if(u){const f=parseInt(u[1]);return t.toUpperCase()+`

`+a+`

`+ok(r.getShaderSource(e),f)}else return a}function uk(r,e){const t=lk(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const ck={[_E]:"Linear",[yE]:"Reinhard",[xE]:"Cineon",[gb]:"ACESFilmic",[SE]:"AgX",[ME]:"Neutral",[bE]:"Custom"};function fk(r,e){const t=ck[e];return t===void 0?(gt("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+r+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Dy=new j;function hk(){Mn.getLuminanceCoefficients(Dy);const r=Dy.x.toFixed(4),e=Dy.y.toFixed(4),t=Dy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dk(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Yg).join(`
`)}function pk(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function mk(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=r.getActiveAttrib(e,i),u=a.name;let f=1;a.type===r.FLOAT_MAT2&&(f=2),a.type===r.FLOAT_MAT3&&(f=3),a.type===r.FLOAT_MAT4&&(f=4),t[u]={type:a.type,location:r.getAttribLocation(e,u),locationSize:f}}return t}function Yg(r){return r!==""}function iC(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rC(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gk=/^[ \t]*#include +<([\w\d./]+)>/gm;function LM(r){return r.replace(gk,_k)}const vk=new Map;function _k(r,e){let t=cn[e];if(t===void 0){const n=vk.get(e);if(n!==void 0)t=cn[n],gt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return LM(t)}const yk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sC(r){return r.replace(yk,xk)}function xk(r,e,t,n){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function aC(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const bk={[Mp]:"SHADOWMAP_TYPE_PCF",[ph]:"SHADOWMAP_TYPE_VSM"};function Sk(r){return bk[r.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const Mk={[Dl]:"ENVMAP_TYPE_CUBE",[Xc]:"ENVMAP_TYPE_CUBE",[Yp]:"ENVMAP_TYPE_CUBE_UV"};function Ek(r){return r.envMap===!1?"ENVMAP_TYPE_CUBE":Mk[r.envMapMode]||"ENVMAP_TYPE_CUBE"}const Tk={[Xc]:"ENVMAP_MODE_REFRACTION"};function Ak(r){return r.envMap===!1?"ENVMAP_MODE_REFLECTION":Tk[r.envMapMode]||"ENVMAP_MODE_REFLECTION"}const wk={[q0]:"ENVMAP_BLENDING_MULTIPLY",[eR]:"ENVMAP_BLENDING_MIX",[tR]:"ENVMAP_BLENDING_ADD"};function Ck(r){return r.envMap===!1?"ENVMAP_BLENDING_NONE":wk[r.combine]||"ENVMAP_BLENDING_NONE"}function Rk(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function Dk(r,e,t,n){const i=r.getContext(),a=t.defines;let u=t.vertexShader,f=t.fragmentShader;const d=Sk(t),p=Ek(t),v=Ak(t),_=Ck(t),y=Rk(t),b=dk(t),E=pk(a),A=i.createProgram();let w,M,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Yg).join(`
`),w.length>0&&(w+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Yg).join(`
`),M.length>0&&(M+=`
`)):(w=[aC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yg).join(`
`),M=[aC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+v:"",t.envMap?"#define "+_:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==to?"#define TONE_MAPPING":"",t.toneMapping!==to?cn.tonemapping_pars_fragment:"",t.toneMapping!==to?fk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,uk("linearToOutputTexel",t.outputColorSpace),hk(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Yg).join(`
`)),u=LM(u),u=iC(u,t),u=rC(u,t),f=LM(f),f=iC(f,t),f=rC(f,t),u=sC(u),f=sC(f),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,w=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,M=["#define varying in",t.glslVersion===xM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===xM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const R=D+w+u,N=D+M+f,P=eC(i,i.VERTEX_SHADER,R),z=eC(i,i.FRAGMENT_SHADER,N);i.attachShader(A,P),i.attachShader(A,z),t.index0AttributeName!==void 0?i.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(A,0,"position"),i.linkProgram(A);function B(W){if(r.debug.checkShaderErrors){const J=i.getProgramInfoLog(A)||"",K=i.getShaderInfoLog(P)||"",ce=i.getShaderInfoLog(z)||"",le=J.trim(),Z=K.trim(),Q=ce.trim();let fe=!0,Ie=!0;if(i.getProgramParameter(A,i.LINK_STATUS)===!1)if(fe=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,A,P,z);else{const Pe=nC(i,P,"vertex"),X=nC(i,z,"fragment");Ot("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(A,i.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+le+`
`+Pe+`
`+X)}else le!==""?gt("WebGLProgram: Program Info Log:",le):(Z===""||Q==="")&&(Ie=!1);Ie&&(W.diagnostics={runnable:fe,programLog:le,vertexShader:{log:Z,prefix:w},fragmentShader:{log:Q,prefix:M}})}i.deleteShader(P),i.deleteShader(z),k=new qy(i,A),I=mk(i,A)}let k;this.getUniforms=function(){return k===void 0&&B(this),k};let I;this.getAttributes=function(){return I===void 0&&B(this),I};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=i.getProgramParameter(A,sk)),O},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ak++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=P,this.fragmentShader=z,this}let Lk=0;class Nk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(n),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(a)===!1&&(u.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Ok(e),t.set(e,n)),n}}class Ok{constructor(e){this.id=Lk++,this.code=e,this.usedTimes=0}}function Ik(r,e,t,n,i,a,u){const f=new Op,d=new Nk,p=new Set,v=[],_=new Map,y=i.logarithmicDepthBuffer;let b=i.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(I){return p.add(I),I===0?"uv":`uv${I}`}function w(I,O,W,J,K){const ce=J.fog,le=K.geometry,Z=I.isMeshStandardMaterial?J.environment:null,Q=(I.isMeshStandardMaterial?t:e).get(I.envMap||Z),fe=Q&&Q.mapping===Yp?Q.image.height:null,Ie=E[I.type];I.precision!==null&&(b=i.getMaxPrecision(I.precision),b!==I.precision&&gt("WebGLProgram.getParameters:",I.precision,"not supported, using",b,"instead."));const Pe=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,X=Pe!==void 0?Pe.length:0;let oe=0;le.morphAttributes.position!==void 0&&(oe=1),le.morphAttributes.normal!==void 0&&(oe=2),le.morphAttributes.color!==void 0&&(oe=3);let Ce,Ue,rt,me;if(Ie){const rn=Lo[Ie];Ce=rn.vertexShader,Ue=rn.fragmentShader}else Ce=I.vertexShader,Ue=I.fragmentShader,d.update(I),rt=d.getVertexShaderID(I),me=d.getFragmentShaderID(I);const Re=r.getRenderTarget(),it=r.state.buffers.depth.getReversed(),ee=K.isInstancedMesh===!0,ft=K.isBatchedMesh===!0,yt=!!I.map,Yt=!!I.matcap,Et=!!Q,ge=!!I.aoMap,We=!!I.lightMap,Ae=!!I.bumpMap,xe=!!I.normalMap,Y=!!I.displacementMap,dt=!!I.emissiveMap,Ee=!!I.metalnessMap,Ct=!!I.roughnessMap,$e=I.anisotropy>0,q=I.clearcoat>0,F=I.dispersion>0,ae=I.iridescence>0,Le=I.sheen>0,Fe=I.transmission>0,_e=$e&&!!I.anisotropyMap,st=q&&!!I.clearcoatMap,He=q&&!!I.clearcoatNormalMap,Ze=q&&!!I.clearcoatRoughnessMap,Mt=ae&&!!I.iridescenceMap,qe=ae&&!!I.iridescenceThicknessMap,nt=Le&&!!I.sheenColorMap,pt=Le&&!!I.sheenRoughnessMap,$=!!I.specularMap,ve=!!I.specularColorMap,lt=!!I.specularIntensityMap,te=Fe&&!!I.transmissionMap,et=Fe&&!!I.thicknessMap,Ye=!!I.gradientMap,ct=!!I.alphaMap,je=I.alphaTest>0,Be=!!I.alphaHash,tt=!!I.extensions;let Lt=to;I.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(Lt=r.toneMapping);const en={shaderID:Ie,shaderType:I.type,shaderName:I.name,vertexShader:Ce,fragmentShader:Ue,defines:I.defines,customVertexShaderID:rt,customFragmentShaderID:me,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:b,batching:ft,batchingColor:ft&&K._colorsTexture!==null,instancing:ee,instancingColor:ee&&K.instanceColor!==null,instancingMorph:ee&&K.morphTexture!==null,outputColorSpace:Re===null?r.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:qc,alphaToCoverage:!!I.alphaToCoverage,map:yt,matcap:Yt,envMap:Et,envMapMode:Et&&Q.mapping,envMapCubeUVHeight:fe,aoMap:ge,lightMap:We,bumpMap:Ae,normalMap:xe,displacementMap:Y,emissiveMap:dt,normalMapObjectSpace:xe&&I.normalMapType===oR,normalMapTangentSpace:xe&&I.normalMapType===$c,metalnessMap:Ee,roughnessMap:Ct,anisotropy:$e,anisotropyMap:_e,clearcoat:q,clearcoatMap:st,clearcoatNormalMap:He,clearcoatRoughnessMap:Ze,dispersion:F,iridescence:ae,iridescenceMap:Mt,iridescenceThicknessMap:qe,sheen:Le,sheenColorMap:nt,sheenRoughnessMap:pt,specularMap:$,specularColorMap:ve,specularIntensityMap:lt,transmission:Fe,transmissionMap:te,thicknessMap:et,gradientMap:Ye,opaque:I.transparent===!1&&I.blending===yh&&I.alphaToCoverage===!1,alphaMap:ct,alphaTest:je,alphaHash:Be,combine:I.combine,mapUv:yt&&A(I.map.channel),aoMapUv:ge&&A(I.aoMap.channel),lightMapUv:We&&A(I.lightMap.channel),bumpMapUv:Ae&&A(I.bumpMap.channel),normalMapUv:xe&&A(I.normalMap.channel),displacementMapUv:Y&&A(I.displacementMap.channel),emissiveMapUv:dt&&A(I.emissiveMap.channel),metalnessMapUv:Ee&&A(I.metalnessMap.channel),roughnessMapUv:Ct&&A(I.roughnessMap.channel),anisotropyMapUv:_e&&A(I.anisotropyMap.channel),clearcoatMapUv:st&&A(I.clearcoatMap.channel),clearcoatNormalMapUv:He&&A(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ze&&A(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Mt&&A(I.iridescenceMap.channel),iridescenceThicknessMapUv:qe&&A(I.iridescenceThicknessMap.channel),sheenColorMapUv:nt&&A(I.sheenColorMap.channel),sheenRoughnessMapUv:pt&&A(I.sheenRoughnessMap.channel),specularMapUv:$&&A(I.specularMap.channel),specularColorMapUv:ve&&A(I.specularColorMap.channel),specularIntensityMapUv:lt&&A(I.specularIntensityMap.channel),transmissionMapUv:te&&A(I.transmissionMap.channel),thicknessMapUv:et&&A(I.thicknessMap.channel),alphaMapUv:ct&&A(I.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(xe||$e),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!le.attributes.uv&&(yt||ct),fog:!!ce,useFog:I.fog===!0,fogExp2:!!ce&&ce.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:y,reversedDepthBuffer:it,skinning:K.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:oe,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:I.dithering,shadowMapEnabled:r.shadowMap.enabled&&W.length>0,shadowMapType:r.shadowMap.type,toneMapping:Lt,decodeVideoTexture:yt&&I.map.isVideoTexture===!0&&Mn.getTransfer(I.map.colorSpace)===kn,decodeVideoTextureEmissive:dt&&I.emissiveMap.isVideoTexture===!0&&Mn.getTransfer(I.emissiveMap.colorSpace)===kn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===No,flipSided:I.side===As,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:tt&&I.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tt&&I.extensions.multiDraw===!0||ft)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return en.vertexUv1s=p.has(1),en.vertexUv2s=p.has(2),en.vertexUv3s=p.has(3),p.clear(),en}function M(I){const O=[];if(I.shaderID?O.push(I.shaderID):(O.push(I.customVertexShaderID),O.push(I.customFragmentShaderID)),I.defines!==void 0)for(const W in I.defines)O.push(W),O.push(I.defines[W]);return I.isRawShaderMaterial===!1&&(D(O,I),R(O,I),O.push(r.outputColorSpace)),O.push(I.customProgramCacheKey),O.join()}function D(I,O){I.push(O.precision),I.push(O.outputColorSpace),I.push(O.envMapMode),I.push(O.envMapCubeUVHeight),I.push(O.mapUv),I.push(O.alphaMapUv),I.push(O.lightMapUv),I.push(O.aoMapUv),I.push(O.bumpMapUv),I.push(O.normalMapUv),I.push(O.displacementMapUv),I.push(O.emissiveMapUv),I.push(O.metalnessMapUv),I.push(O.roughnessMapUv),I.push(O.anisotropyMapUv),I.push(O.clearcoatMapUv),I.push(O.clearcoatNormalMapUv),I.push(O.clearcoatRoughnessMapUv),I.push(O.iridescenceMapUv),I.push(O.iridescenceThicknessMapUv),I.push(O.sheenColorMapUv),I.push(O.sheenRoughnessMapUv),I.push(O.specularMapUv),I.push(O.specularColorMapUv),I.push(O.specularIntensityMapUv),I.push(O.transmissionMapUv),I.push(O.thicknessMapUv),I.push(O.combine),I.push(O.fogExp2),I.push(O.sizeAttenuation),I.push(O.morphTargetsCount),I.push(O.morphAttributeCount),I.push(O.numDirLights),I.push(O.numPointLights),I.push(O.numSpotLights),I.push(O.numSpotLightMaps),I.push(O.numHemiLights),I.push(O.numRectAreaLights),I.push(O.numDirLightShadows),I.push(O.numPointLightShadows),I.push(O.numSpotLightShadows),I.push(O.numSpotLightShadowsWithMaps),I.push(O.numLightProbes),I.push(O.shadowMapType),I.push(O.toneMapping),I.push(O.numClippingPlanes),I.push(O.numClipIntersection),I.push(O.depthPacking)}function R(I,O){f.disableAll(),O.instancing&&f.enable(0),O.instancingColor&&f.enable(1),O.instancingMorph&&f.enable(2),O.matcap&&f.enable(3),O.envMap&&f.enable(4),O.normalMapObjectSpace&&f.enable(5),O.normalMapTangentSpace&&f.enable(6),O.clearcoat&&f.enable(7),O.iridescence&&f.enable(8),O.alphaTest&&f.enable(9),O.vertexColors&&f.enable(10),O.vertexAlphas&&f.enable(11),O.vertexUv1s&&f.enable(12),O.vertexUv2s&&f.enable(13),O.vertexUv3s&&f.enable(14),O.vertexTangents&&f.enable(15),O.anisotropy&&f.enable(16),O.alphaHash&&f.enable(17),O.batching&&f.enable(18),O.dispersion&&f.enable(19),O.batchingColor&&f.enable(20),O.gradientMap&&f.enable(21),I.push(f.mask),f.disableAll(),O.fog&&f.enable(0),O.useFog&&f.enable(1),O.flatShading&&f.enable(2),O.logarithmicDepthBuffer&&f.enable(3),O.reversedDepthBuffer&&f.enable(4),O.skinning&&f.enable(5),O.morphTargets&&f.enable(6),O.morphNormals&&f.enable(7),O.morphColors&&f.enable(8),O.premultipliedAlpha&&f.enable(9),O.shadowMapEnabled&&f.enable(10),O.doubleSided&&f.enable(11),O.flipSided&&f.enable(12),O.useDepthPacking&&f.enable(13),O.dithering&&f.enable(14),O.transmission&&f.enable(15),O.sheen&&f.enable(16),O.opaque&&f.enable(17),O.pointsUvs&&f.enable(18),O.decodeVideoTexture&&f.enable(19),O.decodeVideoTextureEmissive&&f.enable(20),O.alphaToCoverage&&f.enable(21),I.push(f.mask)}function N(I){const O=E[I.type];let W;if(O){const J=Lo[O];W=Yx.clone(J.uniforms)}else W=I.uniforms;return W}function P(I,O){let W=_.get(O);return W!==void 0?++W.usedTimes:(W=new Dk(r,O,I,a),v.push(W),_.set(O,W)),W}function z(I){if(--I.usedTimes===0){const O=v.indexOf(I);v[O]=v[v.length-1],v.pop(),_.delete(I.cacheKey),I.destroy()}}function B(I){d.remove(I)}function k(){d.dispose()}return{getParameters:w,getProgramCacheKey:M,getUniforms:N,acquireProgram:P,releaseProgram:z,releaseShaderCache:B,programs:v,dispose:k}}function Pk(){let r=new WeakMap;function e(u){return r.has(u)}function t(u){let f=r.get(u);return f===void 0&&(f={},r.set(u,f)),f}function n(u){r.delete(u)}function i(u,f,d){r.get(u)[f]=d}function a(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:a}}function Uk(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function oC(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function lC(){const r=[];let e=0;const t=[],n=[],i=[];function a(){e=0,t.length=0,n.length=0,i.length=0}function u(_,y,b,E,A,w){let M=r[e];return M===void 0?(M={id:_.id,object:_,geometry:y,material:b,groupOrder:E,renderOrder:_.renderOrder,z:A,group:w},r[e]=M):(M.id=_.id,M.object=_,M.geometry=y,M.material=b,M.groupOrder=E,M.renderOrder=_.renderOrder,M.z=A,M.group=w),e++,M}function f(_,y,b,E,A,w){const M=u(_,y,b,E,A,w);b.transmission>0?n.push(M):b.transparent===!0?i.push(M):t.push(M)}function d(_,y,b,E,A,w){const M=u(_,y,b,E,A,w);b.transmission>0?n.unshift(M):b.transparent===!0?i.unshift(M):t.unshift(M)}function p(_,y){t.length>1&&t.sort(_||Uk),n.length>1&&n.sort(y||oC),i.length>1&&i.sort(y||oC)}function v(){for(let _=e,y=r.length;_<y;_++){const b=r[_];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:i,init:a,push:f,unshift:d,finish:v,sort:p}}function zk(){let r=new WeakMap;function e(n,i){const a=r.get(n);let u;return a===void 0?(u=new lC,r.set(n,[u])):i>=a.length?(u=new lC,a.push(u)):u=a[i],u}function t(){r=new WeakMap}return{get:e,dispose:t}}function Fk(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new xt};break;case"SpotLight":t={position:new j,direction:new j,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":t={color:new xt,position:new j,halfWidth:new j,halfHeight:new j};break}return r[e.id]=t,t}}}function Bk(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let kk=0;function Vk(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Hk(r){const e=new Fk,t=Bk(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new j);const i=new j,a=new Xt,u=new Xt;function f(p){let v=0,_=0,y=0;for(let I=0;I<9;I++)n.probe[I].set(0,0,0);let b=0,E=0,A=0,w=0,M=0,D=0,R=0,N=0,P=0,z=0,B=0;p.sort(Vk);for(let I=0,O=p.length;I<O;I++){const W=p[I],J=W.color,K=W.intensity,ce=W.distance;let le=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===Rh?le=W.shadow.map.texture:le=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)v+=J.r*K,_+=J.g*K,y+=J.b*K;else if(W.isLightProbe){for(let Z=0;Z<9;Z++)n.probe[Z].addScaledVector(W.sh.coefficients[Z],K);B++}else if(W.isDirectionalLight){const Z=e.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const Q=W.shadow,fe=t.get(W);fe.shadowIntensity=Q.intensity,fe.shadowBias=Q.bias,fe.shadowNormalBias=Q.normalBias,fe.shadowRadius=Q.radius,fe.shadowMapSize=Q.mapSize,n.directionalShadow[b]=fe,n.directionalShadowMap[b]=le,n.directionalShadowMatrix[b]=W.shadow.matrix,D++}n.directional[b]=Z,b++}else if(W.isSpotLight){const Z=e.get(W);Z.position.setFromMatrixPosition(W.matrixWorld),Z.color.copy(J).multiplyScalar(K),Z.distance=ce,Z.coneCos=Math.cos(W.angle),Z.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),Z.decay=W.decay,n.spot[A]=Z;const Q=W.shadow;if(W.map&&(n.spotLightMap[P]=W.map,P++,Q.updateMatrices(W),W.castShadow&&z++),n.spotLightMatrix[A]=Q.matrix,W.castShadow){const fe=t.get(W);fe.shadowIntensity=Q.intensity,fe.shadowBias=Q.bias,fe.shadowNormalBias=Q.normalBias,fe.shadowRadius=Q.radius,fe.shadowMapSize=Q.mapSize,n.spotShadow[A]=fe,n.spotShadowMap[A]=le,N++}A++}else if(W.isRectAreaLight){const Z=e.get(W);Z.color.copy(J).multiplyScalar(K),Z.halfWidth.set(W.width*.5,0,0),Z.halfHeight.set(0,W.height*.5,0),n.rectArea[w]=Z,w++}else if(W.isPointLight){const Z=e.get(W);if(Z.color.copy(W.color).multiplyScalar(W.intensity),Z.distance=W.distance,Z.decay=W.decay,W.castShadow){const Q=W.shadow,fe=t.get(W);fe.shadowIntensity=Q.intensity,fe.shadowBias=Q.bias,fe.shadowNormalBias=Q.normalBias,fe.shadowRadius=Q.radius,fe.shadowMapSize=Q.mapSize,fe.shadowCameraNear=Q.camera.near,fe.shadowCameraFar=Q.camera.far,n.pointShadow[E]=fe,n.pointShadowMap[E]=le,n.pointShadowMatrix[E]=W.shadow.matrix,R++}n.point[E]=Z,E++}else if(W.isHemisphereLight){const Z=e.get(W);Z.skyColor.copy(W.color).multiplyScalar(K),Z.groundColor.copy(W.groundColor).multiplyScalar(K),n.hemi[M]=Z,M++}}w>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=mt.LTC_FLOAT_1,n.rectAreaLTC2=mt.LTC_FLOAT_2):(n.rectAreaLTC1=mt.LTC_HALF_1,n.rectAreaLTC2=mt.LTC_HALF_2)),n.ambient[0]=v,n.ambient[1]=_,n.ambient[2]=y;const k=n.hash;(k.directionalLength!==b||k.pointLength!==E||k.spotLength!==A||k.rectAreaLength!==w||k.hemiLength!==M||k.numDirectionalShadows!==D||k.numPointShadows!==R||k.numSpotShadows!==N||k.numSpotMaps!==P||k.numLightProbes!==B)&&(n.directional.length=b,n.spot.length=A,n.rectArea.length=w,n.point.length=E,n.hemi.length=M,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=N,n.spotShadowMap.length=N,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=N+P-z,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=z,n.numLightProbes=B,k.directionalLength=b,k.pointLength=E,k.spotLength=A,k.rectAreaLength=w,k.hemiLength=M,k.numDirectionalShadows=D,k.numPointShadows=R,k.numSpotShadows=N,k.numSpotMaps=P,k.numLightProbes=B,n.version=kk++)}function d(p,v){let _=0,y=0,b=0,E=0,A=0;const w=v.matrixWorldInverse;for(let M=0,D=p.length;M<D;M++){const R=p[M];if(R.isDirectionalLight){const N=n.directional[_];N.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(w),_++}else if(R.isSpotLight){const N=n.spot[b];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(w),N.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(i),N.direction.transformDirection(w),b++}else if(R.isRectAreaLight){const N=n.rectArea[E];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(w),u.identity(),a.copy(R.matrixWorld),a.premultiply(w),u.extractRotation(a),N.halfWidth.set(R.width*.5,0,0),N.halfHeight.set(0,R.height*.5,0),N.halfWidth.applyMatrix4(u),N.halfHeight.applyMatrix4(u),E++}else if(R.isPointLight){const N=n.point[y];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(w),y++}else if(R.isHemisphereLight){const N=n.hemi[A];N.direction.setFromMatrixPosition(R.matrixWorld),N.direction.transformDirection(w),A++}}}return{setup:f,setupView:d,state:n}}function uC(r){const e=new Hk(r),t=[],n=[];function i(v){p.camera=v,t.length=0,n.length=0}function a(v){t.push(v)}function u(v){n.push(v)}function f(){e.setup(t)}function d(v){e.setupView(t,v)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:p,setupLights:f,setupLightsView:d,pushLight:a,pushShadow:u}}function Gk(r){let e=new WeakMap;function t(i,a=0){const u=e.get(i);let f;return u===void 0?(f=new uC(r),e.set(i,[f])):a>=u.length?(f=new uC(r),u.push(f)):f=u[a],f}function n(){e=new WeakMap}return{get:t,dispose:n}}const Wk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Xk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,qk=[new j(1,0,0),new j(-1,0,0),new j(0,1,0),new j(0,-1,0),new j(0,0,1),new j(0,0,-1)],Yk=[new j(0,-1,0),new j(0,-1,0),new j(0,0,1),new j(0,0,-1),new j(0,-1,0),new j(0,-1,0)],cC=new Xt,kg=new j,B1=new j;function jk(r,e,t){let n=new jp;const i=new ke,a=new ke,u=new Dn,f=new QE,d=new JE,p={},v=t.maxTextureSize,_={[Pu]:As,[As]:Pu,[No]:No},y=new Ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ke},radius:{value:4}},vertexShader:Wk,fragmentShader:Xk}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const E=new Kt;E.setAttribute("position",new Yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Qi(E,y),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Mp;let M=this.type;this.render=function(z,B,k){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||z.length===0)return;z.type===Qg&&(gt("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),z.type=Mp);const I=r.getRenderTarget(),O=r.getActiveCubeFace(),W=r.getActiveMipmapLevel(),J=r.state;J.setBlending(Al),J.buffers.depth.getReversed()===!0?J.buffers.color.setClear(0,0,0,0):J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const K=M!==this.type;K&&B.traverse(function(ce){ce.material&&(Array.isArray(ce.material)?ce.material.forEach(le=>le.needsUpdate=!0):ce.material.needsUpdate=!0)});for(let ce=0,le=z.length;ce<le;ce++){const Z=z[ce],Q=Z.shadow;if(Q===void 0){gt("WebGLShadowMap:",Z,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const fe=Q.getFrameExtents();if(i.multiply(fe),a.copy(Q.mapSize),(i.x>v||i.y>v)&&(i.x>v&&(a.x=Math.floor(v/fe.x),i.x=a.x*fe.x,Q.mapSize.x=a.x),i.y>v&&(a.y=Math.floor(v/fe.y),i.y=a.y*fe.y,Q.mapSize.y=a.y)),Q.map===null||K===!0){if(Q.map!==null&&(Q.map.depthTexture!==null&&(Q.map.depthTexture.dispose(),Q.map.depthTexture=null),Q.map.dispose()),this.type===ph){if(Z.isPointLight){gt("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Q.map=new xa(i.x,i.y,{format:Rh,type:Ll,minFilter:hi,magFilter:hi,generateMipmaps:!1}),Q.map.texture.name=Z.name+".shadowMap",Q.map.depthTexture=new Up(i.x,i.y,Ts),Q.map.depthTexture.name=Z.name+".shadowMapDepth",Q.map.depthTexture.format=Nl,Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=Ki,Q.map.depthTexture.magFilter=Ki}else{Z.isPointLight?(Q.map=new UE(i.x),Q.map.depthTexture=new LR(i.x,no)):(Q.map=new xa(i.x,i.y),Q.map.depthTexture=new Up(i.x,i.y,no)),Q.map.depthTexture.name=Z.name+".shadowMap",Q.map.depthTexture.format=Nl;const Pe=r.state.buffers.depth.getReversed();this.type===Mp?(Q.map.depthTexture.compareFunction=Pe?Ab:Tb,Q.map.depthTexture.minFilter=hi,Q.map.depthTexture.magFilter=hi):(Q.map.depthTexture.compareFunction=null,Q.map.depthTexture.minFilter=Ki,Q.map.depthTexture.magFilter=Ki)}Q.camera.updateProjectionMatrix()}const Ie=Q.map.isWebGLCubeRenderTarget?6:1;for(let Pe=0;Pe<Ie;Pe++){if(Q.map.isWebGLCubeRenderTarget)r.setRenderTarget(Q.map,Pe),r.clear();else{Pe===0&&(r.setRenderTarget(Q.map),r.clear());const X=Q.getViewport(Pe);u.set(a.x*X.x,a.y*X.y,a.x*X.z,a.y*X.w),J.viewport(u)}if(Z.isPointLight){const X=Q.camera,oe=Q.matrix,Ce=Z.distance||X.far;Ce!==X.far&&(X.far=Ce,X.updateProjectionMatrix()),kg.setFromMatrixPosition(Z.matrixWorld),X.position.copy(kg),B1.copy(X.position),B1.add(qk[Pe]),X.up.copy(Yk[Pe]),X.lookAt(B1),X.updateMatrixWorld(),oe.makeTranslation(-kg.x,-kg.y,-kg.z),cC.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),Q._frustum.setFromProjectionMatrix(cC,X.coordinateSystem,X.reversedDepth)}else Q.updateMatrices(Z);n=Q.getFrustum(),N(B,k,Q.camera,Z,this.type)}Q.isPointLightShadow!==!0&&this.type===ph&&D(Q,k),Q.needsUpdate=!1}M=this.type,w.needsUpdate=!1,r.setRenderTarget(I,O,W)};function D(z,B){const k=e.update(A);y.defines.VSM_SAMPLES!==z.blurSamples&&(y.defines.VSM_SAMPLES=z.blurSamples,b.defines.VSM_SAMPLES=z.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new xa(i.x,i.y,{format:Rh,type:Ll})),y.uniforms.shadow_pass.value=z.map.depthTexture,y.uniforms.resolution.value=z.mapSize,y.uniforms.radius.value=z.radius,r.setRenderTarget(z.mapPass),r.clear(),r.renderBufferDirect(B,null,k,y,A,null),b.uniforms.shadow_pass.value=z.mapPass.texture,b.uniforms.resolution.value=z.mapSize,b.uniforms.radius.value=z.radius,r.setRenderTarget(z.map),r.clear(),r.renderBufferDirect(B,null,k,b,A,null)}function R(z,B,k,I){let O=null;const W=k.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(W!==void 0)O=W;else if(O=k.isPointLight===!0?d:f,r.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0||B.alphaToCoverage===!0){const J=O.uuid,K=B.uuid;let ce=p[J];ce===void 0&&(ce={},p[J]=ce);let le=ce[K];le===void 0&&(le=O.clone(),ce[K]=le,B.addEventListener("dispose",P)),O=le}if(O.visible=B.visible,O.wireframe=B.wireframe,I===ph?O.side=B.shadowSide!==null?B.shadowSide:B.side:O.side=B.shadowSide!==null?B.shadowSide:_[B.side],O.alphaMap=B.alphaMap,O.alphaTest=B.alphaToCoverage===!0?.5:B.alphaTest,O.map=B.map,O.clipShadows=B.clipShadows,O.clippingPlanes=B.clippingPlanes,O.clipIntersection=B.clipIntersection,O.displacementMap=B.displacementMap,O.displacementScale=B.displacementScale,O.displacementBias=B.displacementBias,O.wireframeLinewidth=B.wireframeLinewidth,O.linewidth=B.linewidth,k.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const J=r.properties.get(O);J.light=k}return O}function N(z,B,k,I,O){if(z.visible===!1)return;if(z.layers.test(B.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&O===ph)&&(!z.frustumCulled||n.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,z.matrixWorld);const K=e.update(z),ce=z.material;if(Array.isArray(ce)){const le=K.groups;for(let Z=0,Q=le.length;Z<Q;Z++){const fe=le[Z],Ie=ce[fe.materialIndex];if(Ie&&Ie.visible){const Pe=R(z,Ie,I,O);z.onBeforeShadow(r,z,B,k,K,Pe,fe),r.renderBufferDirect(k,null,K,Pe,z,fe),z.onAfterShadow(r,z,B,k,K,Pe,fe)}}}else if(ce.visible){const le=R(z,ce,I,O);z.onBeforeShadow(r,z,B,k,K,le,null),r.renderBufferDirect(k,null,K,le,z,null),z.onAfterShadow(r,z,B,k,K,le,null)}}const J=z.children;for(let K=0,ce=J.length;K<ce;K++)N(J[K],B,k,I,O)}function P(z){z.target.removeEventListener("dispose",P);for(const k in p){const I=p[k],O=z.target.uuid;O in I&&(I[O].dispose(),delete I[O])}}}const Zk={[ox]:lx,[ux]:hx,[cx]:dx,[Ch]:fx,[lx]:ox,[hx]:ux,[dx]:cx,[fx]:Ch};function Kk(r,e){function t(){let te=!1;const et=new Dn;let Ye=null;const ct=new Dn(0,0,0,0);return{setMask:function(je){Ye!==je&&!te&&(r.colorMask(je,je,je,je),Ye=je)},setLocked:function(je){te=je},setClear:function(je,Be,tt,Lt,en){en===!0&&(je*=Lt,Be*=Lt,tt*=Lt),et.set(je,Be,tt,Lt),ct.equals(et)===!1&&(r.clearColor(je,Be,tt,Lt),ct.copy(et))},reset:function(){te=!1,Ye=null,ct.set(-1,0,0,0)}}}function n(){let te=!1,et=!1,Ye=null,ct=null,je=null;return{setReversed:function(Be){if(et!==Be){const tt=e.get("EXT_clip_control");Be?tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.ZERO_TO_ONE_EXT):tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.NEGATIVE_ONE_TO_ONE_EXT),et=Be;const Lt=je;je=null,this.setClear(Lt)}},getReversed:function(){return et},setTest:function(Be){Be?Re(r.DEPTH_TEST):it(r.DEPTH_TEST)},setMask:function(Be){Ye!==Be&&!te&&(r.depthMask(Be),Ye=Be)},setFunc:function(Be){if(et&&(Be=Zk[Be]),ct!==Be){switch(Be){case ox:r.depthFunc(r.NEVER);break;case lx:r.depthFunc(r.ALWAYS);break;case ux:r.depthFunc(r.LESS);break;case Ch:r.depthFunc(r.LEQUAL);break;case cx:r.depthFunc(r.EQUAL);break;case fx:r.depthFunc(r.GEQUAL);break;case hx:r.depthFunc(r.GREATER);break;case dx:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}ct=Be}},setLocked:function(Be){te=Be},setClear:function(Be){je!==Be&&(et&&(Be=1-Be),r.clearDepth(Be),je=Be)},reset:function(){te=!1,Ye=null,ct=null,je=null,et=!1}}}function i(){let te=!1,et=null,Ye=null,ct=null,je=null,Be=null,tt=null,Lt=null,en=null;return{setTest:function(rn){te||(rn?Re(r.STENCIL_TEST):it(r.STENCIL_TEST))},setMask:function(rn){et!==rn&&!te&&(r.stencilMask(rn),et=rn)},setFunc:function(rn,ii,Bi){(Ye!==rn||ct!==ii||je!==Bi)&&(r.stencilFunc(rn,ii,Bi),Ye=rn,ct=ii,je=Bi)},setOp:function(rn,ii,Bi){(Be!==rn||tt!==ii||Lt!==Bi)&&(r.stencilOp(rn,ii,Bi),Be=rn,tt=ii,Lt=Bi)},setLocked:function(rn){te=rn},setClear:function(rn){en!==rn&&(r.clearStencil(rn),en=rn)},reset:function(){te=!1,et=null,Ye=null,ct=null,je=null,Be=null,tt=null,Lt=null,en=null}}}const a=new t,u=new n,f=new i,d=new WeakMap,p=new WeakMap;let v={},_={},y=new WeakMap,b=[],E=null,A=!1,w=null,M=null,D=null,R=null,N=null,P=null,z=null,B=new xt(0,0,0),k=0,I=!1,O=null,W=null,J=null,K=null,ce=null;const le=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,Q=0;const fe=r.getParameter(r.VERSION);fe.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(fe)[1]),Z=Q>=1):fe.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),Z=Q>=2);let Ie=null,Pe={};const X=r.getParameter(r.SCISSOR_BOX),oe=r.getParameter(r.VIEWPORT),Ce=new Dn().fromArray(X),Ue=new Dn().fromArray(oe);function rt(te,et,Ye,ct){const je=new Uint8Array(4),Be=r.createTexture();r.bindTexture(te,Be),r.texParameteri(te,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(te,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let tt=0;tt<Ye;tt++)te===r.TEXTURE_3D||te===r.TEXTURE_2D_ARRAY?r.texImage3D(et,0,r.RGBA,1,1,ct,0,r.RGBA,r.UNSIGNED_BYTE,je):r.texImage2D(et+tt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,je);return Be}const me={};me[r.TEXTURE_2D]=rt(r.TEXTURE_2D,r.TEXTURE_2D,1),me[r.TEXTURE_CUBE_MAP]=rt(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[r.TEXTURE_2D_ARRAY]=rt(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),me[r.TEXTURE_3D]=rt(r.TEXTURE_3D,r.TEXTURE_3D,1,1),a.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Re(r.DEPTH_TEST),u.setFunc(Ch),Ae(!1),xe(pM),Re(r.CULL_FACE),ge(Al);function Re(te){v[te]!==!0&&(r.enable(te),v[te]=!0)}function it(te){v[te]!==!1&&(r.disable(te),v[te]=!1)}function ee(te,et){return _[te]!==et?(r.bindFramebuffer(te,et),_[te]=et,te===r.DRAW_FRAMEBUFFER&&(_[r.FRAMEBUFFER]=et),te===r.FRAMEBUFFER&&(_[r.DRAW_FRAMEBUFFER]=et),!0):!1}function ft(te,et){let Ye=b,ct=!1;if(te){Ye=y.get(et),Ye===void 0&&(Ye=[],y.set(et,Ye));const je=te.textures;if(Ye.length!==je.length||Ye[0]!==r.COLOR_ATTACHMENT0){for(let Be=0,tt=je.length;Be<tt;Be++)Ye[Be]=r.COLOR_ATTACHMENT0+Be;Ye.length=je.length,ct=!0}}else Ye[0]!==r.BACK&&(Ye[0]=r.BACK,ct=!0);ct&&r.drawBuffers(Ye)}function yt(te){return E!==te?(r.useProgram(te),E=te,!0):!1}const Yt={[Pc]:r.FUNC_ADD,[z3]:r.FUNC_SUBTRACT,[F3]:r.FUNC_REVERSE_SUBTRACT};Yt[B3]=r.MIN,Yt[k3]=r.MAX;const Et={[V3]:r.ZERO,[H3]:r.ONE,[G3]:r.SRC_COLOR,[sx]:r.SRC_ALPHA,[Z3]:r.SRC_ALPHA_SATURATE,[Y3]:r.DST_COLOR,[X3]:r.DST_ALPHA,[W3]:r.ONE_MINUS_SRC_COLOR,[ax]:r.ONE_MINUS_SRC_ALPHA,[j3]:r.ONE_MINUS_DST_COLOR,[q3]:r.ONE_MINUS_DST_ALPHA,[K3]:r.CONSTANT_COLOR,[Q3]:r.ONE_MINUS_CONSTANT_COLOR,[J3]:r.CONSTANT_ALPHA,[$3]:r.ONE_MINUS_CONSTANT_ALPHA};function ge(te,et,Ye,ct,je,Be,tt,Lt,en,rn){if(te===Al){A===!0&&(it(r.BLEND),A=!1);return}if(A===!1&&(Re(r.BLEND),A=!0),te!==U3){if(te!==w||rn!==I){if((M!==Pc||N!==Pc)&&(r.blendEquation(r.FUNC_ADD),M=Pc,N=Pc),rn)switch(te){case yh:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case mM:r.blendFunc(r.ONE,r.ONE);break;case gM:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case vM:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:Ot("WebGLState: Invalid blending: ",te);break}else switch(te){case yh:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case mM:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case gM:Ot("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case vM:Ot("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ot("WebGLState: Invalid blending: ",te);break}D=null,R=null,P=null,z=null,B.set(0,0,0),k=0,w=te,I=rn}return}je=je||et,Be=Be||Ye,tt=tt||ct,(et!==M||je!==N)&&(r.blendEquationSeparate(Yt[et],Yt[je]),M=et,N=je),(Ye!==D||ct!==R||Be!==P||tt!==z)&&(r.blendFuncSeparate(Et[Ye],Et[ct],Et[Be],Et[tt]),D=Ye,R=ct,P=Be,z=tt),(Lt.equals(B)===!1||en!==k)&&(r.blendColor(Lt.r,Lt.g,Lt.b,en),B.copy(Lt),k=en),w=te,I=!1}function We(te,et){te.side===No?it(r.CULL_FACE):Re(r.CULL_FACE);let Ye=te.side===As;et&&(Ye=!Ye),Ae(Ye),te.blending===yh&&te.transparent===!1?ge(Al):ge(te.blending,te.blendEquation,te.blendSrc,te.blendDst,te.blendEquationAlpha,te.blendSrcAlpha,te.blendDstAlpha,te.blendColor,te.blendAlpha,te.premultipliedAlpha),u.setFunc(te.depthFunc),u.setTest(te.depthTest),u.setMask(te.depthWrite),a.setMask(te.colorWrite);const ct=te.stencilWrite;f.setTest(ct),ct&&(f.setMask(te.stencilWriteMask),f.setFunc(te.stencilFunc,te.stencilRef,te.stencilFuncMask),f.setOp(te.stencilFail,te.stencilZFail,te.stencilZPass)),dt(te.polygonOffset,te.polygonOffsetFactor,te.polygonOffsetUnits),te.alphaToCoverage===!0?Re(r.SAMPLE_ALPHA_TO_COVERAGE):it(r.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(te){O!==te&&(te?r.frontFace(r.CW):r.frontFace(r.CCW),O=te)}function xe(te){te!==O3?(Re(r.CULL_FACE),te!==W&&(te===pM?r.cullFace(r.BACK):te===I3?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):it(r.CULL_FACE),W=te}function Y(te){te!==J&&(Z&&r.lineWidth(te),J=te)}function dt(te,et,Ye){te?(Re(r.POLYGON_OFFSET_FILL),(K!==et||ce!==Ye)&&(r.polygonOffset(et,Ye),K=et,ce=Ye)):it(r.POLYGON_OFFSET_FILL)}function Ee(te){te?Re(r.SCISSOR_TEST):it(r.SCISSOR_TEST)}function Ct(te){te===void 0&&(te=r.TEXTURE0+le-1),Ie!==te&&(r.activeTexture(te),Ie=te)}function $e(te,et,Ye){Ye===void 0&&(Ie===null?Ye=r.TEXTURE0+le-1:Ye=Ie);let ct=Pe[Ye];ct===void 0&&(ct={type:void 0,texture:void 0},Pe[Ye]=ct),(ct.type!==te||ct.texture!==et)&&(Ie!==Ye&&(r.activeTexture(Ye),Ie=Ye),r.bindTexture(te,et||me[te]),ct.type=te,ct.texture=et)}function q(){const te=Pe[Ie];te!==void 0&&te.type!==void 0&&(r.bindTexture(te.type,null),te.type=void 0,te.texture=void 0)}function F(){try{r.compressedTexImage2D(...arguments)}catch(te){Ot("WebGLState:",te)}}function ae(){try{r.compressedTexImage3D(...arguments)}catch(te){Ot("WebGLState:",te)}}function Le(){try{r.texSubImage2D(...arguments)}catch(te){Ot("WebGLState:",te)}}function Fe(){try{r.texSubImage3D(...arguments)}catch(te){Ot("WebGLState:",te)}}function _e(){try{r.compressedTexSubImage2D(...arguments)}catch(te){Ot("WebGLState:",te)}}function st(){try{r.compressedTexSubImage3D(...arguments)}catch(te){Ot("WebGLState:",te)}}function He(){try{r.texStorage2D(...arguments)}catch(te){Ot("WebGLState:",te)}}function Ze(){try{r.texStorage3D(...arguments)}catch(te){Ot("WebGLState:",te)}}function Mt(){try{r.texImage2D(...arguments)}catch(te){Ot("WebGLState:",te)}}function qe(){try{r.texImage3D(...arguments)}catch(te){Ot("WebGLState:",te)}}function nt(te){Ce.equals(te)===!1&&(r.scissor(te.x,te.y,te.z,te.w),Ce.copy(te))}function pt(te){Ue.equals(te)===!1&&(r.viewport(te.x,te.y,te.z,te.w),Ue.copy(te))}function $(te,et){let Ye=p.get(et);Ye===void 0&&(Ye=new WeakMap,p.set(et,Ye));let ct=Ye.get(te);ct===void 0&&(ct=r.getUniformBlockIndex(et,te.name),Ye.set(te,ct))}function ve(te,et){const ct=p.get(et).get(te);d.get(et)!==ct&&(r.uniformBlockBinding(et,ct,te.__bindingPointIndex),d.set(et,ct))}function lt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),u.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),v={},Ie=null,Pe={},_={},y=new WeakMap,b=[],E=null,A=!1,w=null,M=null,D=null,R=null,N=null,P=null,z=null,B=new xt(0,0,0),k=0,I=!1,O=null,W=null,J=null,K=null,ce=null,Ce.set(0,0,r.canvas.width,r.canvas.height),Ue.set(0,0,r.canvas.width,r.canvas.height),a.reset(),u.reset(),f.reset()}return{buffers:{color:a,depth:u,stencil:f},enable:Re,disable:it,bindFramebuffer:ee,drawBuffers:ft,useProgram:yt,setBlending:ge,setMaterial:We,setFlipSided:Ae,setCullFace:xe,setLineWidth:Y,setPolygonOffset:dt,setScissorTest:Ee,activeTexture:Ct,bindTexture:$e,unbindTexture:q,compressedTexImage2D:F,compressedTexImage3D:ae,texImage2D:Mt,texImage3D:qe,updateUBOMapping:$,uniformBlockBinding:ve,texStorage2D:He,texStorage3D:Ze,texSubImage2D:Le,texSubImage3D:Fe,compressedTexSubImage2D:_e,compressedTexSubImage3D:st,scissor:nt,viewport:pt,reset:lt}}function Qk(r,e,t,n,i,a,u){const f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new ke,v=new WeakMap;let _;const y=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(q,F){return b?new OffscreenCanvas(q,F):S0("canvas")}function A(q,F,ae){let Le=1;const Fe=$e(q);if((Fe.width>ae||Fe.height>ae)&&(Le=ae/Math.max(Fe.width,Fe.height)),Le<1)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap||typeof VideoFrame<"u"&&q instanceof VideoFrame){const _e=Math.floor(Le*Fe.width),st=Math.floor(Le*Fe.height);_===void 0&&(_=E(_e,st));const He=F?E(_e,st):_;return He.width=_e,He.height=st,He.getContext("2d").drawImage(q,0,0,_e,st),gt("WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+_e+"x"+st+")."),He}else return"data"in q&&gt("WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),q;return q}function w(q){return q.generateMipmaps}function M(q){r.generateMipmap(q)}function D(q){return q.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:q.isWebGL3DRenderTarget?r.TEXTURE_3D:q.isWebGLArrayRenderTarget||q.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function R(q,F,ae,Le,Fe=!1){if(q!==null){if(r[q]!==void 0)return r[q];gt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let _e=F;if(F===r.RED&&(ae===r.FLOAT&&(_e=r.R32F),ae===r.HALF_FLOAT&&(_e=r.R16F),ae===r.UNSIGNED_BYTE&&(_e=r.R8)),F===r.RED_INTEGER&&(ae===r.UNSIGNED_BYTE&&(_e=r.R8UI),ae===r.UNSIGNED_SHORT&&(_e=r.R16UI),ae===r.UNSIGNED_INT&&(_e=r.R32UI),ae===r.BYTE&&(_e=r.R8I),ae===r.SHORT&&(_e=r.R16I),ae===r.INT&&(_e=r.R32I)),F===r.RG&&(ae===r.FLOAT&&(_e=r.RG32F),ae===r.HALF_FLOAT&&(_e=r.RG16F),ae===r.UNSIGNED_BYTE&&(_e=r.RG8)),F===r.RG_INTEGER&&(ae===r.UNSIGNED_BYTE&&(_e=r.RG8UI),ae===r.UNSIGNED_SHORT&&(_e=r.RG16UI),ae===r.UNSIGNED_INT&&(_e=r.RG32UI),ae===r.BYTE&&(_e=r.RG8I),ae===r.SHORT&&(_e=r.RG16I),ae===r.INT&&(_e=r.RG32I)),F===r.RGB_INTEGER&&(ae===r.UNSIGNED_BYTE&&(_e=r.RGB8UI),ae===r.UNSIGNED_SHORT&&(_e=r.RGB16UI),ae===r.UNSIGNED_INT&&(_e=r.RGB32UI),ae===r.BYTE&&(_e=r.RGB8I),ae===r.SHORT&&(_e=r.RGB16I),ae===r.INT&&(_e=r.RGB32I)),F===r.RGBA_INTEGER&&(ae===r.UNSIGNED_BYTE&&(_e=r.RGBA8UI),ae===r.UNSIGNED_SHORT&&(_e=r.RGBA16UI),ae===r.UNSIGNED_INT&&(_e=r.RGBA32UI),ae===r.BYTE&&(_e=r.RGBA8I),ae===r.SHORT&&(_e=r.RGBA16I),ae===r.INT&&(_e=r.RGBA32I)),F===r.RGB&&(ae===r.UNSIGNED_INT_5_9_9_9_REV&&(_e=r.RGB9_E5),ae===r.UNSIGNED_INT_10F_11F_11F_REV&&(_e=r.R11F_G11F_B10F)),F===r.RGBA){const st=Fe?x0:Mn.getTransfer(Le);ae===r.FLOAT&&(_e=r.RGBA32F),ae===r.HALF_FLOAT&&(_e=r.RGBA16F),ae===r.UNSIGNED_BYTE&&(_e=st===kn?r.SRGB8_ALPHA8:r.RGBA8),ae===r.UNSIGNED_SHORT_4_4_4_4&&(_e=r.RGBA4),ae===r.UNSIGNED_SHORT_5_5_5_1&&(_e=r.RGB5_A1)}return(_e===r.R16F||_e===r.R32F||_e===r.RG16F||_e===r.RG32F||_e===r.RGBA16F||_e===r.RGBA32F)&&e.get("EXT_color_buffer_float"),_e}function N(q,F){let ae;return q?F===null||F===no||F===Rp?ae=r.DEPTH24_STENCIL8:F===Ts?ae=r.DEPTH32F_STENCIL8:F===Cp&&(ae=r.DEPTH24_STENCIL8,gt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===no||F===Rp?ae=r.DEPTH_COMPONENT24:F===Ts?ae=r.DEPTH_COMPONENT32F:F===Cp&&(ae=r.DEPTH_COMPONENT16),ae}function P(q,F){return w(q)===!0||q.isFramebufferTexture&&q.minFilter!==Ki&&q.minFilter!==hi?Math.log2(Math.max(F.width,F.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?F.mipmaps.length:1}function z(q){const F=q.target;F.removeEventListener("dispose",z),k(F),F.isVideoTexture&&v.delete(F)}function B(q){const F=q.target;F.removeEventListener("dispose",B),O(F)}function k(q){const F=n.get(q);if(F.__webglInit===void 0)return;const ae=q.source,Le=y.get(ae);if(Le){const Fe=Le[F.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&I(q),Object.keys(Le).length===0&&y.delete(ae)}n.remove(q)}function I(q){const F=n.get(q);r.deleteTexture(F.__webglTexture);const ae=q.source,Le=y.get(ae);delete Le[F.__cacheKey],u.memory.textures--}function O(q){const F=n.get(q);if(q.depthTexture&&(q.depthTexture.dispose(),n.remove(q.depthTexture)),q.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++){if(Array.isArray(F.__webglFramebuffer[Le]))for(let Fe=0;Fe<F.__webglFramebuffer[Le].length;Fe++)r.deleteFramebuffer(F.__webglFramebuffer[Le][Fe]);else r.deleteFramebuffer(F.__webglFramebuffer[Le]);F.__webglDepthbuffer&&r.deleteRenderbuffer(F.__webglDepthbuffer[Le])}else{if(Array.isArray(F.__webglFramebuffer))for(let Le=0;Le<F.__webglFramebuffer.length;Le++)r.deleteFramebuffer(F.__webglFramebuffer[Le]);else r.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&r.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&r.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let Le=0;Le<F.__webglColorRenderbuffer.length;Le++)F.__webglColorRenderbuffer[Le]&&r.deleteRenderbuffer(F.__webglColorRenderbuffer[Le]);F.__webglDepthRenderbuffer&&r.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const ae=q.textures;for(let Le=0,Fe=ae.length;Le<Fe;Le++){const _e=n.get(ae[Le]);_e.__webglTexture&&(r.deleteTexture(_e.__webglTexture),u.memory.textures--),n.remove(ae[Le])}n.remove(q)}let W=0;function J(){W=0}function K(){const q=W;return q>=i.maxTextures&&gt("WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+i.maxTextures),W+=1,q}function ce(q){const F=[];return F.push(q.wrapS),F.push(q.wrapT),F.push(q.wrapR||0),F.push(q.magFilter),F.push(q.minFilter),F.push(q.anisotropy),F.push(q.internalFormat),F.push(q.format),F.push(q.type),F.push(q.generateMipmaps),F.push(q.premultiplyAlpha),F.push(q.flipY),F.push(q.unpackAlignment),F.push(q.colorSpace),F.join()}function le(q,F){const ae=n.get(q);if(q.isVideoTexture&&Ee(q),q.isRenderTargetTexture===!1&&q.isExternalTexture!==!0&&q.version>0&&ae.__version!==q.version){const Le=q.image;if(Le===null)gt("WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)gt("WebGLRenderer: Texture marked for update but image is incomplete");else{me(ae,q,F);return}}else q.isExternalTexture&&(ae.__webglTexture=q.sourceTexture?q.sourceTexture:null);t.bindTexture(r.TEXTURE_2D,ae.__webglTexture,r.TEXTURE0+F)}function Z(q,F){const ae=n.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ae.__version!==q.version){me(ae,q,F);return}else q.isExternalTexture&&(ae.__webglTexture=q.sourceTexture?q.sourceTexture:null);t.bindTexture(r.TEXTURE_2D_ARRAY,ae.__webglTexture,r.TEXTURE0+F)}function Q(q,F){const ae=n.get(q);if(q.isRenderTargetTexture===!1&&q.version>0&&ae.__version!==q.version){me(ae,q,F);return}t.bindTexture(r.TEXTURE_3D,ae.__webglTexture,r.TEXTURE0+F)}function fe(q,F){const ae=n.get(q);if(q.isCubeDepthTexture!==!0&&q.version>0&&ae.__version!==q.version){Re(ae,q,F);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ae.__webglTexture,r.TEXTURE0+F)}const Ie={[g0]:r.REPEAT,[Qs]:r.CLAMP_TO_EDGE,[v0]:r.MIRRORED_REPEAT},Pe={[Ki]:r.NEAREST,[EE]:r.NEAREST_MIPMAP_NEAREST,[_p]:r.NEAREST_MIPMAP_LINEAR,[hi]:r.LINEAR,[Jg]:r.LINEAR_MIPMAP_NEAREST,[Ml]:r.LINEAR_MIPMAP_LINEAR},X={[lR]:r.NEVER,[dR]:r.ALWAYS,[uR]:r.LESS,[Tb]:r.LEQUAL,[cR]:r.EQUAL,[Ab]:r.GEQUAL,[fR]:r.GREATER,[hR]:r.NOTEQUAL};function oe(q,F){if(F.type===Ts&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===hi||F.magFilter===Jg||F.magFilter===_p||F.magFilter===Ml||F.minFilter===hi||F.minFilter===Jg||F.minFilter===_p||F.minFilter===Ml)&&gt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(q,r.TEXTURE_WRAP_S,Ie[F.wrapS]),r.texParameteri(q,r.TEXTURE_WRAP_T,Ie[F.wrapT]),(q===r.TEXTURE_3D||q===r.TEXTURE_2D_ARRAY)&&r.texParameteri(q,r.TEXTURE_WRAP_R,Ie[F.wrapR]),r.texParameteri(q,r.TEXTURE_MAG_FILTER,Pe[F.magFilter]),r.texParameteri(q,r.TEXTURE_MIN_FILTER,Pe[F.minFilter]),F.compareFunction&&(r.texParameteri(q,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(q,r.TEXTURE_COMPARE_FUNC,X[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===Ki||F.minFilter!==_p&&F.minFilter!==Ml||F.type===Ts&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||n.get(F).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");r.texParameterf(q,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),n.get(F).__currentAnisotropy=F.anisotropy}}}function Ce(q,F){let ae=!1;q.__webglInit===void 0&&(q.__webglInit=!0,F.addEventListener("dispose",z));const Le=F.source;let Fe=y.get(Le);Fe===void 0&&(Fe={},y.set(Le,Fe));const _e=ce(F);if(_e!==q.__cacheKey){Fe[_e]===void 0&&(Fe[_e]={texture:r.createTexture(),usedTimes:0},u.memory.textures++,ae=!0),Fe[_e].usedTimes++;const st=Fe[q.__cacheKey];st!==void 0&&(Fe[q.__cacheKey].usedTimes--,st.usedTimes===0&&I(F)),q.__cacheKey=_e,q.__webglTexture=Fe[_e].texture}return ae}function Ue(q,F,ae){return Math.floor(Math.floor(q/ae)/F)}function rt(q,F,ae,Le){const _e=q.updateRanges;if(_e.length===0)t.texSubImage2D(r.TEXTURE_2D,0,0,0,F.width,F.height,ae,Le,F.data);else{_e.sort((qe,nt)=>qe.start-nt.start);let st=0;for(let qe=1;qe<_e.length;qe++){const nt=_e[st],pt=_e[qe],$=nt.start+nt.count,ve=Ue(pt.start,F.width,4),lt=Ue(nt.start,F.width,4);pt.start<=$+1&&ve===lt&&Ue(pt.start+pt.count-1,F.width,4)===ve?nt.count=Math.max(nt.count,pt.start+pt.count-nt.start):(++st,_e[st]=pt)}_e.length=st+1;const He=r.getParameter(r.UNPACK_ROW_LENGTH),Ze=r.getParameter(r.UNPACK_SKIP_PIXELS),Mt=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,F.width);for(let qe=0,nt=_e.length;qe<nt;qe++){const pt=_e[qe],$=Math.floor(pt.start/4),ve=Math.ceil(pt.count/4),lt=$%F.width,te=Math.floor($/F.width),et=ve,Ye=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,lt),r.pixelStorei(r.UNPACK_SKIP_ROWS,te),t.texSubImage2D(r.TEXTURE_2D,0,lt,te,et,Ye,ae,Le,F.data)}q.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,He),r.pixelStorei(r.UNPACK_SKIP_PIXELS,Ze),r.pixelStorei(r.UNPACK_SKIP_ROWS,Mt)}}function me(q,F,ae){let Le=r.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Le=r.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Le=r.TEXTURE_3D);const Fe=Ce(q,F),_e=F.source;t.bindTexture(Le,q.__webglTexture,r.TEXTURE0+ae);const st=n.get(_e);if(_e.version!==st.__version||Fe===!0){t.activeTexture(r.TEXTURE0+ae);const He=Mn.getPrimaries(Mn.workingColorSpace),Ze=F.colorSpace===Cu?null:Mn.getPrimaries(F.colorSpace),Mt=F.colorSpace===Cu||He===Ze?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,F.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,F.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);let qe=A(F.image,!1,i.maxTextureSize);qe=Ct(F,qe);const nt=a.convert(F.format,F.colorSpace),pt=a.convert(F.type);let $=R(F.internalFormat,nt,pt,F.colorSpace,F.isVideoTexture);oe(Le,F);let ve;const lt=F.mipmaps,te=F.isVideoTexture!==!0,et=st.__version===void 0||Fe===!0,Ye=_e.dataReady,ct=P(F,qe);if(F.isDepthTexture)$=N(F.format===zc,F.type),et&&(te?t.texStorage2D(r.TEXTURE_2D,1,$,qe.width,qe.height):t.texImage2D(r.TEXTURE_2D,0,$,qe.width,qe.height,0,nt,pt,null));else if(F.isDataTexture)if(lt.length>0){te&&et&&t.texStorage2D(r.TEXTURE_2D,ct,$,lt[0].width,lt[0].height);for(let je=0,Be=lt.length;je<Be;je++)ve=lt[je],te?Ye&&t.texSubImage2D(r.TEXTURE_2D,je,0,0,ve.width,ve.height,nt,pt,ve.data):t.texImage2D(r.TEXTURE_2D,je,$,ve.width,ve.height,0,nt,pt,ve.data);F.generateMipmaps=!1}else te?(et&&t.texStorage2D(r.TEXTURE_2D,ct,$,qe.width,qe.height),Ye&&rt(F,qe,nt,pt)):t.texImage2D(r.TEXTURE_2D,0,$,qe.width,qe.height,0,nt,pt,qe.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){te&&et&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ct,$,lt[0].width,lt[0].height,qe.depth);for(let je=0,Be=lt.length;je<Be;je++)if(ve=lt[je],F.format!==ts)if(nt!==null)if(te){if(Ye)if(F.layerUpdates.size>0){const tt=CM(ve.width,ve.height,F.format,F.type);for(const Lt of F.layerUpdates){const en=ve.data.subarray(Lt*tt/ve.data.BYTES_PER_ELEMENT,(Lt+1)*tt/ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,je,0,0,Lt,ve.width,ve.height,1,nt,en)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,je,0,0,0,ve.width,ve.height,qe.depth,nt,ve.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,je,$,ve.width,ve.height,qe.depth,0,ve.data,0,0);else gt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else te?Ye&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,je,0,0,0,ve.width,ve.height,qe.depth,nt,pt,ve.data):t.texImage3D(r.TEXTURE_2D_ARRAY,je,$,ve.width,ve.height,qe.depth,0,nt,pt,ve.data)}else{te&&et&&t.texStorage2D(r.TEXTURE_2D,ct,$,lt[0].width,lt[0].height);for(let je=0,Be=lt.length;je<Be;je++)ve=lt[je],F.format!==ts?nt!==null?te?Ye&&t.compressedTexSubImage2D(r.TEXTURE_2D,je,0,0,ve.width,ve.height,nt,ve.data):t.compressedTexImage2D(r.TEXTURE_2D,je,$,ve.width,ve.height,0,ve.data):gt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):te?Ye&&t.texSubImage2D(r.TEXTURE_2D,je,0,0,ve.width,ve.height,nt,pt,ve.data):t.texImage2D(r.TEXTURE_2D,je,$,ve.width,ve.height,0,nt,pt,ve.data)}else if(F.isDataArrayTexture)if(te){if(et&&t.texStorage3D(r.TEXTURE_2D_ARRAY,ct,$,qe.width,qe.height,qe.depth),Ye)if(F.layerUpdates.size>0){const je=CM(qe.width,qe.height,F.format,F.type);for(const Be of F.layerUpdates){const tt=qe.data.subarray(Be*je/qe.data.BYTES_PER_ELEMENT,(Be+1)*je/qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Be,qe.width,qe.height,1,nt,pt,tt)}F.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,qe.width,qe.height,qe.depth,nt,pt,qe.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,$,qe.width,qe.height,qe.depth,0,nt,pt,qe.data);else if(F.isData3DTexture)te?(et&&t.texStorage3D(r.TEXTURE_3D,ct,$,qe.width,qe.height,qe.depth),Ye&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,qe.width,qe.height,qe.depth,nt,pt,qe.data)):t.texImage3D(r.TEXTURE_3D,0,$,qe.width,qe.height,qe.depth,0,nt,pt,qe.data);else if(F.isFramebufferTexture){if(et)if(te)t.texStorage2D(r.TEXTURE_2D,ct,$,qe.width,qe.height);else{let je=qe.width,Be=qe.height;for(let tt=0;tt<ct;tt++)t.texImage2D(r.TEXTURE_2D,tt,$,je,Be,0,nt,pt,null),je>>=1,Be>>=1}}else if(lt.length>0){if(te&&et){const je=$e(lt[0]);t.texStorage2D(r.TEXTURE_2D,ct,$,je.width,je.height)}for(let je=0,Be=lt.length;je<Be;je++)ve=lt[je],te?Ye&&t.texSubImage2D(r.TEXTURE_2D,je,0,0,nt,pt,ve):t.texImage2D(r.TEXTURE_2D,je,$,nt,pt,ve);F.generateMipmaps=!1}else if(te){if(et){const je=$e(qe);t.texStorage2D(r.TEXTURE_2D,ct,$,je.width,je.height)}Ye&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,nt,pt,qe)}else t.texImage2D(r.TEXTURE_2D,0,$,nt,pt,qe);w(F)&&M(Le),st.__version=_e.version,F.onUpdate&&F.onUpdate(F)}q.__version=F.version}function Re(q,F,ae){if(F.image.length!==6)return;const Le=Ce(q,F),Fe=F.source;t.bindTexture(r.TEXTURE_CUBE_MAP,q.__webglTexture,r.TEXTURE0+ae);const _e=n.get(Fe);if(Fe.version!==_e.__version||Le===!0){t.activeTexture(r.TEXTURE0+ae);const st=Mn.getPrimaries(Mn.workingColorSpace),He=F.colorSpace===Cu?null:Mn.getPrimaries(F.colorSpace),Ze=F.colorSpace===Cu||st===He?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,F.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,F.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ze);const Mt=F.isCompressedTexture||F.image[0].isCompressedTexture,qe=F.image[0]&&F.image[0].isDataTexture,nt=[];for(let Be=0;Be<6;Be++)!Mt&&!qe?nt[Be]=A(F.image[Be],!0,i.maxCubemapSize):nt[Be]=qe?F.image[Be].image:F.image[Be],nt[Be]=Ct(F,nt[Be]);const pt=nt[0],$=a.convert(F.format,F.colorSpace),ve=a.convert(F.type),lt=R(F.internalFormat,$,ve,F.colorSpace),te=F.isVideoTexture!==!0,et=_e.__version===void 0||Le===!0,Ye=Fe.dataReady;let ct=P(F,pt);oe(r.TEXTURE_CUBE_MAP,F);let je;if(Mt){te&&et&&t.texStorage2D(r.TEXTURE_CUBE_MAP,ct,lt,pt.width,pt.height);for(let Be=0;Be<6;Be++){je=nt[Be].mipmaps;for(let tt=0;tt<je.length;tt++){const Lt=je[tt];F.format!==ts?$!==null?te?Ye&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,0,0,Lt.width,Lt.height,$,Lt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,lt,Lt.width,Lt.height,0,Lt.data):gt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):te?Ye&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,0,0,Lt.width,Lt.height,$,ve,Lt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,lt,Lt.width,Lt.height,0,$,ve,Lt.data)}}}else{if(je=F.mipmaps,te&&et){je.length>0&&ct++;const Be=$e(nt[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,ct,lt,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(qe){te?Ye&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,nt[Be].width,nt[Be].height,$,ve,nt[Be].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,lt,nt[Be].width,nt[Be].height,0,$,ve,nt[Be].data);for(let tt=0;tt<je.length;tt++){const en=je[tt].image[Be].image;te?Ye&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,0,0,en.width,en.height,$,ve,en.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,lt,en.width,en.height,0,$,ve,en.data)}}else{te?Ye&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,$,ve,nt[Be]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,lt,$,ve,nt[Be]);for(let tt=0;tt<je.length;tt++){const Lt=je[tt];te?Ye&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,0,0,$,ve,Lt.image[Be]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,lt,$,ve,Lt.image[Be])}}}w(F)&&M(r.TEXTURE_CUBE_MAP),_e.__version=Fe.version,F.onUpdate&&F.onUpdate(F)}q.__version=F.version}function it(q,F,ae,Le,Fe,_e){const st=a.convert(ae.format,ae.colorSpace),He=a.convert(ae.type),Ze=R(ae.internalFormat,st,He,ae.colorSpace),Mt=n.get(F),qe=n.get(ae);if(qe.__renderTarget=F,!Mt.__hasExternalTextures){const nt=Math.max(1,F.width>>_e),pt=Math.max(1,F.height>>_e);Fe===r.TEXTURE_3D||Fe===r.TEXTURE_2D_ARRAY?t.texImage3D(Fe,_e,Ze,nt,pt,F.depth,0,st,He,null):t.texImage2D(Fe,_e,Ze,nt,pt,0,st,He,null)}t.bindFramebuffer(r.FRAMEBUFFER,q),dt(F)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Le,Fe,qe.__webglTexture,0,Y(F)):(Fe===r.TEXTURE_2D||Fe>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Le,Fe,qe.__webglTexture,_e),t.bindFramebuffer(r.FRAMEBUFFER,null)}function ee(q,F,ae){if(r.bindRenderbuffer(r.RENDERBUFFER,q),F.depthBuffer){const Le=F.depthTexture,Fe=Le&&Le.isDepthTexture?Le.type:null,_e=N(F.stencilBuffer,Fe),st=F.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;dt(F)?f.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Y(F),_e,F.width,F.height):ae?r.renderbufferStorageMultisample(r.RENDERBUFFER,Y(F),_e,F.width,F.height):r.renderbufferStorage(r.RENDERBUFFER,_e,F.width,F.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,st,r.RENDERBUFFER,q)}else{const Le=F.textures;for(let Fe=0;Fe<Le.length;Fe++){const _e=Le[Fe],st=a.convert(_e.format,_e.colorSpace),He=a.convert(_e.type),Ze=R(_e.internalFormat,st,He,_e.colorSpace);dt(F)?f.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Y(F),Ze,F.width,F.height):ae?r.renderbufferStorageMultisample(r.RENDERBUFFER,Y(F),Ze,F.width,F.height):r.renderbufferStorage(r.RENDERBUFFER,Ze,F.width,F.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ft(q,F,ae){const Le=F.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(r.FRAMEBUFFER,q),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Fe=n.get(F.depthTexture);if(Fe.__renderTarget=F,(!Fe.__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),Le){if(Fe.__webglInit===void 0&&(Fe.__webglInit=!0,F.depthTexture.addEventListener("dispose",z)),Fe.__webglTexture===void 0){Fe.__webglTexture=r.createTexture(),t.bindTexture(r.TEXTURE_CUBE_MAP,Fe.__webglTexture),oe(r.TEXTURE_CUBE_MAP,F.depthTexture);const Mt=a.convert(F.depthTexture.format),qe=a.convert(F.depthTexture.type);let nt;F.depthTexture.format===Nl?nt=r.DEPTH_COMPONENT24:F.depthTexture.format===zc&&(nt=r.DEPTH24_STENCIL8);for(let pt=0;pt<6;pt++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,nt,F.width,F.height,0,Mt,qe,null)}}else le(F.depthTexture,0);const _e=Fe.__webglTexture,st=Y(F),He=Le?r.TEXTURE_CUBE_MAP_POSITIVE_X+ae:r.TEXTURE_2D,Ze=F.depthTexture.format===zc?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;if(F.depthTexture.format===Nl)dt(F)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ze,He,_e,0,st):r.framebufferTexture2D(r.FRAMEBUFFER,Ze,He,_e,0);else if(F.depthTexture.format===zc)dt(F)?f.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ze,He,_e,0,st):r.framebufferTexture2D(r.FRAMEBUFFER,Ze,He,_e,0);else throw new Error("Unknown depthTexture format")}function yt(q){const F=n.get(q),ae=q.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==q.depthTexture){const Le=q.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),Le){const Fe=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,Le.removeEventListener("dispose",Fe)};Le.addEventListener("dispose",Fe),F.__depthDisposeCallback=Fe}F.__boundDepthTexture=Le}if(q.depthTexture&&!F.__autoAllocateDepthBuffer)if(ae)for(let Le=0;Le<6;Le++)ft(F.__webglFramebuffer[Le],q,Le);else{const Le=q.texture.mipmaps;Le&&Le.length>0?ft(F.__webglFramebuffer[0],q,0):ft(F.__webglFramebuffer,q,0)}else if(ae){F.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)if(t.bindFramebuffer(r.FRAMEBUFFER,F.__webglFramebuffer[Le]),F.__webglDepthbuffer[Le]===void 0)F.__webglDepthbuffer[Le]=r.createRenderbuffer(),ee(F.__webglDepthbuffer[Le],q,!1);else{const Fe=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,_e=F.__webglDepthbuffer[Le];r.bindRenderbuffer(r.RENDERBUFFER,_e),r.framebufferRenderbuffer(r.FRAMEBUFFER,Fe,r.RENDERBUFFER,_e)}}else{const Le=q.texture.mipmaps;if(Le&&Le.length>0?t.bindFramebuffer(r.FRAMEBUFFER,F.__webglFramebuffer[0]):t.bindFramebuffer(r.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=r.createRenderbuffer(),ee(F.__webglDepthbuffer,q,!1);else{const Fe=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,_e=F.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,_e),r.framebufferRenderbuffer(r.FRAMEBUFFER,Fe,r.RENDERBUFFER,_e)}}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Yt(q,F,ae){const Le=n.get(q);F!==void 0&&it(Le.__webglFramebuffer,q,q.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ae!==void 0&&yt(q)}function Et(q){const F=q.texture,ae=n.get(q),Le=n.get(F);q.addEventListener("dispose",B);const Fe=q.textures,_e=q.isWebGLCubeRenderTarget===!0,st=Fe.length>1;if(st||(Le.__webglTexture===void 0&&(Le.__webglTexture=r.createTexture()),Le.__version=F.version,u.memory.textures++),_e){ae.__webglFramebuffer=[];for(let He=0;He<6;He++)if(F.mipmaps&&F.mipmaps.length>0){ae.__webglFramebuffer[He]=[];for(let Ze=0;Ze<F.mipmaps.length;Ze++)ae.__webglFramebuffer[He][Ze]=r.createFramebuffer()}else ae.__webglFramebuffer[He]=r.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){ae.__webglFramebuffer=[];for(let He=0;He<F.mipmaps.length;He++)ae.__webglFramebuffer[He]=r.createFramebuffer()}else ae.__webglFramebuffer=r.createFramebuffer();if(st)for(let He=0,Ze=Fe.length;He<Ze;He++){const Mt=n.get(Fe[He]);Mt.__webglTexture===void 0&&(Mt.__webglTexture=r.createTexture(),u.memory.textures++)}if(q.samples>0&&dt(q)===!1){ae.__webglMultisampledFramebuffer=r.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let He=0;He<Fe.length;He++){const Ze=Fe[He];ae.__webglColorRenderbuffer[He]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ae.__webglColorRenderbuffer[He]);const Mt=a.convert(Ze.format,Ze.colorSpace),qe=a.convert(Ze.type),nt=R(Ze.internalFormat,Mt,qe,Ze.colorSpace,q.isXRRenderTarget===!0),pt=Y(q);r.renderbufferStorageMultisample(r.RENDERBUFFER,pt,nt,q.width,q.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+He,r.RENDERBUFFER,ae.__webglColorRenderbuffer[He])}r.bindRenderbuffer(r.RENDERBUFFER,null),q.depthBuffer&&(ae.__webglDepthRenderbuffer=r.createRenderbuffer(),ee(ae.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(_e){t.bindTexture(r.TEXTURE_CUBE_MAP,Le.__webglTexture),oe(r.TEXTURE_CUBE_MAP,F);for(let He=0;He<6;He++)if(F.mipmaps&&F.mipmaps.length>0)for(let Ze=0;Ze<F.mipmaps.length;Ze++)it(ae.__webglFramebuffer[He][Ze],q,F,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+He,Ze);else it(ae.__webglFramebuffer[He],q,F,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);w(F)&&M(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(st){for(let He=0,Ze=Fe.length;He<Ze;He++){const Mt=Fe[He],qe=n.get(Mt);let nt=r.TEXTURE_2D;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(nt=q.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(nt,qe.__webglTexture),oe(nt,Mt),it(ae.__webglFramebuffer,q,Mt,r.COLOR_ATTACHMENT0+He,nt,0),w(Mt)&&M(nt)}t.unbindTexture()}else{let He=r.TEXTURE_2D;if((q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(He=q.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(He,Le.__webglTexture),oe(He,F),F.mipmaps&&F.mipmaps.length>0)for(let Ze=0;Ze<F.mipmaps.length;Ze++)it(ae.__webglFramebuffer[Ze],q,F,r.COLOR_ATTACHMENT0,He,Ze);else it(ae.__webglFramebuffer,q,F,r.COLOR_ATTACHMENT0,He,0);w(F)&&M(He),t.unbindTexture()}q.depthBuffer&&yt(q)}function ge(q){const F=q.textures;for(let ae=0,Le=F.length;ae<Le;ae++){const Fe=F[ae];if(w(Fe)){const _e=D(q),st=n.get(Fe).__webglTexture;t.bindTexture(_e,st),M(_e),t.unbindTexture()}}}const We=[],Ae=[];function xe(q){if(q.samples>0){if(dt(q)===!1){const F=q.textures,ae=q.width,Le=q.height;let Fe=r.COLOR_BUFFER_BIT;const _e=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,st=n.get(q),He=F.length>1;if(He)for(let Mt=0;Mt<F.length;Mt++)t.bindFramebuffer(r.FRAMEBUFFER,st.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Mt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,st.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Mt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer);const Ze=q.texture.mipmaps;Ze&&Ze.length>0?t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglFramebuffer[0]):t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let Mt=0;Mt<F.length;Mt++){if(q.resolveDepthBuffer&&(q.depthBuffer&&(Fe|=r.DEPTH_BUFFER_BIT),q.stencilBuffer&&q.resolveStencilBuffer&&(Fe|=r.STENCIL_BUFFER_BIT)),He){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,st.__webglColorRenderbuffer[Mt]);const qe=n.get(F[Mt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,qe,0)}r.blitFramebuffer(0,0,ae,Le,0,0,ae,Le,Fe,r.NEAREST),d===!0&&(We.length=0,Ae.length=0,We.push(r.COLOR_ATTACHMENT0+Mt),q.depthBuffer&&q.resolveDepthBuffer===!1&&(We.push(_e),Ae.push(_e),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Ae)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,We))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),He)for(let Mt=0;Mt<F.length;Mt++){t.bindFramebuffer(r.FRAMEBUFFER,st.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Mt,r.RENDERBUFFER,st.__webglColorRenderbuffer[Mt]);const qe=n.get(F[Mt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,st.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Mt,r.TEXTURE_2D,qe,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(q.depthBuffer&&q.resolveDepthBuffer===!1&&d){const F=q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[F])}}}function Y(q){return Math.min(i.maxSamples,q.samples)}function dt(q){const F=n.get(q);return q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Ee(q){const F=u.render.frame;v.get(q)!==F&&(v.set(q,F),q.update())}function Ct(q,F){const ae=q.colorSpace,Le=q.format,Fe=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||ae!==qc&&ae!==Cu&&(Mn.getTransfer(ae)===kn?(Le!==ts||Fe!==Ss)&&gt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ot("WebGLTextures: Unsupported texture color space:",ae)),F}function $e(q){return typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement?(p.width=q.naturalWidth||q.width,p.height=q.naturalHeight||q.height):typeof VideoFrame<"u"&&q instanceof VideoFrame?(p.width=q.displayWidth,p.height=q.displayHeight):(p.width=q.width,p.height=q.height),p}this.allocateTextureUnit=K,this.resetTextureUnits=J,this.setTexture2D=le,this.setTexture2DArray=Z,this.setTexture3D=Q,this.setTextureCube=fe,this.rebindTextures=Yt,this.setupRenderTarget=Et,this.updateRenderTargetMipmap=ge,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=yt,this.setupFrameBufferTexture=it,this.useMultisampledRTT=dt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function bD(r,e){function t(n,i=Cu){let a;const u=Mn.getTransfer(i);if(n===Ss)return r.UNSIGNED_BYTE;if(n===yb)return r.UNSIGNED_SHORT_4_4_4_4;if(n===xb)return r.UNSIGNED_SHORT_5_5_5_1;if(n===wE)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===CE)return r.UNSIGNED_INT_10F_11F_11F_REV;if(n===TE)return r.BYTE;if(n===AE)return r.SHORT;if(n===Cp)return r.UNSIGNED_SHORT;if(n===_b)return r.INT;if(n===no)return r.UNSIGNED_INT;if(n===Ts)return r.FLOAT;if(n===Ll)return r.HALF_FLOAT;if(n===RE)return r.ALPHA;if(n===DE)return r.RGB;if(n===ts)return r.RGBA;if(n===Nl)return r.DEPTH_COMPONENT;if(n===zc)return r.DEPTH_STENCIL;if(n===bb)return r.RED;if(n===Y0)return r.RED_INTEGER;if(n===Rh)return r.RG;if(n===Sb)return r.RG_INTEGER;if(n===Mb)return r.RGBA_INTEGER;if(n===$g||n===e0||n===t0||n===n0)if(u===kn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===$g)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===e0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===t0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===n0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===$g)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===e0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===t0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===n0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===px||n===mx||n===gx||n===vx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===px)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===mx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===gx)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===vx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===_x||n===yx||n===xx||n===bx||n===Sx||n===Mx||n===Ex)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===_x||n===yx)return u===kn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===xx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(n===bx)return a.COMPRESSED_R11_EAC;if(n===Sx)return a.COMPRESSED_SIGNED_R11_EAC;if(n===Mx)return a.COMPRESSED_RG11_EAC;if(n===Ex)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===Tx||n===Ax||n===wx||n===Cx||n===Rx||n===Dx||n===Lx||n===Nx||n===Ox||n===Ix||n===Px||n===Ux||n===zx||n===Fx)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===Tx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ax)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===wx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Cx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Rx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Dx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Lx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Nx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ox)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ix)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Px)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ux)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===zx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Fx)return u===kn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Bx||n===kx||n===Vx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===Bx)return u===kn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===kx)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Vx)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Hx||n===Gx||n===Wx||n===Xx)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===Hx)return a.COMPRESSED_RED_RGTC1_EXT;if(n===Gx)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Wx)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Xx)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Rp?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const Jk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,$k=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class e6{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new VE(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ma({vertexShader:Jk,fragmentShader:$k,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Qi(new Zp(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class t6 extends Pl{constructor(e,t){super();const n=this;let i=null,a=1,u=null,f="local-floor",d=1,p=null,v=null,_=null,y=null,b=null,E=null;const A=typeof XRWebGLBinding<"u",w=new e6,M={},D=t.getContextAttributes();let R=null,N=null;const P=[],z=[],B=new ke;let k=null;const I=new Zi;I.viewport=new Dn;const O=new Zi;O.viewport=new Dn;const W=[I,O],J=new uD;let K=null,ce=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(me){let Re=P[me];return Re===void 0&&(Re=new Xy,P[me]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(me){let Re=P[me];return Re===void 0&&(Re=new Xy,P[me]=Re),Re.getGripSpace()},this.getHand=function(me){let Re=P[me];return Re===void 0&&(Re=new Xy,P[me]=Re),Re.getHandSpace()};function le(me){const Re=z.indexOf(me.inputSource);if(Re===-1)return;const it=P[Re];it!==void 0&&(it.update(me.inputSource,me.frame,p||u),it.dispatchEvent({type:me.type,data:me.inputSource}))}function Z(){i.removeEventListener("select",le),i.removeEventListener("selectstart",le),i.removeEventListener("selectend",le),i.removeEventListener("squeeze",le),i.removeEventListener("squeezestart",le),i.removeEventListener("squeezeend",le),i.removeEventListener("end",Z),i.removeEventListener("inputsourceschange",Q);for(let me=0;me<P.length;me++){const Re=z[me];Re!==null&&(z[me]=null,P[me].disconnect(Re))}K=null,ce=null,w.reset();for(const me in M)delete M[me];e.setRenderTarget(R),b=null,y=null,_=null,i=null,N=null,rt.stop(),n.isPresenting=!1,e.setPixelRatio(k),e.setSize(B.width,B.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(me){a=me,n.isPresenting===!0&&gt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(me){f=me,n.isPresenting===!0&&gt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(me){p=me},this.getBaseLayer=function(){return y!==null?y:b},this.getBinding=function(){return _===null&&A&&(_=new XRWebGLBinding(i,t)),_},this.getFrame=function(){return E},this.getSession=function(){return i},this.setSession=async function(me){if(i=me,i!==null){if(R=e.getRenderTarget(),i.addEventListener("select",le),i.addEventListener("selectstart",le),i.addEventListener("selectend",le),i.addEventListener("squeeze",le),i.addEventListener("squeezestart",le),i.addEventListener("squeezeend",le),i.addEventListener("end",Z),i.addEventListener("inputsourceschange",Q),D.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(B),A&&"createProjectionLayer"in XRWebGLBinding.prototype){let it=null,ee=null,ft=null;D.depth&&(ft=D.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,it=D.stencil?zc:Nl,ee=D.stencil?Rp:no);const yt={colorFormat:t.RGBA8,depthFormat:ft,scaleFactor:a};_=this.getBinding(),y=_.createProjectionLayer(yt),i.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),N=new xa(y.textureWidth,y.textureHeight,{format:ts,type:Ss,depthTexture:new Up(y.textureWidth,y.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,it),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const it={antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:a};b=new XRWebGLLayer(i,t,it),i.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),N=new xa(b.framebufferWidth,b.framebufferHeight,{format:ts,type:Ss,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}N.isXRRenderTarget=!0,this.setFoveation(d),p=null,u=await i.requestReferenceSpace(f),rt.setContext(i),rt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function Q(me){for(let Re=0;Re<me.removed.length;Re++){const it=me.removed[Re],ee=z.indexOf(it);ee>=0&&(z[ee]=null,P[ee].disconnect(it))}for(let Re=0;Re<me.added.length;Re++){const it=me.added[Re];let ee=z.indexOf(it);if(ee===-1){for(let yt=0;yt<P.length;yt++)if(yt>=z.length){z.push(it),ee=yt;break}else if(z[yt]===null){z[yt]=it,ee=yt;break}if(ee===-1)break}const ft=P[ee];ft&&ft.connect(it)}}const fe=new j,Ie=new j;function Pe(me,Re,it){fe.setFromMatrixPosition(Re.matrixWorld),Ie.setFromMatrixPosition(it.matrixWorld);const ee=fe.distanceTo(Ie),ft=Re.projectionMatrix.elements,yt=it.projectionMatrix.elements,Yt=ft[14]/(ft[10]-1),Et=ft[14]/(ft[10]+1),ge=(ft[9]+1)/ft[5],We=(ft[9]-1)/ft[5],Ae=(ft[8]-1)/ft[0],xe=(yt[8]+1)/yt[0],Y=Yt*Ae,dt=Yt*xe,Ee=ee/(-Ae+xe),Ct=Ee*-Ae;if(Re.matrixWorld.decompose(me.position,me.quaternion,me.scale),me.translateX(Ct),me.translateZ(Ee),me.matrixWorld.compose(me.position,me.quaternion,me.scale),me.matrixWorldInverse.copy(me.matrixWorld).invert(),ft[10]===-1)me.projectionMatrix.copy(Re.projectionMatrix),me.projectionMatrixInverse.copy(Re.projectionMatrixInverse);else{const $e=Yt+Ee,q=Et+Ee,F=Y-Ct,ae=dt+(ee-Ct),Le=ge*Et/q*$e,Fe=We*Et/q*$e;me.projectionMatrix.makePerspective(F,ae,Le,Fe,$e,q),me.projectionMatrixInverse.copy(me.projectionMatrix).invert()}}function X(me,Re){Re===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(Re.matrixWorld,me.matrix),me.matrixWorldInverse.copy(me.matrixWorld).invert()}this.updateCamera=function(me){if(i===null)return;let Re=me.near,it=me.far;w.texture!==null&&(w.depthNear>0&&(Re=w.depthNear),w.depthFar>0&&(it=w.depthFar)),J.near=O.near=I.near=Re,J.far=O.far=I.far=it,(K!==J.near||ce!==J.far)&&(i.updateRenderState({depthNear:J.near,depthFar:J.far}),K=J.near,ce=J.far),J.layers.mask=me.layers.mask|6,I.layers.mask=J.layers.mask&3,O.layers.mask=J.layers.mask&5;const ee=me.parent,ft=J.cameras;X(J,ee);for(let yt=0;yt<ft.length;yt++)X(ft[yt],ee);ft.length===2?Pe(J,I,O):J.projectionMatrix.copy(I.projectionMatrix),oe(me,J,ee)};function oe(me,Re,it){it===null?me.matrix.copy(Re.matrixWorld):(me.matrix.copy(it.matrixWorld),me.matrix.invert(),me.matrix.multiply(Re.matrixWorld)),me.matrix.decompose(me.position,me.quaternion,me.scale),me.updateMatrixWorld(!0),me.projectionMatrix.copy(Re.projectionMatrix),me.projectionMatrixInverse.copy(Re.projectionMatrixInverse),me.isPerspectiveCamera&&(me.fov=Np*2*Math.atan(1/me.projectionMatrix.elements[5]),me.zoom=1)}this.getCamera=function(){return J},this.getFoveation=function(){if(!(y===null&&b===null))return d},this.setFoveation=function(me){d=me,y!==null&&(y.fixedFoveation=me),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=me)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(J)},this.getCameraTexture=function(me){return M[me]};let Ce=null;function Ue(me,Re){if(v=Re.getViewerPose(p||u),E=Re,v!==null){const it=v.views;b!==null&&(e.setRenderTargetFramebuffer(N,b.framebuffer),e.setRenderTarget(N));let ee=!1;it.length!==J.cameras.length&&(J.cameras.length=0,ee=!0);for(let Et=0;Et<it.length;Et++){const ge=it[Et];let We=null;if(b!==null)We=b.getViewport(ge);else{const xe=_.getViewSubImage(y,ge);We=xe.viewport,Et===0&&(e.setRenderTargetTextures(N,xe.colorTexture,xe.depthStencilTexture),e.setRenderTarget(N))}let Ae=W[Et];Ae===void 0&&(Ae=new Zi,Ae.layers.enable(Et),Ae.viewport=new Dn,W[Et]=Ae),Ae.matrix.fromArray(ge.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(ge.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(We.x,We.y,We.width,We.height),Et===0&&(J.matrix.copy(Ae.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale)),ee===!0&&J.cameras.push(Ae)}const ft=i.enabledFeatures;if(ft&&ft.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&A){_=n.getBinding();const Et=_.getDepthInformation(it[0]);Et&&Et.isValid&&Et.texture&&w.init(Et,i.renderState)}if(ft&&ft.includes("camera-access")&&A){e.state.unbindTexture(),_=n.getBinding();for(let Et=0;Et<it.length;Et++){const ge=it[Et].camera;if(ge){let We=M[ge];We||(We=new VE,M[ge]=We);const Ae=_.getCameraImage(ge);We.sourceTexture=Ae}}}}for(let it=0;it<P.length;it++){const ee=z[it],ft=P[it];ee!==null&&ft!==void 0&&ft.update(ee,Re,p||u)}Ce&&Ce(me,Re),Re.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Re}),E=null}const rt=new gD;rt.setAnimationLoop(Ue),this.setAnimationLoop=function(me){Ce=me},this.dispose=function(){}}}const rh=new Sa,n6=new Xt;function i6(r,e){function t(w,M){w.matrixAutoUpdate===!0&&w.updateMatrix(),M.value.copy(w.matrix)}function n(w,M){M.color.getRGB(w.fogColor.value,xR(r)),M.isFog?(w.fogNear.value=M.near,w.fogFar.value=M.far):M.isFogExp2&&(w.fogDensity.value=M.density)}function i(w,M,D,R,N){M.isMeshBasicMaterial||M.isMeshLambertMaterial?a(w,M):M.isMeshToonMaterial?(a(w,M),_(w,M)):M.isMeshPhongMaterial?(a(w,M),v(w,M)):M.isMeshStandardMaterial?(a(w,M),y(w,M),M.isMeshPhysicalMaterial&&b(w,M,N)):M.isMeshMatcapMaterial?(a(w,M),E(w,M)):M.isMeshDepthMaterial?a(w,M):M.isMeshDistanceMaterial?(a(w,M),A(w,M)):M.isMeshNormalMaterial?a(w,M):M.isLineBasicMaterial?(u(w,M),M.isLineDashedMaterial&&f(w,M)):M.isPointsMaterial?d(w,M,D,R):M.isSpriteMaterial?p(w,M):M.isShadowMaterial?(w.color.value.copy(M.color),w.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function a(w,M){w.opacity.value=M.opacity,M.color&&w.diffuse.value.copy(M.color),M.emissive&&w.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(w.map.value=M.map,t(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.bumpMap&&(w.bumpMap.value=M.bumpMap,t(M.bumpMap,w.bumpMapTransform),w.bumpScale.value=M.bumpScale,M.side===As&&(w.bumpScale.value*=-1)),M.normalMap&&(w.normalMap.value=M.normalMap,t(M.normalMap,w.normalMapTransform),w.normalScale.value.copy(M.normalScale),M.side===As&&w.normalScale.value.negate()),M.displacementMap&&(w.displacementMap.value=M.displacementMap,t(M.displacementMap,w.displacementMapTransform),w.displacementScale.value=M.displacementScale,w.displacementBias.value=M.displacementBias),M.emissiveMap&&(w.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,w.emissiveMapTransform)),M.specularMap&&(w.specularMap.value=M.specularMap,t(M.specularMap,w.specularMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest);const D=e.get(M),R=D.envMap,N=D.envMapRotation;R&&(w.envMap.value=R,rh.copy(N),rh.x*=-1,rh.y*=-1,rh.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(rh.y*=-1,rh.z*=-1),w.envMapRotation.value.setFromMatrix4(n6.makeRotationFromEuler(rh)),w.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=M.reflectivity,w.ior.value=M.ior,w.refractionRatio.value=M.refractionRatio),M.lightMap&&(w.lightMap.value=M.lightMap,w.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,w.lightMapTransform)),M.aoMap&&(w.aoMap.value=M.aoMap,w.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,w.aoMapTransform))}function u(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,M.map&&(w.map.value=M.map,t(M.map,w.mapTransform))}function f(w,M){w.dashSize.value=M.dashSize,w.totalSize.value=M.dashSize+M.gapSize,w.scale.value=M.scale}function d(w,M,D,R){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.size.value=M.size*D,w.scale.value=R*.5,M.map&&(w.map.value=M.map,t(M.map,w.uvTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function p(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.rotation.value=M.rotation,M.map&&(w.map.value=M.map,t(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function v(w,M){w.specular.value.copy(M.specular),w.shininess.value=Math.max(M.shininess,1e-4)}function _(w,M){M.gradientMap&&(w.gradientMap.value=M.gradientMap)}function y(w,M){w.metalness.value=M.metalness,M.metalnessMap&&(w.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,w.metalnessMapTransform)),w.roughness.value=M.roughness,M.roughnessMap&&(w.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,w.roughnessMapTransform)),M.envMap&&(w.envMapIntensity.value=M.envMapIntensity)}function b(w,M,D){w.ior.value=M.ior,M.sheen>0&&(w.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),w.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(w.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,w.sheenColorMapTransform)),M.sheenRoughnessMap&&(w.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,w.sheenRoughnessMapTransform))),M.clearcoat>0&&(w.clearcoat.value=M.clearcoat,w.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(w.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,w.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(w.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===As&&w.clearcoatNormalScale.value.negate())),M.dispersion>0&&(w.dispersion.value=M.dispersion),M.iridescence>0&&(w.iridescence.value=M.iridescence,w.iridescenceIOR.value=M.iridescenceIOR,w.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(w.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,w.iridescenceMapTransform)),M.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),M.transmission>0&&(w.transmission.value=M.transmission,w.transmissionSamplerMap.value=D.texture,w.transmissionSamplerSize.value.set(D.width,D.height),M.transmissionMap&&(w.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,w.transmissionMapTransform)),w.thickness.value=M.thickness,M.thicknessMap&&(w.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=M.attenuationDistance,w.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(w.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(w.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=M.specularIntensity,w.specularColor.value.copy(M.specularColor),M.specularColorMap&&(w.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,w.specularColorMapTransform)),M.specularIntensityMap&&(w.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,w.specularIntensityMapTransform))}function E(w,M){M.matcap&&(w.matcap.value=M.matcap)}function A(w,M){const D=e.get(M).light;w.referencePosition.value.setFromMatrixPosition(D.matrixWorld),w.nearDistance.value=D.shadow.camera.near,w.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function r6(r,e,t,n){let i={},a={},u=[];const f=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function d(D,R){const N=R.program;n.uniformBlockBinding(D,N)}function p(D,R){let N=i[D.id];N===void 0&&(E(D),N=v(D),i[D.id]=N,D.addEventListener("dispose",w));const P=R.program;n.updateUBOMapping(D,P);const z=e.render.frame;a[D.id]!==z&&(y(D),a[D.id]=z)}function v(D){const R=_();D.__bindingPointIndex=R;const N=r.createBuffer(),P=D.__size,z=D.usage;return r.bindBuffer(r.UNIFORM_BUFFER,N),r.bufferData(r.UNIFORM_BUFFER,P,z),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,R,N),N}function _(){for(let D=0;D<f;D++)if(u.indexOf(D)===-1)return u.push(D),D;return Ot("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(D){const R=i[D.id],N=D.uniforms,P=D.__cache;r.bindBuffer(r.UNIFORM_BUFFER,R);for(let z=0,B=N.length;z<B;z++){const k=Array.isArray(N[z])?N[z]:[N[z]];for(let I=0,O=k.length;I<O;I++){const W=k[I];if(b(W,z,I,P)===!0){const J=W.__offset,K=Array.isArray(W.value)?W.value:[W.value];let ce=0;for(let le=0;le<K.length;le++){const Z=K[le],Q=A(Z);typeof Z=="number"||typeof Z=="boolean"?(W.__data[0]=Z,r.bufferSubData(r.UNIFORM_BUFFER,J+ce,W.__data)):Z.isMatrix3?(W.__data[0]=Z.elements[0],W.__data[1]=Z.elements[1],W.__data[2]=Z.elements[2],W.__data[3]=0,W.__data[4]=Z.elements[3],W.__data[5]=Z.elements[4],W.__data[6]=Z.elements[5],W.__data[7]=0,W.__data[8]=Z.elements[6],W.__data[9]=Z.elements[7],W.__data[10]=Z.elements[8],W.__data[11]=0):(Z.toArray(W.__data,ce),ce+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,J,W.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function b(D,R,N,P){const z=D.value,B=R+"_"+N;if(P[B]===void 0)return typeof z=="number"||typeof z=="boolean"?P[B]=z:P[B]=z.clone(),!0;{const k=P[B];if(typeof z=="number"||typeof z=="boolean"){if(k!==z)return P[B]=z,!0}else if(k.equals(z)===!1)return k.copy(z),!0}return!1}function E(D){const R=D.uniforms;let N=0;const P=16;for(let B=0,k=R.length;B<k;B++){const I=Array.isArray(R[B])?R[B]:[R[B]];for(let O=0,W=I.length;O<W;O++){const J=I[O],K=Array.isArray(J.value)?J.value:[J.value];for(let ce=0,le=K.length;ce<le;ce++){const Z=K[ce],Q=A(Z),fe=N%P,Ie=fe%Q.boundary,Pe=fe+Ie;N+=Ie,Pe!==0&&P-Pe<Q.storage&&(N+=P-Pe),J.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=N,N+=Q.storage}}}const z=N%P;return z>0&&(N+=P-z),D.__size=N,D.__cache={},this}function A(D){const R={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(R.boundary=4,R.storage=4):D.isVector2?(R.boundary=8,R.storage=8):D.isVector3||D.isColor?(R.boundary=16,R.storage=12):D.isVector4?(R.boundary=16,R.storage=16):D.isMatrix3?(R.boundary=48,R.storage=48):D.isMatrix4?(R.boundary=64,R.storage=64):D.isTexture?gt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):gt("WebGLRenderer: Unsupported uniform value type.",D),R}function w(D){const R=D.target;R.removeEventListener("dispose",w);const N=u.indexOf(R.__bindingPointIndex);u.splice(N,1),r.deleteBuffer(i[R.id]),delete i[R.id],delete a[R.id]}function M(){for(const D in i)r.deleteBuffer(i[D]);u=[],i={},a={}}return{bind:d,update:p,dispose:M}}const s6=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let vl=null;function a6(){return vl===null&&(vl=new Io(s6,16,16,Rh,Ll),vl.name="DFG_LUT",vl.minFilter=hi,vl.magFilter=hi,vl.wrapS=Qs,vl.wrapT=Qs,vl.generateMipmaps=!1,vl.needsUpdate=!0),vl}class SD{constructor(e={}){const{canvas:t=gR(),context:n=null,depth:i=!0,stencil:a=!1,alpha:u=!1,antialias:f=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:_=!1,reversedDepthBuffer:y=!1,outputBufferType:b=Ss}=e;this.isWebGLRenderer=!0;let E;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");E=n.getContextAttributes().alpha}else E=u;const A=b,w=new Set([Mb,Sb,Y0]),M=new Set([Ss,no,Cp,Rp,yb,xb]),D=new Uint32Array(4),R=new Int32Array(4);let N=null,P=null;const z=[],B=[];let k=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=to,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let O=!1;this._outputColorSpace=$r;let W=0,J=0,K=null,ce=-1,le=null;const Z=new Dn,Q=new Dn;let fe=null;const Ie=new xt(0);let Pe=0,X=t.width,oe=t.height,Ce=1,Ue=null,rt=null;const me=new Dn(0,0,X,oe),Re=new Dn(0,0,X,oe);let it=!1;const ee=new jp;let ft=!1,yt=!1;const Yt=new Xt,Et=new j,ge=new Dn,We={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function xe(){return K===null?Ce:1}let Y=n;function dt(H,ue){return t.getContext(H,ue)}try{const H={alpha:!0,depth:i,stencil:a,antialias:f,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:v,failIfMajorPerformanceCaveat:_};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${X0}`),t.addEventListener("webglcontextlost",Lt,!1),t.addEventListener("webglcontextrestored",en,!1),t.addEventListener("webglcontextcreationerror",rn,!1),Y===null){const ue="webgl2";if(Y=dt(ue,H),Y===null)throw dt(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw Ot("WebGLRenderer: "+H.message),H}let Ee,Ct,$e,q,F,ae,Le,Fe,_e,st,He,Ze,Mt,qe,nt,pt,$,ve,lt,te,et,Ye,ct,je;function Be(){Ee=new o5(Y),Ee.init(),Ye=new bD(Y,Ee),Ct=new JB(Y,Ee,e,Ye),$e=new Kk(Y,Ee),Ct.reversedDepthBuffer&&y&&$e.buffers.depth.setReversed(!0),q=new c5(Y),F=new Pk,ae=new Qk(Y,Ee,$e,F,Ct,Ye,q),Le=new e5(I),Fe=new a5(I),_e=new p4(Y),ct=new KB(Y,_e),st=new l5(Y,_e,q,ct),He=new h5(Y,st,_e,q),lt=new f5(Y,Ct,ae),pt=new $B(F),Ze=new Ik(I,Le,Fe,Ee,Ct,ct,pt),Mt=new i6(I,F),qe=new zk,nt=new Gk(Ee),ve=new ZB(I,Le,Fe,$e,He,E,d),$=new jk(I,He,Ct),je=new r6(Y,q,Ct,$e),te=new QB(Y,Ee,q),et=new u5(Y,Ee,q),q.programs=Ze.programs,I.capabilities=Ct,I.extensions=Ee,I.properties=F,I.renderLists=qe,I.shadowMap=$,I.state=$e,I.info=q}Be(),A!==Ss&&(k=new p5(A,t.width,t.height,i,a));const tt=new t6(I,Y);this.xr=tt,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const H=Ee.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=Ee.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return Ce},this.setPixelRatio=function(H){H!==void 0&&(Ce=H,this.setSize(X,oe,!1))},this.getSize=function(H){return H.set(X,oe)},this.setSize=function(H,ue,we=!0){if(tt.isPresenting){gt("WebGLRenderer: Can't change size while VR device is presenting.");return}X=H,oe=ue,t.width=Math.floor(H*Ce),t.height=Math.floor(ue*Ce),we===!0&&(t.style.width=H+"px",t.style.height=ue+"px"),k!==null&&k.setSize(t.width,t.height),this.setViewport(0,0,H,ue)},this.getDrawingBufferSize=function(H){return H.set(X*Ce,oe*Ce).floor()},this.setDrawingBufferSize=function(H,ue,we){X=H,oe=ue,Ce=we,t.width=Math.floor(H*we),t.height=Math.floor(ue*we),this.setViewport(0,0,H,ue)},this.setEffects=function(H){if(A===Ss){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(H){for(let ue=0;ue<H.length;ue++)if(H[ue].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}k.setEffects(H||[])},this.getCurrentViewport=function(H){return H.copy(Z)},this.getViewport=function(H){return H.copy(me)},this.setViewport=function(H,ue,we,Se){H.isVector4?me.set(H.x,H.y,H.z,H.w):me.set(H,ue,we,Se),$e.viewport(Z.copy(me).multiplyScalar(Ce).round())},this.getScissor=function(H){return H.copy(Re)},this.setScissor=function(H,ue,we,Se){H.isVector4?Re.set(H.x,H.y,H.z,H.w):Re.set(H,ue,we,Se),$e.scissor(Q.copy(Re).multiplyScalar(Ce).round())},this.getScissorTest=function(){return it},this.setScissorTest=function(H){$e.setScissorTest(it=H)},this.setOpaqueSort=function(H){Ue=H},this.setTransparentSort=function(H){rt=H},this.getClearColor=function(H){return H.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor(...arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha(...arguments)},this.clear=function(H=!0,ue=!0,we=!0){let Se=0;if(H){let de=!1;if(K!==null){const at=K.texture.format;de=w.has(at)}if(de){const at=K.texture.type,vt=M.has(at),Je=ve.getClearColor(),bt=ve.getClearAlpha(),Tt=Je.r,It=Je.g,At=Je.b;vt?(D[0]=Tt,D[1]=It,D[2]=At,D[3]=bt,Y.clearBufferuiv(Y.COLOR,0,D)):(R[0]=Tt,R[1]=It,R[2]=At,R[3]=bt,Y.clearBufferiv(Y.COLOR,0,R))}else Se|=Y.COLOR_BUFFER_BIT}ue&&(Se|=Y.DEPTH_BUFFER_BIT),we&&(Se|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Lt,!1),t.removeEventListener("webglcontextrestored",en,!1),t.removeEventListener("webglcontextcreationerror",rn,!1),ve.dispose(),qe.dispose(),nt.dispose(),F.dispose(),Le.dispose(),Fe.dispose(),He.dispose(),ct.dispose(),je.dispose(),Ze.dispose(),tt.dispose(),tt.removeEventListener("sessionstart",so),tt.removeEventListener("sessionend",Bl),vr.stop()};function Lt(H){H.preventDefault(),M0("WebGLRenderer: Context Lost."),O=!0}function en(){M0("WebGLRenderer: Context Restored."),O=!1;const H=q.autoReset,ue=$.enabled,we=$.autoUpdate,Se=$.needsUpdate,de=$.type;Be(),q.autoReset=H,$.enabled=ue,$.autoUpdate=we,$.needsUpdate=Se,$.type=de}function rn(H){Ot("WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function ii(H){const ue=H.target;ue.removeEventListener("dispose",ii),Bi(ue)}function Bi(H){Uo(H),F.remove(H)}function Uo(H){const ue=F.get(H).programs;ue!==void 0&&(ue.forEach(function(we){Ze.releaseProgram(we)}),H.isShaderMaterial&&Ze.releaseShaderCache(H))}this.renderBufferDirect=function(H,ue,we,Se,de,at){ue===null&&(ue=We);const vt=de.isMesh&&de.matrixWorld.determinant()<0,Je=ra(H,ue,we,Se,de);$e.setMaterial(Se,vt);let bt=we.index,Tt=1;if(Se.wireframe===!0){if(bt=st.getWireframeAttribute(we),bt===void 0)return;Tt=2}const It=we.drawRange,At=we.attributes.position;let Ft=It.start*Tt,En=(It.start+It.count)*Tt;at!==null&&(Ft=Math.max(Ft,at.start*Tt),En=Math.min(En,(at.start+at.count)*Tt)),bt!==null?(Ft=Math.max(Ft,0),En=Math.min(En,bt.count)):At!=null&&(Ft=Math.max(Ft,0),En=Math.min(En,At.count));const Vn=En-Ft;if(Vn<0||Vn===1/0)return;ct.setup(de,Se,Je,we,bt);let zn,jt=te;if(bt!==null&&(zn=_e.get(bt),jt=et,jt.setIndex(zn)),de.isMesh)Se.wireframe===!0?($e.setLineWidth(Se.wireframeLinewidth*xe()),jt.setMode(Y.LINES)):jt.setMode(Y.TRIANGLES);else if(de.isLine){let ht=Se.linewidth;ht===void 0&&(ht=1),$e.setLineWidth(ht*xe()),de.isLineSegments?jt.setMode(Y.LINES):de.isLineLoop?jt.setMode(Y.LINE_LOOP):jt.setMode(Y.LINE_STRIP)}else de.isPoints?jt.setMode(Y.POINTS):de.isSprite&&jt.setMode(Y.TRIANGLES);if(de.isBatchedMesh)if(de._multiDrawInstances!==null)Lp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),jt.renderMultiDrawInstances(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount,de._multiDrawInstances);else if(Ee.get("WEBGL_multi_draw"))jt.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else{const ht=de._multiDrawStarts,xn=de._multiDrawCounts,Vt=de._multiDrawCount,Di=bt?_e.get(bt).bytesPerElement:1,sa=F.get(Se).currentProgram.getUniforms();for(let jn=0;jn<Vt;jn++)sa.setValue(Y,"_gl_DrawID",jn),jt.render(ht[jn]/Di,xn[jn])}else if(de.isInstancedMesh)jt.renderInstances(Ft,Vn,de.count);else if(we.isInstancedBufferGeometry){const ht=we._maxInstanceCount!==void 0?we._maxInstanceCount:1/0,xn=Math.min(we.instanceCount,ht);jt.renderInstances(Ft,Vn,xn)}else jt.render(Ft,Vn)};function zo(H,ue,we){H.transparent===!0&&H.side===No&&H.forceSinglePass===!1?(H.side=As,H.needsUpdate=!0,us(H,ue,we),H.side=Pu,H.needsUpdate=!0,us(H,ue,we),H.side=No):us(H,ue,we)}this.compile=function(H,ue,we=null){we===null&&(we=H),P=nt.get(we),P.init(ue),B.push(P),we.traverseVisible(function(de){de.isLight&&de.layers.test(ue.layers)&&(P.pushLight(de),de.castShadow&&P.pushShadow(de))}),H!==we&&H.traverseVisible(function(de){de.isLight&&de.layers.test(ue.layers)&&(P.pushLight(de),de.castShadow&&P.pushShadow(de))}),P.setupLights();const Se=new Set;return H.traverse(function(de){if(!(de.isMesh||de.isPoints||de.isLine||de.isSprite))return;const at=de.material;if(at)if(Array.isArray(at))for(let vt=0;vt<at.length;vt++){const Je=at[vt];zo(Je,we,de),Se.add(Je)}else zo(at,we,de),Se.add(at)}),P=B.pop(),Se},this.compileAsync=function(H,ue,we=null){const Se=this.compile(H,ue,we);return new Promise(de=>{function at(){if(Se.forEach(function(vt){F.get(vt).currentProgram.isReady()&&Se.delete(vt)}),Se.size===0){de(H);return}setTimeout(at,10)}Ee.get("KHR_parallel_shader_compile")!==null?at():setTimeout(at,10)})};let Fl=null;function Fo(H){Fl&&Fl(H)}function so(){vr.stop()}function Bl(){vr.start()}const vr=new gD;vr.setAnimationLoop(Fo),typeof self<"u"&&vr.setContext(self),this.setAnimationLoop=function(H){Fl=H,tt.setAnimationLoop(H),H===null?vr.stop():vr.start()},tt.addEventListener("sessionstart",so),tt.addEventListener("sessionend",Bl),this.render=function(H,ue){if(ue!==void 0&&ue.isCamera!==!0){Ot("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;const we=tt.enabled===!0&&tt.isPresenting===!0,Se=k!==null&&(K===null||we)&&k.begin(I,K);if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),tt.enabled===!0&&tt.isPresenting===!0&&(k===null||k.isCompositing()===!1)&&(tt.cameraAutoUpdate===!0&&tt.updateCamera(ue),ue=tt.getCamera()),H.isScene===!0&&H.onBeforeRender(I,H,ue,K),P=nt.get(H,B.length),P.init(ue),B.push(P),Yt.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),ee.setFromProjectionMatrix(Yt,ma,ue.reversedDepth),yt=this.localClippingEnabled,ft=pt.init(this.clippingPlanes,yt),N=qe.get(H,z.length),N.init(),z.push(N),tt.enabled===!0&&tt.isPresenting===!0){const vt=I.xr.getDepthSensingMesh();vt!==null&&as(vt,ue,-1/0,I.sortObjects)}as(H,ue,0,I.sortObjects),N.finish(),I.sortObjects===!0&&N.sort(Ue,rt),Ae=tt.enabled===!1||tt.isPresenting===!1||tt.hasDepthSensing()===!1,Ae&&ve.addToRenderList(N,H),this.info.render.frame++,ft===!0&&pt.beginShadows();const de=P.state.shadowsArray;if($.render(de,H,ue),ft===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Se&&k.hasRenderPass())===!1){const vt=N.opaque,Je=N.transmissive;if(P.setupLights(),ue.isArrayCamera){const bt=ue.cameras;if(Je.length>0)for(let Tt=0,It=bt.length;Tt<It;Tt++){const At=bt[Tt];ki(vt,Je,H,At)}Ae&&ve.render(H);for(let Tt=0,It=bt.length;Tt<It;Tt++){const At=bt[Tt];ri(N,H,At,At.viewport)}}else Je.length>0&&ki(vt,Je,H,ue),Ae&&ve.render(H),ri(N,H,ue)}K!==null&&J===0&&(ae.updateMultisampleRenderTarget(K),ae.updateRenderTargetMipmap(K)),Se&&k.end(I),H.isScene===!0&&H.onAfterRender(I,H,ue),ct.resetDefaultState(),ce=-1,le=null,B.pop(),B.length>0?(P=B[B.length-1],ft===!0&&pt.setGlobalState(I.clippingPlanes,P.state.camera)):P=null,z.pop(),z.length>0?N=z[z.length-1]:N=null};function as(H,ue,we,Se){if(H.visible===!1)return;if(H.layers.test(ue.layers)){if(H.isGroup)we=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ue);else if(H.isLight)P.pushLight(H),H.castShadow&&P.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||ee.intersectsSprite(H)){Se&&ge.setFromMatrixPosition(H.matrixWorld).applyMatrix4(Yt);const vt=He.update(H),Je=H.material;Je.visible&&N.push(H,vt,Je,we,ge.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||ee.intersectsObject(H))){const vt=He.update(H),Je=H.material;if(Se&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),ge.copy(H.boundingSphere.center)):(vt.boundingSphere===null&&vt.computeBoundingSphere(),ge.copy(vt.boundingSphere.center)),ge.applyMatrix4(H.matrixWorld).applyMatrix4(Yt)),Array.isArray(Je)){const bt=vt.groups;for(let Tt=0,It=bt.length;Tt<It;Tt++){const At=bt[Tt],Ft=Je[At.materialIndex];Ft&&Ft.visible&&N.push(H,vt,Ft,we,ge.z,At)}}else Je.visible&&N.push(H,vt,Je,we,ge.z,null)}}const at=H.children;for(let vt=0,Je=at.length;vt<Je;vt++)as(at[vt],ue,we,Se)}function ri(H,ue,we,Se){const{opaque:de,transmissive:at,transparent:vt}=H;P.setupLightsView(we),ft===!0&&pt.setGlobalState(I.clippingPlanes,we),Se&&$e.viewport(Z.copy(Se)),de.length>0&&os(de,ue,we),at.length>0&&os(at,ue,we),vt.length>0&&os(vt,ue,we),$e.buffers.depth.setTest(!0),$e.buffers.depth.setMask(!0),$e.buffers.color.setMask(!0),$e.setPolygonOffset(!1)}function ki(H,ue,we,Se){if((we.isScene===!0?we.overrideMaterial:null)!==null)return;if(P.state.transmissionRenderTarget[Se.id]===void 0){const Ft=Ee.has("EXT_color_buffer_half_float")||Ee.has("EXT_color_buffer_float");P.state.transmissionRenderTarget[Se.id]=new xa(1,1,{generateMipmaps:!0,type:Ft?Ll:Ss,minFilter:Ml,samples:Ct.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Mn.workingColorSpace})}const at=P.state.transmissionRenderTarget[Se.id],vt=Se.viewport||Z;at.setSize(vt.z*I.transmissionResolutionScale,vt.w*I.transmissionResolutionScale);const Je=I.getRenderTarget(),bt=I.getActiveCubeFace(),Tt=I.getActiveMipmapLevel();I.setRenderTarget(at),I.getClearColor(Ie),Pe=I.getClearAlpha(),Pe<1&&I.setClearColor(16777215,.5),I.clear(),Ae&&ve.render(we);const It=I.toneMapping;I.toneMapping=to;const At=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),P.setupLightsView(Se),ft===!0&&pt.setGlobalState(I.clippingPlanes,Se),os(H,we,Se),ae.updateMultisampleRenderTarget(at),ae.updateRenderTargetMipmap(at),Ee.has("WEBGL_multisampled_render_to_texture")===!1){let Ft=!1;for(let En=0,Vn=ue.length;En<Vn;En++){const zn=ue[En],{object:jt,geometry:ht,material:xn,group:Vt}=zn;if(xn.side===No&&jt.layers.test(Se.layers)){const Di=xn.side;xn.side=As,xn.needsUpdate=!0,ls(jt,we,Se,ht,xn,Vt),xn.side=Di,xn.needsUpdate=!0,Ft=!0}}Ft===!0&&(ae.updateMultisampleRenderTarget(at),ae.updateRenderTargetMipmap(at))}I.setRenderTarget(Je,bt,Tt),I.setClearColor(Ie,Pe),At!==void 0&&(Se.viewport=At),I.toneMapping=It}function os(H,ue,we){const Se=ue.isScene===!0?ue.overrideMaterial:null;for(let de=0,at=H.length;de<at;de++){const vt=H[de],{object:Je,geometry:bt,group:Tt}=vt;let It=vt.material;It.allowOverride===!0&&Se!==null&&(It=Se),Je.layers.test(we.layers)&&ls(Je,ue,we,bt,It,Tt)}}function ls(H,ue,we,Se,de,at){H.onBeforeRender(I,ue,we,Se,de,at),H.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),de.onBeforeRender(I,ue,we,Se,H,at),de.transparent===!0&&de.side===No&&de.forceSinglePass===!1?(de.side=As,de.needsUpdate=!0,I.renderBufferDirect(we,ue,Se,de,H,at),de.side=Pu,de.needsUpdate=!0,I.renderBufferDirect(we,ue,Se,de,H,at),de.side=No):I.renderBufferDirect(we,ue,Se,de,H,at),H.onAfterRender(I,ue,we,Se,de,at)}function us(H,ue,we){ue.isScene!==!0&&(ue=We);const Se=F.get(H),de=P.state.lights,at=P.state.shadowsArray,vt=de.state.version,Je=Ze.getParameters(H,de.state,at,ue,we),bt=Ze.getProgramCacheKey(Je);let Tt=Se.programs;Se.environment=H.isMeshStandardMaterial?ue.environment:null,Se.fog=ue.fog,Se.envMap=(H.isMeshStandardMaterial?Fe:Le).get(H.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&H.envMap===null?ue.environmentRotation:H.envMapRotation,Tt===void 0&&(H.addEventListener("dispose",ii),Tt=new Map,Se.programs=Tt);let It=Tt.get(bt);if(It!==void 0){if(Se.currentProgram===It&&Se.lightsStateVersion===vt)return kl(H,Je),It}else Je.uniforms=Ze.getUniforms(H),H.onBeforeCompile(Je,I),It=Ze.acquireProgram(Je,bt),Tt.set(bt,It),Se.uniforms=Je.uniforms;const At=Se.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(At.clippingPlanes=pt.uniform),kl(H,Je),Se.needsLights=oo(H),Se.lightsStateVersion=vt,Se.needsLights&&(At.ambientLightColor.value=de.state.ambient,At.lightProbe.value=de.state.probe,At.directionalLights.value=de.state.directional,At.directionalLightShadows.value=de.state.directionalShadow,At.spotLights.value=de.state.spot,At.spotLightShadows.value=de.state.spotShadow,At.rectAreaLights.value=de.state.rectArea,At.ltc_1.value=de.state.rectAreaLTC1,At.ltc_2.value=de.state.rectAreaLTC2,At.pointLights.value=de.state.point,At.pointLightShadows.value=de.state.pointShadow,At.hemisphereLights.value=de.state.hemi,At.directionalShadowMap.value=de.state.directionalShadowMap,At.directionalShadowMatrix.value=de.state.directionalShadowMatrix,At.spotShadowMap.value=de.state.spotShadowMap,At.spotLightMatrix.value=de.state.spotLightMatrix,At.spotLightMap.value=de.state.spotLightMap,At.pointShadowMap.value=de.state.pointShadowMap,At.pointShadowMatrix.value=de.state.pointShadowMatrix),Se.currentProgram=It,Se.uniformsList=null,It}function Bo(H){if(H.uniformsList===null){const ue=H.currentProgram.getUniforms();H.uniformsList=qy.seqWithValue(ue.seq,H.uniforms)}return H.uniformsList}function kl(H,ue){const we=F.get(H);we.outputColorSpace=ue.outputColorSpace,we.batching=ue.batching,we.batchingColor=ue.batchingColor,we.instancing=ue.instancing,we.instancingColor=ue.instancingColor,we.instancingMorph=ue.instancingMorph,we.skinning=ue.skinning,we.morphTargets=ue.morphTargets,we.morphNormals=ue.morphNormals,we.morphColors=ue.morphColors,we.morphTargetsCount=ue.morphTargetsCount,we.numClippingPlanes=ue.numClippingPlanes,we.numIntersection=ue.numClipIntersection,we.vertexAlphas=ue.vertexAlphas,we.vertexTangents=ue.vertexTangents,we.toneMapping=ue.toneMapping}function ra(H,ue,we,Se,de){ue.isScene!==!0&&(ue=We),ae.resetTextureUnits();const at=ue.fog,vt=Se.isMeshStandardMaterial?ue.environment:null,Je=K===null?I.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:qc,bt=(Se.isMeshStandardMaterial?Fe:Le).get(Se.envMap||vt),Tt=Se.vertexColors===!0&&!!we.attributes.color&&we.attributes.color.itemSize===4,It=!!we.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),At=!!we.morphAttributes.position,Ft=!!we.morphAttributes.normal,En=!!we.morphAttributes.color;let Vn=to;Se.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(Vn=I.toneMapping);const zn=we.morphAttributes.position||we.morphAttributes.normal||we.morphAttributes.color,jt=zn!==void 0?zn.length:0,ht=F.get(Se),xn=P.state.lights;if(ft===!0&&(yt===!0||H!==le)){const Ji=H===le&&Se.id===ce;pt.setState(Se,H,Ji)}let Vt=!1;Se.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==xn.state.version||ht.outputColorSpace!==Je||de.isBatchedMesh&&ht.batching===!1||!de.isBatchedMesh&&ht.batching===!0||de.isBatchedMesh&&ht.batchingColor===!0&&de.colorTexture===null||de.isBatchedMesh&&ht.batchingColor===!1&&de.colorTexture!==null||de.isInstancedMesh&&ht.instancing===!1||!de.isInstancedMesh&&ht.instancing===!0||de.isSkinnedMesh&&ht.skinning===!1||!de.isSkinnedMesh&&ht.skinning===!0||de.isInstancedMesh&&ht.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&ht.instancingColor===!1&&de.instanceColor!==null||de.isInstancedMesh&&ht.instancingMorph===!0&&de.morphTexture===null||de.isInstancedMesh&&ht.instancingMorph===!1&&de.morphTexture!==null||ht.envMap!==bt||Se.fog===!0&&ht.fog!==at||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==pt.numPlanes||ht.numIntersection!==pt.numIntersection)||ht.vertexAlphas!==Tt||ht.vertexTangents!==It||ht.morphTargets!==At||ht.morphNormals!==Ft||ht.morphColors!==En||ht.toneMapping!==Vn||ht.morphTargetsCount!==jt)&&(Vt=!0):(Vt=!0,ht.__version=Se.version);let Di=ht.currentProgram;Vt===!0&&(Di=us(Se,ue,de));let sa=!1,jn=!1,Er=!1;const Cn=Di.getUniforms(),Vi=ht.uniforms;if($e.useProgram(Di.program)&&(sa=!0,jn=!0,Er=!0),Se.id!==ce&&(ce=Se.id,jn=!0),sa||le!==H){$e.buffers.depth.getReversed()&&H.reversedDepth!==!0&&(H._reversedDepth=!0,H.updateProjectionMatrix()),Cn.setValue(Y,"projectionMatrix",H.projectionMatrix),Cn.setValue(Y,"viewMatrix",H.matrixWorldInverse);const $i=Cn.map.cameraPosition;$i!==void 0&&$i.setValue(Y,Et.setFromMatrixPosition(H.matrixWorld)),Ct.logarithmicDepthBuffer&&Cn.setValue(Y,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&Cn.setValue(Y,"isOrthographic",H.isOrthographicCamera===!0),le!==H&&(le=H,jn=!0,Er=!0)}if(ht.needsLights&&(xn.state.directionalShadowMap.length>0&&Cn.setValue(Y,"directionalShadowMap",xn.state.directionalShadowMap,ae),xn.state.spotShadowMap.length>0&&Cn.setValue(Y,"spotShadowMap",xn.state.spotShadowMap,ae),xn.state.pointShadowMap.length>0&&Cn.setValue(Y,"pointShadowMap",xn.state.pointShadowMap,ae)),de.isSkinnedMesh){Cn.setOptional(Y,de,"bindMatrix"),Cn.setOptional(Y,de,"bindMatrixInverse");const Ji=de.skeleton;Ji&&(Ji.boneTexture===null&&Ji.computeBoneTexture(),Cn.setValue(Y,"boneTexture",Ji.boneTexture,ae))}de.isBatchedMesh&&(Cn.setOptional(Y,de,"batchingTexture"),Cn.setValue(Y,"batchingTexture",de._matricesTexture,ae),Cn.setOptional(Y,de,"batchingIdTexture"),Cn.setValue(Y,"batchingIdTexture",de._indirectTexture,ae),Cn.setOptional(Y,de,"batchingColorTexture"),de._colorsTexture!==null&&Cn.setValue(Y,"batchingColorTexture",de._colorsTexture,ae));const Li=we.morphAttributes;if((Li.position!==void 0||Li.normal!==void 0||Li.color!==void 0)&&lt.update(de,we,Di),(jn||ht.receiveShadow!==de.receiveShadow)&&(ht.receiveShadow=de.receiveShadow,Cn.setValue(Y,"receiveShadow",de.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(Vi.envMap.value=bt,Vi.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&ue.environment!==null&&(Vi.envMapIntensity.value=ue.environmentIntensity),Vi.dfgLUT!==void 0&&(Vi.dfgLUT.value=a6()),jn&&(Cn.setValue(Y,"toneMappingExposure",I.toneMappingExposure),ht.needsLights&&ao(Vi,Er),at&&Se.fog===!0&&Mt.refreshFogUniforms(Vi,at),Mt.refreshMaterialUniforms(Vi,Se,Ce,oe,P.state.transmissionRenderTarget[H.id]),qy.upload(Y,Bo(ht),Vi,ae)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(qy.upload(Y,Bo(ht),Vi,ae),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&Cn.setValue(Y,"center",de.center),Cn.setValue(Y,"modelViewMatrix",de.modelViewMatrix),Cn.setValue(Y,"normalMatrix",de.normalMatrix),Cn.setValue(Y,"modelMatrix",de.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const Ji=Se.uniformsGroups;for(let $i=0,Vl=Ji.length;$i<Vl;$i++){const Cs=Ji[$i];je.update(Cs,Di),je.bind(Cs,Di)}}return Di}function ao(H,ue){H.ambientLightColor.needsUpdate=ue,H.lightProbe.needsUpdate=ue,H.directionalLights.needsUpdate=ue,H.directionalLightShadows.needsUpdate=ue,H.pointLights.needsUpdate=ue,H.pointLightShadows.needsUpdate=ue,H.spotLights.needsUpdate=ue,H.spotLightShadows.needsUpdate=ue,H.rectAreaLights.needsUpdate=ue,H.hemisphereLights.needsUpdate=ue}function oo(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return K},this.setRenderTargetTextures=function(H,ue,we){const Se=F.get(H);Se.__autoAllocateDepthBuffer=H.resolveDepthBuffer===!1,Se.__autoAllocateDepthBuffer===!1&&(Se.__useRenderToTexture=!1),F.get(H.texture).__webglTexture=ue,F.get(H.depthTexture).__webglTexture=Se.__autoAllocateDepthBuffer?void 0:we,Se.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(H,ue){const we=F.get(H);we.__webglFramebuffer=ue,we.__useDefaultFramebuffer=ue===void 0};const lo=Y.createFramebuffer();this.setRenderTarget=function(H,ue=0,we=0){K=H,W=ue,J=we;let Se=null,de=!1,at=!1;if(H){const Je=F.get(H);if(Je.__useDefaultFramebuffer!==void 0){$e.bindFramebuffer(Y.FRAMEBUFFER,Je.__webglFramebuffer),Z.copy(H.viewport),Q.copy(H.scissor),fe=H.scissorTest,$e.viewport(Z),$e.scissor(Q),$e.setScissorTest(fe),ce=-1;return}else if(Je.__webglFramebuffer===void 0)ae.setupRenderTarget(H);else if(Je.__hasExternalTextures)ae.rebindTextures(H,F.get(H.texture).__webglTexture,F.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const It=H.depthTexture;if(Je.__boundDepthTexture!==It){if(It!==null&&F.has(It)&&(H.width!==It.image.width||H.height!==It.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ae.setupDepthRenderbuffer(H)}}const bt=H.texture;(bt.isData3DTexture||bt.isDataArrayTexture||bt.isCompressedArrayTexture)&&(at=!0);const Tt=F.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(Tt[ue])?Se=Tt[ue][we]:Se=Tt[ue],de=!0):H.samples>0&&ae.useMultisampledRTT(H)===!1?Se=F.get(H).__webglMultisampledFramebuffer:Array.isArray(Tt)?Se=Tt[we]:Se=Tt,Z.copy(H.viewport),Q.copy(H.scissor),fe=H.scissorTest}else Z.copy(me).multiplyScalar(Ce).floor(),Q.copy(Re).multiplyScalar(Ce).floor(),fe=it;if(we!==0&&(Se=lo),$e.bindFramebuffer(Y.FRAMEBUFFER,Se)&&$e.drawBuffers(H,Se),$e.viewport(Z),$e.scissor(Q),$e.setScissorTest(fe),de){const Je=F.get(H.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+ue,Je.__webglTexture,we)}else if(at){const Je=ue;for(let bt=0;bt<H.textures.length;bt++){const Tt=F.get(H.textures[bt]);Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0+bt,Tt.__webglTexture,we,Je)}}else if(H!==null&&we!==0){const Je=F.get(H.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Je.__webglTexture,we)}ce=-1},this.readRenderTargetPixels=function(H,ue,we,Se,de,at,vt,Je=0){if(!(H&&H.isWebGLRenderTarget)){Ot("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=F.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&vt!==void 0&&(bt=bt[vt]),bt){$e.bindFramebuffer(Y.FRAMEBUFFER,bt);try{const Tt=H.textures[Je],It=Tt.format,At=Tt.type;if(!Ct.textureFormatReadable(It)){Ot("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ct.textureTypeReadable(At)){Ot("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=H.width-Se&&we>=0&&we<=H.height-de&&(H.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+Je),Y.readPixels(ue,we,Se,de,Ye.convert(It),Ye.convert(At),at))}finally{const Tt=K!==null?F.get(K).__webglFramebuffer:null;$e.bindFramebuffer(Y.FRAMEBUFFER,Tt)}}},this.readRenderTargetPixelsAsync=async function(H,ue,we,Se,de,at,vt,Je=0){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=F.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&vt!==void 0&&(bt=bt[vt]),bt)if(ue>=0&&ue<=H.width-Se&&we>=0&&we<=H.height-de){$e.bindFramebuffer(Y.FRAMEBUFFER,bt);const Tt=H.textures[Je],It=Tt.format,At=Tt.type;if(!Ct.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ct.textureTypeReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ft=Y.createBuffer();Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ft),Y.bufferData(Y.PIXEL_PACK_BUFFER,at.byteLength,Y.STREAM_READ),H.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+Je),Y.readPixels(ue,we,Se,de,Ye.convert(It),Ye.convert(At),0);const En=K!==null?F.get(K).__webglFramebuffer:null;$e.bindFramebuffer(Y.FRAMEBUFFER,En);const Vn=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0);return Y.flush(),await yP(Y,Vn,4),Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ft),Y.getBufferSubData(Y.PIXEL_PACK_BUFFER,0,at),Y.deleteBuffer(Ft),Y.deleteSync(Vn),at}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(H,ue=null,we=0){const Se=Math.pow(2,-we),de=Math.floor(H.image.width*Se),at=Math.floor(H.image.height*Se),vt=ue!==null?ue.x:0,Je=ue!==null?ue.y:0;ae.setTexture2D(H,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,we,0,0,vt,Je,de,at),$e.unbindTexture()};const ko=Y.createFramebuffer(),Aa=Y.createFramebuffer();this.copyTextureToTexture=function(H,ue,we=null,Se=null,de=0,at=null){at===null&&(de!==0?(Lp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),at=de,de=0):at=0);let vt,Je,bt,Tt,It,At,Ft,En,Vn;const zn=H.isCompressedTexture?H.mipmaps[at]:H.image;if(we!==null)vt=we.max.x-we.min.x,Je=we.max.y-we.min.y,bt=we.isBox3?we.max.z-we.min.z:1,Tt=we.min.x,It=we.min.y,At=we.isBox3?we.min.z:0;else{const Li=Math.pow(2,-de);vt=Math.floor(zn.width*Li),Je=Math.floor(zn.height*Li),H.isDataArrayTexture?bt=zn.depth:H.isData3DTexture?bt=Math.floor(zn.depth*Li):bt=1,Tt=0,It=0,At=0}Se!==null?(Ft=Se.x,En=Se.y,Vn=Se.z):(Ft=0,En=0,Vn=0);const jt=Ye.convert(ue.format),ht=Ye.convert(ue.type);let xn;ue.isData3DTexture?(ae.setTexture3D(ue,0),xn=Y.TEXTURE_3D):ue.isDataArrayTexture||ue.isCompressedArrayTexture?(ae.setTexture2DArray(ue,0),xn=Y.TEXTURE_2D_ARRAY):(ae.setTexture2D(ue,0),xn=Y.TEXTURE_2D),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,ue.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,ue.unpackAlignment);const Vt=Y.getParameter(Y.UNPACK_ROW_LENGTH),Di=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),sa=Y.getParameter(Y.UNPACK_SKIP_PIXELS),jn=Y.getParameter(Y.UNPACK_SKIP_ROWS),Er=Y.getParameter(Y.UNPACK_SKIP_IMAGES);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,zn.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,zn.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Tt),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,It),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,At);const Cn=H.isDataArrayTexture||H.isData3DTexture,Vi=ue.isDataArrayTexture||ue.isData3DTexture;if(H.isDepthTexture){const Li=F.get(H),Ji=F.get(ue),$i=F.get(Li.__renderTarget),Vl=F.get(Ji.__renderTarget);$e.bindFramebuffer(Y.READ_FRAMEBUFFER,$i.__webglFramebuffer),$e.bindFramebuffer(Y.DRAW_FRAMEBUFFER,Vl.__webglFramebuffer);for(let Cs=0;Cs<bt;Cs++)Cn&&(Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,F.get(H).__webglTexture,de,At+Cs),Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,F.get(ue).__webglTexture,at,Vn+Cs)),Y.blitFramebuffer(Tt,It,vt,Je,Ft,En,vt,Je,Y.DEPTH_BUFFER_BIT,Y.NEAREST);$e.bindFramebuffer(Y.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else if(de!==0||H.isRenderTargetTexture||F.has(H)){const Li=F.get(H),Ji=F.get(ue);$e.bindFramebuffer(Y.READ_FRAMEBUFFER,ko),$e.bindFramebuffer(Y.DRAW_FRAMEBUFFER,Aa);for(let $i=0;$i<bt;$i++)Cn?Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Li.__webglTexture,de,At+$i):Y.framebufferTexture2D(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Li.__webglTexture,de),Vi?Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Ji.__webglTexture,at,Vn+$i):Y.framebufferTexture2D(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Ji.__webglTexture,at),de!==0?Y.blitFramebuffer(Tt,It,vt,Je,Ft,En,vt,Je,Y.COLOR_BUFFER_BIT,Y.NEAREST):Vi?Y.copyTexSubImage3D(xn,at,Ft,En,Vn+$i,Tt,It,vt,Je):Y.copyTexSubImage2D(xn,at,Ft,En,Tt,It,vt,Je);$e.bindFramebuffer(Y.READ_FRAMEBUFFER,null),$e.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else Vi?H.isDataTexture||H.isData3DTexture?Y.texSubImage3D(xn,at,Ft,En,Vn,vt,Je,bt,jt,ht,zn.data):ue.isCompressedArrayTexture?Y.compressedTexSubImage3D(xn,at,Ft,En,Vn,vt,Je,bt,jt,zn.data):Y.texSubImage3D(xn,at,Ft,En,Vn,vt,Je,bt,jt,ht,zn):H.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,at,Ft,En,vt,Je,jt,ht,zn.data):H.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,at,Ft,En,zn.width,zn.height,jt,zn.data):Y.texSubImage2D(Y.TEXTURE_2D,at,Ft,En,vt,Je,jt,ht,zn);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,Vt),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,Di),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,sa),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,jn),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,Er),at===0&&ue.generateMipmaps&&Y.generateMipmap(xn),$e.unbindTexture()},this.initRenderTarget=function(H){F.get(H).__webglFramebuffer===void 0&&ae.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?ae.setTextureCube(H,0):H.isData3DTexture?ae.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?ae.setTexture2DArray(H,0):ae.setTexture2D(H,0),$e.unbindTexture()},this.resetState=function(){W=0,J=0,K=null,$e.reset(),ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ma}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Mn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Mn._getUnpackColorSpace()}}const o6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:gb,AddEquation:Pc,AddOperation:tR,AdditiveAnimationBlendMode:LE,AdditiveBlending:mM,AgXToneMapping:SE,AlphaFormat:RE,AlwaysCompare:dR,AlwaysDepth:lx,AlwaysStencilFunc:yM,AmbientLight:sD,AnimationAction:hD,AnimationClip:R0,AnimationLoader:oz,AnimationMixer:Uz,AnimationObjectGroup:Iz,AnimationUtils:iz,ArcCurve:OR,ArrayCamera:uD,ArrowHelper:s4,AttachedBindMode:_M,Audio:cD,AudioAnalyser:Ez,AudioContext:aT,AudioListener:bz,AudioLoader:_z,AxesHelper:a4,BackSide:As,BasicDepthPacking:aR,BasicShadowMap:P3,BatchedMesh:AR,Bone:BE,BooleanKeyframeTrack:Ih,Box2:Wz,Box3:dr,Box3Helper:i4,BoxGeometry:Oh,BoxHelper:n4,BufferAttribute:Yn,BufferGeometry:Kt,BufferGeometryLoader:lD,ByteType:TE,Cache:El,Camera:Rb,CameraHelper:t4,CanvasTexture:DR,CapsuleGeometry:zb,CatmullRomCurve3:IR,CineonToneMapping:xE,CircleGeometry:Fb,ClampToEdgeWrapping:Qs,Clock:oT,Color:xt,ColorKeyframeTrack:tT,ColorManagement:Mn,CompressedArrayTexture:TU,CompressedCubeTexture:AU,CompressedTexture:Ub,CompressedTextureLoader:lz,ConeGeometry:K0,ConstantAlphaFactor:J3,ConstantColorFactor:K3,Controls:l4,CubeCamera:bR,CubeDepthTexture:LR,CubeReflectionMapping:Dl,CubeRefractionMapping:Xc,CubeTexture:j0,CubeTextureLoader:uz,CubeUVReflectionMapping:Yp,CubicBezierCurve:GE,CubicBezierCurve3:PR,CubicInterpolant:QR,CullFaceBack:pM,CullFaceFront:I3,CullFaceFrontBack:RI,CullFaceNone:O3,Curve:Po,CurvePath:zR,CustomBlending:U3,CustomToneMapping:bE,CylinderGeometry:Z0,Cylindrical:Gz,Data3DTexture:Cb,DataArrayTexture:wb,DataTexture:Io,DataTextureLoader:cz,DataUtils:KP,DecrementStencilOp:YI,DecrementWrapStencilOp:ZI,DefaultLoadingManager:eD,DepthFormat:Nl,DepthStencilFormat:zc,DepthTexture:Up,DetachedBindMode:nR,DirectionalLight:rD,DirectionalLightHelper:e4,DiscreteInterpolant:JR,DodecahedronGeometry:Bb,DoubleSide:No,DstAlphaFactor:X3,DstColorFactor:Y3,DynamicCopyUsage:cP,DynamicDrawUsage:rP,DynamicReadUsage:oP,EdgesGeometry:NR,EllipseCurve:kb,EqualCompare:cR,EqualDepth:cx,EqualStencilFunc:$I,EquirectangularReflectionMapping:p0,EquirectangularRefractionMapping:m0,Euler:Sa,EventDispatcher:Pl,ExternalTexture:VE,ExtrudeGeometry:Vb,FileLoader:Uu,Float16BufferAttribute:iU,Float32BufferAttribute:St,FloatType:Ts,Fog:Lb,FogExp2:Db,FramebufferTexture:EU,FrontSide:Pu,Frustum:jp,FrustumArray:Pb,GLBufferAttribute:kz,GLSL1:hP,GLSL3:xM,GreaterCompare:fR,GreaterDepth:hx,GreaterEqualCompare:Ab,GreaterEqualDepth:fx,GreaterEqualStencilFunc:iP,GreaterStencilFunc:tP,GridHelper:Jz,Group:xp,HalfFloatType:Ll,HemisphereLight:tD,HemisphereLightHelper:Qz,IcosahedronGeometry:Hb,ImageBitmapLoader:vz,ImageLoader:D0,ImageUtils:_R,IncrementStencilOp:qI,IncrementWrapStencilOp:jI,InstancedBufferAttribute:Pp,InstancedBufferGeometry:sT,InstancedInterleavedBuffer:Jx,InstancedMesh:TR,Int16BufferAttribute:tU,Int32BufferAttribute:nU,Int8BufferAttribute:JP,IntType:_b,InterleavedBuffer:Nb,InterleavedBufferAttribute:ga,Interpolant:$0,InterpolateDiscrete:_0,InterpolateLinear:qx,InterpolateSmooth:Wy,InterpolationSamplingMode:mP,InterpolationSamplingType:pP,InvertStencilOp:KI,KeepStencilOp:fh,KeyframeTrack:ro,LOD:MR,LatheGeometry:Gb,Layers:Op,LessCompare:uR,LessDepth:ux,LessEqualCompare:Tb,LessEqualDepth:Ch,LessEqualStencilFunc:eP,LessStencilFunc:JI,Light:nf,LightProbe:oD,Line:jc,Line3:pD,LineBasicMaterial:ws,LineCurve:WE,LineCurve3:UR,LineDashedMaterial:ZR,LineLoop:wR,LineSegments:Ul,LinearFilter:hi,LinearInterpolant:eT,LinearMipMapLinearFilter:OI,LinearMipMapNearestFilter:NI,LinearMipmapLinearFilter:Ml,LinearMipmapNearestFilter:Jg,LinearSRGBColorSpace:qc,LinearToneMapping:_E,LinearTransfer:x0,Loader:ia,LoaderUtils:TM,LoadingManager:nT,LoopOnce:iR,LoopPingPong:sR,LoopRepeat:rR,MOUSE:uh,Material:rs,MaterialLoader:Kb,MathUtils:vR,Matrix2:fT,Matrix3:nn,Matrix4:Xt,MaxEquation:k3,Mesh:Qi,MeshBasicMaterial:ef,MeshDepthMaterial:QE,MeshDistanceMaterial:JE,MeshLambertMaterial:YR,MeshMatcapMaterial:jR,MeshNormalMaterial:qR,MeshPhongMaterial:WR,MeshPhysicalMaterial:GR,MeshStandardMaterial:KE,MeshToonMaterial:XR,MinEquation:B3,MirroredRepeatWrapping:v0,MixOperation:eR,MultiplyBlending:vM,MultiplyOperation:q0,NearestFilter:Ki,NearestMipMapLinearFilter:LI,NearestMipMapNearestFilter:DI,NearestMipmapLinearFilter:_p,NearestMipmapNearestFilter:EE,NeutralToneMapping:ME,NeverCompare:lR,NeverDepth:ox,NeverStencilFunc:QI,NoBlending:Al,NoColorSpace:Cu,NoNormalPacking:VI,NoToneMapping:to,NormalAnimationBlendMode:Eb,NormalBlending:yh,NormalGAPacking:GI,NormalRGPacking:HI,NotEqualCompare:hR,NotEqualDepth:dx,NotEqualStencilFunc:nP,NumberKeyframeTrack:w0,Object3D:Ln,ObjectLoader:mz,ObjectSpaceNormalMap:oR,OctahedronGeometry:Q0,OneFactor:H3,OneMinusConstantAlphaFactor:$3,OneMinusConstantColorFactor:Q3,OneMinusDstAlphaFactor:q3,OneMinusDstColorFactor:j3,OneMinusSrcAlphaFactor:ax,OneMinusSrcColorFactor:W3,OrthographicCamera:Ou,PCFShadowMap:Mp,PCFSoftShadowMap:Qg,PMREMGenerator:RM,Path:Qx,PerspectiveCamera:Zi,Plane:Tu,PlaneGeometry:Zp,PlaneHelper:r4,PointLight:iD,PointLightHelper:Zz,Points:CR,PointsMaterial:kE,PolarGridHelper:$z,PolyhedronGeometry:tf,PositionalAudio:Mz,PropertyBinding:Rn,PropertyMixer:fD,QuadraticBezierCurve:XE,QuadraticBezierCurve3:qE,Quaternion:ns,QuaternionKeyframeTrack:ev,QuaternionLinearInterpolant:$R,R11_EAC_Format:bx,RED_GREEN_RGTC2_Format:Wx,RED_RGTC1_Format:Hx,REVISION:X0,RG11_EAC_Format:Mx,RGBADepthPacking:FI,RGBAFormat:ts,RGBAIntegerFormat:Mb,RGBA_ASTC_10x10_Format:Ux,RGBA_ASTC_10x5_Format:Ox,RGBA_ASTC_10x6_Format:Ix,RGBA_ASTC_10x8_Format:Px,RGBA_ASTC_12x10_Format:zx,RGBA_ASTC_12x12_Format:Fx,RGBA_ASTC_4x4_Format:Tx,RGBA_ASTC_5x4_Format:Ax,RGBA_ASTC_5x5_Format:wx,RGBA_ASTC_6x5_Format:Cx,RGBA_ASTC_6x6_Format:Rx,RGBA_ASTC_8x5_Format:Dx,RGBA_ASTC_8x6_Format:Lx,RGBA_ASTC_8x8_Format:Nx,RGBA_BPTC_Format:Bx,RGBA_ETC2_EAC_Format:xx,RGBA_PVRTC_2BPPV1_Format:vx,RGBA_PVRTC_4BPPV1_Format:gx,RGBA_S3TC_DXT1_Format:e0,RGBA_S3TC_DXT3_Format:t0,RGBA_S3TC_DXT5_Format:n0,RGBDepthPacking:BI,RGBFormat:DE,RGBIntegerFormat:II,RGB_BPTC_SIGNED_Format:kx,RGB_BPTC_UNSIGNED_Format:Vx,RGB_ETC1_Format:_x,RGB_ETC2_Format:yx,RGB_PVRTC_2BPPV1_Format:mx,RGB_PVRTC_4BPPV1_Format:px,RGB_S3TC_DXT1_Format:$g,RGDepthPacking:kI,RGFormat:Rh,RGIntegerFormat:Sb,RawShaderMaterial:ZE,Ray:Nh,Raycaster:dD,RectAreaLight:aD,RedFormat:bb,RedIntegerFormat:Y0,ReinhardToneMapping:yE,RenderTarget:OE,RenderTarget3D:zz,RepeatWrapping:g0,ReplaceStencilOp:XI,ReverseSubtractEquation:F3,RingGeometry:Wb,SIGNED_R11_EAC_Format:Sx,SIGNED_RED_GREEN_RGTC2_Format:Xx,SIGNED_RED_RGTC1_Format:Gx,SIGNED_RG11_EAC_Format:Ex,SRGBColorSpace:$r,SRGBTransfer:kn,Scene:zE,ShaderChunk:cn,ShaderLib:Lo,ShaderMaterial:Ma,ShadowMaterial:HR,Shape:bh,ShapeGeometry:Xb,ShapePath:o4,ShapeUtils:Oo,ShortType:AE,Skeleton:Ib,SkeletonHelper:jz,SkinnedMesh:ER,Source:Fc,Sphere:pr,SphereGeometry:J0,Spherical:wM,SphericalHarmonics3:rT,SplineCurve:YE,SpotLight:nD,SpotLightHelper:Yz,Sprite:FE,SpriteMaterial:Ob,SrcAlphaFactor:sx,SrcAlphaSaturateFactor:Z3,SrcColorFactor:G3,StaticCopyUsage:uP,StaticDrawUsage:b0,StaticReadUsage:aP,StereoCamera:yz,StreamCopyUsage:fP,StreamDrawUsage:sP,StreamReadUsage:lP,StringKeyframeTrack:Ph,SubtractEquation:z3,SubtractiveBlending:gM,TOUCH:ch,TangentSpaceNormalMap:$c,TetrahedronGeometry:qb,Texture:Fi,TextureLoader:fz,TextureUtils:d4,Timer:Vz,TimestampQuery:dP,TorusGeometry:Yb,TorusKnotGeometry:jb,Triangle:Ks,TriangleFanDrawMode:zI,TriangleStripDrawMode:UI,TrianglesDrawMode:PI,TubeGeometry:Zb,UVMapping:vb,Uint16BufferAttribute:IE,Uint32BufferAttribute:PE,Uint8BufferAttribute:$P,Uint8ClampedBufferAttribute:eU,Uniform:cT,UniformsGroup:Bz,UniformsLib:mt,UniformsUtils:Yx,UnsignedByteType:Ss,UnsignedInt101111Type:CE,UnsignedInt248Type:Rp,UnsignedInt5999Type:wE,UnsignedIntType:no,UnsignedShort4444Type:yb,UnsignedShort5551Type:xb,UnsignedShortType:Cp,VSMShadowMap:ph,Vector2:ke,Vector3:j,Vector4:Dn,VectorKeyframeTrack:C0,VideoFrameTexture:MU,VideoTexture:RR,WebGL3DRenderTarget:kP,WebGLArrayRenderTarget:BP,WebGLCoordinateSystem:ma,WebGLCubeRenderTarget:UE,WebGLRenderTarget:xa,WebGLRenderer:SD,WebGLUtils:bD,WebGPUCoordinateSystem:Dp,WebXRController:Xy,WireframeGeometry:jE,WrapAroundEnding:y0,ZeroCurvatureEnding:mh,ZeroFactor:V3,ZeroSlopeEnding:gh,ZeroStencilOp:WI,createCanvasElement:gR,error:Ot,getConsoleFunction:_P,log:M0,setConsoleFunction:vP,warn:gt,warnOnce:Lp},Symbol.toStringTag,{value:"Module"}));var k1={exports:{}},V1={},H1={exports:{}},G1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function l6(){if(fC)return G1;fC=1;var r=V0();function e(_,y){return _===y&&(_!==0||1/_===1/y)||_!==_&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=r.useState,i=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function f(_,y){var b=y(),E=n({inst:{value:b,getSnapshot:y}}),A=E[0].inst,w=E[1];return a(function(){A.value=b,A.getSnapshot=y,d(A)&&w({inst:A})},[_,b,y]),i(function(){return d(A)&&w({inst:A}),_(function(){d(A)&&w({inst:A})})},[_]),u(b),b}function d(_){var y=_.getSnapshot;_=_.value;try{var b=y();return!t(_,b)}catch{return!0}}function p(_,y){return y()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return G1.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:v,G1}var hC;function u6(){return hC||(hC=1,H1.exports=l6()),H1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC;function c6(){if(dC)return V1;dC=1;var r=V0(),e=u6();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=r.useRef,u=r.useEffect,f=r.useMemo,d=r.useDebugValue;return V1.useSyncExternalStoreWithSelector=function(p,v,_,y,b){var E=a(null);if(E.current===null){var A={hasValue:!1,value:null};E.current=A}else A=E.current;E=f(function(){function M(z){if(!D){if(D=!0,R=z,z=y(z),b!==void 0&&A.hasValue){var B=A.value;if(b(B,z))return N=B}return N=z}if(B=N,n(R,z))return B;var k=y(z);return b!==void 0&&b(B,k)?(R=z,B):(R=z,N=k)}var D=!1,R,N,P=_===void 0?null:_;return[function(){return M(v())},P===null?void 0:function(){return M(P())}]},[v,_,y,b]);var w=i(p,E[0],E[1]);return u(function(){A.hasValue=!0,A.value=w},[w]),d(w),w},V1}var pC;function f6(){return pC||(pC=1,k1.exports=c6()),k1.exports}var h6=f6();const d6=k0(h6),mC=r=>{let e;const t=new Set,n=(p,v)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const y=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(b=>b(e,y))}},i=()=>e,f={setState:n,getState:i,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=r(n,i,f);return f},p6=(r=>r?mC(r):mC),{useSyncExternalStoreWithSelector:m6}=d6,g6=r=>r;function v6(r,e=g6,t){const n=m6(r.subscribe,r.getState,r.getInitialState,e,t);return fE.useDebugValue(n),n}const gC=(r,e)=>{const t=p6(r),n=(i,a=e)=>v6(t,i,a);return Object.assign(n,t),n},_6=((r,e)=>r?gC(r,e):gC);var NM=c3();const y6=k0(NM);function hT(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=e?r.return:r.child;for(;n;){const i=hT(n,e,t);if(i)return i;n=e?null:n.sibling}}function MD(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const dT=MD(se.createContext(null));class ED extends se.Component{render(){return se.createElement(dT.Provider,{value:this._reactInternals},this.props.children)}}function TD(){const r=se.useContext(dT);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=se.useId();return se.useMemo(()=>{for(const t of[r,r==null?void 0:r.alternate]){if(!t)continue;const n=hT(t,!1,i=>{let a=i.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[r,e])}const x6=Symbol.for("react.context"),b6=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===x6;function S6(){const r=TD(),[e]=se.useState(()=>new Map);e.clear();let t=r;for(;t;){const n=t.type;b6(n)&&n!==dT&&!e.has(n)&&e.set(n,se.use(MD(n))),t=t.return}return e}function M6(){const r=S6();return se.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>se.createElement(e,null,se.createElement(t.Provider,{...n,value:r.get(t)})),e=>se.createElement(ED,{...e})),[r])}function AD(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const wD=r=>r&&r.isOrthographicCamera,E6=r=>r&&r.hasOwnProperty("current"),T6=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),tv=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?se.useLayoutEffect:se.useEffect;function CD(r){const e=se.useRef(r);return tv(()=>void(e.current=r),[r]),e}function A6(){const r=TD(),e=M6();return se.useMemo(()=>({children:t})=>{const i=!!hT(r,!0,a=>a.type===se.StrictMode)?se.StrictMode:se.Fragment;return Qe.jsx(i,{children:Qe.jsx(e,{children:t})})},[r,e])}function w6({set:r}){return tv(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const C6=(r=>(r=class extends se.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function RD(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function fp(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const Ei={obj:r=>r===Object(r)&&!Ei.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Ei.str(r)||Ei.num(r)||Ei.boo(r))return r===e;const a=Ei.obj(r);if(a&&n==="reference")return r===e;const u=Ei.arr(r);if(u&&t==="reference")return r===e;if((u||a)&&r===e)return!0;let f;for(f in r)if(!(f in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(f in i?e:r)if(!Ei.equ(r[f],e[f],{strict:i,objects:"reference"}))return!1}else for(f in i?e:r)if(r[f]!==e[f])return!1;if(Ei.und(f)){if(u&&r.length===0&&e.length===0||a&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function R6(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const DD=["children","key","ref"];function D6(r){const e={};for(const t in r)DD.includes(t)||(e[t]=r[t]);return e}function $x(r,e,t,n){const i=r;let a=i==null?void 0:i.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:D6(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=a)),a}function L0(r,e){if(!e.includes("-"))return{root:r,key:e,target:r[e]};if(e in r)return{root:r,key:e,target:r[e]};let t=r;const n=e.split("-");for(const i of n){if(typeof t!="object"||t===null){if(t!==void 0){const a=n.slice(n.indexOf(i)).join("-");return{root:t,key:a,target:void 0}}return{root:r,key:e,target:void 0}}e=i,r=t,t=t[e]}return{root:r,key:e,target:t}}const vC=/-\d+$/;function eb(r,e){if(Ei.str(e.props.attach)){if(vC.test(e.props.attach)){const i=e.props.attach.replace(vC,""),{root:a,key:u}=L0(r.object,i);Array.isArray(a[u])||(a[u]=[])}const{root:t,key:n}=L0(r.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Ei.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function tb(r,e){if(Ei.str(e.props.attach)){const{root:t,key:n}=L0(r.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[n]:t[n]=i}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const OM=[...DD,"args","dispose","attach","object","onUpdate","dispose"],_C=new Map;function L6(r){let e=_C.get(r.constructor);try{e||(e=new r.constructor,_C.set(r.constructor,e))}catch{}return e}function N6(r,e){const t={};for(const n in e)if(!OM.includes(n)&&!Ei.equ(e[n],r.props[n])){t[n]=e[n];for(const i in e)i.startsWith(`${n}-`)&&(t[i]=e[i])}for(const n in r.props){if(OM.includes(n)||e.hasOwnProperty(n))continue;const{root:i,key:a}=L0(r.object,n);if(i.constructor&&i.constructor.length===0){const u=L6(i);Ei.und(u)||(t[a]=u[a])}else t[a]=0}return t}const O6=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],I6=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Uc(r,e){var t;const n=r.__r3f,i=n&&AD(n).getState(),a=n==null?void 0:n.eventCount;for(const f in e){let d=e[f];if(OM.includes(f))continue;if(n&&I6.test(f)){typeof d=="function"?n.handlers[f]=d:delete n.handlers[f],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:v,target:_}=L0(r,f);if(_===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${f}". Ensure it is an object before setting "${v}".`);if(_ instanceof Op&&d instanceof Op)_.mask=d.mask;else if(_ instanceof xt&&T6(d))_.set(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof _.copy=="function"&&d!=null&&d.constructor&&_.constructor===d.constructor)_.copy(d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&Array.isArray(d))typeof _.fromArray=="function"?_.fromArray(d):_.set(...d);else if(_!==null&&typeof _=="object"&&typeof _.set=="function"&&typeof d=="number")typeof _.setScalar=="function"?_.setScalar(d):_.set(d);else{var u;p[v]=d,i&&!i.linear&&O6.includes(v)&&(u=p[v])!=null&&u.isTexture&&p[v].format===ts&&p[v].type===Ss&&(p[v].colorSpace=$r)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const f=n.object,d=i.internal.interaction.indexOf(f);d>-1&&i.internal.interaction.splice(d,1),n.eventCount&&f.raycast!==null&&i.internal.interaction.push(f)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Qp(n),r}function Qp(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function P6(r,e){r.manual||(wD(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const Zs=r=>r==null?void 0:r.isObject3D;function Ly(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function LD(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function U6(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{LD(t.capturedMap,e,n,i)})}function z6(r){function e(d){const{internal:p}=r.getState(),v=d.offsetX-p.initialClick[0],_=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(v*v+_*_))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(v=>{var _;return(_=p.__r3f)==null?void 0:_.handlers["onPointer"+v]}))}function n(d,p){const v=r.getState(),_=new Set,y=[],b=p?p(v.internal.interaction):v.internal.interaction;for(let M=0;M<b.length;M++){const D=fp(b[M]);D&&(D.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(d,v);function E(M){const D=fp(M);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var R;D.events.compute==null||D.events.compute(d,D,(R=D.previousRoot)==null?void 0:R.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(M,!0):[]}let A=b.flatMap(E).sort((M,D)=>{const R=fp(M.object),N=fp(D.object);return!R||!N?M.distance-D.distance:N.events.priority-R.events.priority||M.distance-D.distance}).filter(M=>{const D=Ly(M);return _.has(D)?!1:(_.add(D),!0)});v.events.filter&&(A=v.events.filter(A,v));for(const M of A){let D=M.object;for(;D;){var w;(w=D.__r3f)!=null&&w.eventCount&&y.push({...M,eventObject:D}),D=D.parent}}if("pointerId"in d&&v.internal.capturedMap.has(d.pointerId))for(let M of v.internal.capturedMap.get(d.pointerId).values())_.has(Ly(M.intersection))||y.push(M.intersection);return y}function i(d,p,v,_){if(d.length){const y={stopped:!1};for(const b of d){let E=fp(b.object);if(E||b.object.traverseAncestors(A=>{const w=fp(A);if(w)return E=w,!1}),E){const{raycaster:A,pointer:w,camera:M,internal:D}=E,R=new j(w.x,w.y,0).unproject(M),N=I=>{var O,W;return(O=(W=D.capturedMap.get(I))==null?void 0:W.has(b.eventObject))!=null?O:!1},P=I=>{const O={intersection:b,target:p.target};D.capturedMap.has(I)?D.capturedMap.get(I).set(b.eventObject,O):D.capturedMap.set(I,new Map([[b.eventObject,O]])),p.target.setPointerCapture(I)},z=I=>{const O=D.capturedMap.get(I);O&&LD(D.capturedMap,b.eventObject,O,I)};let B={};for(let I in p){let O=p[I];typeof O!="function"&&(B[I]=O)}let k={...b,...B,pointer:w,intersections:d,stopped:y.stopped,delta:v,unprojectedPoint:R,ray:A.ray,camera:M,stopPropagation(){const I="pointerId"in p&&D.capturedMap.get(p.pointerId);if((!I||I.has(b.eventObject))&&(k.stopped=y.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(O=>O.eventObject===b.eventObject))){const O=d.slice(0,d.indexOf(b));a([...O,b])}},target:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:z},currentTarget:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:z},nativeEvent:p};if(_(k),y.stopped===!0)break}}}return d}function a(d){const{internal:p}=r.getState();for(const v of p.hovered.values())if(!d.length||!d.find(_=>_.object===v.object&&_.index===v.index&&_.instanceId===v.instanceId)){const y=v.eventObject.__r3f;if(p.hovered.delete(Ly(v)),y!=null&&y.eventCount){const b=y.handlers,E={...v,intersections:d};b.onPointerOut==null||b.onPointerOut(E),b.onPointerLeave==null||b.onPointerLeave(E)}}}function u(d,p){for(let v=0;v<p.length;v++){const _=p[v].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(d)}}function f(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{const{internal:v}=r.getState();"pointerId"in p&&v.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(p.pointerId)&&(v.capturedMap.delete(p.pointerId),a([]))})}}return function(v){const{onPointerMissed:_,internal:y}=r.getState();y.lastEvent.current=v;const b=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",w=n(v,b?t:void 0),M=E?e(v):0;d==="onPointerDown"&&(y.initialClick=[v.offsetX,v.offsetY],y.initialHits=w.map(R=>R.eventObject)),E&&!w.length&&M<=2&&(u(v,y.interaction),_&&_(v)),b&&a(w);function D(R){const N=R.eventObject,P=N.__r3f;if(!(P!=null&&P.eventCount))return;const z=P.handlers;if(b){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const B=Ly(R),k=y.hovered.get(B);k?k.stopped&&R.stopPropagation():(y.hovered.set(B,R),z.onPointerOver==null||z.onPointerOver(R),z.onPointerEnter==null||z.onPointerEnter(R))}z.onPointerMove==null||z.onPointerMove(R)}else{const B=z[d];B?(!E||y.initialHits.includes(N))&&(u(v,y.interaction.filter(k=>!y.initialHits.includes(k))),B(R)):E&&y.initialHits.includes(N)&&u(v,y.interaction.filter(k=>!y.initialHits.includes(k)))}}i(w,v,M,D)}}return{handlePointer:f}}const yC=r=>!!(r!=null&&r.render),ND=se.createContext(null),F6=(r,e)=>{const t=_6((f,d)=>{const p=new j,v=new j,_=new j;function y(M=d().camera,D=v,R=d().size){const{width:N,height:P,top:z,left:B}=R,k=N/P;D.isVector3?_.copy(D):_.set(...D);const I=M.getWorldPosition(p).distanceTo(_);if(wD(M))return{width:N/M.zoom,height:P/M.zoom,top:z,left:B,factor:1,distance:I,aspect:k};{const O=M.fov*Math.PI/180,W=2*Math.tan(O/2)*I,J=W*(N/P);return{width:J,height:W,top:z,left:B,factor:N/J,distance:I,aspect:k}}}let b;const E=M=>f(D=>({performance:{...D.performance,current:M}})),A=new ke;return{set:f,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>r(d(),M),advance:(M,D)=>e(M,D,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new oT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();b&&clearTimeout(b),M.performance.current!==M.performance.min&&E(M.performance.min),b=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:M=>f(D=>({...D,events:{...D.events,...M}})),setSize:(M,D,R=0,N=0)=>{const P=d().camera,z={width:M,height:D,top:R,left:N};f(B=>({size:z,viewport:{...B.viewport,...y(P,v,z)}}))},setDpr:M=>f(D=>{const R=RD(M);return{viewport:{...D.viewport,dpr:R,initialDpr:D.viewport.initialDpr||R}}}),setFrameloop:(M="always")=>{const D=d().clock;D.stop(),D.elapsedTime=0,M!=="never"&&(D.start(),D.elapsedTime=0),f(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:se.createRef(),active:!1,frames:0,priority:0,subscribe:(M,D,R)=>{const N=d().internal;return N.priority=N.priority+(D>0?1:0),N.subscribers.push({ref:M,priority:D,store:R}),N.subscribers=N.subscribers.sort((P,z)=>P.priority-z.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(D>0?1:0),P.subscribers=P.subscribers.filter(z=>z.ref!==M))}}}}}),n=t.getState();let i=n.size,a=n.viewport.dpr,u=n.camera;return t.subscribe(()=>{const{camera:f,size:d,viewport:p,gl:v,set:_}=t.getState();if(d.width!==i.width||d.height!==i.height||p.dpr!==a){i=d,a=p.dpr,P6(f,d),p.dpr>0&&v.setPixelRatio(p.dpr);const y=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(d.width,d.height,y)}f!==u&&(u=f,_(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(f)}})))}),t.subscribe(f=>r(f)),t};function OD(){const r=se.useContext(ND);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Mu(r=t=>t,e){return OD()(r,e)}function pT(r,e=0){const t=OD(),n=t.getState().internal.subscribe,i=CD(r);return tv(()=>n(i,e,t),[e,n,t]),null}/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const B6=1,k6=8,V6=32,H6=2;var G6={version:"9.5.0"};function W6(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xC={exports:{}},bC={exports:{}},SC;function X6(){return SC||(SC=1,(function(r){r.exports=function(e){function t(l,c,g,x){return new Tm(l,c,g,x)}function n(){}function i(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function u(l){if(a(l)!==l)throw Error(i(188))}function f(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(i(188));return c!==l?null:l}for(var g=l,x=c;;){var C=g.return;if(C===null)break;var L=C.alternate;if(L===null){if(x=C.return,x!==null){g=x;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===g)return u(C),l;if(L===x)return u(C),c;L=L.sibling}throw Error(i(188))}if(g.return!==x.return)g=C,x=L;else{for(var V=!1,ie=C.child;ie;){if(ie===g){V=!0,g=C,x=L;break}if(ie===x){V=!0,x=C,g=L;break}ie=ie.sibling}if(!V){for(ie=L.child;ie;){if(ie===g){V=!0,g=L,x=C;break}if(ie===x){V=!0,x=L,g=C;break}ie=ie.sibling}if(!V)throw Error(i(189))}}if(g.alternate!==x)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?l:c}function d(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=d(l),c!==null)return c;l=l.sibling}return null}function p(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=p(l),c!==null))return c;l=l.sibling}return null}function v(l){return l===null||typeof l!="object"?null:(l=_o&&l[_o]||l["@@iterator"],typeof l=="function"?l:null)}function _(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===$o?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case $l:return"Fragment";case tu:return"Profiler";case eu:return"StrictMode";case fd:return"Suspense";case vo:return"SuspenseList";case Af:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Jl:return"Portal";case Ps:return l.displayName||"Context";case Tf:return(l._context.displayName||"Context")+".Consumer";case sc:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case hd:return c=l.displayName||null,c!==null?c:_(l.type)||"Memo";case Cr:c=l._payload,l=l._init;try{return _(l(c))}catch{}}return null}function y(l){return{current:l}}function b(l){0>au||(l.current=Td[au],Td[au]=null,au--)}function E(l,c){au++,Td[au]=l.current,l.current=c}function A(l){return l>>>=0,l===0?32:31-(Ad(l)/y_|0)|0}function w(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function M(l,c,g){var x=l.pendingLanes;if(x===0)return 0;var C=0,L=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var ie=x&134217727;return ie!==0?(x=ie&~L,x!==0?C=w(x):(V&=ie,V!==0?C=w(V):g||(g=ie&~l,g!==0&&(C=w(g))))):(ie=x&~L,ie!==0?C=w(ie):V!==0?C=w(V):g||(g=x&~l,g!==0&&(C=w(g)))),C===0?0:c!==0&&c!==C&&(c&L)===0&&(L=C&-C,g=c&-c,L>=g||L===32&&(g&4194048)!==0)?c:C}function D(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function R(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N(){var l=hc;return hc<<=1,(hc&62914560)===0&&(hc=4194304),l}function P(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function z(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function B(l,c,g,x,C,L){var V=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var ie=l.entanglements,Ne=l.expirationTimes,Xe=l.hiddenUpdates;for(g=V&~g;0<g;){var ut=31-Wr(g),Ke=1<<ut;ie[ut]=0,Ne[ut]=-1;var _t=Xe[ut];if(_t!==null)for(Xe[ut]=null,ut=0;ut<_t.length;ut++){var Zt=_t[ut];Zt!==null&&(Zt.lane&=-536870913)}g&=~Ke}x!==0&&k(l,x,0),L!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=L&~(V&~c))}function k(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var x=31-Wr(c);l.entangledLanes|=c,l.entanglements[x]=l.entanglements[x]|1073741824|g&261930}function I(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var x=31-Wr(g),C=1<<x;C&c|l[x]&c&&(l[x]|=c),g&=~C}}function O(l,c){var g=c&-c;return g=(g&42)!==0?1:W(g),(g&(l.suspendedLanes|c))!==0?0:g}function W(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function J(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function K(l){if(typeof cg=="function"&&S_(l),Xr&&typeof Xr.setStrictMode=="function")try{Xr.setStrictMode(lu,l)}catch{}}function ce(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function le(l){if(Nd===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Nd=c&&c[1]||"",Va=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nd+l+Va}function Z(l,c){if(!l||Pf)return"";Pf=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Zt){var _t=Zt}Reflect.construct(l,[],Ke)}else{try{Ke.call()}catch(Zt){_t=Zt}l.call(Ke.prototype)}}else{try{throw Error()}catch(Zt){_t=Zt}(Ke=l())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Zt){if(Zt&&_t&&typeof Zt.stack=="string")return[Zt.stack,_t.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=x.DetermineComponentFrameRoot(),V=L[0],ie=L[1];if(V&&ie){var Ne=V.split(`
`),Xe=ie.split(`
`);for(C=x=0;x<Ne.length&&!Ne[x].includes("DetermineComponentFrameRoot");)x++;for(;C<Xe.length&&!Xe[C].includes("DetermineComponentFrameRoot");)C++;if(x===Ne.length||C===Xe.length)for(x=Ne.length-1,C=Xe.length-1;1<=x&&0<=C&&Ne[x]!==Xe[C];)C--;for(;1<=x&&0<=C;x--,C--)if(Ne[x]!==Xe[C]){if(x!==1||C!==1)do if(x--,C--,0>C||Ne[x]!==Xe[C]){var ut=`
`+Ne[x].replace(" at new "," at ");return l.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",l.displayName)),ut}while(1<=x&&0<=C);break}}}finally{Pf=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?le(g):""}function Q(l,c){switch(l.tag){case 26:case 27:case 5:return le(l.type);case 16:return le("Lazy");case 13:return l.child!==c&&c!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return Z(l.type,!1);case 11:return Z(l.type.render,!1);case 1:return Z(l.type,!0);case 31:return le("Activity");default:return""}}function fe(l){try{var c="",g=null;do c+=Q(l,g),g=l,l=l.return;while(l);return c}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Ie(l,c){if(typeof l=="object"&&l!==null){var g=fg.get(l);return g!==void 0?g:(c={value:l,source:c,stack:fe(c)},fg.set(l,c),c)}return{value:l,source:c,stack:fe(c)}}function Pe(l,c){bo[Ha++]=Uf,bo[Ha++]=Bn,Bn=l,Uf=c}function X(l,c,g){Fs[ms++]=ur,Fs[ms++]=oa,Fs[ms++]=Bs,Bs=l;var x=ur;l=oa;var C=32-Wr(x)-1;x&=~(1<<C),g+=1;var L=32-Wr(c)+C;if(30<L){var V=C-C%5;L=(x&(1<<V)-1).toString(32),x>>=V,C-=V,ur=1<<32-Wr(c)+C|g<<C|x,oa=L+l}else ur=1<<L|g<<C|x,oa=l}function oe(l){l.return!==null&&(Pe(l,1),X(l,1,0))}function Ce(l){for(;l===Bn;)Bn=bo[--Ha],bo[Ha]=null,Uf=bo[--Ha],bo[Ha]=null;for(;l===Bs;)Bs=Fs[--ms],Fs[ms]=null,oa=Fs[--ms],Fs[ms]=null,ur=Fs[--ms],Fs[ms]=null}function Ue(l,c){Fs[ms++]=ur,Fs[ms++]=oa,Fs[ms++]=Bs,ur=c.id,oa=c.overflow,Bs=l}function rt(l,c){E(cr,c),E(So,l),E(ir,null),l=Pv(c),b(ir),E(ir,l)}function me(){b(ir),b(So),b(cr)}function Re(l){l.memoizedState!==null&&E(zf,l);var c=ir.current,g=lc(c,l.type);c!==g&&(E(So,l),E(ir,g))}function it(l){So.current===l&&(b(ir),b(So)),zf.current===l&&(b(zf),_i?ru._currentValue=iu:ru._currentValue2=iu)}function ee(l){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw We(Ie(c,l)),Od}function ft(l,c){if(!$n)throw Error(i(175));o_(l.stateNode,l.type,l.memoizedProps,c,l)||ee(l,!0)}function yt(l){for(Wi=l.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:Wi=Wi.return}}function Yt(l){if(!$n||l!==Wi)return!1;if(!pn)return yt(l),pn=!0,!1;var c=l.tag;if(Gi?c!==3&&c!==27&&(c!==5||fc(l.type)&&!Rr(l.type,l.memoizedProps))&&ei&&ee(l):c!==3&&(c!==5||fc(l.type)&&!Rr(l.type,l.memoizedProps))&&ei&&ee(l),yt(l),c===13){if(!$n)throw Error(i(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));ei=$m(l)}else if(c===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));ei=u_(l)}else ei=Gi&&c===27?$v(l.type,ei):Wi?Jv(l.stateNode):null;return!0}function Et(){$n&&(ei=Wi=null,pn=!1)}function ge(){var l=Ga;return l!==null&&(jr===null?jr=l:jr.push.apply(jr,l),Ga=null),l}function We(l){Ga===null?Ga=[l]:Ga.push(l)}function Ae(l,c,g){_i?(E(ks,c._currentValue),c._currentValue=g):(E(ks,c._currentValue2),c._currentValue2=g)}function xe(l){var c=ks.current;_i?l._currentValue=c:l._currentValue2=c,b(ks)}function Y(l,c,g){for(;l!==null;){var x=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),l===g)break;l=l.return}}function dt(l,c,g,x){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var L=C.dependencies;if(L!==null){var V=C.child;L=L.firstContext;e:for(;L!==null;){var ie=L;L=C;for(var Ne=0;Ne<c.length;Ne++)if(ie.context===c[Ne]){L.lanes|=g,ie=L.alternate,ie!==null&&(ie.lanes|=g),Y(L.return,g,l),x||(V=null);break e}L=ie.next}}else if(C.tag===18){if(V=C.return,V===null)throw Error(i(341));V.lanes|=g,L=V.alternate,L!==null&&(L.lanes|=g),Y(V,g,l),V=null}else V=C.child;if(V!==null)V.return=C;else for(V=C;V!==null;){if(V===l){V=null;break}if(C=V.sibling,C!==null){C.return=V.return,V=C;break}V=V.return}C=V}}function Ee(l,c,g,x){l=null;for(var C=c,L=!1;C!==null;){if(!L){if((C.flags&524288)!==0)L=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var V=C.alternate;if(V===null)throw Error(i(387));if(V=V.memoizedProps,V!==null){var ie=C.type;xi(C.pendingProps.value,V.value)||(l!==null?l.push(ie):l=[ie])}}else if(C===zf.current){if(V=C.alternate,V===null)throw Error(i(387));V.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(ru):l=[ru])}C=C.return}l!==null&&dt(c,l,g,x),c.flags|=262144}function Ct(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!xi(_i?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function $e(l){Wn=l,la=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function q(l){return ae(Wn,l)}function F(l,c){return Wn===null&&$e(l),ae(l,c)}function ae(l,c){var g=_i?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},la===null){if(l===null)throw Error(i(308));la=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else la=la.next=c;return g}function Le(){return{controller:new M_,data:new Map,refCount:0}}function Fe(l){l.refCount--,l.refCount===0&&rr(yS,function(){l.controller.abort()})}function _e(){}function st(l){l!==In&&l.next===null&&(In===null?Ff=In=l:In=In.next=l),Vs=!0,xr||(xr=!0,$())}function He(l,c){if(!Id&&Vs){Id=!0;do for(var g=!1,x=Ff;x!==null;){if(l!==0){var C=x.pendingLanes;if(C===0)var L=0;else{var V=x.suspendedLanes,ie=x.pingedLanes;L=(1<<31-Wr(42|l)+1)-1,L&=C&~(V&~ie),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(g=!0,pt(x,L))}else L=mn,L=M(x,x===on?L:0,x.cancelPendingCommit!==null||x.timeoutHandle!==Gr),(L&3)===0||D(x,L)||(g=!0,pt(x,L));x=x.next}while(g);Id=!1}}function Ze(){Mt()}function Mt(){Vs=xr=!1;var l=0;rl!==0&&nu()&&(l=rl);for(var c=yr(),g=null,x=Ff;x!==null;){var C=x.next,L=qe(x,c);L===0?(x.next=null,g===null?Ff=C:g.next=C,C===null&&(In=g)):(g=x,(l!==0||(L&3)!==0)&&(Vs=!0)),x=C}Pi!==0&&Pi!==5||He(l),rl!==0&&(rl=0)}function qe(l,c){for(var g=l.suspendedLanes,x=l.pingedLanes,C=l.expirationTimes,L=l.pendingLanes&-62914561;0<L;){var V=31-Wr(L),ie=1<<V,Ne=C[V];Ne===-1?((ie&g)===0||(ie&x)!==0)&&(C[V]=R(ie,c)):Ne<=c&&(l.expiredLanes|=ie),L&=~ie}if(c=on,g=mn,g=M(l,l===c?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Gr),x=l.callbackNode,g===0||l===c&&(Un===2||Un===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&Cd(x),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||D(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(x!==null&&Cd(x),J(g)){case 2:case 8:g=b_;break;case 32:g=If;break;case 268435456:g=Dd;break;default:g=If}return x=nt.bind(null,l),g=Of(g,x),l.callbackPriority=c,l.callbackNode=g,c}return x!==null&&x!==null&&Cd(x),l.callbackPriority=2,l.callbackNode=null,2}function nt(l,c){if(Pi!==0&&Pi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(Fa()&&l.callbackNode!==g)return null;var x=mn;return x=M(l,l===on?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==Gr),x===0?null:(aa(l,x,c),qe(l,yr()),l.callbackNode!=null&&l.callbackNode===g?nt.bind(null,l):null)}function pt(l,c){if(Fa())return null;aa(l,c,!0)}function $(){zm?Fm(function(){(fn&6)!==0?Of(Rd,Ze):Mt()}):Of(Rd,Ze)}function ve(){if(rl===0){var l=Mo;l===0&&(l=wd,wd<<=1,(wd&261888)===0&&(wd=256)),rl=l}return rl}function lt(l,c){if(dc===null){var g=dc=[];hg=0,Mo=ve(),Xi={status:"pending",value:void 0,then:function(x){g.push(x)}}}return hg++,c.then(te,te),c}function te(){if(--hg===0&&dc!==null){Xi!==null&&(Xi.status="fulfilled");var l=dc;dc=null,Mo=0,Xi=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function et(l,c){var g=[],x={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return l.then(function(){x.status="fulfilled",x.value=c;for(var C=0;C<g.length;C++)(0,g[C])(c)},function(C){for(x.status="rejected",x.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),x}function Ye(){var l=sl.current;return l!==null?l:on.pooledCache}function ct(l,c){c===null?E(sl,sl.current):E(sl,c.pool)}function je(){var l=Ye();return l===null?null:{parent:_i?ti._currentValue:ti._currentValue2,pool:l}}function Be(l,c){if(xi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),x=Object.keys(c);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var C=g[x];if(!_S.call(c,C)||!xi(l[C],c[C]))return!1}return!0}function tt(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Lt(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(_e,_e),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,ii(l),l;default:if(typeof c.status=="string")c.then(_e,_e);else{if(l=on,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=c,l.status="pending",l.then(function(x){if(c.status==="pending"){var C=c;C.status="fulfilled",C.value=x}},function(x){if(c.status==="pending"){var C=c;C.status="rejected",C.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,ii(l),l}throw Lr=c,qi}}function en(l){try{var c=l._init;return c(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Lr=g,qi):g}}function rn(){if(Lr===null)throw Error(i(459));var l=Lr;return Lr=null,l}function ii(l){if(l===qi||l===Gs)throw Error(i(483))}function Bi(l){var c=uu;return uu+=1,al===null&&(al=[]),Lt(al,l,c)}function Uo(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function zo(l,c){throw c.$$typeof===Ql?Error(i(525)):(l=Object.prototype.toString.call(c),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function Fl(l){function c(Me,pe){if(l){var De=Me.deletions;De===null?(Me.deletions=[pe],Me.flags|=16):De.push(pe)}}function g(Me,pe){if(!l)return null;for(;pe!==null;)c(Me,pe),pe=pe.sibling;return null}function x(Me){for(var pe=new Map;Me!==null;)Me.key!==null?pe.set(Me.key,Me):pe.set(Me.index,Me),Me=Me.sibling;return pe}function C(Me,pe){return Me=ds(Me,pe),Me.index=0,Me.sibling=null,Me}function L(Me,pe,De){return Me.index=De,l?(De=Me.alternate,De!==null?(De=De.index,De<pe?(Me.flags|=67108866,pe):De):(Me.flags|=67108866,pe)):(Me.flags|=1048576,pe)}function V(Me){return l&&Me.alternate===null&&(Me.flags|=67108866),Me}function ie(Me,pe,De,ot){return pe===null||pe.tag!==6?(pe=Am(De,Me.mode,ot),pe.return=Me,pe):(pe=C(pe,De),pe.return=Me,pe)}function Ne(Me,pe,De,ot){var zt=De.type;return zt===$l?ut(Me,pe,De.props.children,ot,De.key):pe!==null&&(pe.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Cr&&en(zt)===pe.type)?(pe=C(pe,De.props),Uo(pe,De),pe.return=Me,pe):(pe=go(De.type,De.key,De.props,null,Me.mode,ot),Uo(pe,De),pe.return=Me,pe)}function Xe(Me,pe,De,ot){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==De.containerInfo||pe.stateNode.implementation!==De.implementation?(pe=Cm(De,Me.mode,ot),pe.return=Me,pe):(pe=C(pe,De.children||[]),pe.return=Me,pe)}function ut(Me,pe,De,ot,zt){return pe===null||pe.tag!==7?(pe=Is(De,Me.mode,ot,zt),pe.return=Me,pe):(pe=C(pe,De),pe.return=Me,pe)}function Ke(Me,pe,De){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=Am(""+pe,Me.mode,De),pe.return=Me,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case Ba:return De=go(pe.type,pe.key,pe.props,null,Me.mode,De),Uo(De,pe),De.return=Me,De;case Jl:return pe=Cm(pe,Me.mode,De),pe.return=Me,pe;case Cr:return pe=en(pe),Ke(Me,pe,De)}if(el(pe)||v(pe))return pe=Is(pe,Me.mode,De,null),pe.return=Me,pe;if(typeof pe.then=="function")return Ke(Me,Bi(pe),De);if(pe.$$typeof===Ps)return Ke(Me,F(Me,pe),De);zo(Me,pe)}return null}function _t(Me,pe,De,ot){var zt=pe!==null?pe.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return zt!==null?null:ie(Me,pe,""+De,ot);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Ba:return De.key===zt?Ne(Me,pe,De,ot):null;case Jl:return De.key===zt?Xe(Me,pe,De,ot):null;case Cr:return De=en(De),_t(Me,pe,De,ot)}if(el(De)||v(De))return zt!==null?null:ut(Me,pe,De,ot,null);if(typeof De.then=="function")return _t(Me,pe,Bi(De),ot);if(De.$$typeof===Ps)return _t(Me,pe,F(Me,De),ot);zo(Me,De)}return null}function Zt(Me,pe,De,ot,zt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Me=Me.get(De)||null,ie(pe,Me,""+ot,zt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case Ba:return Me=Me.get(ot.key===null?De:ot.key)||null,Ne(pe,Me,ot,zt);case Jl:return Me=Me.get(ot.key===null?De:ot.key)||null,Xe(pe,Me,ot,zt);case Cr:return ot=en(ot),Zt(Me,pe,De,ot,zt)}if(el(ot)||v(ot))return Me=Me.get(De)||null,ut(pe,Me,ot,zt,null);if(typeof ot.then=="function")return Zt(Me,pe,De,Bi(ot),zt);if(ot.$$typeof===Ps)return Zt(Me,pe,De,F(pe,ot),zt);zo(pe,ot)}return null}function Mi(Me,pe,De,ot){for(var zt=null,fi=null,Bt=pe,bn=pe=0,sr=null;Bt!==null&&bn<De.length;bn++){Bt.index>bn?(sr=Bt,Bt=null):sr=Bt.sibling;var wn=_t(Me,Bt,De[bn],ot);if(wn===null){Bt===null&&(Bt=sr);break}l&&Bt&&wn.alternate===null&&c(Me,Bt),pe=L(wn,pe,bn),fi===null?zt=wn:fi.sibling=wn,fi=wn,Bt=sr}if(bn===De.length)return g(Me,Bt),pn&&Pe(Me,bn),zt;if(Bt===null){for(;bn<De.length;bn++)Bt=Ke(Me,De[bn],ot),Bt!==null&&(pe=L(Bt,pe,bn),fi===null?zt=Bt:fi.sibling=Bt,fi=Bt);return pn&&Pe(Me,bn),zt}for(Bt=x(Bt);bn<De.length;bn++)sr=Zt(Bt,Me,bn,De[bn],ot),sr!==null&&(l&&sr.alternate!==null&&Bt.delete(sr.key===null?bn:sr.key),pe=L(sr,pe,bn),fi===null?zt=sr:fi.sibling=sr,fi=sr);return l&&Bt.forEach(function(qs){return c(Me,qs)}),pn&&Pe(Me,bn),zt}function bc(Me,pe,De,ot){if(De==null)throw Error(i(151));for(var zt=null,fi=null,Bt=pe,bn=pe=0,sr=null,wn=De.next();Bt!==null&&!wn.done;bn++,wn=De.next()){Bt.index>bn?(sr=Bt,Bt=null):sr=Bt.sibling;var qs=_t(Me,Bt,wn.value,ot);if(qs===null){Bt===null&&(Bt=sr);break}l&&Bt&&qs.alternate===null&&c(Me,Bt),pe=L(qs,pe,bn),fi===null?zt=qs:fi.sibling=qs,fi=qs,Bt=sr}if(wn.done)return g(Me,Bt),pn&&Pe(Me,bn),zt;if(Bt===null){for(;!wn.done;bn++,wn=De.next())wn=Ke(Me,wn.value,ot),wn!==null&&(pe=L(wn,pe,bn),fi===null?zt=wn:fi.sibling=wn,fi=wn);return pn&&Pe(Me,bn),zt}for(Bt=x(Bt);!wn.done;bn++,wn=De.next())wn=Zt(Bt,Me,bn,wn.value,ot),wn!==null&&(l&&wn.alternate!==null&&Bt.delete(wn.key===null?bn:wn.key),pe=L(wn,pe,bn),fi===null?zt=wn:fi.sibling=wn,fi=wn);return l&&Bt.forEach(function(xS){return c(Me,xS)}),pn&&Pe(Me,bn),zt}function pl(Me,pe,De,ot){if(typeof De=="object"&&De!==null&&De.type===$l&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case Ba:e:{for(var zt=De.key;pe!==null;){if(pe.key===zt){if(zt=De.type,zt===$l){if(pe.tag===7){g(Me,pe.sibling),ot=C(pe,De.props.children),ot.return=Me,Me=ot;break e}}else if(pe.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===Cr&&en(zt)===pe.type){g(Me,pe.sibling),ot=C(pe,De.props),Uo(ot,De),ot.return=Me,Me=ot;break e}g(Me,pe);break}else c(Me,pe);pe=pe.sibling}De.type===$l?(ot=Is(De.props.children,Me.mode,ot,De.key),ot.return=Me,Me=ot):(ot=go(De.type,De.key,De.props,null,Me.mode,ot),Uo(ot,De),ot.return=Me,Me=ot)}return V(Me);case Jl:e:{for(zt=De.key;pe!==null;){if(pe.key===zt)if(pe.tag===4&&pe.stateNode.containerInfo===De.containerInfo&&pe.stateNode.implementation===De.implementation){g(Me,pe.sibling),ot=C(pe,De.children||[]),ot.return=Me,Me=ot;break e}else{g(Me,pe);break}else c(Me,pe);pe=pe.sibling}ot=Cm(De,Me.mode,ot),ot.return=Me,Me=ot}return V(Me);case Cr:return De=en(De),pl(Me,pe,De,ot)}if(el(De))return Mi(Me,pe,De,ot);if(v(De)){if(zt=v(De),typeof zt!="function")throw Error(i(150));return De=zt.call(De),bc(Me,pe,De,ot)}if(typeof De.then=="function")return pl(Me,pe,Bi(De),ot);if(De.$$typeof===Ps)return pl(Me,pe,F(Me,De),ot);zo(Me,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,pe!==null&&pe.tag===6?(g(Me,pe.sibling),ot=C(pe,De),ot.return=Me,Me=ot):(g(Me,pe),ot=Am(De,Me.mode,ot),ot.return=Me,Me=ot),V(Me)):g(Me,pe)}return function(Me,pe,De,ot){try{uu=0;var zt=pl(Me,pe,De,ot);return al=null,zt}catch(Bt){if(Bt===qi||Bt===Gs)throw Bt;var fi=t(29,Bt,null,Me.mode);return fi.lanes=ot,fi.return=Me,fi}finally{}}}function Fo(){for(var l=Xa,c=cu=Xa=0;c<l;){var g=hr[c];hr[c++]=null;var x=hr[c];hr[c++]=null;var C=hr[c];hr[c++]=null;var L=hr[c];if(hr[c++]=null,x!==null&&C!==null){var V=x.pending;V===null?C.next=C:(C.next=V.next,V.next=C),x.pending=C}L!==0&&as(g,C,L)}}function so(l,c,g,x){hr[Xa++]=l,hr[Xa++]=c,hr[Xa++]=g,hr[Xa++]=x,cu|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function Bl(l,c,g,x){return so(l,c,g,x),ri(l)}function vr(l,c){return so(l,null,null,c),ri(l)}function as(l,c,g){l.lanes|=g;var x=l.alternate;x!==null&&(x.lanes|=g);for(var C=!1,L=l.return;L!==null;)L.childLanes|=g,x=L.alternate,x!==null&&(x.childLanes|=g),L.tag===22&&(l=L.stateNode,l===null||l._visibility&1||(C=!0)),l=L,L=L.return;return l.tag===3?(L=l.stateNode,C&&c!==null&&(C=31-Wr(g),l=L.hiddenUpdates,x=l[C],x===null?l[C]=[c]:x.push(c),c.lane=g|536870912),L):null}function ri(l){if(50<Tn)throw Tn=0,Wf=null,Error(i(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function ki(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function os(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ls(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function us(l,c,g){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(fn&2)!==0){var C=x.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),x.pending=c,c=ri(l),as(l,null,g),c}return so(l,x,c,g),ri(l)}function Bo(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var x=c.lanes;x&=l.pendingLanes,g|=x,c.lanes=g,I(l,g)}}function kl(l,c){var g=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var C=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var V={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};L===null?C=L=V:L=L.next=V,g=g.next}while(g!==null);L===null?C=L=c:L=L.next=c}else C=L=c;g={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:x.shared,callbacks:x.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function ra(){if(Ud){var l=Xi;if(l!==null)throw l}}function ao(l,c,g,x){Ud=!1;var C=l.updateQueue;gs=!1;var L=C.firstBaseUpdate,V=C.lastBaseUpdate,ie=C.shared.pending;if(ie!==null){C.shared.pending=null;var Ne=ie,Xe=Ne.next;Ne.next=null,V===null?L=Xe:V.next=Xe,V=Ne;var ut=l.alternate;ut!==null&&(ut=ut.updateQueue,ie=ut.lastBaseUpdate,ie!==V&&(ie===null?ut.firstBaseUpdate=Xe:ie.next=Xe,ut.lastBaseUpdate=Ne))}if(L!==null){var Ke=C.baseState;V=0,ut=Xe=Ne=null,ie=L;do{var _t=ie.lane&-536870913,Zt=_t!==ie.lane;if(Zt?(mn&_t)===_t:(x&_t)===_t){_t!==0&&_t===Mo&&(Ud=!0),ut!==null&&(ut=ut.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Mi=l,bc=ie;_t=c;var pl=g;switch(bc.tag){case 1:if(Mi=bc.payload,typeof Mi=="function"){Ke=Mi.call(pl,Ke,_t);break e}Ke=Mi;break e;case 3:Mi.flags=Mi.flags&-65537|128;case 0:if(Mi=bc.payload,_t=typeof Mi=="function"?Mi.call(pl,Ke,_t):Mi,_t==null)break e;Ke=cd({},Ke,_t);break e;case 2:gs=!0}}_t=ie.callback,_t!==null&&(l.flags|=64,Zt&&(l.flags|=8192),Zt=C.callbacks,Zt===null?C.callbacks=[_t]:Zt.push(_t))}else Zt={lane:_t,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ut===null?(Xe=ut=Zt,Ne=Ke):ut=ut.next=Zt,V|=_t;if(ie=ie.next,ie===null){if(ie=C.shared.pending,ie===null)break;Zt=ie,ie=Zt.next,Zt.next=null,C.lastBaseUpdate=Zt,C.shared.pending=null}}while(!0);ut===null&&(Ne=Ke),C.baseState=Ne,C.firstBaseUpdate=Xe,C.lastBaseUpdate=ut,L===null&&(C.shared.lanes=0),To|=V,l.lanes=V,l.memoizedState=Ke}}function oo(l,c){if(typeof l!="function")throw Error(i(191,l));l.call(c)}function lo(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)oo(g[l],c)}function ko(l,c){l=Ya,E(ol,l),E(fu,c),Ya=l|c.baseLanes}function Aa(){E(ol,Ya),E(fu,fu.current)}function H(){Ya=ol.current,b(fu),b(ol)}function ue(l){var c=l.alternate;E(pi,pi.current&1),E(qr,l),Yr===null&&(c===null||fu.current!==null||c.memoizedState!==null)&&(Yr=l)}function we(l){E(pi,pi.current),E(qr,l),Yr===null&&(Yr=l)}function Se(l){l.tag===22?(E(pi,pi.current),E(qr,l),Yr===null&&(Yr=l)):de()}function de(){E(pi,pi.current),E(qr,qr.current)}function at(l){b(qr),Yr===l&&(Yr=null),b(pi)}function vt(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||nl(g)||_d(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Je(){throw Error(i(321))}function bt(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!xi(l[g],c[g]))return!1;return!0}function Tt(l,c,g,x,C,L){return Eo=L,Jt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Pt.H=l===null||l.memoizedState===null?li:qa,_n=!1,L=g(x,C),_n=!1,tn&&(L=At(c,g,x,C)),It(l),L}function It(l){Pt.H=vs;var c=Dt!==null&&Dt.next!==null;if(Eo=0,qt=Dt=Jt=null,an=!1,Ws=0,ua=null,c)throw Error(i(300));l===null||Zn||(l=l.dependencies,l!==null&&Ct(l)&&(Zn=!0))}function At(l,c,g,x){Jt=l;var C=0;do{if(tn&&(ua=null),Ws=0,tn=!1,25<=C)throw Error(i(301));if(C+=1,qt=Dt=null,l.updateQueue!=null){var L=l.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}Pt.H=ll,L=c(g,x)}while(tn);return L}function Ft(){var l=Pt.H,c=l.useState()[0];return c=typeof c.then=="function"?Vt(c):c,l=l.useState()[0],(Dt!==null?Dt.memoizedState:null)!==l&&(Jt.flags|=1024),c}function En(){var l=br!==0;return br=0,l}function Vn(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function zn(l){if(an){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}an=!1}Eo=0,qt=Dt=Jt=null,tn=!1,Ws=br=0,ua=null}function jt(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Jt.memoizedState=qt=l:qt=qt.next=l,qt}function ht(){if(Dt===null){var l=Jt.alternate;l=l!==null?l.memoizedState:null}else l=Dt.next;var c=qt===null?Jt.memoizedState:qt.next;if(c!==null)qt=c,Dt=l;else{if(l===null)throw Jt.alternate===null?Error(i(467)):Error(i(310));Dt=l,l={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},qt===null?Jt.memoizedState=qt=l:qt=qt.next=l}return qt}function xn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vt(l){var c=Ws;return Ws+=1,ua===null&&(ua=[]),l=Lt(ua,l,c),c=Jt,(qt===null?c.memoizedState:qt.next)===null&&(c=c.alternate,Pt.H=c===null||c.memoizedState===null?li:qa),l}function Di(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vt(l);if(l.$$typeof===Ps)return q(l)}throw Error(i(438,String(l)))}function sa(l){var c=null,g=Jt.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var x=Jt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(C){return C.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=xn(),Jt.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),x=0;x<l;x++)g[x]=Dm;return c.index++,g}function jn(l,c){return typeof c=="function"?c(l):c}function Er(l){var c=ht();return Cn(c,Dt,l)}function Cn(l,c,g){var x=l.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=g;var C=l.baseQueue,L=x.pending;if(L!==null){if(C!==null){var V=C.next;C.next=L.next,L.next=V}c.baseQueue=C=L,x.pending=null}if(L=l.baseState,C===null)l.memoizedState=L;else{c=C.next;var ie=V=null,Ne=null,Xe=c,ut=!1;do{var Ke=Xe.lane&-536870913;if(Ke!==Xe.lane?(mn&Ke)===Ke:(Eo&Ke)===Ke){var _t=Xe.revertLane;if(_t===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),Ke===Mo&&(ut=!0);else if((Eo&_t)===_t){Xe=Xe.next,_t===Mo&&(ut=!0);continue}else Ke={lane:0,revertLane:Xe.revertLane,gesture:null,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Ne===null?(ie=Ne=Ke,V=L):Ne=Ne.next=Ke,Jt.lanes|=_t,To|=_t;Ke=Xe.action,_n&&g(L,Ke),L=Xe.hasEagerState?Xe.eagerState:g(L,Ke)}else _t={lane:Ke,revertLane:Xe.revertLane,gesture:Xe.gesture,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Ne===null?(ie=Ne=_t,V=L):Ne=Ne.next=_t,Jt.lanes|=Ke,To|=Ke;Xe=Xe.next}while(Xe!==null&&Xe!==c);if(Ne===null?V=L:Ne.next=ie,!xi(L,l.memoizedState)&&(Zn=!0,ut&&(g=Xi,g!==null)))throw g;l.memoizedState=L,l.baseState=V,l.baseQueue=Ne,x.lastRenderedState=L}return C===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function Vi(l){var c=ht(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=l;var x=g.dispatch,C=g.pending,L=c.memoizedState;if(C!==null){g.pending=null;var V=C=C.next;do L=l(L,V.action),V=V.next;while(V!==C);xi(L,c.memoizedState)||(Zn=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),g.lastRenderedState=L}return[L,x]}function Li(l,c,g){var x=Jt,C=ht(),L=pn;if(L){if(g===void 0)throw Error(i(407));g=g()}else g=c();var V=!xi((Dt||C).memoizedState,g);if(V&&(C.memoizedState=g,Zn=!0),C=C.queue,Vu(Vl.bind(null,x,C,l),[l]),C.getSnapshot!==c||V||qt!==null&&qt.memoizedState.tag&1){if(x.flags|=2048,cs(9,{destroy:void 0},$i.bind(null,x,C,g,c),null),on===null)throw Error(i(349));L||(Eo&127)!==0||Ji(x,c,g)}return g}function Ji(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=Jt.updateQueue,c===null?(c=xn(),Jt.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function $i(l,c,g,x){c.value=g,c.getSnapshot=x,Cs(c)&&iv(l)}function Vl(l,c,g){return g(function(){Cs(c)&&iv(l)})}function Cs(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!xi(l,g)}catch{return!0}}function iv(l){var c=vr(l,2);c!==null&&ai(c,l,2)}function tm(l){var c=jt();if(typeof l=="function"){var g=l;if(l=g(),_n){K(!0);try{g()}finally{K(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:l},c}function af(l,c,g,x){return l.baseState=g,Cn(l,Dt,typeof x=="function"?x:jn)}function uo(l,c,g,x,C){if(Wh(l))throw Error(i(485));if(l=c.action,l!==null){var L={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){L.listeners.push(V)}};Pt.T!==null?g(!0):L.isTransition=!1,x(L),g=c.pending,g===null?(L.next=c.pending=L,zh(c,L)):(L.next=g.next,c.pending=g.next=L)}}function zh(l,c){var g=c.action,x=c.payload,C=l.state;if(c.isTransition){var L=Pt.T,V={};Pt.T=V;try{var ie=g(C,x),Ne=Pt.S;Ne!==null&&Ne(V,ie),Fh(l,c,ie)}catch(Xe){Vo(l,c,Xe)}finally{L!==null&&V.types!==null&&(L.types=V.types),Pt.T=L}}else try{L=g(C,x),Fh(l,c,L)}catch(Xe){Vo(l,c,Xe)}}function Fh(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(x){Hl(l,c,x)},function(x){return Vo(l,c,x)}):Hl(l,c,g)}function Hl(l,c,g){c.status="fulfilled",c.value=g,nm(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,zh(l,g)))}function Vo(l,c,g){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=g,nm(c),c=c.next;while(c!==x)}l.action=null}function nm(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function Bh(l,c){return c}function im(l,c){if(pn){var g=on.formState;if(g!==null){e:{var x=Jt;if(pn){if(ei){var C=Qv(ei,Dr);if(C){ei=Jv(C),x=Zm(C);break e}}ee(x)}x=!1}x&&(c=g[0])}}g=jt(),g.memoizedState=g.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:c},g.queue=x,g=uv.bind(null,Jt,x),x.dispatch=g,x=tm(!1);var L=Gh.bind(null,Jt,!1,x.queue);return x=jt(),C={state:c,dispatch:null,action:l,pending:null},x.queue=C,g=uo.bind(null,Jt,C,L,g),C.dispatch=g,x.memoizedState=l,[c,g,!1]}function Bu(l){var c=ht();return wa(c,Dt,l)}function wa(l,c,g){if(c=Cn(l,c,Bh)[0],l=Er(jn)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=Vt(c)}catch(V){throw V===qi?Gs:V}else x=c;c=ht();var C=c.queue,L=C.dispatch;return g!==c.memoizedState&&(Jt.flags|=2048,cs(9,{destroy:void 0},rm.bind(null,C,g),null)),[x,L,l]}function rm(l,c){l.action=c}function ku(l){var c=ht(),g=Dt;if(g!==null)return wa(c,g,l);ht(),c=c.memoizedState,g=ht();var x=g.queue.dispatch;return g.memoizedState=l,[c,x,!1]}function cs(l,c,g,x){return l={tag:l,create:g,deps:x,inst:c,next:null},c=Jt.updateQueue,c===null&&(c=xn(),Jt.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(x=g.next,g.next=l,l.next=x,c.lastEffect=l),l}function kh(){return ht().memoizedState}function Gl(l,c,g,x){var C=jt();Jt.flags|=l,C.memoizedState=cs(1|c,{destroy:void 0},g,x===void 0?null:x)}function of(l,c,g,x){var C=ht();x=x===void 0?null:x;var L=C.memoizedState.inst;Dt!==null&&x!==null&&bt(x,Dt.memoizedState.deps)?C.memoizedState=cs(c,L,g,x):(Jt.flags|=l,C.memoizedState=cs(1|c,L,g,x))}function lf(l,c){Gl(8390656,8,l,c)}function Vu(l,c){of(2048,8,l,c)}function rv(l){Jt.flags|=4;var c=Jt.updateQueue;if(c===null)c=xn(),Jt.updateQueue=c,c.events=[l];else{var g=c.events;g===null?c.events=[l]:g.push(l)}}function Tr(l){var c=ht().memoizedState;return rv({ref:c,nextImpl:l}),function(){if((fn&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function Ho(l,c){return of(4,2,l,c)}function uf(l,c){return of(4,4,l,c)}function Hu(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function sv(l,c,g){g=g!=null?g.concat([l]):null,of(4,4,Hu.bind(null,c,l),g)}function cf(){}function Vh(l,c){var g=ht();c=c===void 0?null:c;var x=g.memoizedState;return c!==null&&bt(c,x[1])?x[0]:(g.memoizedState=[l,c],l)}function Gu(l,c){var g=ht();c=c===void 0?null:c;var x=g.memoizedState;if(c!==null&&bt(c,x[1]))return x[0];if(x=l(),_n){K(!0);try{l()}finally{K(!1)}}return g.memoizedState=[x,c],x}function Wu(l,c,g){return g===void 0||(Eo&1073741824)!==0&&(mn&261930)===0?l.memoizedState=c:(l.memoizedState=g,l=ho(),Jt.lanes|=l,To|=l,g)}function sm(l,c,g,x){return xi(g,c)?g:fu.current!==null?(l=Wu(l,g,x),xi(l,c)||(Zn=!0),l):(Eo&42)===0||(Eo&1073741824)!==0&&(mn&261930)===0?(Zn=!0,l.memoizedState=g):(l=ho(),Jt.lanes|=l,To|=l,c)}function av(l,c,g,x,C){var L=Us();dn(L!==0&&8>L?L:8);var V=Pt.T,ie={};Pt.T=ie,Gh(l,!1,c,g);try{var Ne=C(),Xe=Pt.S;if(Xe!==null&&Xe(ie,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var ut=et(Ne,x);ff(l,c,ut,Jn(l))}else ff(l,c,x,Jn(l))}catch(Ke){ff(l,c,{then:function(){},status:"rejected",reason:Ke},Jn())}finally{dn(L),V!==null&&ie.types!==null&&(V.types=ie.types),Pt.T=V}}function ov(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:iu,baseState:iu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:iu},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function am(){return q(ru)}function Hh(){return ht().memoizedState}function lv(){return ht().memoizedState}function lS(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=Jn();l=ls(g);var x=us(c,l,g);x!==null&&(ai(x,c,g),Bo(x,c,g)),c={cache:Le()},l.payload=c;return}c=c.return}}function uS(l,c,g){var x=Jn();g={lane:x,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Wh(l)?cv(c,g):(g=Bl(l,c,g,x),g!==null&&(ai(g,l,x),fv(g,c,x)))}function uv(l,c,g){var x=Jn();ff(l,c,g,x)}function ff(l,c,g,x){var C={lane:x,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Wh(l))cv(c,C);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var V=c.lastRenderedState,ie=L(V,g);if(C.hasEagerState=!0,C.eagerState=ie,xi(ie,V))return so(l,c,C,0),on===null&&Fo(),!1}catch{}finally{}if(g=Bl(l,c,C,x),g!==null)return ai(g,l,x),fv(g,c,x),!0}return!1}function Gh(l,c,g,x){if(x={lane:2,revertLane:ve(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Wh(l)){if(c)throw Error(i(479))}else c=Bl(l,g,x,2),c!==null&&ai(c,l,2)}function Wh(l){var c=l.alternate;return l===Jt||c!==null&&c===Jt}function cv(l,c){tn=an=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function fv(l,c,g){if((g&4194048)!==0){var x=c.lanes;x&=l.pendingLanes,g|=x,c.lanes=g,I(l,g)}}function om(l,c,g,x){c=l.memoizedState,g=g(x,c),g=g==null?c:cd({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Xh(l,c,g,x,C,L,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,L,V):c.prototype&&c.prototype.isPureReactComponent?!Be(g,x)||!Be(C,L):!0}function hv(l,c,g,x){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,x),c.state!==l&&Bf.enqueueReplaceState(c,c.state,null)}function Wl(l,c){var g=c;if("ref"in c){g={};for(var x in c)x!=="ref"&&(g[x]=c[x])}if(l=l.defaultProps){g===c&&(g=cd({},g));for(var C in l)g[C]===void 0&&(g[C]=l[C])}return g}function qh(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function lm(l,c,g){try{var x=l.onCaughtError;x(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function um(l,c,g){return g=ls(g),g.tag=3,g.payload={element:null},g.callback=function(){qh(l,c)},g}function dv(l){return l=ls(l),l.tag=3,l}function pv(l,c,g,x){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var L=x.value;l.payload=function(){return C(L)},l.callback=function(){lm(c,g,x)}}var V=g.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){lm(c,g,x),typeof C!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var ie=x.stack;this.componentDidCatch(x.value,{componentStack:ie!==null?ie:""})})}function cS(l,c,g,x,C){if(g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=g.alternate,c!==null&&Ee(c,g,C,!0),g=qr.current,g!==null){switch(g.tag){case 31:case 13:return Yr===null?tc():g.alternate===null&&ci===0&&(ci=3),g.flags&=-257,g.flags|=65536,g.lanes=C,x===Wa?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([x]):c.add(x),rc(l,x,C)),!1;case 22:return g.flags|=65536,x===Wa?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([x]):g.add(x)),rc(l,x,C)),!1}throw Error(i(435,g.tag))}return rc(l,x,C),tc(),!1}if(pn)return c=qr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=C,x!==Od&&(l=Error(i(422),{cause:x}),We(Ie(l,g)))):(x!==Od&&(c=Error(i(423),{cause:x}),We(Ie(c,g))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,x=Ie(x,g),C=um(l.stateNode,x,C),kl(l,C),ci!==4&&(ci=2)),!1;var L=Error(i(520),{cause:x});if(L=Ie(L,g),Vf===null?Vf=[L]:Vf.push(L),ci!==4&&(ci=2),c===null)return!0;x=Ie(x,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=C&-C,g.lanes|=l,l=um(g.stateNode,x,l),kl(g,l),!1;case 1:if(c=g.type,L=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Ao===null||!Ao.has(L))))return g.flags|=65536,C&=-C,g.lanes|=C,C=dv(C),pv(C,l,g,x),kl(g,C),!1}g=g.return}while(g!==null);return!1}function lr(l,c,g,x){c.child=l===null?dg(c,null,g,x):fr(c,l.child,g,x)}function mv(l,c,g,x,C){g=g.render;var L=c.ref;if("ref"in x){var V={};for(var ie in x)ie!=="ref"&&(V[ie]=x[ie])}else V=x;return $e(c),x=Tt(l,c,g,V,L,C),ie=En(),l!==null&&!Zn?(Vn(l,c,C),Ca(l,c,C)):(pn&&ie&&oe(c),c.flags|=1,lr(l,c,x,C),c.child)}function gv(l,c,g,x,C){if(l===null){var L=g.type;return typeof L=="function"&&!Zl(L)&&L.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=L,vv(l,c,L,x,C)):(l=go(g.type,null,x,c,c.mode,C),l.ref=c.ref,l.return=c,c.child=l)}if(L=l.child,!df(l,C)){var V=L.memoizedProps;if(g=g.compare,g=g!==null?g:Be,g(V,x)&&l.ref===c.ref)return Ca(l,c,C)}return c.flags|=1,l=ds(L,x),l.ref=c.ref,l.return=c,c.child=l}function vv(l,c,g,x,C){if(l!==null){var L=l.memoizedProps;if(Be(L,x)&&l.ref===c.ref)if(Zn=!1,c.pendingProps=x=L,df(l,C))(l.flags&131072)!==0&&(Zn=!0);else return c.lanes=l.lanes,Ca(l,c,C)}return jh(l,c,g,x,C)}function _v(l,c,g,x){var C=x.children,L=l!==null?l.memoizedState:null;if(l===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((c.flags&128)!==0){if(L=L!==null?L.baseLanes|g:g,l!==null){for(x=c.child=l.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;x=C&~L}else x=0,c.child=null;return Xu(l,c,L,g,x)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&ct(c,L!==null?L.cachePool:null),L!==null?ko(c,L):Aa(),Se(c);else return x=c.lanes=536870912,Xu(l,c,L!==null?L.baseLanes|g:g,g,x)}else L!==null?(ct(c,L.cachePool),ko(c,L),de(),c.memoizedState=null):(l!==null&&ct(c,null),Aa(),de());return lr(l,c,C,g),c.child}function Xl(l,c){return l!==null&&l.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Xu(l,c,g,x,C){var L=Ye();return L=L===null?null:{parent:_i?ti._currentValue:ti._currentValue2,pool:L},c.memoizedState={baseLanes:g,cachePool:L},l!==null&&ct(c,null),Aa(),Se(c),l!==null&&Ee(l,c,x,!0),c.childLanes=C,null}function Yh(l,c){return c=Go({mode:c.mode,children:c.children},l.mode),c.ref=l.ref,l.child=c,c.return=l,c}function cm(l,c,g){return fr(c,l.child,null,g),l=Yh(c,c.pendingProps),l.flags|=2,at(c),c.memoizedState=null,l}function yv(l,c,g){var x=c.pendingProps,C=(c.flags&128)!==0;if(c.flags&=-129,l===null){if(pn){if(x.mode==="hidden")return l=Yh(c,x),c.lanes=536870912,Xl(null,l);if(we(c),(l=ei)?(l=Qm(l,Dr),l!==null&&(c.memoizedState={dehydrated:l,treeContext:Bs!==null?{id:ur,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},g=wm(l),g.return=c,c.child=g,Wi=c,ei=null)):l=null,l===null)throw ee(c);return c.lanes=536870912,null}return Yh(c,x)}var L=l.memoizedState;if(L!==null){var V=L.dehydrated;if(we(c),C)if(c.flags&256)c.flags&=-257,c=cm(l,c,g);else if(c.memoizedState!==null)c.child=l.child,c.flags|=128,c=null;else throw Error(i(558));else if(Zn||Ee(l,c,g,!1),C=(g&l.childLanes)!==0,Zn||C){if(x=on,x!==null&&(V=O(x,g),V!==0&&V!==L.retryLane))throw L.retryLane=V,vr(l,V),ai(x,l,V),Nr;tc(),c=cm(l,c,g)}else l=L.treeContext,$n&&(ei=n_(V),Wi=c,pn=!0,Ga=null,Dr=!1,l!==null&&Ue(c,l)),c=Yh(c,x),c.flags|=4096;return c}return l=ds(l.child,{mode:x.mode,children:x.children}),l.ref=c.ref,c.child=l,l.return=c,l}function hf(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(l===null||l.ref!==g)&&(c.flags|=4194816)}}function jh(l,c,g,x,C){return $e(c),g=Tt(l,c,g,x,void 0,C),x=En(),l!==null&&!Zn?(Vn(l,c,C),Ca(l,c,C)):(pn&&x&&oe(c),c.flags|=1,lr(l,c,g,C),c.child)}function fm(l,c,g,x,C,L){return $e(c),c.updateQueue=null,g=At(c,x,g,C),It(l),x=En(),l!==null&&!Zn?(Vn(l,c,L),Ca(l,c,L)):(pn&&x&&oe(c),c.flags|=1,lr(l,c,g,L),c.child)}function ql(l,c,g,x,C){if($e(c),c.stateNode===null){var L=ka,V=g.contextType;typeof V=="object"&&V!==null&&(L=q(V)),L=new g(x,L),c.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=Bf,c.stateNode=L,L._reactInternals=c,L=c.stateNode,L.props=x,L.state=c.memoizedState,L.refs={},ki(c),V=g.contextType,L.context=typeof V=="object"&&V!==null?q(V):ka,L.state=c.memoizedState,V=g.getDerivedStateFromProps,typeof V=="function"&&(om(c,g,V,x),L.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(V=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),V!==L.state&&Bf.enqueueReplaceState(L,L.state,null),ao(c,x,L,C),ra(),L.state=c.memoizedState),typeof L.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(l===null){L=c.stateNode;var ie=c.memoizedProps,Ne=Wl(g,ie);L.props=Ne;var Xe=L.context,ut=g.contextType;V=ka,typeof ut=="object"&&ut!==null&&(V=q(ut));var Ke=g.getDerivedStateFromProps;ut=typeof Ke=="function"||typeof L.getSnapshotBeforeUpdate=="function",ie=c.pendingProps!==ie,ut||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ie||Xe!==V)&&hv(c,L,x,V),gs=!1;var _t=c.memoizedState;L.state=_t,ao(c,x,L,C),ra(),Xe=c.memoizedState,ie||_t!==Xe||gs?(typeof Ke=="function"&&(om(c,g,Ke,x),Xe=c.memoizedState),(Ne=gs||Xh(c,g,Ne,x,_t,Xe,V))?(ut||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(c.flags|=4194308)):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Xe),L.props=x,L.state=Xe,L.context=V,x=Ne):(typeof L.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{L=c.stateNode,os(l,c),V=c.memoizedProps,ut=Wl(g,V),L.props=ut,Ke=c.pendingProps,_t=L.context,Xe=g.contextType,Ne=ka,typeof Xe=="object"&&Xe!==null&&(Ne=q(Xe)),ie=g.getDerivedStateFromProps,(Xe=typeof ie=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(V!==Ke||_t!==Ne)&&hv(c,L,x,Ne),gs=!1,_t=c.memoizedState,L.state=_t,ao(c,x,L,C),ra();var Zt=c.memoizedState;V!==Ke||_t!==Zt||gs||l!==null&&l.dependencies!==null&&Ct(l.dependencies)?(typeof ie=="function"&&(om(c,g,ie,x),Zt=c.memoizedState),(ut=gs||Xh(c,g,ut,x,_t,Zt,Ne)||l!==null&&l.dependencies!==null&&Ct(l.dependencies))?(Xe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(x,Zt,Ne),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(x,Zt,Ne)),typeof L.componentDidUpdate=="function"&&(c.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof L.componentDidUpdate!="function"||V===l.memoizedProps&&_t===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&_t===l.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Zt),L.props=x,L.state=Zt,L.context=Ne,x=ut):(typeof L.componentDidUpdate!="function"||V===l.memoizedProps&&_t===l.memoizedState||(c.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&_t===l.memoizedState||(c.flags|=1024),x=!1)}return L=x,hf(l,c),x=(c.flags&128)!==0,L||x?(L=c.stateNode,g=x&&typeof g.getDerivedStateFromError!="function"?null:L.render(),c.flags|=1,l!==null&&x?(c.child=fr(c,l.child,null,C),c.child=fr(c,null,g,C)):lr(l,c,g,C),c.memoizedState=L.state,l=c.child):l=Ca(l,c,C),l}function xv(l,c,g,x){return Et(),c.flags|=256,lr(l,c,g,x),c.child}function hm(l){return{baseLanes:l,cachePool:je()}}function dm(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=Or),l}function pm(l,c,g){var x=c.pendingProps,C=!1,L=(c.flags&128)!==0,V;if((V=L)||(V=l!==null&&l.memoizedState===null?!1:(pi.current&2)!==0),V&&(C=!0,c.flags&=-129),V=(c.flags&32)!==0,c.flags&=-33,l===null){if(pn){if(C?ue(c):de(),(l=ei)?(l=a_(l,Dr),l!==null&&(c.memoizedState={dehydrated:l,treeContext:Bs!==null?{id:ur,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},g=wm(l),g.return=c,c.child=g,Wi=c,ei=null)):l=null,l===null)throw ee(c);return _d(l)?c.lanes=32:c.lanes=536870912,null}var ie=x.children;return x=x.fallback,C?(de(),C=c.mode,ie=Go({mode:"hidden",children:ie},C),x=Is(x,C,g,null),ie.return=c,x.return=c,ie.sibling=x,c.child=ie,x=c.child,x.memoizedState=hm(g),x.childLanes=dm(l,V,g),c.memoizedState=hu,Xl(null,x)):(ue(c),Zh(c,ie))}var Ne=l.memoizedState;if(Ne!==null&&(ie=Ne.dehydrated,ie!==null)){if(L)c.flags&256?(ue(c),c.flags&=-257,c=Yl(l,c,g)):c.memoizedState!==null?(de(),c.child=l.child,c.flags|=128,c=null):(de(),ie=x.fallback,C=c.mode,x=Go({mode:"visible",children:x.children},C),ie=Is(ie,C,g,null),ie.flags|=2,x.return=c,ie.return=c,x.sibling=ie,c.child=x,fr(c,l.child,null,g),x=c.child,x.memoizedState=hm(g),x.childLanes=dm(l,V,g),c.memoizedState=hu,c=Xl(null,x));else if(ue(c),_d(ie))V=yd(ie).digest,x=Error(i(419)),x.stack="",x.digest=V,We({value:x,source:null,stack:null}),c=Yl(l,c,g);else if(Zn||Ee(l,c,g,!1),V=(g&l.childLanes)!==0,Zn||V){if(V=on,V!==null&&(x=O(V,g),x!==0&&x!==Ne.retryLane))throw Ne.retryLane=x,vr(l,x),ai(V,l,x),Nr;nl(ie)||tc(),c=Yl(l,c,g)}else nl(ie)?(c.flags|=192,c.child=l.child,c=null):(l=Ne.treeContext,$n&&(ei=i_(ie),Wi=c,pn=!0,Ga=null,Dr=!1,l!==null&&Ue(c,l)),c=Zh(c,x.children),c.flags|=4096);return c}return C?(de(),ie=x.fallback,C=c.mode,Ne=l.child,L=Ne.sibling,x=ds(Ne,{mode:"hidden",children:x.children}),x.subtreeFlags=Ne.subtreeFlags&65011712,L!==null?ie=ds(L,ie):(ie=Is(ie,C,g,null),ie.flags|=2),ie.return=c,x.return=c,x.sibling=ie,c.child=x,Xl(null,x),x=c.child,ie=l.child.memoizedState,ie===null?ie=hm(g):(C=ie.cachePool,C!==null?(Ne=_i?ti._currentValue:ti._currentValue2,C=C.parent!==Ne?{parent:Ne,pool:Ne}:C):C=je(),ie={baseLanes:ie.baseLanes|g,cachePool:C}),x.memoizedState=ie,x.childLanes=dm(l,V,g),c.memoizedState=hu,Xl(l.child,x)):(ue(c),g=l.child,l=g.sibling,g=ds(g,{mode:"visible",children:x.children}),g.return=c,g.sibling=null,l!==null&&(V=c.deletions,V===null?(c.deletions=[l],c.flags|=16):V.push(l)),c.child=g,c.memoizedState=null,g)}function Zh(l,c){return c=Go({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function Go(l,c){return l=t(22,l,null,c),l.lanes=0,l}function Yl(l,c,g){return fr(c,l.child,null,g),l=Zh(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function bv(l,c,g){l.lanes|=c;var x=l.alternate;x!==null&&(x.lanes|=c),Y(l.return,c,g)}function qu(l,c,g,x,C,L){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:C,treeForkCount:L}:(V.isBackwards=c,V.rendering=null,V.renderingStartTime=0,V.last=x,V.tail=g,V.tailMode=C,V.treeForkCount=L)}function mm(l,c,g){var x=c.pendingProps,C=x.revealOrder,L=x.tail;x=x.children;var V=pi.current,ie=(V&2)!==0;if(ie?(V=V&1|2,c.flags|=128):V&=1,E(pi,V),lr(l,c,x,g),x=pn?Uf:0,!ie&&l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&bv(l,g,c);else if(l.tag===19)bv(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(g=c.child,C=null;g!==null;)l=g.alternate,l!==null&&vt(l)===null&&(C=g),g=g.sibling;g=C,g===null?(C=c.child,c.child=null):(C=g.sibling,g.sibling=null),qu(c,!1,C,g,L,x);break;case"backwards":case"unstable_legacy-backwards":for(g=null,C=c.child,c.child=null;C!==null;){if(l=C.alternate,l!==null&&vt(l)===null){c.child=C;break}l=C.sibling,C.sibling=g,g=C,C=l}qu(c,!0,g,null,L,x);break;case"together":qu(c,!1,null,null,void 0,x);break;default:c.memoizedState=null}return c.child}function Ca(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),To|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(Ee(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(i(153));if(c.child!==null){for(l=c.child,g=ds(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=ds(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function df(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Ct(l)))}function gm(l,c,g){switch(c.tag){case 3:rt(c,c.stateNode.containerInfo),Ae(c,ti,l.memoizedState.cache),Et();break;case 27:case 5:Re(c);break;case 4:rt(c,c.stateNode.containerInfo);break;case 10:Ae(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,we(c),null;break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(ue(c),c.flags|=128,null):(g&c.child.childLanes)!==0?pm(l,c,g):(ue(c),l=Ca(l,c,g),l!==null?l.sibling:null);ue(c);break;case 19:var C=(l.flags&128)!==0;if(x=(g&c.childLanes)!==0,x||(Ee(l,c,g,!1),x=(g&c.childLanes)!==0),C){if(x)return mm(l,c,g);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),E(pi,pi.current),x)break;return null;case 22:return c.lanes=0,_v(l,c,g,c.pendingProps);case 24:Ae(c,ti,l.memoizedState.cache)}return Ca(l,c,g)}function vm(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)Zn=!0;else{if(!df(l,g)&&(c.flags&128)===0)return Zn=!1,gm(l,c,g);Zn=(l.flags&131072)!==0}else Zn=!1,pn&&(c.flags&1048576)!==0&&X(c,Uf,c.index);switch(c.lanes=0,c.tag){case 16:e:{var x=c.pendingProps;if(l=en(c.elementType),c.type=l,typeof l=="function")Zl(l)?(x=Wl(l,x),c.tag=1,c=ql(null,c,l,x,g)):(c.tag=0,c=jh(null,c,l,x,g));else{if(l!=null){var C=l.$$typeof;if(C===sc){c.tag=11,c=mv(null,c,l,x,g);break e}else if(C===hd){c.tag=14,c=gv(null,c,l,x,g);break e}}throw c=_(l)||l,Error(i(306,c,""))}}return c;case 0:return jh(l,c,c.type,c.pendingProps,g);case 1:return x=c.type,C=Wl(x,c.pendingProps),ql(l,c,x,C,g);case 3:e:{if(rt(c,c.stateNode.containerInfo),l===null)throw Error(i(387));var L=c.pendingProps;C=c.memoizedState,x=C.element,os(l,c),ao(c,L,null,g);var V=c.memoizedState;if(L=V.cache,Ae(c,ti,L),L!==C.cache&&dt(c,[ti],g,!0),ra(),L=V.element,$n&&C.isDehydrated)if(C={element:L,isDehydrated:!1,cache:V.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=xv(l,c,L,g);break e}else if(L!==x){x=Ie(Error(i(424)),c),We(x),c=xv(l,c,L,g);break e}else for($n&&(ei=t_(c.stateNode.containerInfo),Wi=c,pn=!0,Ga=null,Dr=!0),g=dg(c,null,L,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Et(),L===x){c=Ca(l,c,g);break e}lr(l,c,L,g)}c=c.child}return c;case 26:if(zs)return hf(l,c),l===null?(g=ng(c.type,null,c.pendingProps,null))?c.memoizedState=g:pn||(c.stateNode=Md(c.type,c.pendingProps,cr.current,c)):c.memoizedState=ng(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(Gi)return Re(c),l===null&&Gi&&pn&&(x=c.stateNode=Ed(c.type,c.pendingProps,cr.current,ir.current,!1),Wi=c,Dr=!0,ei=Km(c.type,x,ei)),lr(l,c,c.pendingProps.children,g),hf(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&pn&&(m_(c.type,c.pendingProps,ir.current),(C=x=ei)&&(x=r_(x,c.type,c.pendingProps,Dr),x!==null?(c.stateNode=x,Wi=c,ei=e_(x),Dr=!1,C=!0):C=!1),C||ee(c)),Re(c),C=c.type,L=c.pendingProps,V=l!==null?l.memoizedProps:null,x=L.children,Rr(C,L)?x=null:V!==null&&Rr(C,V)&&(c.flags|=32),c.memoizedState!==null&&(C=Tt(l,c,Ft,null,null,g),_i?ru._currentValue=C:ru._currentValue2=C),hf(l,c),lr(l,c,x,g),c.child;case 6:return l===null&&pn&&(tg(c.pendingProps,ir.current),(l=g=ei)&&(g=s_(g,c.pendingProps,Dr),g!==null?(c.stateNode=g,Wi=c,ei=null,l=!0):l=!1),l||ee(c)),null;case 13:return pm(l,c,g);case 4:return rt(c,c.stateNode.containerInfo),x=c.pendingProps,l===null?c.child=fr(c,null,x,g):lr(l,c,x,g),c.child;case 11:return mv(l,c,c.type,c.pendingProps,g);case 7:return lr(l,c,c.pendingProps,g),c.child;case 8:return lr(l,c,c.pendingProps.children,g),c.child;case 12:return lr(l,c,c.pendingProps.children,g),c.child;case 10:return x=c.pendingProps,Ae(c,c.type,x.value),lr(l,c,x.children,g),c.child;case 9:return C=c.type._context,x=c.pendingProps.children,$e(c),C=q(C),x=x(C),c.flags|=1,lr(l,c,x,g),c.child;case 14:return gv(l,c,c.type,c.pendingProps,g);case 15:return vv(l,c,c.type,c.pendingProps,g);case 19:return mm(l,c,g);case 31:return yv(l,c,g);case 22:return _v(l,c,g,c.pendingProps);case 24:return $e(c),x=q(ti),l===null?(C=Ye(),C===null&&(C=on,L=Le(),C.pooledCache=L,L.refCount++,L!==null&&(C.pooledCacheLanes|=g),C=L),c.memoizedState={parent:x,cache:C},ki(c),Ae(c,ti,C)):((l.lanes&g)!==0&&(os(l,c),ao(c,null,null,g),ra()),C=l.memoizedState,L=c.memoizedState,C.parent!==x?(C={parent:x,cache:x},c.memoizedState=C,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=C),Ae(c,ti,x)):(x=L.cache,Ae(c,ti,x),x!==C.cache&&dt(c,[ti],g,!0))),lr(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Rs(l){l.flags|=4}function pf(l){ps&&(l.flags|=8)}function Sv(l,c){if(l!==null&&l.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(l=c.child;l!==null;){if((l.flags&8218)!==0||(l.subtreeFlags&8218)!==0)return!0;l=l.sibling}return!1}function _m(l,c,g,x){if(vn)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)Cf(l,g.stateNode);else if(!(g.tag===4||Gi&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(ps)for(var C=c.child;C!==null;){if(C.tag===5){var L=C.stateNode;g&&x&&(L=Kv(L,C.type,C.memoizedProps)),Cf(l,L)}else if(C.tag===6)L=C.stateNode,g&&x&&(L=jm(L,C.memoizedProps)),Cf(l,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),_m(l,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===c)break;for(;C.sibling===null;){if(C.return===null||C.return===c)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function Mv(l,c,g,x){var C=!1;if(ps)for(var L=c.child;L!==null;){if(L.tag===5){var V=L.stateNode;g&&x&&(V=Kv(V,L.type,L.memoizedProps)),qm(l,V)}else if(L.tag===6)V=L.stateNode,g&&x&&(V=jm(V,L.memoizedProps)),qm(l,V);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)C=L.child,C!==null&&(C.return=L),Mv(l,L,!0,!0),C=!0;else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===c)break;for(;L.sibling===null;){if(L.return===null||L.return===c)return C;L=L.return}L.sibling.return=L.return,L=L.sibling}return C}function Ev(l,c){if(ps&&Sv(l,c)){l=c.stateNode;var g=l.containerInfo,x=Xm();Mv(x,c,!1,!1),l.pendingChildren=x,Rs(c),Zv(g,x)}}function ym(l,c,g,x){if(vn)l.memoizedProps!==x&&Rs(c);else if(ps){var C=l.stateNode,L=l.memoizedProps;if((l=Sv(l,c))||L!==x){var V=ir.current;L=jv(C,g,L,x,!l,null),L===C?c.stateNode=C:(pf(c),Hr(L,g,x,V)&&Rs(c),c.stateNode=L,l&&_m(L,c,!1,!1))}else c.stateNode=C}}function Ar(l,c,g,x,C){if((l.mode&32)!==0&&(g===null?Rf(c,x):cc(c,g,x))){if(l.flags|=16777216,(C&335544128)===C||Im(c,x))if(oi(l.stateNode,c,x))l.flags|=8192;else if(gn())l.flags|=8192;else throw Lr=Wa,Pd}else l.flags&=-16777217}function Yu(l,c){if(ag(c)){if(l.flags|=16777216,!og(c))if(gn())l.flags|=8192;else throw Lr=Wa,Pd}else l.flags&=-16777217}function mf(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?N():536870912,l.lanes|=c,yc|=c)}function ju(l,c){if(!pn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Hn(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,x=0;if(c)for(var C=l.child;C!==null;)g|=C.lanes|C.childLanes,x|=C.subtreeFlags&65011712,x|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)g|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=x,l.childLanes=g,c}function Tv(l,c,g){var x=c.pendingProps;switch(Ce(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(c),null;case 1:return Hn(c),null;case 3:return g=c.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),xe(ti),me(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Yt(c)?Rs(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ge())),Ev(l,c),Hn(c),null;case 26:if(zs){var C=c.type,L=c.memoizedState;return l===null?(Rs(c),L!==null?(Hn(c),Yu(c,L)):(Hn(c),Ar(c,C,null,x,g))):L?L!==l.memoizedState?(Rs(c),Hn(c),Yu(c,L)):(Hn(c),c.flags&=-16777217):(L=l.memoizedProps,vn?L!==x&&Rs(c):ym(l,c,C,x),Hn(c),Ar(c,C,L,x,g)),null}case 27:if(Gi){if(it(c),g=cr.current,C=c.type,l!==null&&c.stateNode!=null)vn?l.memoizedProps!==x&&Rs(c):ym(l,c,C,x);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Hn(c),null}l=ir.current,Yt(c)?ft(c,l):(l=Ed(C,x,g,l,!0),c.stateNode=l,Rs(c))}return Hn(c),null}case 5:if(it(c),C=c.type,l!==null&&c.stateNode!=null)ym(l,c,C,x);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Hn(c),null}if(L=ir.current,Yt(c))ft(c,L),h_(c.stateNode,C,x,L)&&(c.flags|=64);else{var V=Nm(C,x,cr.current,L,c);pf(c),_m(V,c,!1,!1),c.stateNode=V,Hr(V,C,x,L)&&Rs(c)}}return Hn(c),Ar(c,c.type,l===null?null:l.memoizedProps,c.pendingProps,g),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,vn?g!==x&&Rs(c):ps&&(g!==x?(l=cr.current,g=ir.current,pf(c),c.stateNode=yo(x,l,g,c)):c.stateNode=l.stateNode);else{if(typeof x!="string"&&c.stateNode===null)throw Error(i(166));if(l=cr.current,g=ir.current,Yt(c)){if(!$n)throw Error(i(176));if(l=c.stateNode,g=c.memoizedProps,x=null,C=Wi,C!==null)switch(C.tag){case 27:case 5:x=C.memoizedProps}mS(l,g,c,x)||ee(c,!0)}else pf(c),c.stateNode=yo(x,l,g,c)}return Hn(c),null;case 31:if(g=c.memoizedState,l===null||l.memoizedState!==null){if(x=Yt(c),g!==null){if(l===null){if(!x)throw Error(i(318));if(!$n)throw Error(i(556));if(l=c.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));Jm(l,c)}else Et(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Hn(c),l=!1}else g=ge(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return c.flags&256?(at(c),c):(at(c),null);if((c.flags&128)!==0)throw Error(i(558))}return Hn(c),null;case 13:if(x=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Yt(c),x!==null&&x.dehydrated!==null){if(l===null){if(!C)throw Error(i(318));if(!$n)throw Error(i(344));if(C=c.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));l_(C,c)}else Et(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Hn(c),C=!1}else C=ge(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return c.flags&256?(at(c),c):(at(c),null)}return at(c),(c.flags&128)!==0?(c.lanes=g,c):(g=x!==null,l=l!==null&&l.memoizedState!==null,g&&(x=c.child,C=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(C=x.alternate.memoizedState.cachePool.pool),L=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(L=x.memoizedState.cachePool.pool),L!==C&&(x.flags|=2048)),g!==l&&g&&(c.child.flags|=8192),mf(c,c.updateQueue),Hn(c),null);case 4:return me(),Ev(l,c),l===null&&Fn(c.stateNode.containerInfo),Hn(c),null;case 10:return xe(c.type),Hn(c),null;case 19:if(b(pi),x=c.memoizedState,x===null)return Hn(c),null;if(C=(c.flags&128)!==0,L=x.rendering,L===null)if(C)ju(x,!1);else{if(ci!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(L=vt(l),L!==null){for(c.flags|=128,ju(x,!1),l=L.updateQueue,c.updateQueue=l,mf(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)od(g,l),g=g.sibling;return E(pi,pi.current&1|2),pn&&Pe(c,x.treeForkCount),c.child}l=l.sibling}x.tail!==null&&yr()>dl&&(c.flags|=128,C=!0,ju(x,!1),c.lanes=4194304)}else{if(!C)if(l=vt(L),l!==null){if(c.flags|=128,C=!0,l=l.updateQueue,c.updateQueue=l,mf(c,l),ju(x,!0),x.tail===null&&x.tailMode==="hidden"&&!L.alternate&&!pn)return Hn(c),null}else 2*yr()-x.renderingStartTime>dl&&g!==536870912&&(c.flags|=128,C=!0,ju(x,!1),c.lanes=4194304);x.isBackwards?(L.sibling=c.child,c.child=L):(l=x.last,l!==null?l.sibling=L:c.child=L,x.last=L)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=yr(),l.sibling=null,g=pi.current,E(pi,C?g&1|2:g&1),pn&&Pe(c,x.treeForkCount),l):(Hn(c),null);case 22:case 23:return at(c),H(),x=c.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(g&536870912)!==0&&(c.flags&128)===0&&(Hn(c),c.subtreeFlags&6&&(c.flags|=8192)):Hn(c),g=c.updateQueue,g!==null&&mf(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==g&&(c.flags|=2048),l!==null&&b(sl),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),xe(ti),Hn(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function xm(l,c){switch(Ce(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return xe(ti),me(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return it(c),null;case 31:if(c.memoizedState!==null){if(at(c),c.alternate===null)throw Error(i(340));Et()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 13:if(at(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Et()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return b(pi),null;case 4:return me(),null;case 10:return xe(c.type),null;case 22:case 23:return at(c),H(),l!==null&&b(sl),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return xe(ti),null;case 25:return null;default:return null}}function Av(l,c){switch(Ce(c),c.tag){case 3:xe(ti),me();break;case 26:case 27:case 5:it(c);break;case 4:me();break;case 31:c.memoizedState!==null&&at(c);break;case 13:at(c);break;case 19:b(pi);break;case 10:xe(c.type);break;case 22:case 23:at(c),H(),l!==null&&b(sl);break;case 24:xe(ti)}}function Ra(l,c){try{var g=c.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var C=x.next;g=C;do{if((g.tag&l)===l){x=void 0;var L=g.create,V=g.inst;x=L(),V.destroy=x}g=g.next}while(g!==C)}}catch(ie){Gt(c,c.return,ie)}}function Da(l,c,g){try{var x=c.updateQueue,C=x!==null?x.lastEffect:null;if(C!==null){var L=C.next;x=L;do{if((x.tag&l)===l){var V=x.inst,ie=V.destroy;if(ie!==void 0){V.destroy=void 0,C=c;var Ne=g,Xe=ie;try{Xe()}catch(ut){Gt(C,Ne,ut)}}}x=x.next}while(x!==L)}}catch(ut){Gt(c,c.return,ut)}}function Zu(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{lo(c,g)}catch(x){Gt(l,l.return,x)}}}function Kh(l,c,g){g.props=Wl(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(x){Gt(l,c,x)}}function Ku(l,c){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var x=oc(l.stateNode);break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof g=="function"?l.refCleanup=g(x):g.current=x}}catch(C){Gt(l,c,C)}}function _r(l,c){var g=l.ref,x=l.refCleanup;if(g!==null)if(typeof x=="function")try{x()}catch(C){Gt(l,c,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){Gt(l,c,C)}else g.current=null}function jl(l){var c=l.type,g=l.memoizedProps,x=l.stateNode;try{kv(x,c,g,l)}catch(C){Gt(l,l.return,C)}}function gf(l,c,g){try{Vv(l.stateNode,l.type,g,c,l)}catch(x){Gt(l,l.return,x)}}function bm(l){return l.tag===5||l.tag===3||(zs?l.tag===26:!1)||(Gi?l.tag===27&&su(l.type):!1)||l.tag===4}function co(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||bm(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(Gi&&l.tag===27&&su(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Qh(l,c,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?Gv(g,l,c):Vm(g,l);else if(x!==4&&(Gi&&x===27&&su(l.type)&&(g=l.stateNode,c=null),l=l.child,l!==null))for(Qh(l,c,g),l=l.sibling;l!==null;)Qh(l,c,g),l=l.sibling}function vf(l,c,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?Hv(g,l,c):km(g,l);else if(x!==4&&(Gi&&x===27&&su(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(vf(l,c,g),l=l.sibling;l!==null;)vf(l,c,g),l=l.sibling}function Sm(l,c,g){l=l.containerInfo;try{Ym(l,g)}catch(x){Gt(c,c.return,x)}}function wv(l){var c=l.stateNode,g=l.memoizedProps;try{Oi(l.type,g,c,l)}catch(x){Gt(l,l.return,x)}}function fS(l,c){for(dd(l.containerInfo),bi=c;bi!==null;)if(l=bi,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,bi=c;else for(;bi!==null;){l=bi;var g=l.alternate;switch(c=l.flags,l.tag){case 0:if((c&4)!==0&&(c=l.updateQueue,c=c!==null?c.events:null,c!==null))for(var x=0;x<c.length;x++){var C=c[x];C.ref.impl=C.nextImpl}break;case 11:case 15:break;case 1:if((c&1024)!==0&&g!==null){c=void 0,x=l,C=g.memoizedProps,g=g.memoizedState;var L=x.stateNode;try{var V=Wl(x.type,C);c=L.getSnapshotBeforeUpdate(V,g),L.__reactInternalSnapshotBeforeUpdate=c}catch(ie){Gt(x,x.return,ie)}}break;case 3:(c&1024)!==0&&vn&&Wm(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=l.sibling,c!==null){c.return=l.return,bi=c;break}bi=l.return}}function Cv(l,c,g){var x=g.flags;switch(g.tag){case 0:case 11:case 15:wr(l,g),x&4&&Ra(5,g);break;case 1:if(wr(l,g),x&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(V){Gt(g,g.return,V)}else{var C=Wl(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(C,c,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Gt(g,g.return,V)}}x&64&&Zu(g),x&512&&Ku(g,g.return);break;case 3:if(wr(l,g),x&64&&(x=g.updateQueue,x!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=oc(g.child.stateNode);break;case 1:l=g.child.stateNode}try{lo(x,l)}catch(V){Gt(g,g.return,V)}}break;case 27:Gi&&c===null&&x&4&&wv(g);case 26:case 5:if(wr(l,g),c===null){if(x&4)jl(g);else if(x&64){l=g.type,c=g.memoizedProps,C=g.stateNode;try{c_(C,l,c,g)}catch(V){Gt(g,g.return,V)}}}x&512&&Ku(g,g.return);break;case 12:wr(l,g);break;case 31:wr(l,g),x&4&&Ls(l,g);break;case 13:wr(l,g),x&4&&yf(l,g),x&64&&(x=g.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&(g=hS.bind(null,g),xd(x,g))));break;case 22:if(x=g.memoizedState!==null||mi,!x){c=c!==null&&c.memoizedState!==null||gi,C=mi;var L=gi;mi=x,(gi=c)&&!L?Os(l,g,(g.subtreeFlags&8772)!==0):wr(l,g),mi=C,gi=L}break;case 30:break;default:wr(l,g)}}function Mm(l){var c=l.alternate;c!==null&&(l.alternate=null,Mm(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&pd(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Ds(l,c,g){for(g=g.child;g!==null;)_f(l,c,g),g=g.sibling}function _f(l,c,g){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(lu,g)}catch{}switch(g.tag){case 26:if(zs){gi||_r(g,c),Ds(l,c,g),g.memoizedState?il(g.memoizedState):g.stateNode&&sg(g.stateNode);break}case 27:if(Gi){gi||_r(g,c);var x=ui,C=Si;su(g.type)&&(ui=g.stateNode,Si=!1),Ds(l,c,g),nr(g.stateNode),ui=x,Si=C;break}case 5:gi||_r(g,c);case 6:if(vn){if(x=ui,C=Si,ui=null,Ds(l,c,g),ui=x,Si=C,ui!==null)if(Si)try{Hm(ui,g.stateNode)}catch(L){Gt(g,c,L)}else try{Wv(ui,g.stateNode)}catch(L){Gt(g,c,L)}}else Ds(l,c,g);break;case 18:vn&&ui!==null&&(Si?bd(ui,g.stateNode):eg(ui,g.stateNode));break;case 4:vn?(x=ui,C=Si,ui=g.stateNode.containerInfo,Si=!0,Ds(l,c,g),ui=x,Si=C):(ps&&Sm(g.stateNode,g,Xm()),Ds(l,c,g));break;case 0:case 11:case 14:case 15:Da(2,g,c),gi||Da(4,g,c),Ds(l,c,g);break;case 1:gi||(_r(g,c),x=g.stateNode,typeof x.componentWillUnmount=="function"&&Kh(g,c,x)),Ds(l,c,g);break;case 21:Ds(l,c,g);break;case 22:gi=(x=gi)||g.memoizedState!==null,Ds(l,c,g),gi=x;break;default:Ds(l,c,g)}}function Ls(l,c){if($n&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{gS(l)}catch(g){Gt(c,c.return,g)}}}function yf(l,c){if($n&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{vS(l)}catch(g){Gt(c,c.return,g)}}function Ns(l){switch(l.tag){case 31:case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new mg),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new mg),c;default:throw Error(i(435,l.tag))}}function fo(l,c){var g=Ns(l);c.forEach(function(x){if(!g.has(x)){g.add(x);var C=dS.bind(null,l,x);x.then(C,C)}})}function er(l,c){var g=c.deletions;if(g!==null)for(var x=0;x<g.length;x++){var C=g[x],L=l,V=c;if(vn){var ie=V;e:for(;ie!==null;){switch(ie.tag){case 27:if(Gi){if(su(ie.type)){ui=ie.stateNode,Si=!1;break e}break}case 5:ui=ie.stateNode,Si=!1;break e;case 3:case 4:ui=ie.stateNode.containerInfo,Si=!0;break e}ie=ie.return}if(ui===null)throw Error(i(160));_f(L,V,C),ui=null,Si=!1}else _f(L,V,C);L=C.alternate,L!==null&&(L.return=null),C.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)xf(c,l),c=c.sibling}function xf(l,c){var g=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:er(c,l),tr(l),x&4&&(Da(3,l,l.return),Ra(3,l),Da(5,l,l.return));break;case 1:er(c,l),tr(l),x&512&&(gi||g===null||_r(g,g.return)),x&64&&mi&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?x:g.concat(x))));break;case 26:if(zs){var C=Pn;if(er(c,l),tr(l),x&512&&(gi||g===null||_r(g,g.return)),x&4){x=g!==null?g.memoizedState:null;var L=l.memoizedState;g===null?L===null?l.stateNode===null?l.stateNode=g_(C,l.type,l.memoizedProps,l):rg(C,l.type,l.stateNode):l.stateNode=ig(C,L,l.memoizedProps):x!==L?(x===null?g.stateNode!==null&&sg(g.stateNode):il(x),L===null?rg(C,l.type,l.stateNode):ig(C,L,l.memoizedProps)):L===null&&l.stateNode!==null&&gf(l,l.memoizedProps,g.memoizedProps)}break}case 27:if(Gi){er(c,l),tr(l),x&512&&(gi||g===null||_r(g,g.return)),g!==null&&x&4&&gf(l,l.memoizedProps,g.memoizedProps);break}case 5:if(er(c,l),tr(l),x&512&&(gi||g===null||_r(g,g.return)),vn){if(l.flags&32){C=l.stateNode;try{Gm(C)}catch(Ke){Gt(l,l.return,Ke)}}x&4&&l.stateNode!=null&&(C=l.memoizedProps,gf(l,C,g!==null?g.memoizedProps:C)),x&1024&&(pc=!0)}else ps&&l.alternate!==null&&(l.alternate.stateNode=l.stateNode);break;case 6:if(er(c,l),tr(l),x&4&&vn){if(l.stateNode===null)throw Error(i(162));x=l.memoizedProps,g=g!==null?g.memoizedProps:x,C=l.stateNode;try{Bv(C,g,x)}catch(Ke){Gt(l,l.return,Ke)}}break;case 3:if(zs?(v_(),C=Pn,Pn=Nf(c.containerInfo),er(c,l),Pn=C):er(c,l),tr(l),x&4){if(vn&&$n&&g!==null&&g.memoizedState.isDehydrated)try{f_(c.containerInfo)}catch(Ke){Gt(l,l.return,Ke)}if(ps){x=c.containerInfo,g=c.pendingChildren;try{Ym(x,g)}catch(Ke){Gt(l,l.return,Ke)}}}pc&&(pc=!1,Jh(l));break;case 4:zs?(g=Pn,Pn=Nf(l.stateNode.containerInfo),er(c,l),tr(l),Pn=g):(er(c,l),tr(l)),x&4&&ps&&Sm(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:er(c,l),tr(l);break;case 31:er(c,l),tr(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,fo(l,x)));break;case 13:er(c,l),tr(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Hf=yr()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,fo(l,x)));break;case 22:C=l.memoizedState!==null;var V=g!==null&&g.memoizedState!==null,ie=mi,Ne=gi;if(mi=ie||C,gi=Ne||V,er(c,l),gi=Ne,mi=ie,tr(l),x&8192&&(c=l.stateNode,c._visibility=C?c._visibility&-2:c._visibility|1,C&&(g===null||V||mi||gi||Wo(l)),vn)){e:if(g=null,vn)for(c=l;;){if(c.tag===5||zs&&c.tag===26){if(g===null){V=g=c;try{L=V.stateNode,C?pS(L):qv(V.stateNode,V.memoizedProps)}catch(Ke){Gt(V,V.return,Ke)}}}else if(c.tag===6){if(g===null){V=c;try{var Xe=V.stateNode;C?Xv(Xe):Yv(Xe,V.memoizedProps)}catch(Ke){Gt(V,V.return,Ke)}}}else if(c.tag===18){if(g===null){V=c;try{var ut=V.stateNode;C?d_(ut):p_(V.stateNode)}catch(Ke){Gt(V,V.return,Ke)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}x&4&&(x=l.updateQueue,x!==null&&(g=x.retryQueue,g!==null&&(x.retryQueue=null,fo(l,g))));break;case 19:er(c,l),tr(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,fo(l,x)));break;case 30:break;case 21:break;default:er(c,l),tr(l)}}function tr(l){var c=l.flags;if(c&2){try{for(var g,x=l.return;x!==null;){if(bm(x)){g=x;break}x=x.return}if(vn){if(g==null)throw Error(i(160));switch(g.tag){case 27:if(Gi){var C=g.stateNode,L=co(l);vf(l,L,C);break}case 5:var V=g.stateNode;g.flags&32&&(Gm(V),g.flags&=-33);var ie=co(l);vf(l,ie,V);break;case 3:case 4:var Ne=g.stateNode.containerInfo,Xe=co(l);Qh(l,Xe,Ne);break;default:throw Error(i(161))}}}catch(ut){Gt(l,l.return,ut)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function Jh(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;Jh(c),c.tag===5&&c.flags&1024&&Um(c.stateNode),l=l.sibling}}function wr(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Cv(l,c.alternate,c),c=c.sibling}function Wo(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Da(4,c,c.return),Wo(c);break;case 1:_r(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&Kh(c,c.return,g),Wo(c);break;case 27:Gi&&nr(c.stateNode);case 26:case 5:_r(c,c.return),Wo(c);break;case 22:c.memoizedState===null&&Wo(c);break;case 30:Wo(c);break;default:Wo(c)}l=l.sibling}}function Os(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,C=l,L=c,V=L.flags;switch(L.tag){case 0:case 11:case 15:Os(C,L,g),Ra(4,L);break;case 1:if(Os(C,L,g),x=L,C=x.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Xe){Gt(x,x.return,Xe)}if(x=L,C=x.updateQueue,C!==null){var ie=x.stateNode;try{var Ne=C.shared.hiddenCallbacks;if(Ne!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Ne.length;C++)oo(Ne[C],ie)}catch(Xe){Gt(x,x.return,Xe)}}g&&V&64&&Zu(L),Ku(L,L.return);break;case 27:Gi&&wv(L);case 26:case 5:Os(C,L,g),g&&x===null&&V&4&&jl(L),Ku(L,L.return);break;case 12:Os(C,L,g);break;case 31:Os(C,L,g),g&&V&4&&Ls(C,L);break;case 13:Os(C,L,g),g&&V&4&&yf(C,L);break;case 22:L.memoizedState===null&&Os(C,L,g),Ku(L,L.return);break;case 30:break;default:Os(C,L,g)}c=c.sibling}}function Xo(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&Fe(g))}function Em(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Fe(l))}function si(l,c,g,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)$h(l,c,g,x),c=c.sibling}function $h(l,c,g,x){var C=c.flags;switch(c.tag){case 0:case 11:case 15:si(l,c,g,x),C&2048&&Ra(9,c);break;case 1:si(l,c,g,x);break;case 3:si(l,c,g,x),C&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Fe(l)));break;case 12:if(C&2048){si(l,c,g,x),l=c.stateNode;try{var L=c.memoizedProps,V=L.id,ie=L.onPostCommit;typeof ie=="function"&&ie(V,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ne){Gt(c,c.return,Ne)}}else si(l,c,g,x);break;case 31:si(l,c,g,x);break;case 13:si(l,c,g,x);break;case 23:break;case 22:L=c.stateNode,V=c.alternate,c.memoizedState!==null?L._visibility&2?si(l,c,g,x):Qu(l,c):L._visibility&2?si(l,c,g,x):(L._visibility|=2,Br(l,c,g,x,(c.subtreeFlags&10256)!==0||!1)),C&2048&&Xo(V,c);break;case 24:si(l,c,g,x),C&2048&&Em(c.alternate,c);break;default:si(l,c,g,x)}}function Br(l,c,g,x,C){for(C=C&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var L=l,V=c,ie=g,Ne=x,Xe=V.flags;switch(V.tag){case 0:case 11:case 15:Br(L,V,ie,Ne,C),Ra(8,V);break;case 23:break;case 22:var ut=V.stateNode;V.memoizedState!==null?ut._visibility&2?Br(L,V,ie,Ne,C):Qu(L,V):(ut._visibility|=2,Br(L,V,ie,Ne,C)),C&&Xe&2048&&Xo(V.alternate,V);break;case 24:Br(L,V,ie,Ne,C),C&&Xe&2048&&Em(V.alternate,V);break;default:Br(L,V,ie,Ne,C)}c=c.sibling}}function Qu(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,x=c,C=x.flags;switch(x.tag){case 22:Qu(g,x),C&2048&&Xo(x.alternate,x);break;case 24:Qu(g,x),C&2048&&Em(x.alternate,x);break;default:Qu(g,x)}c=c.sibling}}function La(l,c,g){if(l.subtreeFlags&_s)for(l=l.child;l!==null;)qo(l,c,g),l=l.sibling}function qo(l,c,g){switch(l.tag){case 26:if(La(l,c,g),l.flags&_s)if(l.memoizedState!==null)__(g,Pn,l.memoizedState,l.memoizedProps);else{var x=l.stateNode,C=l.type;l=l.memoizedProps,((c&335544128)===c||Im(C,l))&&md(g,x,C,l)}break;case 5:La(l,c,g),l.flags&_s&&(x=l.stateNode,C=l.type,l=l.memoizedProps,((c&335544128)===c||Im(C,l))&&md(g,x,C,l));break;case 3:case 4:zs?(x=Pn,Pn=Nf(l.stateNode.containerInfo),La(l,c,g),Pn=x):La(l,c,g);break;case 22:l.memoizedState===null&&(x=l.alternate,x!==null&&x.memoizedState!==null?(x=_s,_s=16777216,La(l,c,g),_s=x):La(l,c,g));break;default:La(l,c,g)}}function ed(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function Ju(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var x=c[g];bi=x,fs(x,l)}ed(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)td(l),l=l.sibling}function td(l){switch(l.tag){case 0:case 11:case 15:Ju(l),l.flags&2048&&Da(9,l,l.return);break;case 3:Ju(l);break;case 12:Ju(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,bf(l)):Ju(l);break;default:Ju(l)}}function bf(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var x=c[g];bi=x,fs(x,l)}ed(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Da(8,c,c.return),bf(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,bf(c));break;default:bf(c)}l=l.sibling}}function fs(l,c){for(;bi!==null;){var g=bi;switch(g.tag){case 0:case 11:case 15:Da(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var x=g.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Fe(g.memoizedState.cache)}if(x=g.child,x!==null)x.return=g,bi=x;else e:for(g=l;bi!==null;){x=bi;var C=x.sibling,L=x.return;if(Mm(x),x===g){bi=null;break e}if(C!==null){C.return=L,bi=C;break e}bi=L}}}function Yo(l){var c=Qt(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(i(364));return c}if(l=yi(l),l===null)throw Error(i(362));return l.stateNode.current}function jo(l,c){var g=l.tag;switch(c.$$typeof){case Xs:if(l.type===c.value)return!0;break;case gc:e:{for(c=c.value,l=[l,0],g=0;g<l.length;){var x=l[g++],C=x.tag,L=l[g++],V=c[L];if(C!==5&&C!==26&&C!==27||!tl(x)){for(;V!=null&&jo(x,V);)L++,V=c[L];if(L===c.length){c=!0;break e}else for(x=x.child;x!==null;)l.push(x,L),x=x.sibling}}c=!1}return c;case vc:if((g===5||g===26||g===27)&&Bm(l.stateNode,c.value))return!0;break;case ul:if((g===5||g===6||g===26||g===27)&&(l=Df(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case kf:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function $u(l){switch(l.$$typeof){case Xs:return"<"+(_(l.value)||"Unknown")+">";case gc:return":has("+($u(l)||"")+")";case vc:return'[role="'+l.value+'"]';case ul:return'"'+l.value+'"';case kf:return'[data-testname="'+l.value+'"]';default:throw Error(i(365))}}function ec(l,c){var g=[];l=[l,0];for(var x=0;x<l.length;){var C=l[x++],L=C.tag,V=l[x++],ie=c[V];if(L!==5&&L!==26&&L!==27||!tl(C)){for(;ie!=null&&jo(C,ie);)V++,ie=c[V];if(V===c.length)g.push(C);else for(C=C.child;C!==null;)l.push(C,V),C=C.sibling}}return g}function kr(l,c){if(!Hi)throw Error(i(363));l=Yo(l),l=ec(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var x=l[g++],C=x.tag;if(C===5||C===26||C===27)tl(x)||c.push(x.stateNode);else for(x=x.child;x!==null;)l.push(x),x=x.sibling}return c}function Jn(){return(fn&2)!==0&&mn!==0?mn&-mn:Pt.T!==null?ve():uc()}function ho(){if(Or===0)if((mn&536870912)===0||pn){var l=ou;ou<<=1,(ou&3932160)===0&&(ou=262144),Or=l}else Or=536870912;return l=qr.current,l!==null&&(l.flags|=32),Or}function ai(l,c,g){(l===on&&(Un===2||Un===9)||l.cancelPendingCommit!==null)&&(di(l,0),Oa(l,mn,Or,!1)),z(l,g),((fn&2)===0||l!==on)&&(l===on&&((fn&2)===0&&(hl|=g),ci===4&&Oa(l,mn,Or,!1)),st(l))}function aa(l,c,g){if((fn&6)!==0)throw Error(i(327));var x=!g&&(c&127)===0&&(c&l.expiredLanes)===0||D(l,c),C=x?Lv(l,c):Ia(l,c,!0),L=x;do{if(C===0){cl&&!x&&Oa(l,c,0,!1);break}else{if(g=l.current.alternate,L&&!Rv(g)){C=Ia(l,c,!1),L=!1;continue}if(C===2){if(L=c,l.errorRecoveryDisabledLanes&L)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){c=V;e:{var ie=l;C=Vf;var Ne=$n&&ie.current.memoizedState.isDehydrated;if(Ne&&(di(ie,V).flags|=256),V=Ia(ie,V,!1),V!==2){if(fl&&!Ne){ie.errorRecoveryDisabledLanes|=L,hl|=L,C=4;break e}L=jr,jr=C,L!==null&&(jr===null?jr=L:jr.push.apply(jr,L))}C=V}if(L=!1,C!==2)continue}}if(C===1){di(l,0),Oa(l,c,0,!0);break}e:{switch(x=l,L=C,L){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Oa(x,c,Or,!ca);break e;case 2:jr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(C=Hf+300-yr(),10<C)){if(Oa(x,c,Or,!ca),M(x,0,!0)!==0)break e;ja=c,x.timeoutHandle=Om(Na.bind(null,x,g,jr,Gf,zd,c,Or,hl,yc,ca,L,"Throttled",-0,0),C);break e}Na(x,g,jr,Gf,zd,c,Or,hl,yc,ca,L,null,-0,0)}}break}while(!0);st(l)}function Na(l,c,g,x,C,L,V,ie,Ne,Xe,ut,Ke,_t,Zt){if(l.timeoutHandle=Gr,Ke=c.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke=Pm(),qo(c,L,Ke);var Mi=(L&62914560)===L?Hf-yr():(L&4194048)===L?pu-yr():0;if(Mi=Fv(Ke,Mi),Mi!==null){ja=L,l.cancelPendingCommit=Mi(Ua.bind(null,l,c,L,g,x,C,V,ie,Ne,ut,Ke,null,_t,Zt)),Oa(l,L,V,!Xe);return}}Ua(l,c,L,g,x,C,V,ie,Ne)}function Rv(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var x=0;x<g.length;x++){var C=g[x],L=C.getSnapshot;C=C.value;try{if(!xi(L(),C))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Oa(l,c,g,x){c&=~_c,c&=~hl,l.suspendedLanes|=c,l.pingedLanes&=~c,x&&(l.warmLanes|=c),x=l.expirationTimes;for(var C=c;0<C;){var L=31-Wr(C),V=1<<L;x[L]=-1,C&=~V}g!==0&&k(l,g,c)}function nd(){return(fn&6)===0?(He(0),!1):!0}function id(){if(hn!==null){if(Un===0)var l=hn.return;else l=hn,la=Wn=null,zn(l),al=null,uu=0,l=hn;for(;l!==null;)Av(l.alternate,l),l=l.return;hn=null}}function di(l,c){var g=l.timeoutHandle;g!==Gr&&(l.timeoutHandle=Gr,zv(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),ja=0,id(),on=l,hn=g=ds(l.current,null),mn=c,Un=0,Ii=null,ca=!1,cl=D(l,c),fl=!1,yc=Or=_c=hl=To=ci=0,jr=Vf=null,zd=!1,(c&8)!==0&&(c|=c&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=c;0<x;){var C=31-Wr(x),L=1<<C;c|=l[C],x&=~L}return Ya=c,Fo(),g}function Gn(l,c){Jt=null,Pt.H=vs,c===qi||c===Gs?(c=rn(),Un=3):c===Pd?(c=rn(),Un=4):Un=c===Nr?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ii=c,hn===null&&(ci=1,qh(l,Ie(c,l.current)))}function gn(){var l=qr.current;return l===null?!0:(mn&4194048)===mn?Yr===null:(mn&62914560)===mn||(mn&536870912)!==0?l===Yr:!1}function po(){var l=Pt.H;return Pt.H=vs,l===null?vs:l}function hs(){var l=Pt.A;return Pt.A=mc,l}function tc(){ci=4,ca||(mn&4194048)!==mn&&qr.current!==null||(cl=!0),(To&134217727)===0&&(hl&134217727)===0||on===null||Oa(on,mn,Or,!1)}function Ia(l,c,g){var x=fn;fn|=2;var C=po(),L=hs();(on!==l||mn!==c)&&(Gf=null,di(l,c)),c=!1;var V=ci;e:do try{if(Un!==0&&hn!==null){var ie=hn,Ne=Ii;switch(Un){case 8:id(),V=6;break e;case 3:case 2:case 9:case 6:qr.current===null&&(c=!0);var Xe=Un;if(Un=0,Ii=null,Pa(l,ie,Ne,Xe),g&&cl){V=0;break e}break;default:Xe=Un,Un=0,Ii=null,Pa(l,ie,Ne,Xe)}}Dv(),V=ci;break}catch(ut){Gn(l,ut)}while(!0);return c&&l.shellSuspendCounter++,la=Wn=null,fn=x,Pt.H=C,Pt.A=L,hn===null&&(on=null,mn=0,Fo()),V}function Dv(){for(;hn!==null;)Zo(hn)}function Lv(l,c){var g=fn;fn|=2;var x=po(),C=hs();on!==l||mn!==c?(Gf=null,dl=yr()+500,di(l,c)):cl=D(l,c);e:do try{if(Un!==0&&hn!==null){c=hn;var L=Ii;t:switch(Un){case 1:Un=0,Ii=null,Pa(l,c,L,1);break;case 2:case 9:if(tt(L)){Un=0,Ii=null,rd(c);break}c=function(){Un!==2&&Un!==9||on!==l||(Un=7),st(l)},L.then(c,c);break e;case 3:Un=7;break e;case 4:Un=5;break e;case 7:tt(L)?(Un=0,Ii=null,rd(c)):(Un=0,Ii=null,Pa(l,c,L,7));break;case 5:var V=null;switch(hn.tag){case 26:V=hn.memoizedState;case 5:case 27:var ie=hn,Ne=ie.type,Xe=ie.pendingProps;if(V?og(V):oi(ie.stateNode,Ne,Xe)){Un=0,Ii=null;var ut=ie.sibling;if(ut!==null)hn=ut;else{var Ke=ie.return;Ke!==null?(hn=Ke,ic(Ke)):hn=null}break t}}Un=0,Ii=null,Pa(l,c,L,5);break;case 6:Un=0,Ii=null,Pa(l,c,L,6);break;case 8:id(),ci=6;break e;default:throw Error(i(462))}}nc();break}catch(_t){Gn(l,_t)}while(!0);return la=Wn=null,Pt.H=x,Pt.A=C,fn=g,hn!==null?0:(on=null,mn=0,Fo(),ci)}function nc(){for(;hn!==null&&!x_();)Zo(hn)}function Zo(l){var c=vm(l.alternate,l,Ya);l.memoizedProps=l.pendingProps,c===null?ic(l):hn=c}function rd(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=fm(g,c,c.pendingProps,c.type,void 0,mn);break;case 11:c=fm(g,c,c.pendingProps,c.type.render,c.ref,mn);break;case 5:zn(c);default:Av(g,c),c=hn=od(c,Ya),c=vm(g,c,Ya)}l.memoizedProps=l.pendingProps,c===null?ic(l):hn=c}function Pa(l,c,g,x){la=Wn=null,zn(c),al=null,uu=0;var C=c.return;try{if(cS(l,C,c,g,mn)){ci=1,qh(l,Ie(g,l.current)),hn=null;return}}catch(L){if(C!==null)throw hn=C,L;ci=1,qh(l,Ie(g,l.current)),hn=null;return}c.flags&32768?(pn||x===1?l=!0:cl||(mn&536870912)!==0?l=!1:(ca=l=!0,(x===2||x===9||x===3||x===6)&&(x=qr.current,x!==null&&x.tag===13&&(x.flags|=16384))),Ko(c,l)):ic(c)}function ic(l){var c=l;do{if((c.flags&32768)!==0){Ko(c,ca);return}l=c.return;var g=Tv(c.alternate,c,Ya);if(g!==null){hn=g;return}if(c=c.sibling,c!==null){hn=c;return}hn=c=l}while(c!==null);ci===0&&(ci=5)}function Ko(l,c){do{var g=xm(l.alternate,l);if(g!==null){g.flags&=32767,hn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){hn=l;return}hn=l=g}while(l!==null);ci=6,hn=null}function Ua(l,c,g,x,C,L,V,ie,Ne){l.cancelPendingCommit=null;do Fa();while(Pi!==0);if((fn&6)!==0)throw Error(i(327));if(c!==null){if(c===l.current)throw Error(i(177));if(L=c.lanes|c.childLanes,L|=cu,B(l,g,L,V,ie,Ne),l===on&&(hn=on=null,mn=0),mu=c,wo=l,ja=g,xc=L,Fd=C,gg=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Ni(If,function(){return Sf(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=Pt.T,Pt.T=null,C=Us(),dn(2),V=fn,fn|=4;try{fS(l,c,g)}finally{fn=V,dn(C),Pt.T=x}}Pi=1,mo(),za(),sd()}}function mo(){if(Pi===1){Pi=0;var l=wo,c=mu,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=Pt.T,Pt.T=null;var x=Us();dn(2);var C=fn;fn|=4;try{xf(c,l),Uv(l.containerInfo)}finally{fn=C,dn(x),Pt.T=g}}l.current=c,Pi=2}}function za(){if(Pi===2){Pi=0;var l=wo,c=mu,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=Pt.T,Pt.T=null;var x=Us();dn(2);var C=fn;fn|=4;try{Cv(l,c.alternate,c)}finally{fn=C,dn(x),Pt.T=g}}Pi=3}}function sd(){if(Pi===4||Pi===3){Pi=0,ug();var l=wo,c=mu,g=ja,x=gg;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Pi=5:(Pi=0,mu=wo=null,ad(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(Ao=null),J(g),c=c.stateNode,Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(lu,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=Pt.T,C=Us(),dn(2),Pt.T=null;try{for(var L=l.onRecoverableError,V=0;V<x.length;V++){var ie=x[V];L(ie.value,{componentStack:ie.stack})}}finally{Pt.T=c,dn(C)}}(ja&3)!==0&&Fa(),st(l),C=l.pendingLanes,(g&261930)!==0&&(C&42)!==0?l===Wf?Tn++:(Tn=0,Wf=l):Tn=0,$n&&Lf(),He(0)}}function ad(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Fe(c)))}function Fa(){return mo(),za(),sd(),Sf()}function Sf(){if(Pi!==5)return!1;var l=wo,c=xc;xc=0;var g=J(ja),x=32>g?32:g;g=Pt.T;var C=Us();try{dn(x),Pt.T=null,x=Fd,Fd=null;var L=wo,V=ja;if(Pi=0,mu=wo=null,ja=0,(fn&6)!==0)throw Error(i(331));var ie=fn;if(fn|=4,td(L.current),$h(L,L.current,V,x),fn=ie,He(0,!1),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(lu,L)}catch{}return!0}finally{dn(C),Pt.T=g,ad(l,c)}}function Qo(l,c,g){c=Ie(g,c),c=um(l.stateNode,c,2),l=us(l,c,2),l!==null&&(z(l,2),st(l))}function Gt(l,c,g){if(l.tag===3)Qo(l,l,g);else for(;c!==null;){if(c.tag===3){Qo(c,l,g);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ao===null||!Ao.has(x))){l=Ie(g,l),g=dv(2),x=us(c,g,2),x!==null&&(pv(g,x,c,l),z(x,2),st(x));break}}c=c.return}}function rc(l,c,g){var x=l.pingCache;if(x===null){x=l.pingCache=new ys;var C=new Set;x.set(c,C)}else C=x.get(c),C===void 0&&(C=new Set,x.set(c,C));C.has(g)||(fl=!0,C.add(g),l=Nv.bind(null,l,c,g),c.then(l,l))}function Nv(l,c,g){var x=l.pingCache;x!==null&&x.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,on===l&&(mn&g)===g&&(ci===4||ci===3&&(mn&62914560)===mn&&300>yr()-Hf?(fn&2)===0&&di(l,0):_c|=g,yc===mn&&(yc=0)),st(l)}function Ov(l,c){c===0&&(c=N()),l=vr(l,c),l!==null&&(z(l,c),st(l))}function hS(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),Ov(l,g)}function dS(l,c){var g=0;switch(l.tag){case 31:case 13:var x=l.stateNode,C=l.memoizedState;C!==null&&(g=C.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(c),Ov(l,g)}function Ni(l,c){return Of(l,c)}function Tm(l,c,g,x){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ds(l,c){var g=l.alternate;return g===null?(g=t(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function od(l,c){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function go(l,c,g,x,C,L){var V=0;if(x=l,typeof l=="function")Zl(l)&&(V=1);else if(typeof l=="string")V=zs&&Gi?Sd(l,g,ir.current)?26:lg(l)?27:5:zs?Sd(l,g,ir.current)?26:5:Gi&&lg(l)?27:5;else e:switch(l){case Af:return l=t(31,g,c,C),l.elementType=Af,l.lanes=L,l;case $l:return Is(g.children,C,L,c);case eu:V=8,C|=24;break;case tu:return l=t(12,g,c,C|2),l.elementType=tu,l.lanes=L,l;case fd:return l=t(13,g,c,C),l.elementType=fd,l.lanes=L,l;case vo:return l=t(19,g,c,C),l.elementType=vo,l.lanes=L,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Ps:V=10;break e;case Tf:V=9;break e;case sc:V=11;break e;case hd:V=14;break e;case Cr:V=16,x=null;break e}V=29,g=Error(i(130,l===null?"null":typeof l,"")),x=null}return c=t(V,g,c,C),c.elementType=l,c.type=x,c.lanes=L,c}function Is(l,c,g,x){return l=t(7,l,x,c),l.lanes=g,l}function Am(l,c,g){return l=t(6,l,null,c),l.lanes=g,l}function wm(l){var c=t(18,null,null,0);return c.stateNode=l,c}function Cm(l,c,g){return c=t(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function Iv(l,c,g,x,C,L,V,ie,Ne){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Gr,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=x,this.onUncaughtError=C,this.onCaughtError=L,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ne,this.incompleteTransitions=new Map}function Jo(l,c,g,x,C,L,V,ie,Ne,Xe,ut,Ke){return l=new Iv(l,c,g,V,Ne,Xe,ut,Ke,ie),c=1,L===!0&&(c|=24),L=t(3,null,null,c),l.current=L,L.stateNode=l,c=Le(),c.refCount++,l.pooledCache=c,c.refCount++,L.memoizedState={element:x,isDehydrated:g,cache:c},ki(L),l}function ld(l){return l?(l=ka,l):ka}function Mf(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=f(c),l=l!==null?d(l):null,l===null?null:oc(l.stateNode)}function Rm(l,c,g,x,C,L){C=ld(C),x.context===null?x.context=C:x.pendingContext=C,x=ls(c),x.payload={element:g},L=L===void 0?null:L,L!==null&&(x.callback=L),g=us(l,x,c),g!==null&&(ai(g,l,c),Bo(g,l,c))}function Kl(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function Ef(l,c){Kl(l,c),(l=l.alternate)&&Kl(l,c)}var sn={},ud=fE,Vr=y6,cd=Object.assign,Ql=Symbol.for("react.element"),Ba=Symbol.for("react.transitional.element"),Jl=Symbol.for("react.portal"),$l=Symbol.for("react.fragment"),eu=Symbol.for("react.strict_mode"),tu=Symbol.for("react.profiler"),Tf=Symbol.for("react.consumer"),Ps=Symbol.for("react.context"),sc=Symbol.for("react.forward_ref"),fd=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),Af=Symbol.for("react.activity"),Dm=Symbol.for("react.memo_cache_sentinel"),_o=Symbol.iterator,$o=Symbol.for("react.client.reference"),el=Array.isArray,Pt=ud.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Lm=e.rendererVersion,wf=e.rendererPackageName,ac=e.extraDevToolsConfig,oc=e.getPublicInstance,Pv=e.getRootHostContext,lc=e.getChildHostContext,dd=e.prepareForCommit,Uv=e.resetAfterCommit,Nm=e.createInstance;e.cloneMutableInstance;var Cf=e.appendInitialChild,Hr=e.finalizeInitialChildren,Rr=e.shouldSetTextContent,yo=e.createTextInstance;e.cloneMutableTextInstance;var Om=e.scheduleTimeout,zv=e.cancelTimeout,Gr=e.noTimeout,_i=e.isPrimaryRenderer;e.warnsIfNotActing;var vn=e.supportsMutation,ps=e.supportsPersistence,$n=e.supportsHydration,Qt=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Fn=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var dn=e.setCurrentUpdatePriority,Us=e.getCurrentUpdatePriority,uc=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var nu=e.shouldAttemptEagerTransition,pd=e.detachDeletedInstance;e.requestPostPaintCallback;var Rf=e.maySuspendCommit,cc=e.maySuspendCommitOnUpdate,Im=e.maySuspendCommitInSyncRender,oi=e.preloadInstance,Pm=e.startSuspendingCommit,md=e.suspendInstance;e.suspendOnActiveViewTransition;var Fv=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var iu=e.NotPendingTransition,ru=e.HostTransitionContext,Um=e.resetFormInstance;e.bindToConsole;var zm=e.supportsMicrotasks,Fm=e.scheduleMicrotask,Hi=e.supportsTestSelectors,yi=e.findFiberRoot,gd=e.getBoundingRect,Df=e.getTextContent,tl=e.isHiddenSubtree,Bm=e.matchAccessibilityRole,xo=e.setFocusIfFocusable,vd=e.setupIntersectionObserver,km=e.appendChild,Vm=e.appendChildToContainer,Bv=e.commitTextUpdate,kv=e.commitMount,Vv=e.commitUpdate,Hv=e.insertBefore,Gv=e.insertInContainerBefore,Wv=e.removeChild,Hm=e.removeChildFromContainer,Gm=e.resetTextContent,pS=e.hideInstance,Xv=e.hideTextInstance,qv=e.unhideInstance,Yv=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Wm=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var jv=e.cloneInstance,Xm=e.createContainerChildSet,qm=e.appendChildToContainerChildSet,Zv=e.finalizeContainerChildren,Ym=e.replaceContainerChildren,Kv=e.cloneHiddenInstance,jm=e.cloneHiddenTextInstance,nl=e.isSuspenseInstancePending,_d=e.isSuspenseInstanceFallback,yd=e.getSuspenseInstanceFallbackErrorDetails,xd=e.registerSuspenseInstanceRetry,Qv=e.canHydrateFormStateMarker,Zm=e.isFormStateMarkerMatching,Jv=e.getNextHydratableSibling,$v=e.getNextHydratableSiblingAfterSingleton,e_=e.getFirstHydratableChild,t_=e.getFirstHydratableChildWithinContainer,n_=e.getFirstHydratableChildWithinActivityInstance,i_=e.getFirstHydratableChildWithinSuspenseInstance,Km=e.getFirstHydratableChildWithinSingleton,r_=e.canHydrateInstance,s_=e.canHydrateTextInstance,Qm=e.canHydrateActivityInstance,a_=e.canHydrateSuspenseInstance,o_=e.hydrateInstance,mS=e.hydrateTextInstance,Jm=e.hydrateActivityInstance,l_=e.hydrateSuspenseInstance,u_=e.getNextHydratableInstanceAfterActivityInstance,$m=e.getNextHydratableInstanceAfterSuspenseInstance,c_=e.commitHydratedInstance,f_=e.commitHydratedContainer,gS=e.commitHydratedActivityInstance,vS=e.commitHydratedSuspenseInstance,h_=e.finalizeHydratedChildren,Lf=e.flushHydrationEvents;e.clearActivityBoundary;var eg=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var bd=e.clearSuspenseBoundaryFromContainer,d_=e.hideDehydratedBoundary,p_=e.unhideDehydratedBoundary,fc=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var m_=e.validateHydratableInstance,tg=e.validateHydratableTextInstance,zs=e.supportsResources,Sd=e.isHostHoistableType,Nf=e.getHoistableRoot,ng=e.getResource,ig=e.acquireResource,il=e.releaseResource,g_=e.hydrateHoistable,rg=e.mountHoistable,sg=e.unmountHoistable,Md=e.createHoistableInstance,v_=e.prepareToCommitHoistables,ag=e.mayResourceSuspendCommit,og=e.preloadResource,__=e.suspendResource,Gi=e.supportsSingletons,Ed=e.resolveSingletonInstance,Oi=e.acquireSingletonInstance,nr=e.releaseSingletonInstance,lg=e.isHostSingletonType,su=e.isSingletonScope,Td=[],au=-1,ka={},Wr=Math.clz32?Math.clz32:A,Ad=Math.log,y_=Math.LN2,wd=256,ou=262144,hc=4194304,Of=Vr.unstable_scheduleCallback,Cd=Vr.unstable_cancelCallback,x_=Vr.unstable_shouldYield,ug=Vr.unstable_requestPaint,yr=Vr.unstable_now,Rd=Vr.unstable_ImmediatePriority,b_=Vr.unstable_UserBlockingPriority,If=Vr.unstable_NormalPriority,Dd=Vr.unstable_IdlePriority,cg=Vr.log,S_=Vr.unstable_setDisableYieldValue,lu=null,Xr=null,xi=typeof Object.is=="function"?Object.is:ce,Ld=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},_S=Object.prototype.hasOwnProperty,Nd,Va,Pf=!1,fg=new WeakMap,bo=[],Ha=0,Bn=null,Uf=0,Fs=[],ms=0,Bs=null,ur=1,oa="",ir=y(null),So=y(null),cr=y(null),zf=y(null),Wi=null,ei=null,pn=!1,Ga=null,Dr=!1,Od=Error(i(519)),ks=y(null),Wn=null,la=null,M_=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,x){l.push(x)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},rr=Vr.unstable_scheduleCallback,yS=Vr.unstable_NormalPriority,ti={$$typeof:Ps,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ff=null,In=null,xr=!1,Vs=!1,Id=!1,rl=0,dc=null,hg=0,Mo=0,Xi=null,Hs=Pt.S;Pt.S=function(l,c){pu=yr(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&lt(l,c),Hs!==null&&Hs(l,c)};var sl=y(null),qi=Error(i(460)),Pd=Error(i(474)),Gs=Error(i(542)),Wa={then:function(){}},Lr=null,al=null,uu=0,fr=Fl(!0),dg=Fl(!1),hr=[],Xa=0,cu=0,gs=!1,Ud=!1,fu=y(null),ol=y(0),qr=y(null),Yr=null,pi=y(0),Eo=0,Jt=null,Dt=null,qt=null,an=!1,tn=!1,_n=!1,br=0,Ws=0,ua=null,pg=0,vs={readContext:q,use:Di,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};vs.useEffectEvent=Je;var li={readContext:q,use:Di,useCallback:function(l,c){return jt().memoizedState=[l,c===void 0?null:c],l},useContext:q,useEffect:lf,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,Gl(4194308,4,Hu.bind(null,c,l),g)},useLayoutEffect:function(l,c){return Gl(4194308,4,l,c)},useInsertionEffect:function(l,c){Gl(4,2,l,c)},useMemo:function(l,c){var g=jt();c=c===void 0?null:c;var x=l();if(_n){K(!0);try{l()}finally{K(!1)}}return g.memoizedState=[x,c],x},useReducer:function(l,c,g){var x=jt();if(g!==void 0){var C=g(c);if(_n){K(!0);try{g(c)}finally{K(!1)}}}else C=c;return x.memoizedState=x.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},x.queue=l,l=l.dispatch=uS.bind(null,Jt,l),[x.memoizedState,l]},useRef:function(l){var c=jt();return l={current:l},c.memoizedState=l},useState:function(l){l=tm(l);var c=l.queue,g=uv.bind(null,Jt,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:cf,useDeferredValue:function(l,c){var g=jt();return Wu(g,l,c)},useTransition:function(){var l=tm(!1);return l=av.bind(null,Jt,l.queue,!0,!1),jt().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var x=Jt,C=jt();if(pn){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),on===null)throw Error(i(349));(mn&127)!==0||Ji(x,c,g)}C.memoizedState=g;var L={value:g,getSnapshot:c};return C.queue=L,lf(Vl.bind(null,x,L,l),[l]),x.flags|=2048,cs(9,{destroy:void 0},$i.bind(null,x,L,g,c),null),g},useId:function(){var l=jt(),c=on.identifierPrefix;if(pn){var g=oa,x=ur;g=(x&~(1<<32-Wr(x)-1)).toString(32)+g,c="_"+c+"R_"+g,g=br++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=pg++,c="_"+c+"r_"+g.toString(32)+"_";return l.memoizedState=c},useHostTransitionStatus:am,useFormState:im,useActionState:im,useOptimistic:function(l){var c=jt();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Gh.bind(null,Jt,!0,g),g.dispatch=c,[l,c]},useMemoCache:sa,useCacheRefresh:function(){return jt().memoizedState=lS.bind(null,Jt)},useEffectEvent:function(l){var c=jt(),g={impl:l};return c.memoizedState=g,function(){if((fn&2)!==0)throw Error(i(440));return g.impl.apply(void 0,arguments)}}},qa={readContext:q,use:Di,useCallback:Vh,useContext:q,useEffect:Vu,useImperativeHandle:sv,useInsertionEffect:Ho,useLayoutEffect:uf,useMemo:Gu,useReducer:Er,useRef:kh,useState:function(){return Er(jn)},useDebugValue:cf,useDeferredValue:function(l,c){var g=ht();return sm(g,Dt.memoizedState,l,c)},useTransition:function(){var l=Er(jn)[0],c=ht().memoizedState;return[typeof l=="boolean"?l:Vt(l),c]},useSyncExternalStore:Li,useId:Hh,useHostTransitionStatus:am,useFormState:Bu,useActionState:Bu,useOptimistic:function(l,c){var g=ht();return af(g,Dt,l,c)},useMemoCache:sa,useCacheRefresh:lv};qa.useEffectEvent=Tr;var ll={readContext:q,use:Di,useCallback:Vh,useContext:q,useEffect:Vu,useImperativeHandle:sv,useInsertionEffect:Ho,useLayoutEffect:uf,useMemo:Gu,useReducer:Vi,useRef:kh,useState:function(){return Vi(jn)},useDebugValue:cf,useDeferredValue:function(l,c){var g=ht();return Dt===null?Wu(g,l,c):sm(g,Dt.memoizedState,l,c)},useTransition:function(){var l=Vi(jn)[0],c=ht().memoizedState;return[typeof l=="boolean"?l:Vt(l),c]},useSyncExternalStore:Li,useId:Hh,useHostTransitionStatus:am,useFormState:ku,useActionState:ku,useOptimistic:function(l,c){var g=ht();return Dt!==null?af(g,Dt,l,c):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:sa,useCacheRefresh:lv};ll.useEffectEvent=Tr;var Bf={enqueueSetState:function(l,c,g){l=l._reactInternals;var x=Jn(),C=ls(x);C.payload=c,g!=null&&(C.callback=g),c=us(l,C,x),c!==null&&(ai(c,l,x),Bo(c,l,x))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var x=Jn(),C=ls(x);C.tag=1,C.payload=c,g!=null&&(C.callback=g),c=us(l,C,x),c!==null&&(ai(c,l,x),Bo(c,l,x))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Jn(),x=ls(g);x.tag=2,c!=null&&(x.callback=c),c=us(l,x,g),c!==null&&(ai(c,l,g),Bo(c,l,g))}},Nr=Error(i(461)),Zn=!1,hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},mi=!1,gi=!1,pc=!1,mg=typeof WeakSet=="function"?WeakSet:Set,bi=null,ui=null,Si=!1,Pn=null,_s=8192,mc={getCacheForType:function(l){var c=q(ti),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g},cacheSignal:function(){return q(ti).controller.signal}},Xs=0,gc=1,vc=2,kf=3,ul=4;if(typeof Symbol=="function"&&Symbol.for){var du=Symbol.for;Xs=du("selector.component"),gc=du("selector.has_pseudo_class"),vc=du("selector.role"),kf=du("selector.test_id"),ul=du("selector.text")}var ys=typeof WeakMap=="function"?WeakMap:Map,fn=0,on=null,hn=null,mn=0,Un=0,Ii=null,ca=!1,cl=!1,fl=!1,Ya=0,ci=0,To=0,hl=0,_c=0,Or=0,yc=0,Vf=null,jr=null,zd=!1,Hf=0,pu=0,dl=1/0,Gf=null,Ao=null,Pi=0,wo=null,mu=null,ja=0,xc=0,Fd=null,gg=null,Tn=0,Wf=null;return sn.attemptContinuousHydration=function(l){if(l.tag===13||l.tag===31){var c=vr(l,67108864);c!==null&&ai(c,l,67108864),Ef(l,67108864)}},sn.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13||l.tag===31){var c=Jn();c=W(c);var g=vr(l,c);g!==null&&ai(g,l,c),Ef(l,c)}},sn.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=w(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-Wr(c);l.entanglements[1]|=g,c&=~g}st(l),(fn&6)===0&&(dl=yr()+500,He(0))}}break;case 31:case 13:c=vr(l,2),c!==null&&ai(c,l,2),nd(),Ef(l,2)}},sn.batchedUpdates=function(l,c){return l(c)},sn.createComponentSelector=function(l){return{$$typeof:Xs,value:l}},sn.createContainer=function(l,c,g,x,C,L,V,ie,Ne,Xe){return Jo(l,c,!1,null,g,x,L,null,V,ie,Ne,Xe)},sn.createHasPseudoClassSelector=function(l){return{$$typeof:gc,value:l}},sn.createHydrationContainer=function(l,c,g,x,C,L,V,ie,Ne,Xe,ut,Ke,_t,Zt){var Mi;return l=Jo(g,x,!0,l,C,L,ie,Zt,Ne,Xe,ut,Ke),l.context=ld(null),g=l.current,x=Jn(),x=W(x),C=ls(x),C.callback=(Mi=c)!=null?Mi:null,us(g,C,x),c=x,l.current.lanes=c,z(l,c),st(l),l},sn.createPortal=function(l,c,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jl,key:x==null?null:""+x,children:l,containerInfo:c,implementation:g}},sn.createRoleSelector=function(l){return{$$typeof:vc,value:l}},sn.createTestNameSelector=function(l){return{$$typeof:kf,value:l}},sn.createTextSelector=function(l){return{$$typeof:ul,value:l}},sn.defaultOnCaughtError=function(l){console.error(l)},sn.defaultOnRecoverableError=function(l){Ld(l)},sn.defaultOnUncaughtError=function(l){Ld(l)},sn.deferredUpdates=function(l){var c=Pt.T,g=Us();try{return dn(32),Pt.T=null,l()}finally{dn(g),Pt.T=c}},sn.discreteUpdates=function(l,c,g,x,C){var L=Pt.T,V=Us();try{return dn(2),Pt.T=null,l(c,g,x,C)}finally{dn(V),Pt.T=L,fn===0&&(dl=yr()+500)}},sn.findAllNodes=kr,sn.findBoundingRects=function(l,c){if(!Hi)throw Error(i(363));c=kr(l,c),l=[];for(var g=0;g<c.length;g++)l.push(gd(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var x=g.x,C=x+g.width,L=g.y,V=L+g.height,ie=c-1;0<=ie;ie--)if(c!==ie){var Ne=l[ie],Xe=Ne.x,ut=Xe+Ne.width,Ke=Ne.y,_t=Ke+Ne.height;if(x>=Xe&&L>=Ke&&C<=ut&&V<=_t){l.splice(c,1);break}else if(x!==Xe||g.width!==Ne.width||_t<L||Ke>V){if(!(L!==Ke||g.height!==Ne.height||ut<x||Xe>C)){Xe>x&&(Ne.width+=Xe-x,Ne.x=x),ut<C&&(Ne.width=C-Xe),l.splice(c,1);break}}else{Ke>L&&(Ne.height+=Ke-L,Ne.y=L),_t<V&&(Ne.height=V-Ke),l.splice(c,1);break}}}return l},sn.findHostInstance=Mf,sn.findHostInstanceWithNoPortals=function(l){return l=f(l),l=l!==null?p(l):null,l===null?null:oc(l.stateNode)},sn.findHostInstanceWithWarning=function(l){return Mf(l)},sn.flushPassiveEffects=Fa,sn.flushSyncFromReconciler=function(l){var c=fn;fn|=1;var g=Pt.T,x=Us();try{if(dn(2),Pt.T=null,l)return l()}finally{dn(x),Pt.T=g,fn=c,(fn&6)===0&&He(0)}},sn.flushSyncWork=nd,sn.focusWithin=function(l,c){if(!Hi)throw Error(i(363));for(l=Yo(l),c=ec(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],x=g.tag;if(!tl(g)){if((x===5||x===26||x===27)&&xo(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},sn.getFindAllNodesFailureDescription=function(l,c){if(!Hi)throw Error(i(363));var g=0,x=[];l=[Yo(l),0];for(var C=0;C<l.length;){var L=l[C++],V=L.tag,ie=l[C++],Ne=c[ie];if((V!==5&&V!==26&&V!==27||!tl(L))&&(jo(L,Ne)&&(x.push($u(Ne)),ie++,ie>g&&(g=ie)),ie<c.length))for(L=L.child;L!==null;)l.push(L,ie),L=L.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push($u(c[g]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},sn.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return oc(l.child.stateNode);default:return l.child.stateNode}},sn.injectIntoDevTools=function(){var l={bundleType:0,version:Lm,rendererPackageName:wf,currentDispatcherRef:Pt,reconcilerVersion:"19.2.0"};if(ac!==null&&(l.rendererConfig=ac),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{lu=c.inject(l),Xr=c}catch{}l=!!c.checkDCE}}return l},sn.isAlreadyRendering=function(){return(fn&6)!==0},sn.observeVisibleRects=function(l,c,g,x){if(!Hi)throw Error(i(363));l=kr(l,c);var C=vd(l,g,x).disconnect;return{disconnect:function(){C()}}},sn.shouldError=function(){return null},sn.shouldSuspend=function(){return!1},sn.startHostTransition=function(l,c,g,x){if(l.tag!==5)throw Error(i(476));var C=ov(l).queue;av(l,C,c,iu,g===null?n:function(){var L=ov(l);return L.next===null&&(L=l.alternate.memoizedState),ff(l,L.next.queue,{},Jn()),g(x)})},sn.updateContainer=function(l,c,g,x){var C=c.current,L=Jn();return Rm(C,L,l,c,g,x),L},sn.updateContainerSync=function(l,c,g,x){return Rm(c.current,2,l,c,g,x),2},sn},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})})(bC)),bC.exports}var MC;function q6(){return MC||(MC=1,xC.exports=X6()),xC.exports}var Y6=q6();const j6=W6(Y6);function Z6(r){const e=j6(r);return e.injectIntoDevTools(),e}const ID=0,Fp={},K6=/^three(?=[A-Z])/,$b=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let Q6=0;const J6=r=>typeof r=="function";function $6(r){if(J6(r)){const e=`${Q6++}`;return Fp[e]=r,e}else Object.assign(Fp,r)}function PD(r,e){const t=$b(r),n=Fp[t];if(r!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function e8(r,e,t){var n;return r=$b(r)in Fp?r:r.replace(K6,""),PD(r,e),r==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,$x(e.object,t,r,e)}function t8(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?tb(r.parent,r):Zs(r.object)&&(r.object.visible=!1),r.isHidden=!0,Qp(r)}}function UD(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?eb(r.parent,r):Zs(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,Qp(r)}}function mT(r,e,t){const n=e.root.getState();if(!(!r.parent&&r.object!==n.scene)){if(!e.object){var i,a;const u=Fp[$b(e.type)];e.object=(i=e.props.object)!=null?i:new u(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(Uc(e.object,e.props),e.props.attach)eb(r,e);else if(Zs(e.object)&&Zs(r.object)){const u=r.object.children.indexOf(t==null?void 0:t.object);if(t&&u!==-1){const f=r.object.children.indexOf(e.object);if(f!==-1){r.object.children.splice(f,1);const d=f<u?u-1:u;r.object.children.splice(d,0,e.object)}else e.object.parent=r.object,r.object.children.splice(u,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const u of e.children)mT(e,u);Qp(e)}}function W1(r,e){e&&(e.parent=r,r.children.push(e),mT(r,e))}function EC(r,e,t){if(!e||!t)return;e.parent=r;const n=r.children.indexOf(t);n!==-1?r.children.splice(n,0,e):r.children.push(e),mT(r,e,t)}function zD(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():NM.unstable_scheduleCallback(NM.unstable_IdlePriority,e)}}function IM(r,e,t){if(!e)return;e.parent=null;const n=r.children.indexOf(e);n!==-1&&r.children.splice(n,1),e.props.attach?tb(r,e):Zs(e.object)&&Zs(r.object)&&(r.object.remove(e.object),U6(AD(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const u=e.children[a];IM(e,u,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&zD(e.object),t===void 0&&Qp(e)}function n8(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Yy=[];function i8(){for(const[t]of Yy){const n=t.parent;if(n){t.props.attach?tb(n,t):Zs(t.object)&&Zs(n.object)&&n.object.remove(t.object);for(const i of t.children)i.props.attach?tb(t,i):Zs(i.object)&&Zs(t.object)&&t.object.remove(i.object)}t.isHidden&&UD(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&zD(t.object)}for(const[t,n,i]of Yy){t.props=n;const a=t.parent;if(a){var r,e;const u=Fp[$b(t.type)];t.object=(r=t.props.object)!=null?r:new u(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,n8(i,t.object),Uc(t.object,t.props),t.props.attach?eb(a,t):Zs(t.object)&&Zs(a.object)&&a.object.add(t.object);for(const f of t.children)f.props.attach?eb(t,f):Zs(f.object)&&Zs(t.object)&&t.object.add(f.object);Qp(t)}}Yy.length=0}const X1=()=>{},TC={};let Ny=ID;const r8=0,s8=4,PM=Z6({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:e8,removeChild:IM,appendChild:W1,appendInitialChild:W1,insertBefore:EC,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||W1(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||IM(t,e)},insertInContainerBefore(r,e,t){const n=r.getState().scene.__r3f;!e||!t||!n||EC(n,e,t)},getRootHostContext:()=>TC,getChildHostContext:()=>TC,commitUpdate(r,e,t,n,i){var a,u,f;PD(e,n);let d=!1;if((r.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((u=t.args)==null?void 0:u.length)||(f=n.args)!=null&&f.some((v,_)=>{var y;return v!==((y=t.args)==null?void 0:y[_])}))&&(d=!0),d)Yy.push([r,{...n},i]);else{const v=N6(r,n);Object.keys(v).length&&(Object.assign(r.props,v),Uc(r.object,v))}(i.sibling===null||(i.flags&s8)===r8)&&i8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r==null?void 0:r.object,prepareForCommit:()=>null,preparePortalMount:r=>$x(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:t8,unhideInstance:UD,createTextInstance:X1,hideTextInstance:X1,unhideTextInstance:X1,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:se.createContext(null),setCurrentUpdatePriority(r){Ny=r},getCurrentUpdatePriority(){return Ny},resolveUpdatePriority(){var r;if(Ny!==ID)return Ny;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return H6;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return k6;default:return V6}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:G6.version,applyViewTransitionName(r,e,t){},restoreViewTransitionName(r,e){},cancelViewTransitionName(r,e,t){},cancelRootViewTransitionName(r){},restoreRootViewTransitionName(r){},InstanceMeasurement:null,measureInstance:r=>null,wasInstanceInViewport:r=>!0,hasInstanceChanged:(r,e)=>!1,hasInstanceAffectedParent:(r,e)=>!1,suspendOnActiveViewTransition(r,e){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(r){},createViewTransitionInstance:r=>null,getCurrentGestureOffset(r){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(r,e){return r},cloneMutableTextInstance(r){return r},cloneRootViewTransitionContainer(r){throw new Error("Not implemented.")},removeRootViewTransitionClone(r,e){throw new Error("Not implemented.")},createFragmentInstance:r=>null,updateFragmentInstanceFiber(r,e){},commitNewChildToFragmentInstance(r,e){},deleteChildFromFragmentInstance(r,e){},measureClonedInstance:r=>null,maySuspendCommitOnUpdate:(r,e,t)=>!1,maySuspendCommitInSyncRender:(r,e)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(r,e)=>null}),Lh=new Map,hp={objects:"shallow",strict:!1};function a8(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:n,top:i,left:a}=r.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function o8(r){const e=Lh.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=n||F6(FM,wC),u=t||PM.createContainer(a,B6,null,!1,null,"",i,i,i,null);e||Lh.set(r,{fiber:u,store:a});let f,d,p=!1,v=null;return{async configure(_={}){let y;v=new Promise(X=>y=X);let{gl:b,size:E,scene:A,events:w,onCreated:M,shadows:D=!1,linear:R=!1,flat:N=!1,legacy:P=!1,orthographic:z=!1,frameloop:B="always",dpr:k=[1,2],performance:I,raycaster:O,camera:W,onPointerMissed:J}=_,K=a.getState(),ce=K.gl;if(!K.gl){const X={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},oe=typeof b=="function"?await b(X):b;yC(oe)?ce=oe:ce=new SD({...X,...b}),K.set({gl:ce})}let le=K.raycaster;le||K.set({raycaster:le=new dD});const{params:Z,...Q}=O||{};if(Ei.equ(Q,le,hp)||Uc(le,{...Q}),Ei.equ(Z,le.params,hp)||Uc(le,{params:{...le.params,...Z}}),!K.camera||K.camera===d&&!Ei.equ(d,W,hp)){d=W;const X=W==null?void 0:W.isCamera,oe=X?W:z?new Ou(0,0,0,0,.1,1e3):new Zi(75,0,.1,1e3);X||(oe.position.z=5,W&&(Uc(oe,W),oe.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(oe.manual=!0,oe.updateProjectionMatrix())),!K.camera&&!(W!=null&&W.rotation)&&oe.lookAt(0,0,0)),K.set({camera:oe}),le.camera=oe}if(!K.scene){let X;A!=null&&A.isScene?(X=A,$x(X,a,"",{})):(X=new zE,$x(X,a,"",{}),A&&Uc(X,A)),K.set({scene:X})}w&&!K.events.handlers&&K.set({events:w(a)});const fe=a8(r,E);if(Ei.equ(fe,K.size,hp)||K.setSize(fe.width,fe.height,fe.top,fe.left),k&&K.viewport.dpr!==RD(k)&&K.setDpr(k),K.frameloop!==B&&K.setFrameloop(B),K.onPointerMissed||K.set({onPointerMissed:J}),I&&!Ei.equ(I,K.performance,hp)&&K.set(X=>({performance:{...X.performance,...I}})),!K.xr){var Ie;const X=(Ue,rt)=>{const me=a.getState();me.frameloop!=="never"&&wC(Ue,!0,me,rt)},oe=()=>{const Ue=a.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?X:null),Ue.gl.xr.isPresenting||FM(Ue)},Ce={connect(){const Ue=a.getState().gl;Ue.xr.addEventListener("sessionstart",oe),Ue.xr.addEventListener("sessionend",oe)},disconnect(){const Ue=a.getState().gl;Ue.xr.removeEventListener("sessionstart",oe),Ue.xr.removeEventListener("sessionend",oe)}};typeof((Ie=ce.xr)==null?void 0:Ie.addEventListener)=="function"&&Ce.connect(),K.set({xr:Ce})}if(ce.shadowMap){const X=ce.shadowMap.enabled,oe=ce.shadowMap.type;if(ce.shadowMap.enabled=!!D,Ei.boo(D))ce.shadowMap.type=Qg;else if(Ei.str(D)){var Pe;const Ce={basic:P3,percentage:Mp,soft:Qg,variance:ph};ce.shadowMap.type=(Pe=Ce[D])!=null?Pe:Qg}else Ei.obj(D)&&Object.assign(ce.shadowMap,D);(X!==ce.shadowMap.enabled||oe!==ce.shadowMap.type)&&(ce.shadowMap.needsUpdate=!0)}return Mn.enabled=!P,p||(ce.outputColorSpace=R?qc:$r,ce.toneMapping=N?to:gb),K.legacy!==P&&K.set(()=>({legacy:P})),K.linear!==R&&K.set(()=>({linear:R})),K.flat!==N&&K.set(()=>({flat:N})),b&&!Ei.fun(b)&&!yC(b)&&!Ei.equ(b,ce,hp)&&Uc(ce,b),f=M,p=!0,y(),this},render(_){return!p&&!v&&this.configure(),v.then(()=>{PM.updateContainer(Qe.jsx(l8,{store:a,children:_,onCreated:f,rootElement:r}),u,null,()=>{})}),a},unmount(){FD(r)}}}function l8({store:r,children:e,onCreated:t,rootElement:n}){return tv(()=>{const i=r.getState();i.set(a=>({internal:{...a.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Qe.jsx(ND.Provider,{value:r,children:e})}function FD(r,e){const t=Lh.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),PM.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var a,u,f,d;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(u=a.renderLists)==null||u.dispose==null||u.dispose(),(f=i.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(d=i.gl)!=null&&d.xr&&i.xr.disconnect(),R6(i.scene),Lh.delete(r)}catch{}},500)})}}const u8=new Set,c8=new Set,f8=new Set;function q1(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function a0(r,e){switch(r){case"before":return q1(u8,e);case"after":return q1(c8,e);case"tail":return q1(f8,e)}}let Y1,j1;function UM(r,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),Y1=e.internal.subscribers;for(let i=0;i<Y1.length;i++)j1=Y1[i],j1.ref.current(j1.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let nb=!1,zM=!1,Z1,AC,dp;function BD(r){AC=requestAnimationFrame(BD),nb=!0,Z1=0,a0("before",r),zM=!0;for(const t of Lh.values()){var e;dp=t.store.getState(),dp.internal.active&&(dp.frameloop==="always"||dp.internal.frames>0)&&!((e=dp.gl.xr)!=null&&e.isPresenting)&&(Z1+=UM(r,dp))}if(zM=!1,a0("after",r),Z1===0)return a0("tail",r),nb=!1,cancelAnimationFrame(AC)}function FM(r,e=1){var t;if(!r)return Lh.forEach(n=>FM(n.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):zM?r.internal.frames=2:r.internal.frames=1,nb||(nb=!0,requestAnimationFrame(BD)))}function wC(r,e=!0,t,n){if(e&&a0("before",r),t)UM(r,t,n);else for(const i of Lh.values())UM(r,i.store.getState());e&&a0("after",r)}const K1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function h8(r){const{handlePointer:e}=z6(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(K1).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=r.getState();if(i.disconnect==null||i.disconnect(),n(a=>({events:{...a.events,connected:t}})),i.handlers)for(const a in i.handlers){const u=i.handlers[a],[f,d]=K1[a];t.addEventListener(f,u,{passive:d})}},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const a=n.handlers[i],[u]=K1[i];n.connected.removeEventListener(u,a)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function CC(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function d8({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,u]=se.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=se.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),d=r?typeof r=="number"?r:r.scroll:null,p=r?typeof r=="number"?r:r.resize:null,v=se.useRef(!1);se.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[_,y,b]=se.useMemo(()=>{const M=()=>{if(!f.current.element)return;const{left:D,top:R,width:N,height:P,bottom:z,right:B,x:k,y:I}=f.current.element.getBoundingClientRect(),O={left:D,top:R,width:N,height:P,bottom:z,right:B,x:k,y:I};f.current.element instanceof HTMLElement&&n&&(O.height=f.current.element.offsetHeight,O.width=f.current.element.offsetWidth),Object.freeze(O),v.current&&!v8(f.current.lastBounds,O)&&u(f.current.lastBounds=O)};return[M,p?CC(M,p):M,d?CC(M,d):M]},[u,n,d,p]);function E(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",b,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function A(){f.current.element&&(f.current.resizeObserver=new i(b),f.current.resizeObserver.observe(f.current.element),e&&f.current.scrollContainers&&f.current.scrollContainers.forEach(M=>M.addEventListener("scroll",b,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}const w=M=>{!M||M===f.current.element||(E(),f.current.element=M,f.current.scrollContainers=kD(M),A())};return m8(b,!!e),p8(y),se.useEffect(()=>{E(),A()},[e,b,y]),se.useEffect(()=>E,[]),[w,a,_]}function p8(r){se.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function m8(r,e){se.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function kD(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(a=>a==="auto"||a==="scroll")&&e.push(r),[...e,...kD(r.parentElement)]}const g8=["x","y","top","bottom","left","right","width","height"],v8=(r,e)=>g8.every(t=>r[t]===e[t]);function _8({ref:r,children:e,fallback:t,resize:n,style:i,gl:a,events:u=h8,eventSource:f,eventPrefix:d,shadows:p,linear:v,flat:_,legacy:y,orthographic:b,frameloop:E,dpr:A,performance:w,raycaster:M,camera:D,scene:R,onPointerMissed:N,onCreated:P,...z}){se.useMemo(()=>$6(o6),[]);const B=A6(),[k,I]=d8({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=se.useRef(null),W=se.useRef(null);se.useImperativeHandle(r,()=>O.current);const J=CD(N),[K,ce]=se.useState(!1),[le,Z]=se.useState(!1);if(K)throw K;if(le)throw le;const Q=se.useRef(null);tv(()=>{const Ie=O.current;if(I.width>0&&I.height>0&&Ie){Q.current||(Q.current=o8(Ie));async function Pe(){await Q.current.configure({gl:a,scene:R,events:u,shadows:p,linear:v,flat:_,legacy:y,orthographic:b,frameloop:E,dpr:A,performance:w,raycaster:M,camera:D,size:I,onPointerMissed:(...X)=>J.current==null?void 0:J.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(f?E6(f)?f.current:f:W.current),d&&X.setEvents({compute:(oe,Ce)=>{const Ue=oe[d+"X"],rt=oe[d+"Y"];Ce.pointer.set(Ue/Ce.size.width*2-1,-(rt/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),P==null||P(X)}}),Q.current.render(Qe.jsx(B,{children:Qe.jsx(C6,{set:Z,children:Qe.jsx(se.Suspense,{fallback:Qe.jsx(w6,{set:ce}),children:e??null})})}))}Pe()}}),se.useEffect(()=>{const Ie=O.current;if(Ie)return()=>FD(Ie)},[]);const fe=f?"none":"auto";return Qe.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:fe,...i},...z,children:Qe.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:Qe.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function y8(r){return Qe.jsx(ED,{children:Qe.jsx(_8,{...r})})}function N0(){return N0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},N0.apply(null,arguments)}const VD=parseInt(X0.replace(/\D+/g,"")),HD=VD>=125?"uv1":"uv2";var x8=Object.defineProperty,b8=(r,e,t)=>e in r?x8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S8=(r,e,t)=>(b8(r,e+"",t),t);class M8{constructor(){S8(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let a=0,u=i.length;a<u;a++)i[a].call(this,e);e.target=null}}}var E8=Object.defineProperty,T8=(r,e,t)=>e in r?E8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kt=(r,e,t)=>(T8(r,typeof e!="symbol"?e+"":e,t),t);const Oy=new Nh,RC=new Tu,A8=Math.cos(70*(Math.PI/180)),DC=(r,e)=>(r%e+e)%e;let w8=class extends M8{constructor(e,t){super(),kt(this,"object"),kt(this,"domElement"),kt(this,"enabled",!0),kt(this,"target",new j),kt(this,"minDistance",0),kt(this,"maxDistance",1/0),kt(this,"minZoom",0),kt(this,"maxZoom",1/0),kt(this,"minPolarAngle",0),kt(this,"maxPolarAngle",Math.PI),kt(this,"minAzimuthAngle",-1/0),kt(this,"maxAzimuthAngle",1/0),kt(this,"enableDamping",!1),kt(this,"dampingFactor",.05),kt(this,"enableZoom",!0),kt(this,"zoomSpeed",1),kt(this,"enableRotate",!0),kt(this,"rotateSpeed",1),kt(this,"enablePan",!0),kt(this,"panSpeed",1),kt(this,"screenSpacePanning",!0),kt(this,"keyPanSpeed",7),kt(this,"zoomToCursor",!1),kt(this,"autoRotate",!1),kt(this,"autoRotateSpeed",2),kt(this,"reverseOrbit",!1),kt(this,"reverseHorizontalOrbit",!1),kt(this,"reverseVerticalOrbit",!1),kt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),kt(this,"mouseButtons",{LEFT:uh.ROTATE,MIDDLE:uh.DOLLY,RIGHT:uh.PAN}),kt(this,"touches",{ONE:ch.ROTATE,TWO:ch.DOLLY_PAN}),kt(this,"target0"),kt(this,"position0"),kt(this,"zoom0"),kt(this,"_domElementKeyEvents",null),kt(this,"getPolarAngle"),kt(this,"getAzimuthalAngle"),kt(this,"setPolarAngle"),kt(this,"setAzimuthalAngle"),kt(this,"getDistance"),kt(this,"getZoomScale"),kt(this,"listenToKeyEvents"),kt(this,"stopListenToKeyEvents"),kt(this,"saveState"),kt(this,"reset"),kt(this,"update"),kt(this,"connect"),kt(this,"dispose"),kt(this,"dollyIn"),kt(this,"dollyOut"),kt(this,"getScale"),kt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>v.phi,this.getAzimuthalAngle=()=>v.theta,this.setPolarAngle=$=>{let ve=DC($,2*Math.PI),lt=v.phi;lt<0&&(lt+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let te=Math.abs(ve-lt);2*Math.PI-te<te&&(ve<lt?ve+=2*Math.PI:lt+=2*Math.PI),_.phi=ve-lt,n.update()},this.setAzimuthalAngle=$=>{let ve=DC($,2*Math.PI),lt=v.theta;lt<0&&(lt+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let te=Math.abs(ve-lt);2*Math.PI-te<te&&(ve<lt?ve+=2*Math.PI:lt+=2*Math.PI),_.theta=ve-lt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",_e),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",_e),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),d=f.NONE},this.update=(()=>{const $=new j,ve=new j(0,1,0),lt=new ns().setFromUnitVectors(e.up,ve),te=lt.clone().invert(),et=new j,Ye=new ns,ct=2*Math.PI;return function(){const Be=n.object.position;lt.setFromUnitVectors(e.up,ve),te.copy(lt).invert(),$.copy(Be).sub(n.target),$.applyQuaternion(lt),v.setFromVector3($),n.autoRotate&&d===f.NONE&&ce(J()),n.enableDamping?(v.theta+=_.theta*n.dampingFactor,v.phi+=_.phi*n.dampingFactor):(v.theta+=_.theta,v.phi+=_.phi);let tt=n.minAzimuthAngle,Lt=n.maxAzimuthAngle;isFinite(tt)&&isFinite(Lt)&&(tt<-Math.PI?tt+=ct:tt>Math.PI&&(tt-=ct),Lt<-Math.PI?Lt+=ct:Lt>Math.PI&&(Lt-=ct),tt<=Lt?v.theta=Math.max(tt,Math.min(Lt,v.theta)):v.theta=v.theta>(tt+Lt)/2?Math.max(tt,v.theta):Math.min(Lt,v.theta)),v.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,v.phi)),v.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&I||n.object.isOrthographicCamera?v.radius=Ce(v.radius):v.radius=Ce(v.radius*y),$.setFromSpherical(v),$.applyQuaternion(te),Be.copy(n.target).add($),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(_.theta*=1-n.dampingFactor,_.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(_.set(0,0,0),b.set(0,0,0));let en=!1;if(n.zoomToCursor&&I){let rn=null;if(n.object instanceof Zi&&n.object.isPerspectiveCamera){const ii=$.length();rn=Ce(ii*y);const Bi=ii-rn;n.object.position.addScaledVector(B,Bi),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const ii=new j(k.x,k.y,0);ii.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),en=!0;const Bi=new j(k.x,k.y,0);Bi.unproject(n.object),n.object.position.sub(Bi).add(ii),n.object.updateMatrixWorld(),rn=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;rn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(rn).add(n.object.position):(Oy.origin.copy(n.object.position),Oy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Oy.direction))<A8?e.lookAt(n.target):(RC.setFromNormalAndCoplanarPoint(n.object.up,n.target),Oy.intersectPlane(RC,n.target))))}else n.object instanceof Ou&&n.object.isOrthographicCamera&&(en=y!==1,en&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,I=!1,en||et.distanceToSquared(n.object.position)>p||8*(1-Ye.dot(n.object.quaternion))>p?(n.dispatchEvent(i),et.copy(n.object.position),Ye.copy(n.object.quaternion),en=!1,!0):!1}})(),this.connect=$=>{n.domElement=$,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ze),n.domElement.addEventListener("pointerdown",$e),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var $,ve,lt,te,et,Ye;n.domElement&&(n.domElement.style.touchAction="auto"),($=n.domElement)==null||$.removeEventListener("contextmenu",Ze),(ve=n.domElement)==null||ve.removeEventListener("pointerdown",$e),(lt=n.domElement)==null||lt.removeEventListener("pointercancel",F),(te=n.domElement)==null||te.removeEventListener("wheel",Fe),(et=n.domElement)==null||et.ownerDocument.removeEventListener("pointermove",q),(Ye=n.domElement)==null||Ye.ownerDocument.removeEventListener("pointerup",F),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",_e)};const n=this,i={type:"change"},a={type:"start"},u={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=f.NONE;const p=1e-6,v=new wM,_=new wM;let y=1;const b=new j,E=new ke,A=new ke,w=new ke,M=new ke,D=new ke,R=new ke,N=new ke,P=new ke,z=new ke,B=new j,k=new ke;let I=!1;const O=[],W={};function J(){return 2*Math.PI/60/60*n.autoRotateSpeed}function K(){return Math.pow(.95,n.zoomSpeed)}function ce($){n.reverseOrbit||n.reverseHorizontalOrbit?_.theta+=$:_.theta-=$}function le($){n.reverseOrbit||n.reverseVerticalOrbit?_.phi+=$:_.phi-=$}const Z=(()=>{const $=new j;return function(lt,te){$.setFromMatrixColumn(te,0),$.multiplyScalar(-lt),b.add($)}})(),Q=(()=>{const $=new j;return function(lt,te){n.screenSpacePanning===!0?$.setFromMatrixColumn(te,1):($.setFromMatrixColumn(te,0),$.crossVectors(n.object.up,$)),$.multiplyScalar(lt),b.add($)}})(),fe=(()=>{const $=new j;return function(lt,te){const et=n.domElement;if(et&&n.object instanceof Zi&&n.object.isPerspectiveCamera){const Ye=n.object.position;$.copy(Ye).sub(n.target);let ct=$.length();ct*=Math.tan(n.object.fov/2*Math.PI/180),Z(2*lt*ct/et.clientHeight,n.object.matrix),Q(2*te*ct/et.clientHeight,n.object.matrix)}else et&&n.object instanceof Ou&&n.object.isOrthographicCamera?(Z(lt*(n.object.right-n.object.left)/n.object.zoom/et.clientWidth,n.object.matrix),Q(te*(n.object.top-n.object.bottom)/n.object.zoom/et.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Ie($){n.object instanceof Zi&&n.object.isPerspectiveCamera||n.object instanceof Ou&&n.object.isOrthographicCamera?y=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Pe($){Ie(y/$)}function X($){Ie(y*$)}function oe($){if(!n.zoomToCursor||!n.domElement)return;I=!0;const ve=n.domElement.getBoundingClientRect(),lt=$.clientX-ve.left,te=$.clientY-ve.top,et=ve.width,Ye=ve.height;k.x=lt/et*2-1,k.y=-(te/Ye)*2+1,B.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ce($){return Math.max(n.minDistance,Math.min(n.maxDistance,$))}function Ue($){E.set($.clientX,$.clientY)}function rt($){oe($),N.set($.clientX,$.clientY)}function me($){M.set($.clientX,$.clientY)}function Re($){A.set($.clientX,$.clientY),w.subVectors(A,E).multiplyScalar(n.rotateSpeed);const ve=n.domElement;ve&&(ce(2*Math.PI*w.x/ve.clientHeight),le(2*Math.PI*w.y/ve.clientHeight)),E.copy(A),n.update()}function it($){P.set($.clientX,$.clientY),z.subVectors(P,N),z.y>0?Pe(K()):z.y<0&&X(K()),N.copy(P),n.update()}function ee($){D.set($.clientX,$.clientY),R.subVectors(D,M).multiplyScalar(n.panSpeed),fe(R.x,R.y),M.copy(D),n.update()}function ft($){oe($),$.deltaY<0?X(K()):$.deltaY>0&&Pe(K()),n.update()}function yt($){let ve=!1;switch($.code){case n.keys.UP:fe(0,n.keyPanSpeed),ve=!0;break;case n.keys.BOTTOM:fe(0,-n.keyPanSpeed),ve=!0;break;case n.keys.LEFT:fe(n.keyPanSpeed,0),ve=!0;break;case n.keys.RIGHT:fe(-n.keyPanSpeed,0),ve=!0;break}ve&&($.preventDefault(),n.update())}function Yt(){if(O.length==1)E.set(O[0].pageX,O[0].pageY);else{const $=.5*(O[0].pageX+O[1].pageX),ve=.5*(O[0].pageY+O[1].pageY);E.set($,ve)}}function Et(){if(O.length==1)M.set(O[0].pageX,O[0].pageY);else{const $=.5*(O[0].pageX+O[1].pageX),ve=.5*(O[0].pageY+O[1].pageY);M.set($,ve)}}function ge(){const $=O[0].pageX-O[1].pageX,ve=O[0].pageY-O[1].pageY,lt=Math.sqrt($*$+ve*ve);N.set(0,lt)}function We(){n.enableZoom&&ge(),n.enablePan&&Et()}function Ae(){n.enableZoom&&ge(),n.enableRotate&&Yt()}function xe($){if(O.length==1)A.set($.pageX,$.pageY);else{const lt=pt($),te=.5*($.pageX+lt.x),et=.5*($.pageY+lt.y);A.set(te,et)}w.subVectors(A,E).multiplyScalar(n.rotateSpeed);const ve=n.domElement;ve&&(ce(2*Math.PI*w.x/ve.clientHeight),le(2*Math.PI*w.y/ve.clientHeight)),E.copy(A)}function Y($){if(O.length==1)D.set($.pageX,$.pageY);else{const ve=pt($),lt=.5*($.pageX+ve.x),te=.5*($.pageY+ve.y);D.set(lt,te)}R.subVectors(D,M).multiplyScalar(n.panSpeed),fe(R.x,R.y),M.copy(D)}function dt($){const ve=pt($),lt=$.pageX-ve.x,te=$.pageY-ve.y,et=Math.sqrt(lt*lt+te*te);P.set(0,et),z.set(0,Math.pow(P.y/N.y,n.zoomSpeed)),Pe(z.y),N.copy(P)}function Ee($){n.enableZoom&&dt($),n.enablePan&&Y($)}function Ct($){n.enableZoom&&dt($),n.enableRotate&&xe($)}function $e($){var ve,lt;n.enabled!==!1&&(O.length===0&&((ve=n.domElement)==null||ve.ownerDocument.addEventListener("pointermove",q),(lt=n.domElement)==null||lt.ownerDocument.addEventListener("pointerup",F)),Mt($),$.pointerType==="touch"?st($):ae($))}function q($){n.enabled!==!1&&($.pointerType==="touch"?He($):Le($))}function F($){var ve,lt,te;qe($),O.length===0&&((ve=n.domElement)==null||ve.releasePointerCapture($.pointerId),(lt=n.domElement)==null||lt.ownerDocument.removeEventListener("pointermove",q),(te=n.domElement)==null||te.ownerDocument.removeEventListener("pointerup",F)),n.dispatchEvent(u),d=f.NONE}function ae($){let ve;switch($.button){case 0:ve=n.mouseButtons.LEFT;break;case 1:ve=n.mouseButtons.MIDDLE;break;case 2:ve=n.mouseButtons.RIGHT;break;default:ve=-1}switch(ve){case uh.DOLLY:if(n.enableZoom===!1)return;rt($),d=f.DOLLY;break;case uh.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enablePan===!1)return;me($),d=f.PAN}else{if(n.enableRotate===!1)return;Ue($),d=f.ROTATE}break;case uh.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enableRotate===!1)return;Ue($),d=f.ROTATE}else{if(n.enablePan===!1)return;me($),d=f.PAN}break;default:d=f.NONE}d!==f.NONE&&n.dispatchEvent(a)}function Le($){if(n.enabled!==!1)switch(d){case f.ROTATE:if(n.enableRotate===!1)return;Re($);break;case f.DOLLY:if(n.enableZoom===!1)return;it($);break;case f.PAN:if(n.enablePan===!1)return;ee($);break}}function Fe($){n.enabled===!1||n.enableZoom===!1||d!==f.NONE&&d!==f.ROTATE||($.preventDefault(),n.dispatchEvent(a),ft($),n.dispatchEvent(u))}function _e($){n.enabled===!1||n.enablePan===!1||yt($)}function st($){switch(nt($),O.length){case 1:switch(n.touches.ONE){case ch.ROTATE:if(n.enableRotate===!1)return;Yt(),d=f.TOUCH_ROTATE;break;case ch.PAN:if(n.enablePan===!1)return;Et(),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(n.touches.TWO){case ch.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;We(),d=f.TOUCH_DOLLY_PAN;break;case ch.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ae(),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&n.dispatchEvent(a)}function He($){switch(nt($),d){case f.TOUCH_ROTATE:if(n.enableRotate===!1)return;xe($),n.update();break;case f.TOUCH_PAN:if(n.enablePan===!1)return;Y($),n.update();break;case f.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ee($),n.update();break;case f.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ct($),n.update();break;default:d=f.NONE}}function Ze($){n.enabled!==!1&&$.preventDefault()}function Mt($){O.push($)}function qe($){delete W[$.pointerId];for(let ve=0;ve<O.length;ve++)if(O[ve].pointerId==$.pointerId){O.splice(ve,1);return}}function nt($){let ve=W[$.pointerId];ve===void 0&&(ve=new ke,W[$.pointerId]=ve),ve.set($.pageX,$.pageY)}function pt($){const ve=$.pointerId===O[0].pointerId?O[1]:O[0];return W[ve.pointerId]}this.dollyIn=($=K())=>{X($),n.update()},this.dollyOut=($=K())=>{Pe($),n.update()},this.getScale=()=>y,this.setScale=$=>{Ie($),n.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};const LC=new dr,Iy=new j;class gT extends sT{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new St(e,3)),this.setAttribute("uv",new St(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Jx(t,6,1);return this.setAttribute("instanceStart",new ga(n,3,0)),this.setAttribute("instanceEnd",new ga(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new Jx(n,t*2,1);return this.setAttribute("instanceColorStart",new ga(i,t,0)),this.setAttribute("instanceColorEnd",new ga(i,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new jE(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dr);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),LC.setFromBufferAttribute(t),this.boundingBox.union(LC))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let a=0,u=e.count;a<u;a++)Iy.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(Iy)),Iy.fromBufferAttribute(t,a),i=Math.max(i,n.distanceToSquared(Iy));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class GD extends gT{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e,t=3){const n=e.length-t,i=new Float32Array(2*n);if(t===3)for(let a=0;a<n;a+=t)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5];else for(let a=0;a<n;a+=t)i[2*a]=e[a],i[2*a+1]=e[a+1],i[2*a+2]=e[a+2],i[2*a+3]=e[a+3],i[2*a+4]=e[a+4],i[2*a+5]=e[a+5],i[2*a+6]=e[a+6],i[2*a+7]=e[a+7];return super.setColors(i,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class vT extends Ma{constructor(e){super({type:"LineMaterial",uniforms:Yx.clone(Yx.merge([mt.common,mt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ke(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${VD>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const Q1=new Dn,NC=new j,OC=new j,Pr=new Dn,Ur=new Dn,_l=new Dn,J1=new j,$1=new Xt,zr=new pD,IC=new j,Py=new dr,Uy=new pr,yl=new Dn;let bl,Sh;function PC(r,e,t){return yl.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),yl.multiplyScalar(1/yl.w),yl.x=Sh/t.width,yl.y=Sh/t.height,yl.applyMatrix4(r.projectionMatrixInverse),yl.multiplyScalar(1/yl.w),Math.abs(Math.max(yl.x,yl.y))}function C8(r,e){const t=r.matrixWorld,n=r.geometry,i=n.attributes.instanceStart,a=n.attributes.instanceEnd,u=Math.min(n.instanceCount,i.count);for(let f=0,d=u;f<d;f++){zr.start.fromBufferAttribute(i,f),zr.end.fromBufferAttribute(a,f),zr.applyMatrix4(t);const p=new j,v=new j;bl.distanceSqToSegment(zr.start,zr.end,v,p),v.distanceTo(p)<Sh*.5&&e.push({point:v,pointOnLine:p,distance:bl.origin.distanceTo(v),object:r,face:null,faceIndex:f,uv:null,[HD]:null})}}function R8(r,e,t){const n=e.projectionMatrix,a=r.material.resolution,u=r.matrixWorld,f=r.geometry,d=f.attributes.instanceStart,p=f.attributes.instanceEnd,v=Math.min(f.instanceCount,d.count),_=-e.near;bl.at(1,_l),_l.w=1,_l.applyMatrix4(e.matrixWorldInverse),_l.applyMatrix4(n),_l.multiplyScalar(1/_l.w),_l.x*=a.x/2,_l.y*=a.y/2,_l.z=0,J1.copy(_l),$1.multiplyMatrices(e.matrixWorldInverse,u);for(let y=0,b=v;y<b;y++){if(Pr.fromBufferAttribute(d,y),Ur.fromBufferAttribute(p,y),Pr.w=1,Ur.w=1,Pr.applyMatrix4($1),Ur.applyMatrix4($1),Pr.z>_&&Ur.z>_)continue;if(Pr.z>_){const R=Pr.z-Ur.z,N=(Pr.z-_)/R;Pr.lerp(Ur,N)}else if(Ur.z>_){const R=Ur.z-Pr.z,N=(Ur.z-_)/R;Ur.lerp(Pr,N)}Pr.applyMatrix4(n),Ur.applyMatrix4(n),Pr.multiplyScalar(1/Pr.w),Ur.multiplyScalar(1/Ur.w),Pr.x*=a.x/2,Pr.y*=a.y/2,Ur.x*=a.x/2,Ur.y*=a.y/2,zr.start.copy(Pr),zr.start.z=0,zr.end.copy(Ur),zr.end.z=0;const A=zr.closestPointToPointParameter(J1,!0);zr.at(A,IC);const w=vR.lerp(Pr.z,Ur.z,A),M=w>=-1&&w<=1,D=J1.distanceTo(IC)<Sh*.5;if(M&&D){zr.start.fromBufferAttribute(d,y),zr.end.fromBufferAttribute(p,y),zr.start.applyMatrix4(u),zr.end.applyMatrix4(u);const R=new j,N=new j;bl.distanceSqToSegment(zr.start,zr.end,N,R),t.push({point:N,pointOnLine:R,distance:bl.origin.distanceTo(N),object:r,face:null,faceIndex:y,uv:null,[HD]:null})}}}class WD extends Qi{constructor(e=new gT,t=new vT({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let u=0,f=0,d=t.count;u<d;u++,f+=2)NC.fromBufferAttribute(t,u),OC.fromBufferAttribute(n,u),i[f]=f===0?0:i[f-1],i[f+1]=i[f]+NC.distanceTo(OC);const a=new Jx(i,2,1);return e.setAttribute("instanceDistanceStart",new ga(a,1,0)),e.setAttribute("instanceDistanceEnd",new ga(a,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;bl=e.ray;const u=this.matrixWorld,f=this.geometry,d=this.material;Sh=d.linewidth+a,f.boundingSphere===null&&f.computeBoundingSphere(),Uy.copy(f.boundingSphere).applyMatrix4(u);let p;if(n)p=Sh*.5;else{const _=Math.max(i.near,Uy.distanceToPoint(bl.origin));p=PC(i,_,d.resolution)}if(Uy.radius+=p,bl.intersectsSphere(Uy)===!1)return;f.boundingBox===null&&f.computeBoundingBox(),Py.copy(f.boundingBox).applyMatrix4(u);let v;if(n)v=Sh*.5;else{const _=Math.max(i.near,Py.distanceToPoint(bl.origin));v=PC(i,_,d.resolution)}Py.expandByScalar(v),bl.intersectsBox(Py)!==!1&&(n?C8(this,t):R8(this,i,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Q1),this.material.uniforms.resolution.value.set(Q1.z,Q1.w))}}class D8 extends WD{constructor(e=new GD,t=new vT({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const L8=se.forwardRef(function({points:e,color:t=16777215,vertexColors:n,linewidth:i,lineWidth:a,segments:u,dashed:f,...d},p){var v,_;const y=Mu(M=>M.size),b=se.useMemo(()=>u?new WD:new D8,[u]),[E]=se.useState(()=>new vT),A=(n==null||(v=n[0])==null?void 0:v.length)===4?4:3,w=se.useMemo(()=>{const M=u?new gT:new GD,D=e.map(R=>{const N=Array.isArray(R);return R instanceof j||R instanceof Dn?[R.x,R.y,R.z]:R instanceof ke?[R.x,R.y,0]:N&&R.length===3?[R[0],R[1],R[2]]:N&&R.length===2?[R[0],R[1],0]:R});if(M.setPositions(D.flat()),n){t=16777215;const R=n.map(N=>N instanceof xt?N.toArray():N);M.setColors(R.flat(),A)}return M},[e,u,n,A]);return se.useLayoutEffect(()=>{b.computeLineDistances()},[e,b]),se.useLayoutEffect(()=>{f?E.defines.USE_DASH="":delete E.defines.USE_DASH,E.needsUpdate=!0},[f,E]),se.useEffect(()=>()=>{w.dispose(),E.dispose()},[w]),se.createElement("primitive",N0({object:b,ref:p},d),se.createElement("primitive",{object:w,attach:"geometry"}),se.createElement("primitive",N0({object:E,attach:"material",color:t,vertexColors:!!n,resolution:[y.width,y.height],linewidth:(_=i??a)!==null&&_!==void 0?_:1,dashed:f,transparent:A===4},d)))}),N8=se.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:a=!1,onChange:u,onStart:f,onEnd:d,...p},v)=>{const _=Mu(z=>z.invalidate),y=Mu(z=>z.camera),b=Mu(z=>z.gl),E=Mu(z=>z.events),A=Mu(z=>z.setEvents),w=Mu(z=>z.set),M=Mu(z=>z.get),D=Mu(z=>z.performance),R=e||y,N=n||E.connected||b.domElement,P=se.useMemo(()=>new w8(R),[R]);return pT(()=>{P.enabled&&P.update()},-1),se.useEffect(()=>(a&&P.connect(a===!0?N:a),P.connect(N),()=>void P.dispose()),[a,N,t,P,_]),se.useEffect(()=>{const z=I=>{_(),t&&D.regress(),u&&u(I)},B=I=>{f&&f(I)},k=I=>{d&&d(I)};return P.addEventListener("change",z),P.addEventListener("start",B),P.addEventListener("end",k),()=>{P.removeEventListener("start",B),P.removeEventListener("end",k),P.removeEventListener("change",z)}},[u,f,d,P,_,A]),se.useEffect(()=>{if(r){const z=M().controls;return w({controls:P}),()=>w({controls:z})}},[r,P]),se.createElement("primitive",N0({ref:v,object:P,enableDamping:i},p))});function O8({start:r,end:e,color:t}){const n=se.useMemo(()=>[new j(...r),new j(...e)],[r,e]);return Qe.jsx(L8,{points:n,color:t,lineWidth:2,opacity:.9,transparent:!0})}function I8({vertices:r,color:e}){const t=se.useMemo(()=>{const n=new Kt,i=[...r[0],...r[1],...r[2],...r[0],...r[2],...r[3],...r[0],...r[3],...r[4]];return n.setAttribute("position",new St(i,3)),n.computeVertexNormals(),n},[r]);return Qe.jsx("mesh",{geometry:t,children:Qe.jsx("meshStandardMaterial",{color:e,transparent:!0,opacity:0,side:No,depthWrite:!1})})}function P8({shapeColor:r,topFaceIndices:e,vertices:t,faces:n}){const i=se.useRef([]),a=se.useRef(),u=se.useMemo(()=>{const d=document.createElement("canvas");d.width=64,d.height=64;const p=d.getContext("2d");p.clearRect(0,0,64,64),p.beginPath(),p.arc(32,32,24,0,Math.PI*2),p.fillStyle=r==="#ffffff"?"rgba(255, 255, 255, 1)":"rgba(0, 0, 0, 1)",p.fill();const v=new DR(d);return v.needsUpdate=!0,v},[r]),f=()=>{const d=e[Math.floor(Math.random()*e.length)],p=n[d].vertices,v=Math.floor(Math.random()*3),_=new j(...p[0]),y=new j(...p[v+1]),b=new j(...p[v+2]);let E=Math.random(),A=Math.random();return E+A>1&&(E=1-E,A=1-A),_.clone().multiplyScalar(1-E-A).add(y.clone().multiplyScalar(E)).add(b.clone().multiplyScalar(A))};return se.useEffect(()=>{const d=[];for(let p=0;p<15;p++){const v=new FE(new Ob({map:u,transparent:!0,opacity:0,depthWrite:!1,sizeAttenuation:!0})),_=f();v.position.copy(_);const y=.12+Math.random()*.08;v.scale.set(y,y,1),v.userData={life:Math.random()*4,maxLife:3+Math.random()*2,size:y,startPos:_.clone()},d.push(v),a.current&&a.current.add(v)}return i.current=d,()=>{d.forEach(p=>{p.parent&&p.parent.remove(p),p.material.dispose()})}},[u]),pT((d,p)=>{i.current.forEach(v=>{v.userData.life+=p;const{life:_,maxLife:y}=v.userData,b=_%y/y;if(_>=y){v.userData.life=0;const M=f();v.position.copy(M),v.userData.startPos.copy(M),v.userData.size=.12+Math.random()*.08;return}const E=b*3.5;v.position.y=v.userData.startPos.y+E,v.position.x=v.userData.startPos.x+Math.sin(_*2)*.15,v.position.z=v.userData.startPos.z+Math.cos(_*1.5)*.1;let A;b<.1?A=b*10:b<.6?A=1:A=(1-b)*2.5,v.material.opacity=Math.max(0,A*.4);const w=v.userData.size*(1+b*.3);v.scale.set(w,w,1)})}),Qe.jsx("group",{ref:a})}function U8({shapeColor:r}){const e=se.useRef(),t=-Math.atan((1+Math.sqrt(5))/2);pT(()=>{e.current&&(e.current.rotation.y+=.003)});const n=(1+Math.sqrt(5))/2,i=1/n,a=se.useMemo(()=>[[1.2,1.2,1.2],[1.2,1.2,-1.2],[1.2,-1.2,1.2],[1.2,-1.2,-1.2],[-1.2,1.2,1.2],[-1.2,1.2,-1.2],[-1.2,-1.2,1.2],[-1.2,-1.2,-1.2],[0,1.2*i,1.2*n],[0,-1.2*i,1.2*n],[0,1.2*i,-1.2*n],[0,-1.2*i,-1.2*n],[1.2*i,1.2*n,0],[-1.2*i,1.2*n,0],[1.2*i,-1.2*n,0],[-1.2*i,-1.2*n,0],[1.2*n,0,1.2*i],[-1.2*n,0,1.2*i],[1.2*n,0,-1.2*i],[-1.2*n,0,-1.2*i]],[]),u=se.useMemo(()=>[{start:a[0],end:a[8],key:"e0-8"},{start:a[0],end:a[12],key:"e0-12"},{start:a[0],end:a[16],key:"e0-16"},{start:a[1],end:a[10],key:"e1-10"},{start:a[1],end:a[12],key:"e1-12"},{start:a[1],end:a[18],key:"e1-18"},{start:a[2],end:a[9],key:"e2-9"},{start:a[2],end:a[14],key:"e2-14"},{start:a[2],end:a[16],key:"e2-16"},{start:a[3],end:a[11],key:"e3-11"},{start:a[3],end:a[14],key:"e3-14"},{start:a[3],end:a[18],key:"e3-18"},{start:a[4],end:a[8],key:"e4-8"},{start:a[4],end:a[13],key:"e4-13"},{start:a[4],end:a[17],key:"e4-17"},{start:a[5],end:a[10],key:"e5-10"},{start:a[5],end:a[13],key:"e5-13"},{start:a[5],end:a[19],key:"e5-19"},{start:a[6],end:a[9],key:"e6-9"},{start:a[6],end:a[15],key:"e6-15"},{start:a[6],end:a[17],key:"e6-17"},{start:a[7],end:a[11],key:"e7-11"},{start:a[7],end:a[15],key:"e7-15"},{start:a[7],end:a[19],key:"e7-19"},{start:a[8],end:a[9],key:"e8-9"},{start:a[10],end:a[11],key:"e10-11"},{start:a[12],end:a[13],key:"e12-13"},{start:a[14],end:a[15],key:"e14-15"},{start:a[16],end:a[18],key:"e16-18"},{start:a[17],end:a[19],key:"e17-19"}],[a]),f=se.useMemo(()=>[{vertices:[a[0],a[16],a[2],a[9],a[8]],key:"f0"},{vertices:[a[0],a[8],a[4],a[13],a[12]],key:"f1"},{vertices:[a[0],a[12],a[1],a[18],a[16]],key:"f2"},{vertices:[a[8],a[9],a[6],a[17],a[4]],key:"f3"},{vertices:[a[2],a[16],a[18],a[3],a[14]],key:"f4"},{vertices:[a[1],a[12],a[13],a[5],a[10]],key:"f5"},{vertices:[a[4],a[17],a[19],a[5],a[13]],key:"f6"},{vertices:[a[2],a[14],a[15],a[6],a[9]],key:"f7"},{vertices:[a[1],a[10],a[11],a[3],a[18]],key:"f8"},{vertices:[a[6],a[15],a[7],a[19],a[17]],key:"f9"},{vertices:[a[3],a[11],a[7],a[15],a[14]],key:"f10"},{vertices:[a[5],a[19],a[7],a[11],a[10]],key:"f11"}],[a]),d=[1,5];return Qe.jsx("group",{position:[0,-1.5,0],children:Qe.jsx("group",{rotation:[t,0,0],children:Qe.jsxs("group",{ref:e,children:[f.map(p=>Qe.jsx(I8,{vertices:p.vertices,color:r},p.key)),u.map(p=>Qe.jsx(O8,{start:p.start,end:p.end,color:r},p.key)),a.map((p,v)=>Qe.jsxs("mesh",{position:p,children:[Qe.jsx("sphereGeometry",{args:[.05,16,16]}),Qe.jsx("meshStandardMaterial",{color:r})]},`v${v}`)),Qe.jsx(P8,{shapeColor:r,topFaceIndices:d,vertices:a,faces:f})]})})})}function z8(){const[r,e]=se.useState("#000000");return se.useEffect(()=>{const t=()=>{const i=document.documentElement.getAttribute("data-theme")==="dark";e(i?"#ffffff":"#000000")};t();const n=new MutationObserver(t);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()},[]),Qe.jsx("div",{style:{width:"100%",height:"100%"},children:Qe.jsxs(y8,{camera:{position:[0,4,7],fov:60},style:{background:"transparent"},children:[Qe.jsx("ambientLight",{intensity:.5,color:"#ffffff"}),Qe.jsx("directionalLight",{position:[5,5,5],intensity:.5,color:"#ffffff"}),Qe.jsx(U8,{shapeColor:r}),Qe.jsx(N8,{enableZoom:!1,enablePan:!1,autoRotate:!1})]})})}const UC=[z8],F8=5e3,B8=1600,k8=1600;function V8(){const[r,e]=se.useState(0),[t,n]=se.useState("growing"),i=se.useCallback(()=>{n("shrinking")},[]);se.useEffect(()=>{if(t==="showing"){const f=setTimeout(i,F8);return()=>clearTimeout(f)}if(t==="shrinking"){const f=setTimeout(()=>{e(d=>(d+1)%UC.length),n("growing")},B8);return()=>clearTimeout(f)}if(t==="growing"){const f=setTimeout(()=>{n("showing")},k8);return()=>clearTimeout(f)}},[t,i]);const a=UC[r];let u="symbol-transition";return t==="shrinking"?u+=" symbol-shrink":t==="growing"?u+=" symbol-grow":u+=" symbol-visible",Qe.jsx("article",{className:"symbolContainer",children:Qe.jsx("section",{className:"symbol",style:{opacity:1},children:Qe.jsx("div",{className:u,children:Qe.jsx(a,{})})})})}function H8(r){function e(t){let n=Jc(),i=M3(),a=IO();return Qe.jsx(r,{...t,location:n,params:a,navigate:i})}return e}const G8={workItemData:[],_fetchData:async function(){let r;return this.workItemData.length===0?(r=await(await fetch("https://api.dribbble.com/v2/user/shots?page=1&per_page=100"+"&access_token=undefined")).json(),this.workItemData=r):r=this.workItemData,r},_findItem:function(r,e){let t;return r.forEach((n,i)=>{n.id.toString()===e&&(t=n)}),t},getAllWorkItems:async function(){return await this._fetchData()},getSingleItem:async function(r){let e;if(this.workItemData.length>0)e=this._findItem(this.workItemData,r);else{let t=await this._fetchData();e=this._findItem(t,r)}return e}};function wl(r){if(!r)return[];if(Array.isArray(r))return r;if(r.nodeType!==void 0)return[r];if(typeof r=="string"&&(r=document.querySelectorAll(r)),r.length!==void 0)return[].slice.call(r,0);throw new TypeError("unexpected input "+String(r))}function ss({context:r,label:e="context-to-element",resolveDocument:t,defaultToDocument:n}){let i=wl(r)[0];if(t&&i&&i.nodeType===Node.DOCUMENT_NODE&&(i=i.documentElement),!i&&n)return document.documentElement;if(!i)throw new TypeError(e+" requires valid options.context");if(i.nodeType!==Node.ELEMENT_NODE&&i.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)throw new TypeError(e+" requires options.context to be an Element");return i}function eS({context:r}={}){const e=[];let t=ss({label:"get/parents",context:r});for(;t;)e.push(t),t=t.parentNode,t&&t.nodeType!==Node.ELEMENT_NODE&&(t=null);return e}const W8=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"];let BM=null;function X8(r){W8.some(function(e){return r[e]?(BM=e,!0):!1})}function XD(r,e){return BM||X8(r),r[BM](e)}var jg={exports:{}};/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2016 Benjamin Tan <https://demoneaux.github.io/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */var q8=jg.exports,zC;function Y8(){return zC||(zC=1,(function(r,e){(function(){var t={function:!0,object:!0},n=t[typeof window]&&window||this,i=n,a=e,u=r&&!r.nodeType&&r,f=a&&u&&typeof ix=="object"&&ix;f&&(f.global===f||f.window===f||f.self===f)&&(n=f);var d=Math.pow(2,53)-1,p=/\bOpera/,v=this,_=Object.prototype,y=_.hasOwnProperty,b=_.toString;function E(O){return O=String(O),O.charAt(0).toUpperCase()+O.slice(1)}function A(O,W,J){var K={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return W&&J&&/^Win/i.test(O)&&!/^Windows Phone /i.test(O)&&(K=K[/[\d.]+$/.exec(O)])&&(O="Windows "+K),O=String(O),W&&J&&(O=O.replace(RegExp(W,"i"),J)),O=M(O.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),O}function w(O,W){var J=-1,K=O?O.length:0;if(typeof K=="number"&&K>-1&&K<=d)for(;++J<K;)W(O[J],J,O);else D(O,W)}function M(O){return O=B(O),/^(?:webOS|i(?:OS|P))/.test(O)?O:E(O)}function D(O,W){for(var J in O)y.call(O,J)&&W(O[J],J,O)}function R(O){return O==null?E(O):b.call(O).slice(8,-1)}function N(O,W){var J=O!=null?typeof O[W]:"number";return!/^(?:boolean|number|string|undefined)$/.test(J)&&(J=="object"?!!O[W]:!0)}function P(O){return String(O).replace(/([ -])(?!$)/g,"$1?")}function z(O,W){var J=null;return w(O,function(K,ce){J=W(J,K,ce,O)}),J}function B(O){return String(O).replace(/^ +| +$/g,"")}function k(O){var W=n,J=O&&typeof O=="object"&&R(O)!="String";J&&(W=O,O=null);var K=W.navigator||{},ce=K.userAgent||"";O||(O=ce);var le=J||v==i,Z=J?!!K.likeChrome:/\bChrome\b/.test(O)&&!/internal|\n/i.test(b.toString()),Q="Object",fe=J?Q:"ScriptBridgingProxyObject",Ie=J?Q:"Environment",Pe=J&&W.java?"JavaPackage":R(W.java),X=J?Q:"RuntimeObject",oe=/\bJava/.test(Pe)&&W.java,Ce=oe&&R(W.environment)==Ie,Ue=oe?"a":"",rt=oe?"b":"",me=W.document||{},Re=W.operamini||W.opera,it=p.test(it=J&&Re?Re["[[Class]]"]:R(Re))?it:Re=null,ee,ft=O,yt=[],Yt=null,Et=O==ce,ge=Et&&Re&&typeof Re.version=="function"&&Re.version(),We,Ae=Ct([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),xe=q(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Y=ae([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),dt=$e({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Ee=F(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Ct(st){return z(st,function(He,Ze){return He||RegExp("\\b"+(Ze.pattern||P(Ze))+"\\b","i").exec(O)&&(Ze.label||Ze)})}function $e(st){return z(st,function(He,Ze,Mt){return He||(Ze[Y]||Ze[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Y)]||RegExp("\\b"+P(Mt)+"(?:\\b|\\w*\\d)","i").exec(O))&&Mt})}function q(st){return z(st,function(He,Ze){return He||RegExp("\\b"+(Ze.pattern||P(Ze))+"\\b","i").exec(O)&&(Ze.label||Ze)})}function F(st){return z(st,function(He,Ze){var Mt=Ze.pattern||P(Ze);return!He&&(He=RegExp("\\b"+Mt+"(?:/[\\d.]+|[ \\w.]*)","i").exec(O))&&(He=A(He,Mt,Ze.label||Ze)),He})}function ae(st){return z(st,function(He,Ze){var Mt=Ze.pattern||P(Ze);return!He&&(He=RegExp("\\b"+Mt+" *\\d+[.\\w_]*","i").exec(O)||RegExp("\\b"+Mt+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(O))&&((He=String(Ze.label&&!RegExp(Mt,"i").test(Ze.label)?Ze.label:He).split("/"))[1]&&!/[\d.]+/.test(He[0])&&(He[0]+=" "+He[1]),Ze=Ze.label||Ze,He=M(He[0].replace(RegExp(Mt,"i"),Ze).replace(RegExp("; *(?:"+Ze+"[_-])?","i")," ").replace(RegExp("("+Ze+")[-_.]?(\\w)","i"),"$1 $2"))),He})}function Le(st){return z(st,function(He,Ze){return He||(RegExp(Ze+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(O)||0)[1]||null})}function Fe(){return this.description||""}if(Ae&&(Ae=[Ae]),dt&&!Y&&(Y=ae([dt])),(ee=/\bGoogle TV\b/.exec(Y))&&(Y=ee[0]),/\bSimulator\b/i.test(O)&&(Y=(Y?Y+" ":"")+"Simulator"),xe=="Opera Mini"&&/\bOPiOS\b/.test(O)&&yt.push("running in Turbo/Uncompressed mode"),xe=="IE"&&/\blike iPhone OS\b/.test(O)?(ee=k(O.replace(/like iPhone OS/,"")),dt=ee.manufacturer,Y=ee.product):/^iP/.test(Y)?(xe||(xe="Safari"),Ee="iOS"+((ee=/ OS ([\d_]+)/i.exec(O))?" "+ee[1].replace(/_/g,"."):"")):xe=="Konqueror"&&!/buntu/i.test(Ee)?Ee="Kubuntu":dt&&dt!="Google"&&(/Chrome/.test(xe)&&!/\bMobile Safari\b/i.test(O)||/\bVita\b/.test(Y))||/\bAndroid\b/.test(Ee)&&/^Chrome/.test(xe)&&/\bVersion\//i.test(O)?(xe="Android Browser",Ee=/\bAndroid\b/.test(Ee)?Ee:"Android"):xe=="Silk"?(/\bMobi/i.test(O)||(Ee="Android",yt.unshift("desktop mode")),/Accelerated *= *true/i.test(O)&&yt.unshift("accelerated")):xe=="PaleMoon"&&(ee=/\bFirefox\/([\d.]+)\b/.exec(O))?yt.push("identifying as Firefox "+ee[1]):xe=="Firefox"&&(ee=/\b(Mobile|Tablet|TV)\b/i.exec(O))?(Ee||(Ee="Firefox OS"),Y||(Y=ee[1])):(!xe||(ee=!/\bMinefield\b/i.test(O)&&/\b(?:Firefox|Safari)\b/.exec(xe)))&&(xe&&!Y&&/[\/,]|^[^(]+?\)/.test(O.slice(O.indexOf(ee+"/")+8))&&(xe=null),(ee=Y||dt||Ee)&&(Y||dt||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Ee))&&(xe=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Ee)?Ee:ee)+" Browser")),ge||(ge=Le(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",P(xe),"(?:Firefox|Minefield|NetFront)"])),(ee=Ae=="iCab"&&parseFloat(ge)>3&&"WebKit"||/\bOpera\b/.test(xe)&&(/\bOPR\b/.test(O)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(O)&&!/^(?:Trident|EdgeHTML)$/.test(Ae)&&"WebKit"||!Ae&&/\bMSIE\b/i.test(O)&&(Ee=="Mac OS"?"Tasman":"Trident")||Ae=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(xe)&&"NetFront")&&(Ae=[ee]),xe=="IE"&&(ee=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(O)||0)[1])?(xe+=" Mobile",Ee="Windows Phone "+(/\+$/.test(ee)?ee:ee+".x"),yt.unshift("desktop mode")):/\bWPDesktop\b/i.test(O)?(xe="IE Mobile",Ee="Windows Phone 8.x",yt.unshift("desktop mode"),ge||(ge=(/\brv:([\d.]+)/.exec(O)||0)[1])):xe!="IE"&&Ae=="Trident"&&(ee=/\brv:([\d.]+)/.exec(O))&&(xe&&yt.push("identifying as "+xe+(ge?" "+ge:"")),xe="IE",ge=ee[1]),Et){if(N(W,"global"))if(oe&&(ee=oe.lang.System,ft=ee.getProperty("os.arch"),Ee=Ee||ee.getProperty("os.name")+" "+ee.getProperty("os.version")),le&&N(W,"system")&&(ee=[W.system])[0]){Ee||(Ee=ee[0].os||null);try{ee[1]=W.require("ringo/engine").version,ge=ee[1].join("."),xe="RingoJS"}catch{ee[0].global.system==W.system&&(xe="Narwhal")}}else typeof W.process=="object"&&!W.process.browser&&(ee=W.process)?(xe="Node.js",ft=ee.arch,Ee=ee.platform,ge=/[\d.]+/.exec(ee.version)[0]):Ce&&(xe="Rhino");else R(ee=W.runtime)==fe?(xe="Adobe AIR",Ee=ee.flash.system.Capabilities.os):R(ee=W.phantom)==X?(xe="PhantomJS",ge=(ee=ee.version||null)&&ee.major+"."+ee.minor+"."+ee.patch):typeof me.documentMode=="number"&&(ee=/\bTrident\/(\d+)/i.exec(O))&&(ge=[ge,me.documentMode],(ee=+ee[1]+4)!=ge[1]&&(yt.push("IE "+ge[1]+" mode"),Ae&&(Ae[1]=""),ge[1]=ee),ge=xe=="IE"?String(ge[1].toFixed(1)):ge[0]);Ee=Ee&&M(Ee)}ge&&(ee=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(ge)||/(?:alpha|beta)(?: ?\d)?/i.exec(O+";"+(Et&&K.appMinorVersion))||/\bMinefield\b/i.test(O)&&"a")&&(Yt=/b/i.test(ee)?"beta":"alpha",ge=ge.replace(RegExp(ee+"\\+?$"),"")+(Yt=="beta"?rt:Ue)+(/\d+\+?/.exec(ee)||"")),xe=="Fennec"||xe=="Firefox"&&/\b(?:Android|Firefox OS)\b/.test(Ee)?xe="Firefox Mobile":xe=="Maxthon"&&ge?ge=ge.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(Y)?(Ee=null,Y=="Xbox 360"&&/\bIEMobile\b/.test(O)&&yt.unshift("mobile mode")):(/^(?:Chrome|IE|Opera)$/.test(xe)||xe&&!Y&&!/Browser|Mobi/.test(xe))&&(Ee=="Windows CE"||/Mobi/i.test(O))?xe+=" Mobile":xe=="IE"&&Et&&W.external===null?yt.unshift("platform preview"):(/\bBlackBerry\b/.test(Y)||/\bBB10\b/.test(O))&&(ee=(RegExp(Y.replace(/ +/g," *")+"/([.\\d]+)","i").exec(O)||0)[1]||ge)?(ee=[ee,/BB10/.test(O)],Ee=(ee[1]?(Y=null,dt="BlackBerry"):"Device Software")+" "+ee[0],ge=null):this!=D&&Y!="Wii"&&(Et&&Re||/Opera/.test(xe)&&/\b(?:MSIE|Firefox)\b/i.test(O)||xe=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Ee)||xe=="IE"&&(Ee&&!/^Win/.test(Ee)&&ge>5.5||/\bWindows XP\b/.test(Ee)&&ge>8||ge==8&&!/\bTrident\b/.test(O)))&&!p.test(ee=k.call(D,O.replace(p,"")+";"))&&ee.name&&(ee="ing as "+ee.name+((ee=ee.version)?" "+ee:""),p.test(xe)?(/\bIE\b/.test(ee)&&Ee=="Mac OS"&&(Ee=null),ee="identify"+ee):(ee="mask"+ee,it?xe=M(it.replace(/([a-z])([A-Z])/g,"$1 $2")):xe="Opera",/\bIE\b/.test(ee)&&(Ee=null),Et||(ge=null)),Ae=["Presto"],yt.push(ee)),(ee=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(O)||0)[1])&&(ee=[parseFloat(ee.replace(/\.(\d)$/,".0$1")),ee],xe=="Safari"&&ee[1].slice(-1)=="+"?(xe="WebKit Nightly",Yt="alpha",ge=ee[1].slice(0,-1)):(ge==ee[1]||ge==(ee[2]=(/\bSafari\/([\d.]+\+?)/i.exec(O)||0)[1]))&&(ge=null),ee[1]=(/\bChrome\/([\d.]+)/i.exec(O)||0)[1],ee[0]==537.36&&ee[2]==537.36&&parseFloat(ee[1])>=28&&Ae=="WebKit"&&(Ae=["Blink"]),!Et||!Z&&!ee[1]?(Ae&&(Ae[1]="like Safari"),ee=(ee=ee[0],ee<400?1:ee<500?2:ee<526?3:ee<533?4:ee<534?"4+":ee<535?5:ee<537?6:ee<538?7:ee<601?8:"8")):(Ae&&(Ae[1]="like Chrome"),ee=ee[1]||(ee=ee[0],ee<530?1:ee<532?2:ee<532.05?3:ee<533?4:ee<534.03?5:ee<534.07?6:ee<534.1?7:ee<534.13?8:ee<534.16?9:ee<534.24?10:ee<534.3?11:ee<535.01?12:ee<535.02?"13+":ee<535.07?15:ee<535.11?16:ee<535.19?17:ee<536.05?18:ee<536.1?19:ee<537.01?20:ee<537.11?"21+":ee<537.13?23:ee<537.18?24:ee<537.24?25:ee<537.36?26:Ae!="Blink"?"27":"28")),Ae&&(Ae[1]+=" "+(ee+=typeof ee=="number"?".x":/[.+]/.test(ee)?"":"+")),xe=="Safari"&&(!ge||parseInt(ge)>45)&&(ge=ee)),xe=="Opera"&&(ee=/\bzbov|zvav$/.exec(Ee))?(xe+=" ",yt.unshift("desktop mode"),ee=="zvav"?(xe+="Mini",ge=null):xe+="Mobile",Ee=Ee.replace(RegExp(" *"+ee+"$"),"")):xe=="Safari"&&/\bChrome\b/.exec(Ae&&Ae[1])&&(yt.unshift("desktop mode"),xe="Chrome Mobile",ge=null,/\bOS X\b/.test(Ee)?(dt="Apple",Ee="iOS 4.3+"):Ee=null),ge&&ge.indexOf(ee=/[\d.]+$/.exec(Ee))==0&&O.indexOf("/"+ee+"-")>-1&&(Ee=B(Ee.replace(ee,""))),Ae&&!/\b(?:Avant|Nook)\b/.test(xe)&&(/Browser|Lunascape|Maxthon/.test(xe)||xe!="Safari"&&/^iOS/.test(Ee)&&/\bSafari\b/.test(Ae[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(xe)&&Ae[1])&&(ee=Ae[Ae.length-1])&&yt.push(ee),yt.length&&(yt=["("+yt.join("; ")+")"]),dt&&Y&&Y.indexOf(dt)<0&&yt.push("on "+dt),Y&&yt.push((/^on /.test(yt[yt.length-1])?"":"on ")+Y),Ee&&(ee=/ ([\d.+]+)$/.exec(Ee),We=ee&&Ee.charAt(Ee.length-ee[0].length-1)=="/",Ee={architecture:32,family:ee&&!We?Ee.replace(ee[0],""):Ee,version:ee?ee[1]:null,toString:function(){var st=this.version;return this.family+(st&&!We?" "+st:"")+(this.architecture==64?" 64-bit":"")}}),(ee=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(ft))&&!/\bi686\b/i.test(ft)?(Ee&&(Ee.architecture=64,Ee.family=Ee.family.replace(RegExp(" *"+ee),"")),xe&&(/\bWOW64\b/i.test(O)||Et&&/\w(?:86|32)$/.test(K.cpuClass||K.platform)&&!/\bWin64; x64\b/i.test(O))&&yt.unshift("32-bit")):Ee&&/^OS X/.test(Ee.family)&&xe=="Chrome"&&parseFloat(ge)>=39&&(Ee.architecture=64),O||(O=null);var _e={};return _e.description=O,_e.layout=Ae&&Ae[0],_e.manufacturer=dt,_e.name=xe,_e.prerelease=Yt,_e.product=Y,_e.ua=O,_e.version=xe&&ge,_e.os=Ee||{architecture:null,family:null,version:null,toString:function(){return"null"}},_e.parse=k,_e.toString=Fe,_e.version&&yt.unshift(ge),_e.name&&yt.unshift(xe),Ee&&xe&&!(Ee==String(Ee).split(" ")[0]&&(Ee==xe.split(" ")[0]||Y))&&yt.push(Y?"("+Ee+")":"on "+Ee),yt.length&&(_e.description=yt.join(" ")),_e}var I=k();a&&u?D(I,function(O,W){a[W]=O}):n.platform=I}).call(q8)})(jg,jg.exports)),jg.exports}var j8=Y8();const Z8=k0(j8),Nt=JSON.parse(JSON.stringify(Z8)),tS=Nt.os.family||"",K8=tS==="Android",Q8=tS.slice(0,7)==="Windows",J8=tS==="OS X",$8=tS==="iOS",eV=Nt.layout==="Blink",tV=Nt.layout==="Gecko",zy=Nt.layout==="Trident",nV=Nt.layout==="EdgeHTML",iV=Nt.layout==="WebKit",rV=parseFloat(Nt.version),jy=Math.floor(rV);Nt.majorVersion=jy;Nt.is={ANDROID:K8,WINDOWS:Q8,OSX:J8,IOS:$8,BLINK:eV,GECKO:tV,TRIDENT:zy,EDGE:nV,WEBKIT:iV,IE9:zy&&jy===9,IE10:zy&&jy===10,IE11:zy&&jy===11};function sV(){const r={activeElement:document.activeElement,windowScrollTop:window.scrollTop,windowScrollLeft:window.scrollLeft,bodyScrollTop:document.body.scrollTop,bodyScrollLeft:document.body.scrollLeft},e=document.createElement("iframe");e.setAttribute("style","position:absolute; position:fixed; top:0; left:-2px; width:1px; height:1px; overflow:hidden;"),e.setAttribute("aria-live","off"),e.setAttribute("aria-busy","true"),e.setAttribute("aria-hidden","true"),document.body.appendChild(e);const t=e.contentWindow,n=t.document;n.open(),n.close();const i=n.createElement("div");return n.body.appendChild(i),r.iframe=e,r.wrapper=i,r.window=t,r.document=n,r}function aV(r,e){r.wrapper.innerHTML="";const t=typeof e.element=="string"?r.document.createElement(e.element):e.element(r.wrapper,r.document);let n=e.mutate&&e.mutate(t,r.wrapper,r.document);return!n&&n!==!1&&(n=t),!t.parentNode&&r.wrapper.appendChild(t),n&&n.focus&&n.focus(),e.validate?e.validate(t,n,r.document):r.document.activeElement===n}function oV(r){r.activeElement===document.body?(document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),Nt.is.IE10&&document.body.focus()):r.activeElement&&r.activeElement.focus&&r.activeElement.focus(),document.body.removeChild(r.iframe),window.scrollTop=r.windowScrollTop,window.scrollLeft=r.windowScrollLeft,document.body.scrollTop=r.bodyScrollTop,document.body.scrollLeft=r.bodyScrollLeft}function lV(r){const e=sV(),t={};return Object.keys(r).map(function(n){t[n]=aV(e,r[n])}),oV(e),t}const qD="1.4.1";function uV(r){let e;try{e=window.localStorage&&window.localStorage.getItem(r),e=e?JSON.parse(e):{}}catch{e={}}return e}function cV(r,e){if(!document.hasFocus()){try{window.localStorage&&window.localStorage.removeItem(r)}catch{}return}try{window.localStorage&&window.localStorage.setItem(r,JSON.stringify(e))}catch{}}const YD=typeof window<"u"&&window.navigator.userAgent||"",jD="ally-supports-cache";let Du=uV(jD);(Du.userAgent!==YD||Du.version!==qD)&&(Du={});Du.userAgent=YD;Du.version=qD;const eM={get:function(){return Du},set:function(r){Object.keys(r).forEach(function(e){Du[e]=r[e]}),Du.time=new Date().toISOString(),cV(jD,Du)}};function ZD(){let r;try{document.querySelector("html >>> :first-child"),r=">>>"}catch{try{document.querySelector("html /deep/ :first-child"),r="/deep/"}catch{r=""}}return r}const rf="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",fV={element:"div",mutate:function(r){return r.innerHTML='<map name="image-map-tabindex-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+rf+'">',r.querySelector("area")}},hV={element:"div",mutate:function(r){return r.innerHTML='<map name="image-map-tabindex-test"><area href="#void" tabindex="-1" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" alt="" src="'+rf+'">',!1},validate:function(r,e,t){if(Nt.is.GECKO)return!0;const n=r.querySelector("area");return n.focus(),t.activeElement===n}},dV={element:"div",mutate:function(r){return r.innerHTML='<map name="image-map-area-href-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-area-href-test" alt="" src="'+rf+'">',r.querySelector("area")},validate:function(r,e,t){return Nt.is.GECKO?!0:t.activeElement===e}},pV={name:"can-focus-audio-without-controls",element:"audio",mutate:function(r){try{r.setAttribute("src",rf)}catch{}}},mV="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",gV={element:"div",mutate:function(r){return r.innerHTML='<map name="broken-image-map-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#broken-image-map-test" alt="" src="'+mV+'">',r.querySelector("area")}},vV={element:"div",mutate:function(r){return r.setAttribute("tabindex","-1"),r.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),r.innerHTML='<span style="display: block;">hello</span>',r.querySelector("span")}},_V={element:"fieldset",mutate:function(r){r.setAttribute("tabindex",0),r.setAttribute("disabled","disabled")}},yV={element:"fieldset",mutate:function(r){r.innerHTML="<legend>legend</legend><p>content</p>"}},xV={element:"span",mutate:function(r){r.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),r.innerHTML='<span style="display: block;">hello</span>'}},bV={element:"form",mutate:function(r){r.setAttribute("tabindex",0),r.setAttribute("disabled","disabled")}},SV={element:"a",mutate:function(r){return r.href="#void",r.innerHTML='<img ismap src="'+rf+'" alt="">',r.querySelector("img")}},MV={element:"div",mutate:function(r){return r.innerHTML='<map name="image-map-tabindex-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+rf+'">',r.querySelector("img")}},EV={element:function(r,e){const t=e.createElement("iframe");r.appendChild(t);const n=t.contentWindow.document;return n.open(),n.close(),t},mutate:function(r){r.style.visibility="hidden";const e=r.contentWindow.document,t=e.createElement("input");return e.body.appendChild(t),t},validate:function(r){const e=r.contentWindow.document,t=e.querySelector("input");return e.activeElement===t}},TV=!Nt.is.WEBKIT;function AV(){return TV}const wV={element:"div",mutate:function(r){r.setAttribute("tabindex","invalid-value")}},CV={element:"label",mutate:function(r){r.setAttribute("tabindex","-1")},validate:function(r,e,t){return r.offsetHeight,r.focus(),t.activeElement===r}},KD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0ic3ZnIj48dGV4dCB4PSIxMCIgeT0iMjAiIGlkPSJzdmctbGluay10ZXh0Ij50ZXh0PC90ZXh0Pjwvc3ZnPg==",RV={element:"object",mutate:function(r){r.setAttribute("type","image/svg+xml"),r.setAttribute("data",KD),r.setAttribute("width","200"),r.setAttribute("height","50"),r.style.visibility="hidden"}},DV={name:"can-focus-object-svg",element:"object",mutate:function(r){r.setAttribute("type","image/svg+xml"),r.setAttribute("data",KD),r.setAttribute("width","200"),r.setAttribute("height","50")},validate:function(r,e,t){return Nt.is.GECKO?!0:t.activeElement===r}},LV=!Nt.is.IE9;function NV(){return LV}const OV={element:"div",mutate:function(r){return r.innerHTML='<map name="focus-redirect-img-usemap"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#focus-redirect-img-usemap" alt="" src="'+rf+'">',r.querySelector("img")},validate:function(r,e,t){const n=r.querySelector("area");return t.activeElement===n}},IV={element:"fieldset",mutate:function(r){return r.innerHTML='<legend>legend</legend><input tabindex="-1"><input tabindex="0">',!1},validate:function(r,e,t){const n=r.querySelector('input[tabindex="-1"]'),i=r.querySelector('input[tabindex="0"]');return r.focus(),r.querySelector("legend").focus(),t.activeElement===n&&"focusable"||t.activeElement===i&&"tabbable"||""}},PV={element:"div",mutate:function(r){return r.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),r.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>',r.querySelector("div")}},UV={element:"div",mutate:function(r){r.setAttribute("style","width: 100px; height: 50px;"),r.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},zV={element:"div",mutate:function(r){r.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),r.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},FV={element:"details",mutate:function(r){return r.innerHTML="<summary>foo</summary><p>content</p>",r.firstElementChild}};function BV(){const r=document.createElement("div");return r.innerHTML=`<svg><foreignObject width="30" height="30">
      <input type="text"/>
  </foreignObject></svg>`,r.firstChild.firstChild}function kV(r){if(!(r.ownerSVGElement||r.nodeName.toLowerCase()==="svg"))return!1;const t=BV();r.appendChild(t);const n=t.querySelector("input");return n.focus(),n.disabled=!0,r.removeChild(t),!0}function Jp(r){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+r+"</svg>"}function VV(r){if(!r.focus)try{HTMLElement.prototype.focus.call(r)}catch{kV(r)}}function $p(r,e,t){return VV(e),t.activeElement===e}const HV={element:"div",mutate:function(r){return r.innerHTML=Jp('<text focusable="true">a</text>'),r.querySelector("text")},validate:$p},GV={element:"div",mutate:function(r){return r.innerHTML=Jp('<text tabindex="0">a</text>'),r.querySelector("text")},validate:$p},WV={element:"div",mutate:function(r){return r.innerHTML=Jp('<text tabindex="-1">a</text>'),r.querySelector("text")},validate:$p},XV={element:"div",mutate:function(r){return r.innerHTML=Jp(['<g id="ally-test-target"><a xlink:href="#void"><text>link</text></a></g>','<use xlink:href="#ally-test-target" x="0" y="0" tabindex="-1" />'].join("")),r.querySelector("use")},validate:$p},qV={element:"div",mutate:function(r){return r.innerHTML=Jp('<foreignObject tabindex="-1"><input type="text" /></foreignObject>'),r.querySelector("foreignObject")||r.getElementsByTagName("foreignObject")[0]},validate:$p},YV=!!(Nt.is.GECKO&&typeof SVGElement<"u"&&SVGElement.prototype.focus);function jV(){return YV}const ZV={element:"div",mutate:function(r){return r.innerHTML=Jp(""),r.firstChild},validate:$p},KV={element:"div",mutate:function(r){r.setAttribute("tabindex","3x")}},QV={element:"table",mutate:function(r,e,t){const n=t.createDocumentFragment();n.innerHTML="<tr><td>cell</td></tr>",r.appendChild(n)}},JV={element:"video",mutate:function(r){try{r.setAttribute("src",rf)}catch{}}},$V=Nt.is.GECKO||Nt.is.TRIDENT||Nt.is.EDGE;function eH(){return $V}const FC={cssShadowPiercingDeepCombinator:ZD,focusInZeroDimensionObject:AV,focusObjectSwf:NV,focusSvgInIframe:jV,tabsequenceAreaAtImgPosition:eH},tH={focusAreaImgTabindex:fV,focusAreaTabindex:hV,focusAreaWithoutHref:dV,focusAudioWithoutControls:pV,focusBrokenImageMap:gV,focusChildrenOfFocusableFlexbox:vV,focusFieldsetDisabled:_V,focusFieldset:yV,focusFlexboxContainer:xV,focusFormDisabled:bV,focusImgIsmap:SV,focusImgUsemapTabindex:MV,focusInHiddenIframe:EV,focusInvalidTabindex:wV,focusLabelTabindex:CV,focusObjectSvg:DV,focusObjectSvgHidden:RV,focusRedirectImgUsemap:OV,focusRedirectLegend:IV,focusScrollBody:PV,focusScrollContainerWithoutOverflow:UV,focusScrollContainer:zV,focusSummary:FV,focusSvgFocusableAttribute:HV,focusSvgTabindexAttribute:GV,focusSvgNegativeTabindexAttribute:WV,focusSvgUseTabindex:XV,focusSvgForeignobjectTabindex:qV,focusSvg:ZV,focusTabindexTrailingCharacters:KV,focusTable:QV,focusVideoWithoutControls:JV};function nH(){const r=lV(tH);return Object.keys(FC).forEach(function(e){r[e]=FC[e]()}),r}let pp=null;function zl(){return pp||(pp=eM.get(),pp.time||(eM.set(nH()),pp=eM.get()),pp)}let Vg;const iH=/^\s*(-|\+)?[0-9]+\s*$/,rH=/^\s*(-|\+)?[0-9]+.*$/;function QD(r){Vg||(Vg=zl());const e=Vg.focusTabindexTrailingCharacters?rH:iH,t=ss({label:"is/valid-tabindex",resolveDocument:!0,context:r}),n=t.hasAttribute("tabindex"),i=t.hasAttribute("tabIndex");if(!n&&!i||(t.ownerSVGElement||t.nodeName.toLowerCase()==="svg")&&!Vg.focusSvgTabindexAttribute)return!1;if(Vg.focusInvalidTabindex)return!0;const u=t.getAttribute(n?"tabindex":"tabIndex");return u==="-32768"?!1:!!(u&&e.test(u))}function Cl(r){if(!QD(r))return null;const t=r.hasAttribute("tabindex")?"tabindex":"tabIndex",n=parseInt(r.getAttribute(t),10);return isNaN(n)?-1:n}function kM(r){const e=r.webkitUserModify||"";return!!(e&&e.indexOf("write")!==-1)}function _T(r){return[r.getPropertyValue("overflow"),r.getPropertyValue("overflow-x"),r.getPropertyValue("overflow-y")].some(e=>e==="auto"||e==="scroll")}function ib(r){return r.display.indexOf("flex")>-1}function rb(r,e,t,n){return e!=="div"&&e!=="span"||t&&t!=="div"&&t!=="span"&&!_T(n)?!1:r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth}let ni;function Zy({context:r,except:e={flexbox:!1,scrollable:!1,shadow:!1}}={}){ni||(ni=zl());const t=ss({label:"is/focus-relevant",resolveDocument:!0,context:r});if(!e.shadow&&t.shadowRoot)return!0;const n=t.nodeName.toLowerCase();if(n==="input"&&t.type==="hidden")return!1;if(n==="input"||n==="select"||n==="button"||n==="textarea"||n==="legend"&&ni.focusRedirectLegend||n==="label"||n==="area"||n==="a"&&t.hasAttribute("href"))return!0;if(n==="object"&&t.hasAttribute("usemap"))return!1;if(n==="object"){const _=t.getAttribute("type");if(!ni.focusObjectSvg&&_==="image/svg+xml")return!1;if(!ni.focusObjectSwf&&_==="application/x-shockwave-flash")return!1}if(n==="iframe"||n==="object"||n==="embed"||n==="keygen"||t.hasAttribute("contenteditable")||n==="audio"&&(ni.focusAudioWithoutControls||t.hasAttribute("controls"))||n==="video"&&(ni.focusVideoWithoutControls||t.hasAttribute("controls"))||ni.focusSummary&&n==="summary")return!0;const i=QD(t);if(n==="img"&&t.hasAttribute("usemap"))return i&&ni.focusImgUsemapTabindex||ni.focusRedirectImgUsemap;if(ni.focusTable&&(n==="table"||n==="td")||ni.focusFieldset&&n==="fieldset")return!0;const a=n==="svg",u=t.ownerSVGElement,f=t.getAttribute("focusable"),d=Cl(t);if(n==="use"&&d!==null&&!ni.focusSvgUseTabindex)return!1;if(n==="foreignobject")return d!==null&&ni.focusSvgForeignobjectTabindex;if(XD(t,"svg a")&&t.hasAttribute("xlink:href"))return!0;if((a||u)&&t.focus&&!ni.focusSvgNegativeTabindexAttribute&&d<0)return!1;if(a)return i||ni.focusSvg||ni.focusSvgInIframe||!!(ni.focusSvgFocusableAttribute&&f&&f==="true");if(u){if(ni.focusSvgTabindexAttribute&&i)return!0;if(ni.focusSvgFocusableAttribute)return f==="true"}if(i)return!0;const p=window.getComputedStyle(t,null);if(kM(p)||ni.focusImgIsmap&&n==="img"&&t.hasAttribute("ismap")&&eS({context:t}).some(y=>y.nodeName.toLowerCase()==="a"&&y.hasAttribute("href")))return!0;if(!e.scrollable&&ni.focusScrollContainer){if(ni.focusScrollContainerWithoutOverflow){if(rb(t,n))return!0}else if(_T(p))return!0}if(!e.flexbox&&ni.focusFlexboxContainer&&ib(p))return!0;const v=t.parentElement;if(!e.scrollable&&v){const _=v.nodeName.toLowerCase(),y=window.getComputedStyle(v,null);if(ni.focusScrollBody&&rb(v,n,_,y)||ni.focusChildrenOfFocusableFlexbox&&ib(y))return!0}return!1}Zy.except=function(r={}){const e=function(t){return Zy({context:t,except:r})};return e.rules=Zy,e};const nS=Zy.except({});function VM(r,e){if(r.findIndex)return r.findIndex(e);const t=r.length;if(t===0)return-1;for(let n=0;n<t;n++)if(e(r[n],n,r))return n;return-1}function sH(r){try{return r.contentDocument||r.contentWindow&&r.contentWindow.document||r.getSVGDocument&&r.getSVGDocument()||null}catch{return null}}function em(r){return r?r.nodeType===Node.DOCUMENT_NODE?r:r.ownerDocument||document:document}function aH(r){return em(r).defaultView||window}let Hg;function JD(r){if(typeof Hg!="string"){const e=ZD();e&&(Hg=", html "+e+" ")}return Hg?r+Hg+r.replace(/\s*,\s*/g,",").split(",").join(Hg):r}let tM;function oH(r){if(tM||(tM=JD("object, iframe")),r._frameElement!==void 0)return r._frameElement;r._frameElement=null;const e=r.parent.document.querySelectorAll(tM);return[].some.call(e,function(t){return sH(t)!==r.document?!1:(r._frameElement=t,!0)}),r._frameElement}function iS(r){const e=aH(r);if(!e.parent||e.parent===e)return null;try{return e.frameElement||oH(e)}catch{return null}}const lH=/^(area)$/;function HM(r,e){return window.getComputedStyle(r,null).getPropertyValue(e)}function uH(r){return r.some(function(e){return HM(e,"display")==="none"})}function cH(r){const e=VM(r,function(n){const i=HM(n,"visibility");return i==="hidden"||i==="collapse"});if(e===-1)return!1;const t=VM(r,function(n){return HM(n,"visibility")==="visible"});return t===-1||e<t}function fH(r){let e=1;return r[0].nodeName.toLowerCase()==="summary"&&(e=2),r.slice(e).some(function(t){return t.nodeName.toLowerCase()==="details"&&t.open===!1})}function o0({context:r,except:e={notRendered:!1,cssDisplay:!1,cssVisibility:!1,detailsElement:!1,browsingContext:!1}}={}){const t=ss({label:"is/visible",resolveDocument:!0,context:r}),n=t.nodeName.toLowerCase();if(!e.notRendered&&lH.test(n))return!0;const i=eS({context:t}),a=n==="audio"&&!t.hasAttribute("controls");if(!e.cssDisplay&&uH(a?i.slice(1):i)||!e.cssVisibility&&cH(i)||!e.detailsElement&&fH(i))return!1;if(!e.browsingContext){const u=iS(t),f=o0.except(e);if(u&&!f(u))return!1}return!0}o0.except=function(r={}){const e=function(t){return o0({context:t,except:r})};return e.rules=o0,e};const rS=o0.except({});var Ky={exports:{}};/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */var hH=Ky.exports,BC;function dH(){return BC||(BC=1,(function(r,e){(function(t,n){r.exports=n(t)})(typeof ix<"u"?ix:hH,function(t){if(t.CSS&&t.CSS.escape)return t.CSS.escape;var n=function(i){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var a=String(i),u=a.length,f=-1,d,p="",v=a.charCodeAt(0);++f<u;){if(d=a.charCodeAt(f),d==0){p+="";continue}if(d>=1&&d<=31||d==127||f==0&&d>=48&&d<=57||f==1&&d>=48&&d<=57&&v==45){p+="\\"+d.toString(16)+" ";continue}if(f==0&&u==1&&d==45){p+="\\"+a.charAt(f);continue}if(d>=128||d==45||d==95||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122){p+=a.charAt(f);continue}p+="\\"+a.charAt(f)}return p};return t.CSS||(t.CSS={}),t.CSS.escape=n,n})})(Ky)),Ky.exports}var pH=dH();const $D=k0(pH);function mH(r,e){return e.querySelector('map[name="'+$D(r)+'"]')||null}function eL(r){const e=r.parentElement;return!e.name||e.nodeName.toLowerCase()!=="map"?null:em(r).querySelector('img[usemap="#'+$D(e.name)+'"]')||null}let sh;function gH(r){sh||(sh=zl());const e=ss({label:"is/valid-area",context:r});if(e.nodeName.toLowerCase()!=="area")return!1;const n=e.hasAttribute("tabindex");if(!sh.focusAreaTabindex&&n)return!1;const i=eL(e);return!i||!rS(i)||!sh.focusBrokenImageMap&&(!i.complete||!i.naturalHeight||i.offsetWidth<=0||i.offsetHeight<=0)?!1:!sh.focusAreaWithoutHref&&!e.href?sh.focusAreaTabindex&&n||sh.focusAreaImgTabindex&&i.hasAttribute("tabindex"):!eS({context:i}).slice(1).some(function(u){const f=u.nodeName.toLowerCase();return f==="button"||f==="a"})}let Fy,kC;const nM={input:!0,select:!0,textarea:!0,button:!0,fieldset:!0,form:!0};function tL(r){Fy||(Fy=zl(),Fy.focusFieldsetDisabled&&delete nM.fieldset,Fy.focusFormDisabled&&delete nM.form,kC=new RegExp("^("+Object.keys(nM).join("|")+")$"));const t=ss({label:"is/native-disabled-supported",context:r}).nodeName.toLowerCase();return!!kC.test(t)}let iM;function vH(r){return r.nodeName.toLowerCase()==="fieldset"&&r.disabled}function _H(r){return r.nodeName.toLowerCase()==="form"&&r.disabled}function yH(r){iM||(iM=zl());const e=ss({label:"is/disabled",context:r});if(e.hasAttribute("data-ally-disabled"))return!0;if(!tL(e))return!1;if(e.disabled)return!0;const t=eS({context:e});return!!(t.some(vH)||!iM.focusFormDisabled&&t.some(_H))}function Qy({context:r,except:e={onlyFocusableBrowsingContext:!1,visible:!1}}={}){const t=ss({label:"is/only-tabbable",resolveDocument:!0,context:r});if(!e.visible&&!rS(t))return!1;if(!e.onlyFocusableBrowsingContext&&(Nt.is.GECKO||Nt.is.TRIDENT||Nt.is.EDGE)){const a=iS(t);if(a&&Cl(a)<0)return!1}const n=t.nodeName.toLowerCase(),i=Cl(t);return n==="label"&&Nt.is.GECKO?i!==null&&i>=0:!!(Nt.is.GECKO&&t.ownerSVGElement&&!t.focus&&n==="a"&&t.hasAttribute("xlink:href")&&Nt.is.GECKO)}Qy.except=function(r={}){const e=function(t){return Qy({context:t,except:r})};return e.rules=Qy,e};const xH=Qy.except({});let Au;function bH(r){const e=r.nodeName.toLowerCase();if(e==="embed"||e==="keygen")return!0;const t=Cl(r);if(r.shadowRoot&&t===null)return!0;if(e==="label")return!Au.focusLabelTabindex||t===null;if(e==="legend")return t===null;if(Au.focusSvgFocusableAttribute&&(r.ownerSVGElement||e==="svg")){const n=r.getAttribute("focusable");return n&&n==="false"}return e==="img"&&r.hasAttribute("usemap")?t===null||!Au.focusImgUsemapTabindex:e==="area"?!gH(r):!1}function Jy({context:r,except:e={disabled:!1,visible:!1,onlyTabbable:!1}}={}){Au||(Au=zl());const t=xH.rules.except({onlyFocusableBrowsingContext:!0,visible:e.visible}),n=ss({label:"is/focusable",resolveDocument:!0,context:r});if(!nS.rules({context:n,except:e})||bH(n)||!e.disabled&&yH(n)||!e.onlyTabbable&&t(n))return!1;if(!e.visible){const f={context:n,except:{}};if(Au.focusInHiddenIframe&&(f.except.browsingContext=!0),Au.focusObjectSvgHidden&&n.nodeName.toLowerCase()==="object"&&(f.except.cssVisibility=!0),!rS.rules(f))return!1}const a=iS(n);return!(a&&a.nodeName.toLowerCase()==="object"&&!Au.focusInZeroDimensionObject&&(!a.offsetWidth||!a.offsetHeight)||n.nodeName.toLowerCase()==="svg"&&Au.focusSvgInIframe&&!a&&n.getAttribute("tabindex")===null)}Jy.except=function(r={}){const e=function(t){return Jy({context:t,except:r})};return e.rules=Jy,e};const nL=Jy.except({});function iL(r){const e=function(t){return t.shadowRoot||r(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};return e.acceptNode=e,e}const SH=iL(nS);function rL({context:r,includeContext:e,includeOnlyTabbable:t,strategy:n}={}){r||(r=document.documentElement);const i=nL.rules.except({onlyTabbable:t}),u=em(r).createTreeWalker(r,NodeFilter.SHOW_ELEMENT,n==="all"?SH:iL(i),!1);let f=[];for(;u.nextNode();)u.currentNode.shadowRoot?(i(u.currentNode)&&f.push(u.currentNode),f=f.concat(rL({context:u.currentNode.shadowRoot,includeOnlyTabbable:t,strategy:n}))):f.push(u.currentNode);return e&&(n==="all"?nS(r)&&f.unshift(r):i(r)&&f.unshift(r)),f}let ah,mp;function MH(){return ah||(ah=zl()),typeof mp=="string"||(mp=(ah.focusTable?"table, td,":"")+(ah.focusFieldset?"fieldset,":"")+"svg a,a[href],area[href],input, select, textarea, button,iframe, object, embed,keygen,"+(ah.focusAudioWithoutControls?"audio,":"audio[controls],")+(ah.focusVideoWithoutControls?"video,":"video[controls],")+(ah.focusSummary?"summary,":"")+"[tabindex],[contenteditable]",mp=JD(mp)),mp}function EH({context:r,includeContext:e,includeOnlyTabbable:t}={}){const n=MH(),i=r.querySelectorAll(n),a=nL.rules.except({onlyTabbable:t}),u=[].filter.call(i,a);return e&&a(r)&&u.unshift(r),u}function GM({context:r,includeContext:e,includeOnlyTabbable:t,strategy:n="quick"}={}){const a={context:ss({label:"query/focusable",resolveDocument:!0,defaultToDocument:!0,context:r}),includeContext:e,includeOnlyTabbable:t,strategy:n};if(n==="quick")return EH(a);if(n==="strict"||n==="all")return rL(a);throw new TypeError('query/focusable requires option.strategy to be one of ["quick", "strict", "all"]')}function sL({element:r,attribute:e}){const t="data-cached-"+e;if(r.getAttribute(t)===null){const i=r.getAttribute(e);if(i===null)return;r.setAttribute(t,i||""),r.removeAttribute(e)}else{const i=r.getAttribute(t);r.removeAttribute(t),r.setAttribute(e,i)}}function sb({element:r,attribute:e,temporaryValue:t,saveValue:n}){const i="data-cached-"+e;if(t!==void 0){const a=n||r.getAttribute(e);r.setAttribute(i,a||""),r.setAttribute(e,t)}else{const a=r.getAttribute(i);r.removeAttribute(i),a===""?r.removeAttribute(e):r.setAttribute(e,a)}}const Gg=function(){},TH={log:Gg,debug:Gg,info:Gg,warn:Gg,error:Gg},AH=typeof console<"u"?console:TH;let ab;function wH(){AH.warn("trying to focus inert element",this)}function CH(r,e){if(e){const t=Cl(r);sb({element:r,attribute:"tabindex",temporaryValue:"-1",saveValue:t!==null?t:""})}else sb({element:r,attribute:"tabindex"})}function RH(r,e){sL({element:r,attribute:"controls"})}function DH(r,e){sb({element:r,attribute:"focusable",temporaryValue:e?"false":void 0})}function LH(r,e){sL({element:r,attribute:"xlink:href"})}function NH(r,e){sb({element:r,attribute:"aria-disabled",temporaryValue:e?"true":void 0})}function OH(r,e){e?r.focus=wH:delete r.focus}function IH(r,e){if(e){const t=r.style.pointerEvents||"";r.setAttribute("data-inert-pointer-events",t),r.style.pointerEvents="none"}else{const t=r.getAttribute("data-inert-pointer-events");r.removeAttribute("data-inert-pointer-events"),r.style.pointerEvents=t}}function PH(r,e){NH(r,e),CH(r,e),OH(r,e),IH(r,e);const t=r.nodeName.toLowerCase();(t==="video"||t==="audio")&&RH(r),(t==="svg"||r.ownerSVGElement)&&(ab.focusSvgFocusableAttribute?DH(r,e):!ab.focusSvgTabindexAttribute&&t==="a"&&LH(r)),e?r.setAttribute("data-ally-disabled","true"):r.removeAttribute("data-ally-disabled")}function yT(r,e){ab||(ab=zl());const t=ss({label:"element/disabled",context:r});e=!!e;const n=t.hasAttribute("data-ally-disabled"),i=arguments.length===1;return tL(t)?i?t.disabled:(t.disabled=e,t):i?n:(n===e||PH(t,e),t)}const WM=function(r){return r.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};WM.acceptNode=WM;function XM({context:r}={}){const e=ss({label:"query/shadow-hosts",resolveDocument:!0,defaultToDocument:!0,context:r}),n=em(r).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,WM,!1);let i=[];for(e.shadowRoot&&(i.push(e),i=i.concat(XM({context:e.shadowRoot})));n.nextNode();)i.push(n.currentNode),i=i.concat(XM({context:n.currentNode.shadowRoot}));return i}const UH={childList:!0,subtree:!0};class zH{constructor({context:e,callback:t,config:n}={}){this.config=n,this.disengage=this.disengage.bind(this),this.clientObserver=new MutationObserver(t),this.hostObserver=new MutationObserver(i=>i.forEach(this.handleHostMutation,this)),this.observeContext(e),this.observeShadowHosts(e)}disengage(){this.clientObserver&&this.clientObserver.disconnect(),this.clientObserver=null,this.hostObserver&&this.hostObserver.disconnect(),this.hostObserver=null}observeShadowHosts(e){XM({context:e}).forEach(n=>this.observeContext(n.shadowRoot))}observeContext(e){this.clientObserver.observe(e,this.config),this.hostObserver.observe(e,UH)}handleHostMutation(e){if(e.type!=="childList")return;wl(e.addedNodes).filter(n=>n.nodeType===Node.ELEMENT_NODE).forEach(this.observeShadowHosts,this)}}function FH({context:r,callback:e,config:t}={}){if(typeof e!="function")throw new TypeError("observe/shadow-mutations requires options.callback to be a function");if(typeof t!="object")throw new TypeError("observe/shadow-mutations requires options.config to be an object");if(!window.MutationObserver)return{disengage:function(){}};const n=ss({label:"observe/shadow-mutations",resolveDocument:!0,defaultToDocument:!0,context:r});return{disengage:new zH({context:n,callback:e,config:t}).disengage}}function qM({parent:r,element:e,includeSelf:t}={}){if(r)return function(i){return!!(t&&i===r||r.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)};if(e)return function(i){return!!(t&&e===i||i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)};throw new TypeError("util/compare-position#getParentComparator required either options.parent or options.element")}function BH(r){return yT(r,!0)}function VC(r){return yT(r,!1)}const kH={attributes:!0,childList:!0,subtree:!0,attributeFilter:["tabindex","disabled","data-ally-disabled"]};class VH{constructor({context:e,filter:t}={}){this._context=wl(e||document.documentElement)[0],this._filter=wl(t),this._inertElementCache=[],this.disengage=this.disengage.bind(this),this.handleMutation=this.handleMutation.bind(this),this.renderInert=this.renderInert.bind(this),this.filterElements=this.filterElements.bind(this),this.filterParentElements=this.filterParentElements.bind(this);const n=GM({context:this._context,includeContext:!0,strategy:"all"});this.renderInert(n),this.shadowObserver=FH({context:this._context,config:kH,callback:i=>i.forEach(this.handleMutation)})}disengage(){this._context&&(VC(this._context),this._inertElementCache.forEach(e=>VC(e)),this._inertElementCache=null,this._filter=null,this._context=null,this.shadowObserver&&this.shadowObserver.disengage(),this.shadowObserver=null)}listQueryFocusable(e){return e.map(t=>GM({context:t,includeContext:!0,strategy:"all"})).reduce((t,n)=>t.concat(n),[])}renderInert(e){const t=n=>{this._inertElementCache.push(n),BH(n)};e.filter(this.filterElements).filter(this.filterParentElements).filter(n=>!yT(n)).forEach(t)}filterElements(e){const t=qM({element:e,includeSelf:!0});return!this._filter.some(t)}filterParentElements(e){const t=qM({parent:e});return!this._filter.some(t)}handleMutation(e){if(e.type==="childList"){const t=wl(e.addedNodes).filter(i=>i.nodeType===Node.ELEMENT_NODE);if(!t.length)return;const n=this.listQueryFocusable(t);this.renderInert(n)}else e.type==="attributes"&&this.renderInert([e.target])}}function HH({context:r,filter:e}={}){return{disengage:new VH({context:r,filter:e}).disengage}}function YM({context:r}={}){let e=ss({label:"get/shadow-host",context:r}),t=null;for(;e;)t=e,e=e.parentNode;return t.nodeType===t.DOCUMENT_FRAGMENT_NODE&&t.host?t.host:null}function HC(r){const e=ss({label:"is/active-element",resolveDocument:!0,context:r});if(em(e).activeElement===e)return!0;const n=YM({context:e});return!!(n&&n.shadowRoot.activeElement===e)}let gp;const GH=/^(fieldset|table|td|body)$/;function l0({context:r,except:e={flexbox:!1,scrollable:!1,shadow:!1,visible:!1,onlyTabbable:!1}}={}){gp||(gp=zl());const t=ss({label:"is/tabbable",resolveDocument:!0,context:r});if(Nt.is.BLINK&&Nt.is.ANDROID&&Nt.majorVersion>42)return!1;const n=iS(t);if(n){if(Nt.is.WEBKIT&&Nt.is.IOS||Cl(n)<0||!e.visible&&(Nt.is.BLINK||Nt.is.WEBKIT)&&!rS(n))return!1;if(n.nodeName.toLowerCase()==="object"){const v=Nt.name==="Chrome"&&Nt.majorVersion>=54||Nt.name==="Opera"&&Nt.majorVersion>=41;if(Nt.is.WEBKIT||Nt.is.BLINK&&!v)return!1}}const i=t.nodeName.toLowerCase(),a=Cl(t),u=a===null?null:a>=0;if(Nt.is.EDGE&&Nt.majorVersion>=14&&n&&t.ownerSVGElement&&a<0)return!0;const f=u!==!1,d=a!==null&&a>=0;if(t.hasAttribute("contenteditable"))return f;if(GH.test(i)&&u!==!0)return!1;if(Nt.is.WEBKIT&&Nt.is.IOS){let p=i==="input"&&t.type==="text"||t.type==="password"||i==="select"||i==="textarea"||t.hasAttribute("contenteditable");if(!p){const v=window.getComputedStyle(t,null);p=kM(v)}if(!p)return!1}if(i==="use"&&a!==null&&(Nt.is.BLINK||Nt.is.WEBKIT&&Nt.majorVersion===9)||XD(t,"svg a")&&t.hasAttribute("xlink:href")&&(f||t.focus&&!gp.focusSvgNegativeTabindexAttribute)||i==="svg"&&gp.focusSvgInIframe&&f)return!0;if(Nt.is.TRIDENT||Nt.is.EDGE){if(i==="svg")return gp.focusSvg?!0:t.hasAttribute("focusable")||d;if(t.ownerSVGElement)return gp.focusSvgTabindexAttribute&&d?!0:t.hasAttribute("focusable")}if(t.tabIndex===void 0)return!!e.onlyTabbable;if(i==="audio")if(t.hasAttribute("controls")){if(Nt.is.BLINK)return!0}else return!1;if(i==="video"){if(t.hasAttribute("controls")){if(Nt.is.BLINK||Nt.is.GECKO)return!0}else if(Nt.is.TRIDENT||Nt.is.EDGE)return!1}if(i==="object"&&(Nt.is.BLINK||Nt.is.WEBKIT)||i==="iframe")return!1;if(!e.scrollable&&Nt.is.GECKO){const p=window.getComputedStyle(t,null);if(_T(p))return f}if(Nt.is.TRIDENT||Nt.is.EDGE){if(i==="area"){const _=eL(t);if(_&&Cl(_)<0)return!1}const p=window.getComputedStyle(t,null);if(kM(p))return t.tabIndex>=0;if(!e.flexbox&&ib(p))return a!==null?d:WH(t)&&XH(t);if(rb(t,i))return!1;const v=t.parentElement;if(v){const _=v.nodeName.toLowerCase(),y=window.getComputedStyle(v,null);if(rb(v,i,_,y))return!1;if(ib(y))return d}}return t.tabIndex>=0}l0.except=function(r={}){const e=function(t){return l0({context:t,except:r})};return e.rules=l0,e};const WH=nS.rules.except({flexbox:!0}),XH=l0.except({flexbox:!0}),qH=l0.except({});function aL({context:r,includeContext:e,includeOnlyTabbable:t,strategy:n}={}){const i=qH.rules.except({onlyTabbable:t});return GM({context:r,includeContext:e,includeOnlyTabbable:t,strategy:n}).filter(i)}function YH(r,e){return r.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}function jH(r){return r.sort(YH)}function ZH(r,e){return VM(r,function(t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING})}function KH(r,e,t){const n=[];return e.forEach(function(i){let a=!0,u=r.indexOf(i);u===-1&&(u=ZH(r,i),a=!1),u===-1&&(u=r.length);const f=wl(t?t(i):i);f.length&&n.push({offset:u,replace:a,elements:f})}),n}function QH(r,e){let t=0;e.sort((n,i)=>n.offset-i.offset),e.forEach(function(n){const i=n.replace?1:0,a=[n.offset+t,i].concat(n.elements);r.splice.apply(r,a),t+=n.elements.length-i})}function $y({list:r,elements:e,resolveElement:t}={}){const n=r.slice(0),i=wl(e).slice(0);jH(i);const a=KH(n,i,t);return QH(n,a),n}class JH{constructor(e){this._document=em(e),this.maps={}}getAreasFor(e){return this.maps[e]||this.addMapByName(e),this.maps[e]}addMapByName(e){const t=mH(e,this._document);t&&(this.maps[t.name]=aL({context:t}))}extractAreasFromList(e){return e.filter(function(t){if(t.nodeName.toLowerCase()!=="area")return!0;const i=t.parentNode;return this.maps[i.name]||(this.maps[i.name]=[]),this.maps[i.name].push(t),!1},this)}}function $H(r,e){const t=e.querySelectorAll("img[usemap]"),n=new JH(e),i=n.extractAreasFromList(r);return t.length?$y({list:i,elements:t,resolveElement:function(a){const u=a.getAttribute("usemap").slice(1);return n.getAreasFor(u)}}):i}class eG{constructor(e,t){this.context=e,this.sortElements=t,this.hostCounter=1,this.inHost={},this.inDocument=[],this.hosts={},this.elements={}}_registerHost(e){if(e._sortingId)return;e._sortingId="shadow-"+this.hostCounter++,this.hosts[e._sortingId]=e;const t=YM({context:e});t?(this._registerHost(t),this._registerHostParent(e,t)):this.inDocument.push(e)}_registerHostParent(e,t){this.inHost[t._sortingId]||(this.inHost[t._sortingId]=[]),this.inHost[t._sortingId].push(e)}_registerElement(e,t){this.elements[t._sortingId]||(this.elements[t._sortingId]=[]),this.elements[t._sortingId].push(e)}extractElements(e){return e.filter(function(t){const n=YM({context:t});return n?(this._registerHost(n),this._registerElement(t,n),!1):!0},this)}sort(e){let t=this._injectHosts(e);return t=this._replaceHosts(t),this._cleanup(),t}_injectHosts(e){return Object.keys(this.hosts).forEach(function(t){const n=this.elements[t],i=this.inHost[t],a=this.hosts[t].shadowRoot;this.elements[t]=this._merge(n,i,a)},this),this._merge(e,this.inDocument,this.context)}_merge(e,t,n){const i=$y({list:e,elements:t});return this.sortElements(i,n)}_replaceHosts(e){return $y({list:e,elements:this.inDocument,resolveElement:this._resolveHostElement.bind(this)})}_resolveHostElement(e){const t=$y({list:this.elements[e._sortingId],elements:this.inHost[e._sortingId],resolveElement:this._resolveHostElement.bind(this)}),n=Cl(e);return n!==null&&n>-1?[e].concat(t):t}_cleanup(){Object.keys(this.hosts).forEach(function(e){delete this.hosts[e]._sortingId},this)}}function tG(r,e,t){const n=new eG(e,t),i=n.extractElements(r);return i.length===r.length?t(r):n.sort(i)}function nG(r){const e={},t=[],n=r.filter(function(a){let u=a.tabIndex;return u===void 0&&(u=Cl(a)),u<=0||u===null||u===void 0?!0:(e[u]||(e[u]=[],t.push(u)),e[u].push(a),!1)});return t.sort().map(function(a){return e[a]}).reduceRight(function(a,u){return u.concat(a)},n)}let jM;function iG(r,e){const t=r.indexOf(e);return t>0?r.splice(t,1).concat(r):r}function GC(r,e){return jM.tabsequenceAreaAtImgPosition&&(r=$H(r,e)),r=nG(r),r}function WC({context:r,includeContext:e,includeOnlyTabbable:t,strategy:n}={}){jM||(jM=zl());const i=wl(r)[0]||document.documentElement;let a=aL({context:i,includeContext:e,includeOnlyTabbable:t,strategy:n});return document.body.createShadowRoot&&Nt.is.BLINK?a=tG(a,i,GC):a=GC(a,i),e&&(a=iG(a,i)),a}const Mh={tab:9,left:37,up:38,right:39,down:40,pageUp:33,"page-up":33,pageDown:34,"page-down":34,end:35,home:36,enter:13,escape:27,space:32,shift:16,capsLock:20,"caps-lock":20,ctrl:17,alt:18,meta:91,pause:19,insert:45,delete:46,backspace:8,_alias:{91:[92,93,224]}};for(let r=1;r<26;r++)Mh["f"+r]=r+111;for(let r=0;r<10;r++){const e=r+48,t=r+96;Mh[r]=e,Mh["num-"+r]=t,Mh._alias[e]=[t]}for(let r=0;r<26;r++){const e=r+65,t=String.fromCharCode(e).toLowerCase();Mh[t]=e}const ZM={alt:"altKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},rG=Object.keys(ZM).map(r=>ZM[r]);function sG(r){const e=r?null:!1;return{altKey:e,ctrlKey:e,metaKey:e,shiftKey:e}}function aG(r){const e=r.indexOf("*")!==-1,t=sG(e);return r.forEach(function(n){if(n==="*")return;let i=!0;const a=n.slice(0,1);a==="?"?i=null:a==="!"&&(i=!1),i!==!0&&(n=n.slice(1));const u=ZM[n];if(!u)throw new TypeError('Unknown modifier "'+n+'"');t[u]=i}),t}function oG(r){const e=Mh[r]||parseInt(r,10);if(!e||typeof e!="number"||isNaN(e))throw new TypeError('Unknown key "'+r+'"');return[e].concat(Mh._alias[e]||[])}function lG(r,e){return!rG.some(function(t){return typeof r[t]=="boolean"&&!!e[t]!==r[t]})}function uG(r){return r.split(/\s+/).map(function(e){const t=e.split("+"),n=aG(t.slice(0,-1));return{keyCodes:oG(t.slice(-1)),modifiers:n,matchModifiers:lG.bind(null,n)}})}function oL(r={}){const e={},t=wl(r.context)[0]||document.documentElement;delete r.context;const n=wl(r.filter);delete r.filter;const i=Object.keys(r);if(!i.length)throw new TypeError("when/key requires at least one option key");const a=function(d){d.keyCodes.forEach(function(p){e[p]||(e[p]=[]),e[p].push(d)})};i.forEach(function(d){if(typeof r[d]!="function")throw new TypeError('when/key requires option["'+d+'"] to be a function');const p=function(v){return v.callback=r[d],v};uG(d).map(p).forEach(a)});const u=function(d){if(d.defaultPrevented)return;if(n.length){const v=qM({element:d.target,includeSelf:!0});if(n.some(v))return}const p=d.keyCode||d.which;e[p]&&e[p].forEach(function(v){v.matchModifiers(d)&&v.callback.call(t,d,f)})};t.addEventListener("keydown",u,!1);const f=function(){t.removeEventListener("keydown",u,!1)};return{disengage:f}}function cG({context:r}={}){return r||(r=document.documentElement),WC(),oL({"?alt+?shift+tab":function(e){e.preventDefault();const t=WC({context:r}),n=e.shiftKey,i=t[0],a=t[t.length-1],u=n?i:a,f=n?a:i;if(HC(u)){f.focus();return}let d;if(!t.some(function(_,y){return HC(_)?(d=y,!0):!1})){i.focus();return}t[d+(n?-1:1)].focus()}})}class fG extends se.Component{componentDidMount(){this.props.animateInCall(),this.disableFocus=HH({context:".main",filter:".modal"}),this.handleFocus=cG({context:".modal"});const e=()=>{this.props.closeModal()};this.handleEscapeKey=oL({escape:function(t,n){e(),n()}})}componentWillUnmount(){this.handleFocus.disengage(),this.disableFocus.disengage();let e=this.props.modalData.workItem.id;document.querySelector(`.buttonId-${e}`).focus()}render(){const{workItem:e,imageSrc:t,workItemTags:n,datePublished:i}=this.props;return Qe.jsx("div",{ref:"modalBackground",className:"modal-background",children:Qe.jsxs("section",{role:"dialog","aria-modal":"true",className:"modal",children:[this.props.buttonIcon,Qe.jsxs("dl",{children:[Qe.jsx("dt",{children:e.title}),Qe.jsx("dd",{children:e.description.replace(/<\/?p[^>]*>/g,"")}),Qe.jsx("dd",{className:"date-published",children:i})]}),Qe.jsx("img",{src:t,alt:e.title}),Qe.jsx("div",{className:"tags",children:n}),this.props.button]})})}}const u0={events:{},addListener:function(r,e){this.events[r]=this.events[r]||[],this.events[r].push(e)},removeListener:function(r,e){if(this.events[r]){for(var t=0;t<this.events[r].length;t++)if(this.events[r][t]===e){this.events[r].splice(t,1);break}}},fire:function(r,e){this.events[r]&&this.events[r].forEach(function(t){t(e)})}};class hG extends se.Component{render(){return Qe.jsx("button",{autoFocus:this.props.focus,onClick:this.props.onClick,className:"button",children:this.props.label})}}class dG extends se.Component{render(){return Qe.jsx("button",{autoFocus:this.props.focus,onClick:this.props.onClick,className:"button-icon",children:this.props.icon})}}function Eu(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function lL(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ba={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Bp={duration:.5,overwrite:!1,delay:0},xT,Fr,vi,$a=1e8,Qn=1/$a,KM=Math.PI*2,pG=KM/4,mG=0,uL=Math.sqrt,gG=Math.cos,vG=Math.sin,Mr=function(e){return typeof e=="string"},zi=function(e){return typeof e=="function"},zu=function(e){return typeof e=="number"},bT=function(e){return typeof e>"u"},Ol=function(e){return typeof e=="object"},Js=function(e){return e!==!1},ST=function(){return typeof window<"u"},By=function(e){return zi(e)||Mr(e)},cL=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},is=Array.isArray,_G=/random\([^)]+\)/g,yG=/,\s*/g,XC=/(?:-?\.?\d|\.)+/gi,fL=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rM=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,hL=/[+-]=-?[.\d]+/,xG=/[^,'"\[\]\s]+/gi,bG=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ai,xl,QM,MT,Ea={},ob={},dL,pL=function(e){return(ob=kp(e,Ea))&&na},ET=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},O0=function(e,t){return!t&&console.warn(e)},mL=function(e,t){return e&&(Ea[e]=t)&&ob&&(ob[e]=t)||Ea},I0=function(){return 0},SG={suppressEvents:!0,isStart:!0,kill:!1},ex={suppressEvents:!0,kill:!1},MG={suppressEvents:!0},TT={},Gc=[],JM={},gL,da={},sM={},qC=30,tx=[],AT="",wT=function(e){var t=e[0],n,i;if(Ol(t)||zi(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=tx.length;i--&&!tx[i].targetTest(t););n=tx[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new kL(e[i],n)))||e.splice(i,1);return e},Eh=function(e){return e._gsap||wT(eo(e))[0]._gsap},vL=function(e,t,n){return(n=e[t])&&zi(n)?e[t]():bT(n)&&e.getAttribute&&e.getAttribute(t)||n},$s=function(e,t){return(e=e.split(",")).forEach(t)||e},ji=function(e){return Math.round(e*1e5)/1e5||0},Ti=function(e){return Math.round(e*1e7)/1e7||0},Tp=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},EG=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},lb=function(){var e=Gc.length,t=Gc.slice(0),n,i;for(JM={},Gc.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},CT=function(e){return!!(e._initted||e._startAt||e.add)},_L=function(e,t,n,i){Gc.length&&!Fr&&lb(),e.render(t,n,!!(Fr&&t<0&&CT(e))),Gc.length&&!Fr&&lb()},yL=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(xG).length<2?t:Mr(e)?e.trim():e},xL=function(e){return e},Ta=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},TG=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},kp=function(e,t){for(var n in t)e[n]=t[n];return e},YC=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Ol(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},ub=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},c0=function(e){var t=e.parent||Ai,n=e.keyframes?TG(is(e.keyframes)):Ta;if(Js(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},AG=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},bL=function(e,t,n,i,a){var u=e[i],f;if(a)for(f=t[a];u&&u[a]>f;)u=u._prev;return u?(t._next=u._next,u._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=u,t.parent=t._dp=e,t},sS=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var a=t._prev,u=t._next;a?a._next=u:e[n]===t&&(e[n]=u),u?u._prev=a:e[i]===t&&(e[i]=a),t._next=t._prev=t.parent=null},Zc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Th=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},wG=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},$M=function(e,t,n,i){return e._startAt&&(Fr?e._startAt.revert(ex):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},CG=function r(e){return!e||e._ts&&r(e.parent)},jC=function(e){return e._repeat?Vp(e._tTime,e=e.duration()+e._rDelay)*e:0},Vp=function(e,t){var n=Math.floor(e=Ti(e/t));return e&&n===e?n-1:n},cb=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},aS=function(e){return e._end=Ti(e._start+(e._tDur/Math.abs(e._ts||e._rts||Qn)||0))},oS=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ti(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),aS(e),n._dirty||Th(n,e)),e},SL=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=cb(e.rawTime(),t),(!t._dur||nv(0,t.totalDuration(),n)-t._tTime>Qn)&&t.render(n,!0)),Th(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Qn}},Sl=function(e,t,n,i){return t.parent&&Zc(t),t._start=Ti((zu(n)?n:n||e!==Ai?Ja(e,n,t):e._time)+t._delay),t._end=Ti(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),bL(e,t,"_first","_last",e._sort?"_start":0),eE(t)||(e._recent=t),i||SL(e,t),e._ts<0&&oS(e,e._tTime),e},ML=function(e,t){return(Ea.ScrollTrigger||ET("scrollTrigger",t))&&Ea.ScrollTrigger.create(t,e)},EL=function(e,t,n,i,a){if(DT(e,t,a),!e._initted)return 1;if(!n&&e._pt&&!Fr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&gL!==pa.frame)return Gc.push(e),e._lazy=[a,i],1},RG=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},eE=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},DG=function(e,t,n,i){var a=e.ratio,u=t<0||!t&&(!e._start&&RG(e)&&!(!e._initted&&eE(e))||(e._ts<0||e._dp._ts<0)&&!eE(e))?0:1,f=e._rDelay,d=0,p,v,_;if(f&&e._repeat&&(d=nv(0,e._tDur,t),v=Vp(d,f),e._yoyo&&v&1&&(u=1-u),v!==Vp(e._tTime,f)&&(a=1-u,e.vars.repeatRefresh&&e._initted&&e.invalidate())),u!==a||Fr||i||e._zTime===Qn||!t&&e._zTime){if(!e._initted&&EL(e,t,i,n,d))return;for(_=e._zTime,e._zTime=t||(n?Qn:0),n||(n=t&&!_),e.ratio=u,e._from&&(u=1-u),e._time=0,e._tTime=d,p=e._pt;p;)p.r(u,p.d),p=p._next;t<0&&$M(e,t,n,!0),e._onUpdate&&!n&&va(e,"onUpdate"),d&&e._repeat&&!n&&e.parent&&va(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===u&&(u&&Zc(e,1),!n&&!Fr&&(va(e,u?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},LG=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Hp=function(e,t,n,i){var a=e._repeat,u=Ti(t)||0,f=e._tTime/e._tDur;return f&&!i&&(e._time*=u/e._dur),e._dur=u,e._tDur=a?a<0?1e10:Ti(u*(a+1)+e._rDelay*a):u,f>0&&!i&&oS(e,e._tTime=e._tDur*f),e.parent&&aS(e),n||Th(e.parent,e),e},ZC=function(e){return e instanceof Es?Th(e):Hp(e,e._dur)},NG={_start:0,endTime:I0,totalDuration:I0},Ja=function r(e,t,n){var i=e.labels,a=e._recent||NG,u=e.duration()>=$a?a.endTime(!1):e._dur,f,d,p;return Mr(t)&&(isNaN(t)||t in i)?(d=t.charAt(0),p=t.substr(-1)==="%",f=t.indexOf("="),d==="<"||d===">"?(f>=0&&(t=t.replace(/=/,"")),(d==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0)*(p?(f<0?a:n).totalDuration()/100:1)):f<0?(t in i||(i[t]=u),i[t]):(d=parseFloat(t.charAt(f-1)+t.substr(f+1)),p&&n&&(d=d/100*(is(n)?n[0]:n).totalDuration()),f>1?r(e,t.substr(0,f-1),n)+d:u+d)):t==null?u:+t},f0=function(e,t,n){var i=zu(t[1]),a=(i?2:1)+(e<2?0:1),u=t[a],f,d;if(i&&(u.duration=t[1]),u.parent=n,e){for(f=u,d=n;d&&!("immediateRender"in f);)f=d.vars.defaults||{},d=Js(d.vars.inherit)&&d.parent;u.immediateRender=Js(f.immediateRender),e<2?u.runBackwards=1:u.startAt=t[a-1]}return new or(t[0],u,t[a+1])},sf=function(e,t){return e||e===0?t(e):t},nv=function(e,t,n){return n<e?e:n>t?t:n},es=function(e,t){return!Mr(e)||!(t=bG.exec(e))?"":t[1]},OG=function(e,t,n){return sf(n,function(i){return nv(e,t,i)})},tE=[].slice,TL=function(e,t){return e&&Ol(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ol(e[0]))&&!e.nodeType&&e!==xl},IG=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var a;return Mr(i)&&!t||TL(i,1)?(a=n).push.apply(a,eo(i)):n.push(i)})||n},eo=function(e,t,n){return vi&&!t&&vi.selector?vi.selector(e):Mr(e)&&!n&&(QM||!Gp())?tE.call((t||MT).querySelectorAll(e),0):is(e)?IG(e,n):TL(e)?tE.call(e,0):e?[e]:[]},nE=function(e){return e=eo(e)[0]||O0("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return eo(t,n.querySelectorAll?n:n===e?O0("Invalid scope")||MT.createElement("div"):e)}},AL=function(e){return e.sort(function(){return .5-Math.random()})},wL=function(e){if(zi(e))return e;var t=Ol(e)?e:{each:e},n=Ah(t.ease),i=t.from||0,a=parseFloat(t.base)||0,u={},f=i>0&&i<1,d=isNaN(i)||f,p=t.axis,v=i,_=i;return Mr(i)?v=_={center:.5,edges:.5,end:1}[i]||0:!f&&d&&(v=i[0],_=i[1]),function(y,b,E){var A=(E||t).length,w=u[A],M,D,R,N,P,z,B,k,I;if(!w){if(I=t.grid==="auto"?0:(t.grid||[1,$a])[1],!I){for(B=-$a;B<(B=E[I++].getBoundingClientRect().left)&&I<A;);I<A&&I--}for(w=u[A]=[],M=d?Math.min(I,A)*v-.5:i%I,D=I===$a?0:d?A*_/I-.5:i/I|0,B=0,k=$a,z=0;z<A;z++)R=z%I-M,N=D-(z/I|0),w[z]=P=p?Math.abs(p==="y"?N:R):uL(R*R+N*N),P>B&&(B=P),P<k&&(k=P);i==="random"&&AL(w),w.max=B-k,w.min=k,w.v=A=(parseFloat(t.amount)||parseFloat(t.each)*(I>A?A-1:p?p==="y"?A/I:I:Math.max(I,A/I))||0)*(i==="edges"?-1:1),w.b=A<0?a-A:a,w.u=es(t.amount||t.each)||0,n=n&&A<0?zL(n):n}return A=(w[y]-w.min)/w.max||0,Ti(w.b+(n?n(A):A)*w.v)+w.u}},iE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Ti(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(zu(n)?0:es(n))}},CL=function(e,t){var n=is(e),i,a;return!n&&Ol(e)&&(i=n=e.radius||$a,e.values?(e=eo(e.values),(a=!zu(e[0]))&&(i*=i)):e=iE(e.increment)),sf(t,n?zi(e)?function(u){return a=e(u),Math.abs(a-u)<=i?a:u}:function(u){for(var f=parseFloat(a?u.x:u),d=parseFloat(a?u.y:0),p=$a,v=0,_=e.length,y,b;_--;)a?(y=e[_].x-f,b=e[_].y-d,y=y*y+b*b):y=Math.abs(e[_]-f),y<p&&(p=y,v=_);return v=!i||p<=i?e[v]:u,a||v===u||zu(u)?v:v+es(u)}:iE(e))},RL=function(e,t,n,i){return sf(is(e)?!t:n===!0?!!(n=0):!i,function(){return is(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},PG=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(a,u){return u(a)},i)}},UG=function(e,t){return function(n){return e(parseFloat(n))+(t||es(n))}},zG=function(e,t,n){return LL(e,t,0,1,n)},DL=function(e,t,n){return sf(n,function(i){return e[~~t(i)]})},FG=function r(e,t,n){var i=t-e;return is(e)?DL(e,r(0,e.length),t):sf(n,function(a){return(i+(a-e)%i)%i+e})},BG=function r(e,t,n){var i=t-e,a=i*2;return is(e)?DL(e,r(0,e.length-1),t):sf(n,function(u){return u=(a+(u-e)%a)%a||0,e+(u>i?a-u:u)})},P0=function(e){return e.replace(_G,function(t){var n=t.indexOf("[")+1,i=t.substring(n||7,n?t.indexOf("]"):t.length-1).split(yG);return RL(n?i:+i[0],n?0:+i[1],+i[2]||1e-5)})},LL=function(e,t,n,i,a){var u=t-e,f=i-n;return sf(a,function(d){return n+((d-e)/u*f||0)})},kG=function r(e,t,n,i){var a=isNaN(e+t)?0:function(b){return(1-b)*e+b*t};if(!a){var u=Mr(e),f={},d,p,v,_,y;if(n===!0&&(i=1)&&(n=null),u)e={p:e},t={p:t};else if(is(e)&&!is(t)){for(v=[],_=e.length,y=_-2,p=1;p<_;p++)v.push(r(e[p-1],e[p]));_--,a=function(E){E*=_;var A=Math.min(y,~~E);return v[A](E-A)},n=t}else i||(e=kp(is(e)?[]:{},e));if(!v){for(d in t)RT.call(f,e,d,"get",t[d]);a=function(E){return OT(E,f)||(u?e.p:e)}}}return sf(n,a)},KC=function(e,t,n){var i=e.labels,a=$a,u,f,d;for(u in i)f=i[u]-t,f<0==!!n&&f&&a>(f=Math.abs(f))&&(d=u,a=f);return d},va=function(e,t,n){var i=e.vars,a=i[t],u=vi,f=e._ctx,d,p,v;if(a)return d=i[t+"Params"],p=i.callbackScope||e,n&&Gc.length&&lb(),f&&(vi=f),v=d?a.apply(p,d):a.call(p),vi=u,v},Zg=function(e){return Zc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Fr),e.progress()<1&&va(e,"onInterrupt"),e},Sp,NL=[],OL=function(e){if(e)if(e=!e.name&&e.default||e,ST()||e.headless){var t=e.name,n=zi(e),i=t&&!n&&e.init?function(){this._props=[]}:e,a={init:I0,render:OT,add:RT,kill:n9,modifier:t9,rawVars:0},u={targetTest:0,get:0,getSetter:NT,aliases:{},register:0};if(Gp(),e!==i){if(da[t])return;Ta(i,Ta(ub(e,a),u)),kp(i.prototype,kp(a,ub(e,u))),da[i.prop=t]=i,e.targetTest&&(tx.push(i),TT[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}mL(t,i),e.register&&e.register(na,i,ea)}else NL.push(e)},Kn=255,Kg={aqua:[0,Kn,Kn],lime:[0,Kn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Kn],navy:[0,0,128],white:[Kn,Kn,Kn],olive:[128,128,0],yellow:[Kn,Kn,0],orange:[Kn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Kn,0,0],pink:[Kn,192,203],cyan:[0,Kn,Kn],transparent:[Kn,Kn,Kn,0]},aM=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Kn+.5|0},IL=function(e,t,n){var i=e?zu(e)?[e>>16,e>>8&Kn,e&Kn]:0:Kg.black,a,u,f,d,p,v,_,y,b,E;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Kg[e])i=Kg[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),u=e.charAt(2),f=e.charAt(3),e="#"+a+a+u+u+f+f+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Kn,i&Kn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Kn,e&Kn]}else if(e.substr(0,3)==="hsl"){if(i=E=e.match(XC),!t)d=+i[0]%360/360,p=+i[1]/100,v=+i[2]/100,u=v<=.5?v*(p+1):v+p-v*p,a=v*2-u,i.length>3&&(i[3]*=1),i[0]=aM(d+1/3,a,u),i[1]=aM(d,a,u),i[2]=aM(d-1/3,a,u);else if(~e.indexOf("="))return i=e.match(fL),n&&i.length<4&&(i[3]=1),i}else i=e.match(XC)||Kg.transparent;i=i.map(Number)}return t&&!E&&(a=i[0]/Kn,u=i[1]/Kn,f=i[2]/Kn,_=Math.max(a,u,f),y=Math.min(a,u,f),v=(_+y)/2,_===y?d=p=0:(b=_-y,p=v>.5?b/(2-_-y):b/(_+y),d=_===a?(u-f)/b+(u<f?6:0):_===u?(f-a)/b+2:(a-u)/b+4,d*=60),i[0]=~~(d+.5),i[1]=~~(p*100+.5),i[2]=~~(v*100+.5)),n&&i.length<4&&(i[3]=1),i},PL=function(e){var t=[],n=[],i=-1;return e.split(Wc).forEach(function(a){var u=a.match(bp)||[];t.push.apply(t,u),n.push(i+=u.length+1)}),t.c=n,t},QC=function(e,t,n){var i="",a=(e+i).match(Wc),u=t?"hsla(":"rgba(",f=0,d,p,v,_;if(!a)return e;if(a=a.map(function(y){return(y=IL(y,t,1))&&u+(t?y[0]+","+y[1]+"%,"+y[2]+"%,"+y[3]:y.join(","))+")"}),n&&(v=PL(e),d=n.c,d.join(i)!==v.c.join(i)))for(p=e.replace(Wc,"1").split(bp),_=p.length-1;f<_;f++)i+=p[f]+(~d.indexOf(f)?a.shift()||u+"0,0,0,0)":(v.length?v:a.length?a:n).shift());if(!p)for(p=e.split(Wc),_=p.length-1;f<_;f++)i+=p[f]+a[f];return i+p[_]},Wc=(function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Kg)r+="|"+e+"\\b";return new RegExp(r+")","gi")})(),VG=/hsl[a]?\(/,UL=function(e){var t=e.join(" "),n;if(Wc.lastIndex=0,Wc.test(t))return n=VG.test(t),e[1]=QC(e[1],n),e[0]=QC(e[0],n,PL(e[1])),!0},U0,pa=(function(){var r=Date.now,e=500,t=33,n=r(),i=n,a=1e3/240,u=a,f=[],d,p,v,_,y,b,E=function A(w){var M=r()-i,D=w===!0,R,N,P,z;if((M>e||M<0)&&(n+=M-t),i+=M,P=i-n,R=P-u,(R>0||D)&&(z=++_.frame,y=P-_.time*1e3,_.time=P=P/1e3,u+=R+(R>=a?4:a-R),N=1),D||(d=p(A)),N)for(b=0;b<f.length;b++)f[b](P,y,z,w)};return _={time:0,frame:0,tick:function(){E(!0)},deltaRatio:function(w){return y/(1e3/(w||60))},wake:function(){dL&&(!QM&&ST()&&(xl=QM=window,MT=xl.document||{},Ea.gsap=na,(xl.gsapVersions||(xl.gsapVersions=[])).push(na.version),pL(ob||xl.GreenSockGlobals||!xl.gsap&&xl||{}),NL.forEach(OL)),v=typeof requestAnimationFrame<"u"&&requestAnimationFrame,d&&_.sleep(),p=v||function(w){return setTimeout(w,u-_.time*1e3+1|0)},U0=1,E(2))},sleep:function(){(v?cancelAnimationFrame:clearTimeout)(d),U0=0,p=I0},lagSmoothing:function(w,M){e=w||1/0,t=Math.min(M||33,e)},fps:function(w){a=1e3/(w||240),u=_.time*1e3+a},add:function(w,M,D){var R=M?function(N,P,z,B){w(N,P,z,B),_.remove(R)}:w;return _.remove(w),f[D?"unshift":"push"](R),Gp(),R},remove:function(w,M){~(M=f.indexOf(w))&&f.splice(M,1)&&b>=M&&b--},_listeners:f},_})(),Gp=function(){return!U0&&pa.wake()},An={},HG=/^[\d.\-M][\d.\-,\s]/,GG=/["']/g,WG=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],a=1,u=n.length,f,d,p;a<u;a++)d=n[a],f=a!==u-1?d.lastIndexOf(","):d.length,p=d.substr(0,f),t[i]=isNaN(p)?p.replace(GG,"").trim():+p,i=d.substr(f+1).trim();return t},XG=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},qG=function(e){var t=(e+"").split("("),n=An[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[WG(t[1])]:XG(e).split(",").map(yL)):An._CE&&HG.test(e)?An._CE("",e):n},zL=function(e){return function(t){return 1-e(1-t)}},FL=function r(e,t){for(var n=e._first,i;n;)n instanceof Es?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Ah=function(e,t){return e&&(zi(e)?e:An[e]||qG(e))||t},Uh=function(e,t,n,i){n===void 0&&(n=function(d){return 1-t(1-d)}),i===void 0&&(i=function(d){return d<.5?t(d*2)/2:1-t((1-d)*2)/2});var a={easeIn:t,easeOut:n,easeInOut:i},u;return $s(e,function(f){An[f]=Ea[f]=a,An[u=f.toLowerCase()]=n;for(var d in a)An[u+(d==="easeIn"?".in":d==="easeOut"?".out":".inOut")]=An[f+"."+d]=a[d]}),a},BL=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},oM=function r(e,t,n){var i=t>=1?t:1,a=(n||(e?.3:.45))/(t<1?t:1),u=a/KM*(Math.asin(1/i)||0),f=function(v){return v===1?1:i*Math.pow(2,-10*v)*vG((v-u)*a)+1},d=e==="out"?f:e==="in"?function(p){return 1-f(1-p)}:BL(f);return a=KM/a,d.config=function(p,v){return r(e,p,v)},d},lM=function r(e,t){t===void 0&&(t=1.70158);var n=function(u){return u?--u*u*((t+1)*u+t)+1:0},i=e==="out"?n:e==="in"?function(a){return 1-n(1-a)}:BL(n);return i.config=function(a){return r(e,a)},i};$s("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;Uh(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});An.Linear.easeNone=An.none=An.Linear.easeIn;Uh("Elastic",oM("in"),oM("out"),oM());(function(r,e){var t=1/e,n=2*t,i=2.5*t,a=function(f){return f<t?r*f*f:f<n?r*Math.pow(f-1.5/e,2)+.75:f<i?r*(f-=2.25/e)*f+.9375:r*Math.pow(f-2.625/e,2)+.984375};Uh("Bounce",function(u){return 1-a(1-u)},a)})(7.5625,2.75);Uh("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Uh("Circ",function(r){return-(uL(1-r*r)-1)});Uh("Sine",function(r){return r===1?1:-gG(r*pG)+1});Uh("Back",lM("in"),lM("out"),lM());An.SteppedEase=An.steps=Ea.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),a=t?1:0,u=1-Qn;return function(f){return((i*nv(0,u,f)|0)+a)*n}}};Bp.ease=An["quad.out"];$s("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return AT+=r+","+r+"Params,"});var kL=function(e,t){this.id=mG++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:vL,this.set=t?t.getSetter:NT},z0=(function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Hp(this,+t.duration,1,1),this.data=t.data,vi&&(this._ctx=vi,vi.data.push(this)),U0||pa.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Hp(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Gp(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(oS(this,n),!a._dp||a.parent||SL(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Sl(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Qn||!this._initted&&this._dur&&n||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),_L(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+jC(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+jC(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*a,i):this._repeat?Vp(this._tTime,a)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-Qn?0:this._rts;if(this._rts===n)return this;var a=this.parent&&this._ts?cb(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Qn?0:this._rts,this.totalTime(nv(-Math.abs(this._delay),this.totalDuration(),a),i!==!1),aS(this),wG(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Gp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Qn&&(this._tTime-=Qn)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=Ti(n);var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Sl(i,this,this._start-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Js(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cb(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=MG);var i=Fr;return Fr=n,CT(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Fr=i,this},e.globalTime=function(n){for(var i=this,a=arguments.length?n:i.rawTime();i;)a=i._start+a/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):a},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,ZC(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,ZC(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(Ja(this,n),Js(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,Js(i)),this._dur||(this._zTime=-Qn),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Qn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Qn,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,a;return!!(!n||this._ts&&this._initted&&n.isActive()&&(a=n.rawTime(!0))>=i&&a<this.endTime(!0)-Qn)},e.eventCallback=function(n,i,a){var u=this.vars;return arguments.length>1?(i?(u[n]=i,a&&(u[n+"Params"]=a),n==="onUpdate"&&(this._onUpdate=i)):delete u[n],this):u[n]},e.then=function(n){var i=this,a=i._prom;return new Promise(function(u){var f=zi(n)?n:xL,d=function(){var v=i.then;i.then=null,a&&a(),zi(f)&&(f=f(i))&&(f.then||f===i)&&(i.then=v),u(f),i.then=v};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?d():i._prom=d})},e.kill=function(){Zg(this)},r})();Ta(z0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Qn,_prom:0,_ps:!1,_rts:1});var Es=(function(r){lL(e,r);function e(n,i){var a;return n===void 0&&(n={}),a=r.call(this,n)||this,a.labels={},a.smoothChildTiming=!!n.smoothChildTiming,a.autoRemoveChildren=!!n.autoRemoveChildren,a._sort=Js(n.sortChildren),Ai&&Sl(n.parent||Ai,Eu(a),i),n.reversed&&a.reverse(),n.paused&&a.paused(!0),n.scrollTrigger&&ML(Eu(a),n.scrollTrigger),a}var t=e.prototype;return t.to=function(i,a,u){return f0(0,arguments,this),this},t.from=function(i,a,u){return f0(1,arguments,this),this},t.fromTo=function(i,a,u,f){return f0(2,arguments,this),this},t.set=function(i,a,u){return a.duration=0,a.parent=this,c0(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new or(i,a,Ja(this,u),1),this},t.call=function(i,a,u){return Sl(this,or.delayedCall(0,i,a),u)},t.staggerTo=function(i,a,u,f,d,p,v){return u.duration=a,u.stagger=u.stagger||f,u.onComplete=p,u.onCompleteParams=v,u.parent=this,new or(i,u,Ja(this,d)),this},t.staggerFrom=function(i,a,u,f,d,p,v){return u.runBackwards=1,c0(u).immediateRender=Js(u.immediateRender),this.staggerTo(i,a,u,f,d,p,v)},t.staggerFromTo=function(i,a,u,f,d,p,v,_){return f.startAt=u,c0(f).immediateRender=Js(f.immediateRender),this.staggerTo(i,a,f,d,p,v,_)},t.render=function(i,a,u){var f=this._time,d=this._dirty?this.totalDuration():this._tDur,p=this._dur,v=i<=0?0:Ti(i),_=this._zTime<0!=i<0&&(this._initted||!p),y,b,E,A,w,M,D,R,N,P,z,B;if(this!==Ai&&v>d&&i>=0&&(v=d),v!==this._tTime||u||_){if(f!==this._time&&p&&(v+=this._time-f,i+=this._time-f),y=v,N=this._start,R=this._ts,M=!R,_&&(p||(f=this._zTime),(i||!a)&&(this._zTime=i)),this._repeat){if(z=this._yoyo,w=p+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(w*100+i,a,u);if(y=Ti(v%w),v===d?(A=this._repeat,y=p):(P=Ti(v/w),A=~~P,A&&A===P&&(y=p,A--),y>p&&(y=p)),P=Vp(this._tTime,w),!f&&this._tTime&&P!==A&&this._tTime-P*w-this._dur<=0&&(P=A),z&&A&1&&(y=p-y,B=1),A!==P&&!this._lock){var k=z&&P&1,I=k===(z&&A&1);if(A<P&&(k=!k),f=k?0:v%p?p:v,this._lock=1,this.render(f||(B?0:Ti(A*w)),a,!p)._lock=0,this._tTime=v,!a&&this.parent&&va(this,"onRepeat"),this.vars.repeatRefresh&&!B&&(this.invalidate()._lock=1,P=A),f&&f!==this._time||M!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,d=this._tDur,I&&(this._lock=2,f=k?p:-1e-4,this.render(f,!0),this.vars.repeatRefresh&&!B&&this.invalidate()),this._lock=0,!this._ts&&!M)return this;FL(this,B)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(D=LG(this,Ti(f),Ti(y)),D&&(v-=y-(y=D._start))),this._tTime=v,this._time=y,this._act=!R,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,f=0),!f&&v&&p&&!a&&!P&&(va(this,"onStart"),this._tTime!==v))return this;if(y>=f&&i>=0)for(b=this._first;b;){if(E=b._next,(b._act||y>=b._start)&&b._ts&&D!==b){if(b.parent!==this)return this.render(i,a,u);if(b.render(b._ts>0?(y-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(y-b._start)*b._ts,a,u),y!==this._time||!this._ts&&!M){D=0,E&&(v+=this._zTime=-Qn);break}}b=E}else{b=this._last;for(var O=i<0?i:y;b;){if(E=b._prev,(b._act||O<=b._end)&&b._ts&&D!==b){if(b.parent!==this)return this.render(i,a,u);if(b.render(b._ts>0?(O-b._start)*b._ts:(b._dirty?b.totalDuration():b._tDur)+(O-b._start)*b._ts,a,u||Fr&&CT(b)),y!==this._time||!this._ts&&!M){D=0,E&&(v+=this._zTime=O?-Qn:Qn);break}}b=E}}if(D&&!a&&(this.pause(),D.render(y>=f?0:-Qn)._zTime=y>=f?1:-1,this._ts))return this._start=N,aS(this),this.render(i,a,u);this._onUpdate&&!a&&va(this,"onUpdate",!0),(v===d&&this._tTime>=this.totalDuration()||!v&&f)&&(N===this._start||Math.abs(R)!==Math.abs(this._ts))&&(this._lock||((i||!p)&&(v===d&&this._ts>0||!v&&this._ts<0)&&Zc(this,1),!a&&!(i<0&&!f)&&(v||f||!d)&&(va(this,v===d&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<d&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,a){var u=this;if(zu(a)||(a=Ja(this,a,i)),!(i instanceof z0)){if(is(i))return i.forEach(function(f){return u.add(f,a)}),this;if(Mr(i))return this.addLabel(i,a);if(zi(i))i=or.delayedCall(0,i);else return this}return this!==i?Sl(this,i,a):this},t.getChildren=function(i,a,u,f){i===void 0&&(i=!0),a===void 0&&(a=!0),u===void 0&&(u=!0),f===void 0&&(f=-$a);for(var d=[],p=this._first;p;)p._start>=f&&(p instanceof or?a&&d.push(p):(u&&d.push(p),i&&d.push.apply(d,p.getChildren(!0,a,u)))),p=p._next;return d},t.getById=function(i){for(var a=this.getChildren(1,1,1),u=a.length;u--;)if(a[u].vars.id===i)return a[u]},t.remove=function(i){return Mr(i)?this.removeLabel(i):zi(i)?this.killTweensOf(i):(i.parent===this&&sS(this,i),i===this._recent&&(this._recent=this._last),Th(this))},t.totalTime=function(i,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ti(pa.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,a),this._forcing=0,this):this._tTime},t.addLabel=function(i,a){return this.labels[i]=Ja(this,a),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,a,u){var f=or.delayedCall(0,a||I0,u);return f.data="isPause",this._hasPause=1,Sl(this,f,Ja(this,i))},t.removePause=function(i){var a=this._first;for(i=Ja(this,i);a;)a._start===i&&a.data==="isPause"&&Zc(a),a=a._next},t.killTweensOf=function(i,a,u){for(var f=this.getTweensOf(i,u),d=f.length;d--;)kc!==f[d]&&f[d].kill(i,a);return this},t.getTweensOf=function(i,a){for(var u=[],f=eo(i),d=this._first,p=zu(a),v;d;)d instanceof or?EG(d._targets,f)&&(p?(!kc||d._initted&&d._ts)&&d.globalTime(0)<=a&&d.globalTime(d.totalDuration())>a:!a||d.isActive())&&u.push(d):(v=d.getTweensOf(f,a)).length&&u.push.apply(u,v),d=d._next;return u},t.tweenTo=function(i,a){a=a||{};var u=this,f=Ja(u,i),d=a,p=d.startAt,v=d.onStart,_=d.onStartParams,y=d.immediateRender,b,E=or.to(u,Ta({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:f,overwrite:"auto",duration:a.duration||Math.abs((f-(p&&"time"in p?p.time:u._time))/u.timeScale())||Qn,onStart:function(){if(u.pause(),!b){var w=a.duration||Math.abs((f-(p&&"time"in p?p.time:u._time))/u.timeScale());E._dur!==w&&Hp(E,w,0,1).render(E._time,!0,!0),b=1}v&&v.apply(E,_||[])}},a));return y?E.render(0):E},t.tweenFromTo=function(i,a,u){return this.tweenTo(a,Ta({startAt:{time:Ja(this,i)}},u))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),KC(this,Ja(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),KC(this,Ja(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Qn)},t.shiftChildren=function(i,a,u){u===void 0&&(u=0);var f=this._first,d=this.labels,p;for(i=Ti(i);f;)f._start>=u&&(f._start+=i,f._end+=i),f=f._next;if(a)for(p in d)d[p]>=u&&(d[p]+=i);return Th(this)},t.invalidate=function(i){var a=this._first;for(this._lock=0;a;)a.invalidate(i),a=a._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var a=this._first,u;a;)u=a._next,this.remove(a),a=u;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Th(this)},t.totalDuration=function(i){var a=0,u=this,f=u._last,d=$a,p,v,_;if(arguments.length)return u.timeScale((u._repeat<0?u.duration():u.totalDuration())/(u.reversed()?-i:i));if(u._dirty){for(_=u.parent;f;)p=f._prev,f._dirty&&f.totalDuration(),v=f._start,v>d&&u._sort&&f._ts&&!u._lock?(u._lock=1,Sl(u,f,v-f._delay,1)._lock=0):d=v,v<0&&f._ts&&(a-=v,(!_&&!u._dp||_&&_.smoothChildTiming)&&(u._start+=Ti(v/u._ts),u._time-=v,u._tTime-=v),u.shiftChildren(-v,!1,-1/0),d=0),f._end>a&&f._ts&&(a=f._end),f=p;Hp(u,u===Ai&&u._time>a?u._time:a,1,1),u._dirty=0}return u._tDur},e.updateRoot=function(i){if(Ai._ts&&(_L(Ai,cb(i,Ai)),gL=pa.frame),pa.frame>=qC){qC+=ba.autoSleep||120;var a=Ai._first;if((!a||!a._ts)&&ba.autoSleep&&pa._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||pa.sleep()}}},e})(z0);Ta(Es.prototype,{_lock:0,_hasPause:0,_forcing:0});var YG=function(e,t,n,i,a,u,f){var d=new ea(this._pt,e,t,0,1,qL,null,a),p=0,v=0,_,y,b,E,A,w,M,D;for(d.b=n,d.e=i,n+="",i+="",(M=~i.indexOf("random("))&&(i=P0(i)),u&&(D=[n,i],u(D,e,t),n=D[0],i=D[1]),y=n.match(rM)||[];_=rM.exec(i);)E=_[0],A=i.substring(p,_.index),b?b=(b+1)%5:A.substr(-5)==="rgba("&&(b=1),E!==y[v++]&&(w=parseFloat(y[v-1])||0,d._pt={_next:d._pt,p:A||v===1?A:",",s:w,c:E.charAt(1)==="="?Tp(w,E)-w:parseFloat(E)-w,m:b&&b<4?Math.round:0},p=rM.lastIndex);return d.c=p<i.length?i.substring(p,i.length):"",d.fp=f,(hL.test(i)||M)&&(d.e=0),this._pt=d,d},RT=function(e,t,n,i,a,u,f,d,p,v){zi(i)&&(i=i(a||0,e,u));var _=e[t],y=n!=="get"?n:zi(_)?p?e[t.indexOf("set")||!zi(e["get"+t.substr(3)])?t:"get"+t.substr(3)](p):e[t]():_,b=zi(_)?p?JG:WL:LT,E;if(Mr(i)&&(~i.indexOf("random(")&&(i=P0(i)),i.charAt(1)==="="&&(E=Tp(y,i)+(es(y)||0),(E||E===0)&&(i=E))),!v||y!==i||rE)return!isNaN(y*i)&&i!==""?(E=new ea(this._pt,e,t,+y||0,i-(y||0),typeof _=="boolean"?e9:XL,0,b),p&&(E.fp=p),f&&E.modifier(f,this,e),this._pt=E):(!_&&!(t in e)&&ET(t,i),YG.call(this,e,t,y,i,b,d||ba.stringFilter,p))},jG=function(e,t,n,i,a){if(zi(e)&&(e=h0(e,a,t,n,i)),!Ol(e)||e.style&&e.nodeType||is(e)||cL(e))return Mr(e)?h0(e,a,t,n,i):e;var u={},f;for(f in e)u[f]=h0(e[f],a,t,n,i);return u},VL=function(e,t,n,i,a,u){var f,d,p,v;if(da[e]&&(f=new da[e]).init(a,f.rawVars?t[e]:jG(t[e],i,a,u,n),n,i,u)!==!1&&(n._pt=d=new ea(n._pt,a,e,0,1,f.render,f,0,f.priority),n!==Sp))for(p=n._ptLookup[n._targets.indexOf(a)],v=f._props.length;v--;)p[f._props[v]]=d;return f},kc,rE,DT=function r(e,t,n){var i=e.vars,a=i.ease,u=i.startAt,f=i.immediateRender,d=i.lazy,p=i.onUpdate,v=i.runBackwards,_=i.yoyoEase,y=i.keyframes,b=i.autoRevert,E=e._dur,A=e._startAt,w=e._targets,M=e.parent,D=M&&M.data==="nested"?M.vars.targets:w,R=e._overwrite==="auto"&&!xT,N=e.timeline,P,z,B,k,I,O,W,J,K,ce,le,Z,Q;if(N&&(!y||!a)&&(a="none"),e._ease=Ah(a,Bp.ease),e._yEase=_?zL(Ah(_===!0?a:_,Bp.ease)):0,_&&e._yoyo&&!e._repeat&&(_=e._yEase,e._yEase=e._ease,e._ease=_),e._from=!N&&!!i.runBackwards,!N||y&&!i.stagger){if(J=w[0]?Eh(w[0]).harness:0,Z=J&&i[J.prop],P=ub(i,TT),A&&(A._zTime<0&&A.progress(1),t<0&&v&&f&&!b?A.render(-1,!0):A.revert(v&&E?ex:SG),A._lazy=0),u){if(Zc(e._startAt=or.set(w,Ta({data:"isStart",overwrite:!1,parent:M,immediateRender:!0,lazy:!A&&Js(d),startAt:null,delay:0,onUpdate:p&&function(){return va(e,"onUpdate")},stagger:0},u))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fr||!f&&!b)&&e._startAt.revert(ex),f&&E&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(v&&E&&!A){if(t&&(f=!1),B=Ta({overwrite:!1,data:"isFromStart",lazy:f&&!A&&Js(d),immediateRender:f,stagger:0,parent:M},P),Z&&(B[J.prop]=Z),Zc(e._startAt=or.set(w,B)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fr?e._startAt.revert(ex):e._startAt.render(-1,!0)),e._zTime=t,!f)r(e._startAt,Qn,Qn);else if(!t)return}for(e._pt=e._ptCache=0,d=E&&Js(d)||d&&!E,z=0;z<w.length;z++){if(I=w[z],W=I._gsap||wT(w)[z]._gsap,e._ptLookup[z]=ce={},JM[W.id]&&Gc.length&&lb(),le=D===w?z:D.indexOf(I),J&&(K=new J).init(I,Z||P,e,le,D)!==!1&&(e._pt=k=new ea(e._pt,I,K.name,0,1,K.render,K,0,K.priority),K._props.forEach(function(fe){ce[fe]=k}),K.priority&&(O=1)),!J||Z)for(B in P)da[B]&&(K=VL(B,P,e,le,I,D))?K.priority&&(O=1):ce[B]=k=RT.call(e,I,B,"get",P[B],le,D,0,i.stringFilter);e._op&&e._op[z]&&e.kill(I,e._op[z]),R&&e._pt&&(kc=e,Ai.killTweensOf(I,ce,e.globalTime(t)),Q=!e.parent,kc=0),e._pt&&d&&(JM[W.id]=1)}O&&YL(e),e._onInit&&e._onInit(e)}e._onUpdate=p,e._initted=(!e._op||e._pt)&&!Q,y&&t<=0&&N.render($a,!0,!0)},ZG=function(e,t,n,i,a,u,f,d){var p=(e._pt&&e._ptCache||(e._ptCache={}))[t],v,_,y,b;if(!p)for(p=e._ptCache[t]=[],y=e._ptLookup,b=e._targets.length;b--;){if(v=y[b][t],v&&v.d&&v.d._pt)for(v=v.d._pt;v&&v.p!==t&&v.fp!==t;)v=v._next;if(!v)return rE=1,e.vars[t]="+=0",DT(e,f),rE=0,d?O0(t+" not eligible for reset"):1;p.push(v)}for(b=p.length;b--;)_=p[b],v=_._pt||_,v.s=(i||i===0)&&!a?i:v.s+(i||0)+u*v.c,v.c=n-v.s,_.e&&(_.e=ji(n)+es(_.e)),_.b&&(_.b=v.s+es(_.b))},KG=function(e,t){var n=e[0]?Eh(e[0]).harness:0,i=n&&n.aliases,a,u,f,d;if(!i)return t;a=kp({},t);for(u in i)if(u in a)for(d=i[u].split(","),f=d.length;f--;)a[d[f]]=a[u];return a},QG=function(e,t,n,i){var a=t.ease||i||"power1.inOut",u,f;if(is(t))f=n[e]||(n[e]=[]),t.forEach(function(d,p){return f.push({t:p/(t.length-1)*100,v:d,e:a})});else for(u in t)f=n[u]||(n[u]=[]),u==="ease"||f.push({t:parseFloat(e),v:t[u],e:a})},h0=function(e,t,n,i,a){return zi(e)?e.call(t,n,i,a):Mr(e)&&~e.indexOf("random(")?P0(e):e},HL=AT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",GL={};$s(HL+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return GL[r]=1});var or=(function(r){lL(e,r);function e(n,i,a,u){var f;typeof i=="number"&&(a.duration=i,i=a,a=null),f=r.call(this,u?i:c0(i))||this;var d=f.vars,p=d.duration,v=d.delay,_=d.immediateRender,y=d.stagger,b=d.overwrite,E=d.keyframes,A=d.defaults,w=d.scrollTrigger,M=d.yoyoEase,D=i.parent||Ai,R=(is(n)||cL(n)?zu(n[0]):"length"in i)?[n]:eo(n),N,P,z,B,k,I,O,W;if(f._targets=R.length?wT(R):O0("GSAP target "+n+" not found. https://gsap.com",!ba.nullTargetWarn)||[],f._ptLookup=[],f._overwrite=b,E||y||By(p)||By(v)){if(i=f.vars,N=f.timeline=new Es({data:"nested",defaults:A||{},targets:D&&D.data==="nested"?D.vars.targets:R}),N.kill(),N.parent=N._dp=Eu(f),N._start=0,y||By(p)||By(v)){if(B=R.length,O=y&&wL(y),Ol(y))for(k in y)~HL.indexOf(k)&&(W||(W={}),W[k]=y[k]);for(P=0;P<B;P++)z=ub(i,GL),z.stagger=0,M&&(z.yoyoEase=M),W&&kp(z,W),I=R[P],z.duration=+h0(p,Eu(f),P,I,R),z.delay=(+h0(v,Eu(f),P,I,R)||0)-f._delay,!y&&B===1&&z.delay&&(f._delay=v=z.delay,f._start+=v,z.delay=0),N.to(I,z,O?O(P,I,R):0),N._ease=An.none;N.duration()?p=v=0:f.timeline=0}else if(E){c0(Ta(N.vars.defaults,{ease:"none"})),N._ease=Ah(E.ease||i.ease||"none");var J=0,K,ce,le;if(is(E))E.forEach(function(Z){return N.to(R,Z,">")}),N.duration();else{z={};for(k in E)k==="ease"||k==="easeEach"||QG(k,E[k],z,E.easeEach);for(k in z)for(K=z[k].sort(function(Z,Q){return Z.t-Q.t}),J=0,P=0;P<K.length;P++)ce=K[P],le={ease:ce.e,duration:(ce.t-(P?K[P-1].t:0))/100*p},le[k]=ce.v,N.to(R,le,J),J+=le.duration;N.duration()<p&&N.to({},{duration:p-N.duration()})}}p||f.duration(p=N.duration())}else f.timeline=0;return b===!0&&!xT&&(kc=Eu(f),Ai.killTweensOf(R),kc=0),Sl(D,Eu(f),a),i.reversed&&f.reverse(),i.paused&&f.paused(!0),(_||!p&&!E&&f._start===Ti(D._time)&&Js(_)&&CG(Eu(f))&&D.data!=="nested")&&(f._tTime=-Qn,f.render(Math.max(0,-v)||0)),w&&ML(Eu(f),w),f}var t=e.prototype;return t.render=function(i,a,u){var f=this._time,d=this._tDur,p=this._dur,v=i<0,_=i>d-Qn&&!v?d:i<Qn?0:i,y,b,E,A,w,M,D,R,N;if(!p)DG(this,i,a,u);else if(_!==this._tTime||!i||u||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==v||this._lazy){if(y=_,R=this.timeline,this._repeat){if(A=p+this._rDelay,this._repeat<-1&&v)return this.totalTime(A*100+i,a,u);if(y=Ti(_%A),_===d?(E=this._repeat,y=p):(w=Ti(_/A),E=~~w,E&&E===w?(y=p,E--):y>p&&(y=p)),M=this._yoyo&&E&1,M&&(N=this._yEase,y=p-y),w=Vp(this._tTime,A),y===f&&!u&&this._initted&&E===w)return this._tTime=_,this;E!==w&&(R&&this._yEase&&FL(R,M),this.vars.repeatRefresh&&!M&&!this._lock&&y!==A&&this._initted&&(this._lock=u=1,this.render(Ti(A*E),!0).invalidate()._lock=0))}if(!this._initted){if(EL(this,v?i:y,u,a,_))return this._tTime=0,this;if(f!==this._time&&!(u&&this.vars.repeatRefresh&&E!==w))return this;if(p!==this._dur)return this.render(i,a,u)}if(this._tTime=_,this._time=y,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=D=(N||this._ease)(y/p),this._from&&(this.ratio=D=1-D),!f&&_&&!a&&!w&&(va(this,"onStart"),this._tTime!==_))return this;for(b=this._pt;b;)b.r(D,b.d),b=b._next;R&&R.render(i<0?i:R._dur*R._ease(y/this._dur),a,u)||this._startAt&&(this._zTime=i),this._onUpdate&&!a&&(v&&$M(this,i,a,u),va(this,"onUpdate")),this._repeat&&E!==w&&this.vars.onRepeat&&!a&&this.parent&&va(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(v&&!this._onUpdate&&$M(this,i,!0,!0),(i||!p)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Zc(this,1),!a&&!(v&&!f)&&(_||f||M)&&(va(this,_===d?"onComplete":"onReverseComplete",!0),this._prom&&!(_<d&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,a,u,f,d){U0||pa.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),v;return this._initted||DT(this,p),v=this._ease(p/this._dur),ZG(this,i,a,u,f,v,p,d)?this.resetTo(i,a,u,f,1):(oS(this,0),this.parent||bL(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,a){if(a===void 0&&(a="all"),!i&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Zg(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Fr),this;if(this.timeline){var u=this.timeline.totalDuration();return this.timeline.killTweensOf(i,a,kc&&kc.vars.overwrite!==!0)._first||Zg(this),this.parent&&u!==this.timeline.totalDuration()&&Hp(this,this._dur*this.timeline._tDur/u,0,1),this}var f=this._targets,d=i?eo(i):f,p=this._ptLookup,v=this._pt,_,y,b,E,A,w,M;if((!a||a==="all")&&AG(f,d))return a==="all"&&(this._pt=0),Zg(this);for(_=this._op=this._op||[],a!=="all"&&(Mr(a)&&(A={},$s(a,function(D){return A[D]=1}),a=A),a=KG(f,a)),M=f.length;M--;)if(~d.indexOf(f[M])){y=p[M],a==="all"?(_[M]=a,E=y,b={}):(b=_[M]=_[M]||{},E=a);for(A in E)w=y&&y[A],w&&((!("kill"in w.d)||w.d.kill(A)===!0)&&sS(this,w,"_pt"),delete y[A]),b!=="all"&&(b[A]=1)}return this._initted&&!this._pt&&v&&Zg(this),this},e.to=function(i,a){return new e(i,a,arguments[2])},e.from=function(i,a){return f0(1,arguments)},e.delayedCall=function(i,a,u,f){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:a,onReverseComplete:a,onCompleteParams:u,onReverseCompleteParams:u,callbackScope:f})},e.fromTo=function(i,a,u){return f0(2,arguments)},e.set=function(i,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(i,a)},e.killTweensOf=function(i,a,u){return Ai.killTweensOf(i,a,u)},e})(z0);Ta(or.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});$s("staggerTo,staggerFrom,staggerFromTo",function(r){or[r]=function(){var e=new Es,t=tE.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var LT=function(e,t,n){return e[t]=n},WL=function(e,t,n){return e[t](n)},JG=function(e,t,n,i){return e[t](i.fp,n)},$G=function(e,t,n){return e.setAttribute(t,n)},NT=function(e,t){return zi(e[t])?WL:bT(e[t])&&e.setAttribute?$G:LT},XL=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},e9=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},qL=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},OT=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},t9=function(e,t,n,i){for(var a=this._pt,u;a;)u=a._next,a.p===i&&a.modifier(e,t,n),a=u},n9=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?sS(this,t,"_pt"):t.dep||(n=1),t=i;return!n},i9=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},YL=function(e){for(var t=e._pt,n,i,a,u;t;){for(n=t._next,i=a;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:u)?t._prev._next=t:a=t,(t._next=i)?i._prev=t:u=t,t=n}e._pt=a},ea=(function(){function r(t,n,i,a,u,f,d,p,v){this.t=n,this.s=a,this.c=u,this.p=i,this.r=f||XL,this.d=d||this,this.set=p||LT,this.pr=v||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,a){this.mSet=this.mSet||this.set,this.set=i9,this.m=n,this.mt=a,this.tween=i},r})();$s(AT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return TT[r]=1});Ea.TweenMax=Ea.TweenLite=or;Ea.TimelineLite=Ea.TimelineMax=Es;Ai=new Es({sortChildren:!1,defaults:Bp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ba.stringFilter=UL;var wh=[],nx={},r9=[],JC=0,s9=0,uM=function(e){return(nx[e]||r9).map(function(t){return t()})},sE=function(){var e=Date.now(),t=[];e-JC>2&&(uM("matchMediaInit"),wh.forEach(function(n){var i=n.queries,a=n.conditions,u,f,d,p;for(f in i)u=xl.matchMedia(i[f]).matches,u&&(d=1),u!==a[f]&&(a[f]=u,p=1);p&&(n.revert(),d&&t.push(n))}),uM("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),JC=e,uM("matchMedia"))},jL=(function(){function r(t,n){this.selector=n&&nE(n),this.data=[],this._r=[],this.isReverted=!1,this.id=s9++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,a){zi(n)&&(a=i,i=n,n=zi);var u=this,f=function(){var p=vi,v=u.selector,_;return p&&p!==u&&p.data.push(u),a&&(u.selector=nE(a)),vi=u,_=i.apply(u,arguments),zi(_)&&u._r.push(_),vi=p,u.selector=v,u.isReverted=!1,_};return u.last=f,n===zi?f(u,function(d){return u.add(null,d)}):n?u[n]=f:f},e.ignore=function(n){var i=vi;vi=null,n(this),vi=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof or&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var a=this;if(n?(function(){for(var f=a.getTweens(),d=a.data.length,p;d--;)p=a.data[d],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(v){return f.splice(f.indexOf(v),1)}));for(f.map(function(v){return{g:v._dur||v._delay||v._sat&&!v._sat.vars.immediateRender?v.globalTime(0):-1/0,t:v}}).sort(function(v,_){return _.g-v.g||-1/0}).forEach(function(v){return v.t.revert(n)}),d=a.data.length;d--;)p=a.data[d],p instanceof Es?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof or)&&p.revert&&p.revert(n);a._r.forEach(function(v){return v(n,a)}),a.isReverted=!0})():this.data.forEach(function(f){return f.kill&&f.kill()}),this.clear(),i)for(var u=wh.length;u--;)wh[u].id===this.id&&wh.splice(u,1)},e.revert=function(n){this.kill(n||{})},r})(),a9=(function(){function r(t){this.contexts=[],this.scope=t,vi&&vi.data.push(this)}var e=r.prototype;return e.add=function(n,i,a){Ol(n)||(n={matches:n});var u=new jL(0,a||this.scope),f=u.conditions={},d,p,v;vi&&!u.selector&&(u.selector=vi.selector),this.contexts.push(u),i=u.add("onMatch",i),u.queries=n;for(p in n)p==="all"?v=1:(d=xl.matchMedia(n[p]),d&&(wh.indexOf(u)<0&&wh.push(u),(f[p]=d.matches)&&(v=1),d.addListener?d.addListener(sE):d.addEventListener("change",sE)));return v&&i(u,function(_){return u.add(null,_)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r})(),fb={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return OL(i)})},timeline:function(e){return new Es(e)},getTweensOf:function(e,t){return Ai.getTweensOf(e,t)},getProperty:function(e,t,n,i){Mr(e)&&(e=eo(e)[0]);var a=Eh(e||{}).get,u=n?xL:yL;return n==="native"&&(n=""),e&&(t?u((da[t]&&da[t].get||a)(e,t,n,i)):function(f,d,p){return u((da[f]&&da[f].get||a)(e,f,d,p))})},quickSetter:function(e,t,n){if(e=eo(e),e.length>1){var i=e.map(function(v){return na.quickSetter(v,t,n)}),a=i.length;return function(v){for(var _=a;_--;)i[_](v)}}e=e[0]||{};var u=da[t],f=Eh(e),d=f.harness&&(f.harness.aliases||{})[t]||t,p=u?function(v){var _=new u;Sp._pt=0,_.init(e,n?v+n:v,Sp,0,[e]),_.render(1,_),Sp._pt&&OT(1,Sp)}:f.set(e,d);return u?p:function(v){return p(e,d,n?v+n:v,f,1)}},quickTo:function(e,t,n){var i,a=na.to(e,Ta((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),u=function(d,p,v){return a.resetTo(t,d,p,v)};return u.tween=a,u},isTweening:function(e){return Ai.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ah(e.ease,Bp.ease)),YC(Bp,e||{})},config:function(e){return YC(ba,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,a=e.defaults,u=e.extendTimeline;(i||"").split(",").forEach(function(f){return f&&!da[f]&&!Ea[f]&&O0(t+" effect requires "+f+" plugin.")}),sM[t]=function(f,d,p){return n(eo(f),Ta(d||{},a),p)},u&&(Es.prototype[t]=function(f,d,p){return this.add(sM[t](f,Ol(d)?d:(p=d)&&{},this),p)})},registerEase:function(e,t){An[e]=Ah(t)},parseEase:function(e,t){return arguments.length?Ah(e,t):An},getById:function(e){return Ai.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Es(e),i,a;for(n.smoothChildTiming=Js(e.smoothChildTiming),Ai.remove(n),n._dp=0,n._time=n._tTime=Ai._time,i=Ai._first;i;)a=i._next,(t||!(!i._dur&&i instanceof or&&i.vars.onComplete===i._targets[0]))&&Sl(n,i,i._start-i._delay),i=a;return Sl(Ai,n,0),n},context:function(e,t){return e?new jL(e,t):vi},matchMedia:function(e){return new a9(e)},matchMediaRefresh:function(){return wh.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||sE()},addEventListener:function(e,t){var n=nx[e]||(nx[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=nx[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:FG,wrapYoyo:BG,distribute:wL,random:RL,snap:CL,normalize:zG,getUnit:es,clamp:OG,splitColor:IL,toArray:eo,selector:nE,mapRange:LL,pipe:PG,unitize:UG,interpolate:kG,shuffle:AL},install:pL,effects:sM,ticker:pa,updateRoot:Es.updateRoot,plugins:da,globalTimeline:Ai,core:{PropTween:ea,globals:mL,Tween:or,Timeline:Es,Animation:z0,getCache:Eh,_removeLinkedListItem:sS,reverting:function(){return Fr},context:function(e){return e&&vi&&(vi.data.push(e),e._ctx=vi),vi},suppressOverwrites:function(e){return xT=e}}};$s("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return fb[r]=or[r]});pa.add(Es.updateRoot);Sp=fb.to({},{duration:0});var o9=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},l9=function(e,t){var n=e._targets,i,a,u;for(i in t)for(a=n.length;a--;)u=e._ptLookup[a][i],u&&(u=u.d)&&(u._pt&&(u=o9(u,i)),u&&u.modifier&&u.modifier(t[i],e,n[a],i))},cM=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,a,u){u._onInit=function(f){var d,p;if(Mr(a)&&(d={},$s(a,function(v){return d[v]=1}),a=d),t){d={};for(p in a)d[p]=t(a[p]);a=d}l9(f,a)}}}},na=fb.registerPlugin({name:"attr",init:function(e,t,n,i,a){var u,f,d;this.tween=n;for(u in t)d=e.getAttribute(u)||"",f=this.add(e,"setAttribute",(d||0)+"",t[u],i,a,0,0,u),f.op=u,f.b=d,this._props.push(u)},render:function(e,t){for(var n=t._pt;n;)Fr?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},cM("roundProps",iE),cM("modifiers"),cM("snap",CL))||fb;or.version=Es.version=na.version="3.14.2";dL=1;ST()&&Gp();An.Power0;An.Power1;An.Power2;An.Power3;An.Power4;An.Linear;An.Quad;An.Cubic;An.Quart;An.Quint;An.Strong;An.Elastic;var $C=An.Back;An.SteppedEase;An.Bounce;An.Sine;An.Expo;An.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var e3,Vc,Ap,IT,_h,t3,PT,u9=function(){return typeof window<"u"},Fu={},hh=180/Math.PI,wp=Math.PI/180,vp=Math.atan2,n3=1e8,UT=/([A-Z])/g,c9=/(left|right|width|margin|padding|x)/i,f9=/[\s,\(]\S/,Tl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},aE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},h9=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},d9=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},p9=function(e,t){return t.set(t.t,t.p,e===1?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},m9=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},ZL=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},KL=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},g9=function(e,t,n){return e.style[t]=n},v9=function(e,t,n){return e.style.setProperty(t,n)},_9=function(e,t,n){return e._gsap[t]=n},y9=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},x9=function(e,t,n,i,a){var u=e._gsap;u.scaleX=u.scaleY=n,u.renderTransform(a,u)},b9=function(e,t,n,i,a){var u=e._gsap;u[t]=n,u.renderTransform(a,u)},Ci="transform",ta=Ci+"Origin",S9=function r(e,t){var n=this,i=this.target,a=i.style,u=i._gsap;if(e in Fu&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Tl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(f){return n.tfm[f]=wu(i,f)}):this.tfm[e]=u.x?u[e]:wu(i,e),e===ta&&(this.tfm.zOrigin=u.zOrigin);else return Tl.transform.split(",").forEach(function(f){return r.call(n,f,t)});if(this.props.indexOf(Ci)>=0)return;u.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ta,t,"")),e=Ci}(a||t)&&this.props.push(e,t,a[e])},QL=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},M9=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,a,u;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?t[e[a]](e[a+2]):t[e[a]]=e[a+2]:e[a+2]?n[e[a]]=e[a+2]:n.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(UT,"-$1").toLowerCase());if(this.tfm){for(u in this.tfm)i[u]=this.tfm[u];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),a=PT(),(!a||!a.isStart)&&!n[Ci]&&(QL(n),i.zOrigin&&n[ta]&&(n[ta]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},JL=function(e,t){var n={target:e,props:[],revert:M9,save:S9};return e._gsap||na.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},$L,oE=function(e,t){var n=Vc.createElementNS?Vc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Vc.createElement(e);return n&&n.style?n:Vc.createElement(e)},_a=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(UT,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,Wp(t)||t,1)||""},i3="O,Moz,ms,Ms,Webkit".split(","),Wp=function(e,t,n){var i=t||_h,a=i.style,u=5;if(e in a&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);u--&&!(i3[u]+e in a););return u<0?null:(u===3?"ms":u>=0?i3[u]:"")+e},lE=function(){u9()&&window.document&&(e3=window,Vc=e3.document,Ap=Vc.documentElement,_h=oE("div")||{style:{}},oE("div"),Ci=Wp(Ci),ta=Ci+"Origin",_h.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$L=!!Wp("perspective"),PT=na.core.reverting,IT=1)},r3=function(e){var t=e.ownerSVGElement,n=oE("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),a;i.style.display="block",n.appendChild(i),Ap.appendChild(n);try{a=i.getBBox()}catch{}return n.removeChild(i),Ap.removeChild(n),a},s3=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},eN=function(e){var t,n;try{t=e.getBBox()}catch{t=r3(e),n=1}return t&&(t.width||t.height)||n||(t=r3(e)),t&&!t.width&&!t.x&&!t.y?{x:+s3(e,["x","cx","x1"])||0,y:+s3(e,["y","cy","y1"])||0,width:0,height:0}:t},tN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&eN(e))},Kc=function(e,t){if(t){var n=e.style,i;t in Fu&&t!==ta&&(t=Ci),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(UT,"-$1").toLowerCase())):n.removeAttribute(t)}},Hc=function(e,t,n,i,a,u){var f=new ea(e._pt,t,n,0,1,u?KL:ZL);return e._pt=f,f.b=i,f.e=a,e._props.push(n),f},a3={deg:1,rad:1,turn:1},E9={grid:1,flex:1},Qc=function r(e,t,n,i){var a=parseFloat(n)||0,u=(n+"").trim().substr((a+"").length)||"px",f=_h.style,d=c9.test(t),p=e.tagName.toLowerCase()==="svg",v=(p?"client":"offset")+(d?"Width":"Height"),_=100,y=i==="px",b=i==="%",E,A,w,M;if(i===u||!a||a3[i]||a3[u])return a;if(u!=="px"&&!y&&(a=r(e,t,n,"px")),M=e.getCTM&&tN(e),(b||u==="%")&&(Fu[t]||~t.indexOf("adius")))return E=M?e.getBBox()[d?"width":"height"]:e[v],ji(b?a/E*_:a/100*E);if(f[d?"width":"height"]=_+(y?u:i),A=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!p?e:e.parentNode,M&&(A=(e.ownerSVGElement||{}).parentNode),(!A||A===Vc||!A.appendChild)&&(A=Vc.body),w=A._gsap,w&&b&&w.width&&d&&w.time===pa.time&&!w.uncache)return ji(a/w.width*_);if(b&&(t==="height"||t==="width")){var D=e.style[t];e.style[t]=_+i,E=e[v],D?e.style[t]=D:Kc(e,t)}else(b||u==="%")&&!E9[_a(A,"display")]&&(f.position=_a(e,"position")),A===e&&(f.position="static"),A.appendChild(_h),E=_h[v],A.removeChild(_h),f.position="absolute";return d&&b&&(w=Eh(A),w.time=pa.time,w.width=A[v]),ji(y?E*a/_:E&&a?_/E*a:0)},wu=function(e,t,n,i){var a;return IT||lE(),t in Tl&&t!=="transform"&&(t=Tl[t],~t.indexOf(",")&&(t=t.split(",")[0])),Fu[t]&&t!=="transform"?(a=B0(e,i),a=t!=="transformOrigin"?a[t]:a.svg?a.origin:db(_a(e,ta))+" "+a.zOrigin+"px"):(a=e.style[t],(!a||a==="auto"||i||~(a+"").indexOf("calc("))&&(a=hb[t]&&hb[t](e,t,n)||_a(e,t)||vL(e,t)||(t==="opacity"?1:0))),n&&!~(a+"").trim().indexOf(" ")?Qc(e,t,a,n)+n:a},T9=function(e,t,n,i){if(!n||n==="none"){var a=Wp(t,e,1),u=a&&_a(e,a,1);u&&u!==n?(t=a,n=u):t==="borderColor"&&(n=_a(e,"borderTopColor"))}var f=new ea(this._pt,e.style,t,0,1,qL),d=0,p=0,v,_,y,b,E,A,w,M,D,R,N,P;if(f.b=n,f.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=_a(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(A=e.style[t],e.style[t]=i,i=_a(e,t)||i,A?e.style[t]=A:Kc(e,t)),v=[n,i],UL(v),n=v[0],i=v[1],y=n.match(bp)||[],P=i.match(bp)||[],P.length){for(;_=bp.exec(i);)w=_[0],D=i.substring(d,_.index),E?E=(E+1)%5:(D.substr(-5)==="rgba("||D.substr(-5)==="hsla(")&&(E=1),w!==(A=y[p++]||"")&&(b=parseFloat(A)||0,N=A.substr((b+"").length),w.charAt(1)==="="&&(w=Tp(b,w)+N),M=parseFloat(w),R=w.substr((M+"").length),d=bp.lastIndex-R.length,R||(R=R||ba.units[t]||N,d===i.length&&(i+=R,f.e+=R)),N!==R&&(b=Qc(e,t,A,R)||0),f._pt={_next:f._pt,p:D||p===1?D:",",s:b,c:M-b,m:E&&E<4||t==="zIndex"?Math.round:0});f.c=d<i.length?i.substring(d,i.length):""}else f.r=t==="display"&&i==="none"?KL:ZL;return hL.test(i)&&(f.e=0),this._pt=f,f},o3={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},A9=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=o3[n]||n,t[1]=o3[i]||i,t.join(" ")},w9=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,a=t.u,u=n._gsap,f,d,p;if(a==="all"||a===!0)i.cssText="",d=1;else for(a=a.split(","),p=a.length;--p>-1;)f=a[p],Fu[f]&&(d=1,f=f==="transformOrigin"?ta:Ci),Kc(n,f);d&&(Kc(n,Ci),u&&(u.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",B0(n,1),u.uncache=1,QL(i)))}},hb={clearProps:function(e,t,n,i,a){if(a.data!=="isFromStart"){var u=e._pt=new ea(e._pt,t,n,0,0,w9);return u.u=i,u.pr=-10,u.tween=a,e._props.push(n),1}}},F0=[1,0,0,1,0,0],nN={},iN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},l3=function(e){var t=_a(e,Ci);return iN(t)?F0:t.substr(7).match(fL).map(ji)},zT=function(e,t){var n=e._gsap||Eh(e),i=e.style,a=l3(e),u,f,d,p;return n.svg&&e.getAttribute("transform")?(d=e.transform.baseVal.consolidate().matrix,a=[d.a,d.b,d.c,d.d,d.e,d.f],a.join(",")==="1,0,0,1,0,0"?F0:a):(a===F0&&!e.offsetParent&&e!==Ap&&!n.svg&&(d=i.display,i.display="block",u=e.parentNode,(!u||!e.offsetParent&&!e.getBoundingClientRect().width)&&(p=1,f=e.nextElementSibling,Ap.appendChild(e)),a=l3(e),d?i.display=d:Kc(e,"display"),p&&(f?u.insertBefore(e,f):u?u.appendChild(e):Ap.removeChild(e))),t&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},uE=function(e,t,n,i,a,u){var f=e._gsap,d=a||zT(e,!0),p=f.xOrigin||0,v=f.yOrigin||0,_=f.xOffset||0,y=f.yOffset||0,b=d[0],E=d[1],A=d[2],w=d[3],M=d[4],D=d[5],R=t.split(" "),N=parseFloat(R[0])||0,P=parseFloat(R[1])||0,z,B,k,I;n?d!==F0&&(B=b*w-E*A)&&(k=N*(w/B)+P*(-A/B)+(A*D-w*M)/B,I=N*(-E/B)+P*(b/B)-(b*D-E*M)/B,N=k,P=I):(z=eN(e),N=z.x+(~R[0].indexOf("%")?N/100*z.width:N),P=z.y+(~(R[1]||R[0]).indexOf("%")?P/100*z.height:P)),i||i!==!1&&f.smooth?(M=N-p,D=P-v,f.xOffset=_+(M*b+D*A)-M,f.yOffset=y+(M*E+D*w)-D):f.xOffset=f.yOffset=0,f.xOrigin=N,f.yOrigin=P,f.smooth=!!i,f.origin=t,f.originIsAbsolute=!!n,e.style[ta]="0px 0px",u&&(Hc(u,f,"xOrigin",p,N),Hc(u,f,"yOrigin",v,P),Hc(u,f,"xOffset",_,f.xOffset),Hc(u,f,"yOffset",y,f.yOffset)),e.setAttribute("data-svg-origin",N+" "+P)},B0=function(e,t){var n=e._gsap||new kL(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,a=n.scaleX<0,u="px",f="deg",d=getComputedStyle(e),p=_a(e,ta)||"0",v,_,y,b,E,A,w,M,D,R,N,P,z,B,k,I,O,W,J,K,ce,le,Z,Q,fe,Ie,Pe,X,oe,Ce,Ue,rt;return v=_=y=A=w=M=D=R=N=0,b=E=1,n.svg=!!(e.getCTM&&tN(e)),d.translate&&((d.translate!=="none"||d.scale!=="none"||d.rotate!=="none")&&(i[Ci]=(d.translate!=="none"?"translate3d("+(d.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(d.rotate!=="none"?"rotate("+d.rotate+") ":"")+(d.scale!=="none"?"scale("+d.scale.split(" ").join(",")+") ":"")+(d[Ci]!=="none"?d[Ci]:"")),i.scale=i.rotate=i.translate="none"),B=zT(e,n.svg),n.svg&&(n.uncache?(fe=e.getBBox(),p=n.xOrigin-fe.x+"px "+(n.yOrigin-fe.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),uE(e,Q||p,!!Q||n.originIsAbsolute,n.smooth!==!1,B)),P=n.xOrigin||0,z=n.yOrigin||0,B!==F0&&(W=B[0],J=B[1],K=B[2],ce=B[3],v=le=B[4],_=Z=B[5],B.length===6?(b=Math.sqrt(W*W+J*J),E=Math.sqrt(ce*ce+K*K),A=W||J?vp(J,W)*hh:0,D=K||ce?vp(K,ce)*hh+A:0,D&&(E*=Math.abs(Math.cos(D*wp))),n.svg&&(v-=P-(P*W+z*K),_-=z-(P*J+z*ce))):(rt=B[6],Ce=B[7],Pe=B[8],X=B[9],oe=B[10],Ue=B[11],v=B[12],_=B[13],y=B[14],k=vp(rt,oe),w=k*hh,k&&(I=Math.cos(-k),O=Math.sin(-k),Q=le*I+Pe*O,fe=Z*I+X*O,Ie=rt*I+oe*O,Pe=le*-O+Pe*I,X=Z*-O+X*I,oe=rt*-O+oe*I,Ue=Ce*-O+Ue*I,le=Q,Z=fe,rt=Ie),k=vp(-K,oe),M=k*hh,k&&(I=Math.cos(-k),O=Math.sin(-k),Q=W*I-Pe*O,fe=J*I-X*O,Ie=K*I-oe*O,Ue=ce*O+Ue*I,W=Q,J=fe,K=Ie),k=vp(J,W),A=k*hh,k&&(I=Math.cos(k),O=Math.sin(k),Q=W*I+J*O,fe=le*I+Z*O,J=J*I-W*O,Z=Z*I-le*O,W=Q,le=fe),w&&Math.abs(w)+Math.abs(A)>359.9&&(w=A=0,M=180-M),b=ji(Math.sqrt(W*W+J*J+K*K)),E=ji(Math.sqrt(Z*Z+rt*rt)),k=vp(le,Z),D=Math.abs(k)>2e-4?k*hh:0,N=Ue?1/(Ue<0?-Ue:Ue):0),n.svg&&(Q=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!iN(_a(e,Ci)),Q&&e.setAttribute("transform",Q))),Math.abs(D)>90&&Math.abs(D)<270&&(a?(b*=-1,D+=A<=0?180:-180,A+=A<=0?180:-180):(E*=-1,D+=D<=0?180:-180)),t=t||n.uncache,n.x=v-((n.xPercent=v&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-v)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+u,n.y=_-((n.yPercent=_&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-_)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+u,n.z=y+u,n.scaleX=ji(b),n.scaleY=ji(E),n.rotation=ji(A)+f,n.rotationX=ji(w)+f,n.rotationY=ji(M)+f,n.skewX=D+f,n.skewY=R+f,n.transformPerspective=N+u,(n.zOrigin=parseFloat(p.split(" ")[2])||!t&&n.zOrigin||0)&&(i[ta]=db(p)),n.xOffset=n.yOffset=0,n.force3D=ba.force3D,n.renderTransform=n.svg?R9:$L?rN:C9,n.uncache=0,n},db=function(e){return(e=e.split(" "))[0]+" "+e[1]},fM=function(e,t,n){var i=es(t);return ji(parseFloat(t)+parseFloat(Qc(e,"x",n+"px",i)))+i},C9=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,rN(e,t)},oh="0deg",Wg="0px",lh=") ",rN=function(e,t){var n=t||this,i=n.xPercent,a=n.yPercent,u=n.x,f=n.y,d=n.z,p=n.rotation,v=n.rotationY,_=n.rotationX,y=n.skewX,b=n.skewY,E=n.scaleX,A=n.scaleY,w=n.transformPerspective,M=n.force3D,D=n.target,R=n.zOrigin,N="",P=M==="auto"&&e&&e!==1||M===!0;if(R&&(_!==oh||v!==oh)){var z=parseFloat(v)*wp,B=Math.sin(z),k=Math.cos(z),I;z=parseFloat(_)*wp,I=Math.cos(z),u=fM(D,u,B*I*-R),f=fM(D,f,-Math.sin(z)*-R),d=fM(D,d,k*I*-R+R)}w!==Wg&&(N+="perspective("+w+lh),(i||a)&&(N+="translate("+i+"%, "+a+"%) "),(P||u!==Wg||f!==Wg||d!==Wg)&&(N+=d!==Wg||P?"translate3d("+u+", "+f+", "+d+") ":"translate("+u+", "+f+lh),p!==oh&&(N+="rotate("+p+lh),v!==oh&&(N+="rotateY("+v+lh),_!==oh&&(N+="rotateX("+_+lh),(y!==oh||b!==oh)&&(N+="skew("+y+", "+b+lh),(E!==1||A!==1)&&(N+="scale("+E+", "+A+lh),D.style[Ci]=N||"translate(0, 0)"},R9=function(e,t){var n=t||this,i=n.xPercent,a=n.yPercent,u=n.x,f=n.y,d=n.rotation,p=n.skewX,v=n.skewY,_=n.scaleX,y=n.scaleY,b=n.target,E=n.xOrigin,A=n.yOrigin,w=n.xOffset,M=n.yOffset,D=n.forceCSS,R=parseFloat(u),N=parseFloat(f),P,z,B,k,I;d=parseFloat(d),p=parseFloat(p),v=parseFloat(v),v&&(v=parseFloat(v),p+=v,d+=v),d||p?(d*=wp,p*=wp,P=Math.cos(d)*_,z=Math.sin(d)*_,B=Math.sin(d-p)*-y,k=Math.cos(d-p)*y,p&&(v*=wp,I=Math.tan(p-v),I=Math.sqrt(1+I*I),B*=I,k*=I,v&&(I=Math.tan(v),I=Math.sqrt(1+I*I),P*=I,z*=I)),P=ji(P),z=ji(z),B=ji(B),k=ji(k)):(P=_,k=y,z=B=0),(R&&!~(u+"").indexOf("px")||N&&!~(f+"").indexOf("px"))&&(R=Qc(b,"x",u,"px"),N=Qc(b,"y",f,"px")),(E||A||w||M)&&(R=ji(R+E-(E*P+A*B)+w),N=ji(N+A-(E*z+A*k)+M)),(i||a)&&(I=b.getBBox(),R=ji(R+i/100*I.width),N=ji(N+a/100*I.height)),I="matrix("+P+","+z+","+B+","+k+","+R+","+N+")",b.setAttribute("transform",I),D&&(b.style[Ci]=I)},D9=function(e,t,n,i,a){var u=360,f=Mr(a),d=parseFloat(a)*(f&&~a.indexOf("rad")?hh:1),p=d-i,v=i+p+"deg",_,y;return f&&(_=a.split("_")[1],_==="short"&&(p%=u,p!==p%(u/2)&&(p+=p<0?u:-u)),_==="cw"&&p<0?p=(p+u*n3)%u-~~(p/u)*u:_==="ccw"&&p>0&&(p=(p-u*n3)%u-~~(p/u)*u)),e._pt=y=new ea(e._pt,t,n,i,p,h9),y.e=v,y.u="deg",e._props.push(n),y},u3=function(e,t){for(var n in t)e[n]=t[n];return e},L9=function(e,t,n){var i=u3({},n._gsap),a="perspective,force3D,transformOrigin,svgOrigin",u=n.style,f,d,p,v,_,y,b,E;i.svg?(p=n.getAttribute("transform"),n.setAttribute("transform",""),u[Ci]=t,f=B0(n,1),Kc(n,Ci),n.setAttribute("transform",p)):(p=getComputedStyle(n)[Ci],u[Ci]=t,f=B0(n,1),u[Ci]=p);for(d in Fu)p=i[d],v=f[d],p!==v&&a.indexOf(d)<0&&(b=es(p),E=es(v),_=b!==E?Qc(n,d,p,E):parseFloat(p),y=parseFloat(v),e._pt=new ea(e._pt,f,d,_,y-_,aE),e._pt.u=E||0,e._props.push(d));u3(f,i)};$s("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",a="Left",u=(e<3?[t,n,i,a]:[t+a,t+n,i+n,i+a]).map(function(f){return e<2?r+f:"border"+f+r});hb[e>1?"border"+r:r]=function(f,d,p,v,_){var y,b;if(arguments.length<4)return y=u.map(function(E){return wu(f,E,p)}),b=y.join(" "),b.split(y[0]).length===5?y[0]:b;y=(v+"").split(" "),b={},u.forEach(function(E,A){return b[E]=y[A]=y[A]||y[(A-1)/2|0]}),f.init(d,b,_)}});var sN={name:"css",register:lE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,a){var u=this._props,f=e.style,d=n.vars.startAt,p,v,_,y,b,E,A,w,M,D,R,N,P,z,B,k,I;IT||lE(),this.styles=this.styles||JL(e),k=this.styles.props,this.tween=n;for(A in t)if(A!=="autoRound"&&(v=t[A],!(da[A]&&VL(A,t,n,i,e,a)))){if(b=typeof v,E=hb[A],b==="function"&&(v=v.call(n,i,e,a),b=typeof v),b==="string"&&~v.indexOf("random(")&&(v=P0(v)),E)E(this,e,A,v,n)&&(B=1);else if(A.substr(0,2)==="--")p=(getComputedStyle(e).getPropertyValue(A)+"").trim(),v+="",Wc.lastIndex=0,Wc.test(p)||(w=es(p),M=es(v),M?w!==M&&(p=Qc(e,A,p,M)+M):w&&(v+=w)),this.add(f,"setProperty",p,v,i,a,0,0,A),u.push(A),k.push(A,0,f[A]);else if(b!=="undefined"){if(d&&A in d?(p=typeof d[A]=="function"?d[A].call(n,i,e,a):d[A],Mr(p)&&~p.indexOf("random(")&&(p=P0(p)),es(p+"")||p==="auto"||(p+=ba.units[A]||es(wu(e,A))||""),(p+"").charAt(1)==="="&&(p=wu(e,A))):p=wu(e,A),y=parseFloat(p),D=b==="string"&&v.charAt(1)==="="&&v.substr(0,2),D&&(v=v.substr(2)),_=parseFloat(v),A in Tl&&(A==="autoAlpha"&&(y===1&&wu(e,"visibility")==="hidden"&&_&&(y=0),k.push("visibility",0,f.visibility),Hc(this,f,"visibility",y?"inherit":"hidden",_?"inherit":"hidden",!_)),A!=="scale"&&A!=="transform"&&(A=Tl[A],~A.indexOf(",")&&(A=A.split(",")[0]))),R=A in Fu,R){if(this.styles.save(A),I=v,b==="string"&&v.substring(0,6)==="var(--"){if(v=_a(e,v.substring(4,v.indexOf(")"))),v.substring(0,5)==="calc("){var O=e.style.perspective;e.style.perspective=v,v=_a(e,"perspective"),O?e.style.perspective=O:Kc(e,"perspective")}_=parseFloat(v)}if(N||(P=e._gsap,P.renderTransform&&!t.parseTransform||B0(e,t.parseTransform),z=t.smoothOrigin!==!1&&P.smooth,N=this._pt=new ea(this._pt,f,Ci,0,1,P.renderTransform,P,0,-1),N.dep=1),A==="scale")this._pt=new ea(this._pt,P,"scaleY",P.scaleY,(D?Tp(P.scaleY,D+_):_)-P.scaleY||0,aE),this._pt.u=0,u.push("scaleY",A),A+="X";else if(A==="transformOrigin"){k.push(ta,0,f[ta]),v=A9(v),P.svg?uE(e,v,0,z,0,this):(M=parseFloat(v.split(" ")[2])||0,M!==P.zOrigin&&Hc(this,P,"zOrigin",P.zOrigin,M),Hc(this,f,A,db(p),db(v)));continue}else if(A==="svgOrigin"){uE(e,v,1,z,0,this);continue}else if(A in nN){D9(this,P,A,y,D?Tp(y,D+v):v);continue}else if(A==="smoothOrigin"){Hc(this,P,"smooth",P.smooth,v);continue}else if(A==="force3D"){P[A]=v;continue}else if(A==="transform"){L9(this,v,e);continue}}else A in f||(A=Wp(A)||A);if(R||(_||_===0)&&(y||y===0)&&!f9.test(v)&&A in f)w=(p+"").substr((y+"").length),_||(_=0),M=es(v)||(A in ba.units?ba.units[A]:w),w!==M&&(y=Qc(e,A,p,M)),this._pt=new ea(this._pt,R?P:f,A,y,(D?Tp(y,D+_):_)-y,!R&&(M==="px"||A==="zIndex")&&t.autoRound!==!1?m9:aE),this._pt.u=M||0,R&&I!==v?(this._pt.b=p,this._pt.e=I,this._pt.r=p9):w!==M&&M!=="%"&&(this._pt.b=p,this._pt.r=d9);else if(A in f)T9.call(this,e,A,p,D?D+v:v);else if(A in e)this.add(e,A,p||e[A],D?D+v:v,i,a);else if(A!=="parseTransform"){ET(A,v);continue}R||(A in f?k.push(A,0,f[A]):typeof e[A]=="function"?k.push(A,2,e[A]()):k.push(A,1,p||e[A])),u.push(A)}}B&&YL(this)},render:function(e,t){if(t.tween._time||!PT())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:wu,aliases:Tl,getSetter:function(e,t,n){var i=Tl[t];return i&&i.indexOf(",")<0&&(t=i),t in Fu&&t!==ta&&(e._gsap.x||wu(e,"x"))?n&&t3===n?t==="scale"?y9:_9:(t3=n||{})&&(t==="scale"?x9:b9):e.style&&!bT(e.style[t])?g9:~t.indexOf("-")?v9:NT(e,t)},core:{_removeProperty:Kc,_getMatrix:zT}};na.utils.checkPrefix=Wp;na.core.getStyleSaver=JL;(function(r,e,t,n){var i=$s(r+","+e+","+t,function(a){Fu[a]=1});$s(e,function(a){ba.units[a]="deg",nN[a]=1}),Tl[i[13]]=r+","+e,$s(n,function(a){var u=a.split(":");Tl[u[1]]=i[u[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");$s("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){ba.units[r]="px"});na.registerPlugin(sN);var cE=na.registerPlugin(sN)||na;cE.core.Tween;class N9 extends se.Component{constructor(){super();Gd(this,"HandleModalUIState",t=>{const n={SHOW_MODAL:{visibility:!0,data:t.actionConfig},HIDE_MODAL:{visibility:!1,data:null}};this.setState(i=>({visibility:n[t.actionType].visibility,modalData:n[t.actionType].data}))});Gd(this,"animateIn",()=>{const t=document.querySelector(".main"),n=document.querySelector(".modal");this.modalDOMNode=n;const i=()=>{cE.to(n,.4,{autoAlpha:1,transform:"translateY(0)",delay:0,ease:$C.easeOut.config(1.7)}),t.removeEventListener("transitionend",i)};this.props.history.action==="PUSH"?t.addEventListener("transitionend",i):i()});Gd(this,"animateOut",t=>{cE.to(this.modalDOMNode,.4,{autoAlpha:0,transform:"translateY(-10%)",onComplete:t,delay:0,ease:$C.easeIn.config(1.7)})});Gd(this,"handleClick",()=>{const t=()=>{let n={actionType:"HIDE_MODAL",actionConfig:{id:this.state.modalData.workItem.id}};u0.fire("toggleModal",n),this.props.history.goBack()};this.animateOut(t)});this.state={visibility:!1,modalData:""},this.modalDOMNode=""}UNSAFE_componentWillMount(){(async()=>{let i={actionType:"SHOW_MODAL",actionConfig:{workItem:await G8.getSingleItem(this.props.match.params.id)}};this.HandleModalUIState(i)})()}componentWillUnmount(){let t={actionType:"HIDE_MODAL",actionConfig:{}};u0.fire("toggleModal",t)}componentDidMount(){let t={actionType:"SHOW_MODAL",actionConfig:{}};u0.fire("toggleModal",t)}render(){if(this.state.visibility){const n=(()=>{let u={};u.workItem=this.state.modalData.workItem,u.imageSrc=u.workItem.images.hidpi?u.workItem.images.hidpi:u.workItem.images.normal,u.workItemTags=[];for(let f=0;f<u.workItem.tags.length;f++)u.workItemTags.push(Qe.jsx("i",{children:u.workItem.tags[f]},[f]));return u.datePublished=new Date(u.workItem.published_at).toDateString(),u})(),i=Qe.jsx(hG,{onClick:this.handleClick,label:"Close"}),a=Qe.jsx(dG,{focus:!0,onClick:this.handleClick,title:"Close Modal",icon:Qe.jsx(Hy,{icon:Gy.close})});return Qe.jsx(fG,{...n,animateInCall:this.animateIn,modalData:this.state.modalData,closeModal:this.handleClick,buttonIcon:a,button:i})}else return null}}const O9=H8(N9),aN=se.createContext(),I9=()=>{const r=se.useContext(aN);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},P9=({children:r})=>{const e=()=>{const u=localStorage.getItem("theme");return u||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[t,n]=se.useState(e);se.useEffect(()=>{const u=window.matchMedia("(prefers-color-scheme: dark)"),f=d=>{localStorage.getItem("theme")||n(d.matches?"dark":"light")};return u.addEventListener?u.addEventListener("change",f):u.addListener(f),()=>{u.removeEventListener?u.removeEventListener("change",f):u.removeListener(f)}},[]),se.useEffect(()=>{document.documentElement.setAttribute("data-theme",t)},[t]);const a={theme:t,toggleTheme:()=>{const u=t==="light"?"dark":"light";n(u),localStorage.setItem("theme",u)},isLight:t==="light",isDark:t==="dark"};return Qe.jsx(aN.Provider,{value:a,children:r})},U9=()=>{const{theme:r,toggleTheme:e}=I9();return Qe.jsx("button",{className:"theme-toggle",onClick:e,"aria-label":`Switch to ${r==="light"?"dark":"light"} mode`,children:r==="light"?Qe.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Qe.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):Qe.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Qe.jsx("circle",{cx:"12",cy:"12",r:"5"}),Qe.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),Qe.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),Qe.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),Qe.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),Qe.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),Qe.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),Qe.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),Qe.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})})};class z9 extends se.Component{constructor(){super();Gd(this,"handleMainClassState",t=>{(()=>{const i={SHOW_MODAL:{class:"main modalVisible"},HIDE_MODAL:{class:"main"}};this.setState(a=>({mainClass:i[t.actionType].class}))})()});this.state={mainClass:"main"},this.mainRef=fE.createRef()}componentDidMount(){u0.addListener("toggleModal",this.handleMainClassState)}componentWillUnmount(){u0.removeListener("toggleModal",this.handleMainClassState)}render(){return Qe.jsx(P9,{children:Qe.jsxs("div",{className:"App",children:[Qe.jsx(U9,{}),Qe.jsx(w3,{location:this.props.location,children:Qe.jsx(mE,{path:"/workItem/:id",element:Qe.jsx(O9,{})})}),Qe.jsxs("main",{ref:this.mainRef,className:this.state.mainClass,children:[Qe.jsxs("section",{className:"left-panel",children:[Qe.jsxs("header",{className:"App-header",children:[Qe.jsx(V8,{}),Qe.jsx("h1",{className:"App-title",children:"Jordan L. Wright"}),Qe.jsxs("p",{className:"App-intro",children:["Digit Alchemist |",Qe.jsx("span",{className:"App-intro-subtitle",children:" Designer & Engineer"})]})]}),Qe.jsxs("nav",{className:"nav",children:[Qe.jsxs("a",{className:"out-bound-link",target:"_blank",rel:"noopener noreferrer",href:"http://www.linkedin.com/in/jordan-l-wright-91b17321",children:[Qe.jsx("span",{children:"LinkedIn"}),Qe.jsx(Hy,{title:"Out-Bound Link",icon:Gy.outboundlink,assistiveText:"Out-Bound Link"})]}),Qe.jsxs("a",{className:"out-bound-link",target:"_blank",rel:"noopener noreferrer",href:CI,children:[Qe.jsx("span",{children:"Resume"}),Qe.jsx(Hy,{title:"Out-Bound Link",icon:Gy.outboundlink,assistiveText:"Out-Bound Link"})]}),Qe.jsxs("a",{className:"out-bound-link",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/interfaceconjurer",children:[Qe.jsx("span",{children:"GitHub"}),Qe.jsx(Hy,{title:"Out-Bound Link",icon:Gy.outboundlink,assistiveText:"Out-Bound Link"})]})]})]}),Qe.jsx("section",{className:"stage",children:Qe.jsx("h2",{children:"Stage"})})]})]})})}}const F9=()=>Qe.jsx(_I,{children:Qe.jsx(w3,{children:Qe.jsx(mE,{path:"*",element:Qe.jsx(z9,{})})})}),B9=document.getElementById("root"),k9=QN.createRoot(B9);k9.render(Qe.jsx(F9,{}));
